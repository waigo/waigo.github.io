!function(e){function t(s){if(n[s])return n[s].exports;var a=n[s]={exports:{},id:s,loaded:!1};return e[s].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),s=e[t[0]];return function(e,t,a){s.apply(this,[e,t,a].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){n(374);return e()}function r(){g.onRouteUpdate&&(0,g.onRouteUpdate)(b)}function o(e,t){var n=t.location.pathname;if(e){var s=e.location.pathname;if(s===n)return!1}return!0}var i=n(2),l=s(i),p=n(31),c=s(p),u=n(164),d=n(227),h=s(d),f=n(237),m=s(f),g=n(520),y=n(521),b=null;u.browserHistory.listen(function(e){b=e,g.onRouteChange&&(console.warn("onRouteChange is now deprecated and will be removed in the next major Gatsby release (0.13). Please use onRouteUpdate instead. See the PR for more info (https://github.com/gatsbyjs/gatsby/pull/321)."),(0,g.onRouteChange)(e))});var w=void 0;a(function(){return y(function(e){var t=n(374),s=t.pages;w?(0,m["default"])(s,e):w=(0,m["default"])(s,e),c["default"].render(l["default"].createElement(u.Router,{history:u.browserHistory,routes:w,render:(0,u.applyRouterMiddleware)((0,h["default"])(o)),onUpdate:r}),"undefined"!=typeof window?document.getElementById("react-mount"):void 0)})})},function(e,t,n){"use strict";e.exports=n(3)},function(e,t,n){"use strict";var s=n(4),a=n(5),r=n(17),o=n(20),i=n(21),l=n(26),p=n(9),c=n(27),u=n(29),d=n(30),h=(n(11),p.createElement),f=p.createFactory,m=p.cloneElement,g=s,y={Children:{map:a.map,forEach:a.forEach,count:a.count,toArray:a.toArray,only:d},Component:r,PureComponent:o,createElement:h,cloneElement:m,isValidElement:p.isValidElement,PropTypes:c,createClass:i.createClass,createFactory:f,createMixin:function(e){return e},DOM:l,version:u,__spread:g};e.exports=y},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function s(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var s=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==s.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(r){return!1}}var a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=s()?Object.assign:function(e,t){for(var s,o,i=n(e),l=1;l<arguments.length;l++){s=Object(arguments[l]);for(var p in s)a.call(s,p)&&(i[p]=s[p]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(s);for(var c=0;c<o.length;c++)r.call(s,o[c])&&(i[o[c]]=s[o[c]])}}return i}},function(e,t,n){"use strict";function s(e){return(""+e).replace(v,"$&/")}function a(e,t){this.func=e,this.context=t,this.count=0}function r(e,t,n){var s=e.func,a=e.context;s.call(a,t,e.count++)}function o(e,t,n){if(null==e)return e;var s=a.getPooled(t,n);y(e,r,s),a.release(s)}function i(e,t,n,s){this.result=e,this.keyPrefix=t,this.func=n,this.context=s,this.count=0}function l(e,t,n){var a=e.result,r=e.keyPrefix,o=e.func,i=e.context,l=o.call(i,t,e.count++);Array.isArray(l)?p(l,a,n,g.thatReturnsArgument):null!=l&&(m.isValidElement(l)&&(l=m.cloneAndReplaceKey(l,r+(!l.key||t&&t.key===l.key?"":s(l.key)+"/")+n)),a.push(l))}function p(e,t,n,a,r){var o="";null!=n&&(o=s(n)+"/");var p=i.getPooled(t,o,a,r);y(e,l,p),i.release(p)}function c(e,t,n){if(null==e)return e;var s=[];return p(e,s,null,t,n),s}function u(e,t,n){return null}function d(e,t){return y(e,u,null)}function h(e){var t=[];return p(e,t,null,g.thatReturnsArgument),t}var f=n(6),m=n(9),g=n(12),y=n(14),b=f.twoArgumentPooler,w=f.fourArgumentPooler,v=/\/+/g;a.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},f.addPoolingTo(a,b),i.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},f.addPoolingTo(i,w);var j={forEach:o,map:c,mapIntoWithKeyPrefixInternal:p,count:d,toArray:h};e.exports=j},function(e,t,n){"use strict";var s=n(7),a=(n(8),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),r=function(e,t){var n=this;if(n.instancePool.length){var s=n.instancePool.pop();return n.call(s,e,t),s}return new n(e,t)},o=function(e,t,n){var s=this;if(s.instancePool.length){var a=s.instancePool.pop();return s.call(a,e,t,n),a}return new s(e,t,n)},i=function(e,t,n,s){var a=this;if(a.instancePool.length){var r=a.instancePool.pop();return a.call(r,e,t,n,s),r}return new a(e,t,n,s)},l=function(e,t,n,s,a){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n,s,a),o}return new r(e,t,n,s,a)},p=function(e){var t=this;e instanceof t?void 0:s("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=10,u=a,d=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||u,n.poolSize||(n.poolSize=c),n.release=p,n},h={addPoolingTo:d,oneArgumentPooler:a,twoArgumentPooler:r,threeArgumentPooler:o,fourArgumentPooler:i,fiveArgumentPooler:l};e.exports=h},function(e,t){"use strict";function n(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,s=0;s<t;s++)n+="&args[]="+encodeURIComponent(arguments[s+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var a=new Error(n);throw a.name="Invariant Violation",a.framesToPop=1,a}e.exports=n},function(e,t,n){"use strict";function s(e,t,n,s,a,r,o,i){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[n,s,a,r,o,i],c=0;l=new Error(t.replace(/%s/g,function(){return p[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}e.exports=s},function(e,t,n){"use strict";function s(e){return void 0!==e.ref}function a(e){return void 0!==e.key}var r=n(4),o=n(10),i=(n(11),n(13),Object.prototype.hasOwnProperty),l="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,p={key:!0,ref:!0,__self:!0,__source:!0},c=function(e,t,n,s,a,r,o){var i={$$typeof:l,type:e,key:t,ref:n,props:o,_owner:r};return i};c.createElement=function(e,t,n){var r,l={},u=null,d=null,h=null,f=null;if(null!=t){s(t)&&(d=t.ref),a(t)&&(u=""+t.key),h=void 0===t.__self?null:t.__self,f=void 0===t.__source?null:t.__source;for(r in t)i.call(t,r)&&!p.hasOwnProperty(r)&&(l[r]=t[r])}var m=arguments.length-2;if(1===m)l.children=n;else if(m>1){for(var g=Array(m),y=0;y<m;y++)g[y]=arguments[y+2];l.children=g}if(e&&e.defaultProps){var b=e.defaultProps;for(r in b)void 0===l[r]&&(l[r]=b[r])}return c(e,u,d,h,f,o.current,l)},c.createFactory=function(e){var t=c.createElement.bind(null,e);return t.type=e,t},c.cloneAndReplaceKey=function(e,t){var n=c(e.type,t,e.ref,e._self,e._source,e._owner,e.props);return n},c.cloneElement=function(e,t,n){var l,u=r({},e.props),d=e.key,h=e.ref,f=e._self,m=e._source,g=e._owner;if(null!=t){s(t)&&(h=t.ref,g=o.current),a(t)&&(d=""+t.key);var y;e.type&&e.type.defaultProps&&(y=e.type.defaultProps);for(l in t)i.call(t,l)&&!p.hasOwnProperty(l)&&(void 0===t[l]&&void 0!==y?u[l]=y[l]:u[l]=t[l])}var b=arguments.length-2;if(1===b)u.children=n;else if(b>1){for(var w=Array(b),v=0;v<b;v++)w[v]=arguments[v+2];u.children=w}return c(e.type,d,h,f,m,g,u)},c.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===l},c.REACT_ELEMENT_TYPE=l,e.exports=c},function(e,t){"use strict";var n={current:null};e.exports=n},function(e,t,n){"use strict";var s=n(12),a=s;e.exports=a},function(e,t){"use strict";function n(e){return function(){return e}}var s=function(){};s.thatReturns=n,s.thatReturnsFalse=n(!1),s.thatReturnsTrue=n(!0),s.thatReturnsNull=n(null),s.thatReturnsThis=function(){return this},s.thatReturnsArgument=function(e){return e},e.exports=s},function(e,t,n){"use strict";var s=!1;e.exports=s},function(e,t,n){"use strict";function s(e,t){return e&&"object"==typeof e&&null!=e.key?p.escape(e.key):t.toString(36)}function a(e,t,n,r){var d=typeof e;if("undefined"!==d&&"boolean"!==d||(e=null),null===e||"string"===d||"number"===d||i.isValidElement(e))return n(r,e,""===t?c+s(e,0):t),1;var h,f,m=0,g=""===t?c:t+u;if(Array.isArray(e))for(var y=0;y<e.length;y++)h=e[y],f=g+s(h,y),m+=a(h,f,n,r);else{var b=l(e);if(b){var w,v=b.call(e);if(b!==e.entries)for(var j=0;!(w=v.next()).done;)h=w.value,f=g+s(h,j++),m+=a(h,f,n,r);else for(;!(w=v.next()).done;){var x=w.value;x&&(h=x[1],f=g+p.escape(x[0])+u+s(h,0),m+=a(h,f,n,r))}}else if("object"===d){var _="",k=String(e);o("31","[object Object]"===k?"object with keys {"+Object.keys(e).join(", ")+"}":k,_)}}return m}function r(e,t,n){return null==e?0:a(e,"",t,n)}var o=n(7),i=(n(10),n(9)),l=n(15),p=(n(8),n(16)),c=(n(11),"."),u=":";e.exports=r},function(e,t){"use strict";function n(e){var t=e&&(s&&e[s]||e[a]);if("function"==typeof t)return t}var s="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";e.exports=n},function(e,t){"use strict";function n(e){var t=/[=:]/g,n={"=":"=0",":":"=2"},s=(""+e).replace(t,function(e){return n[e]});return"$"+s}function s(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"},s="."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1);return(""+s).replace(t,function(e){return n[e]})}var a={escape:n,unescape:s};e.exports=a},function(e,t,n){"use strict";function s(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||r}var a=n(7),r=n(18),o=(n(13),n(19));n(8),n(11);s.prototype.isReactComponent={},s.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e?a("85"):void 0,this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")};e.exports=s},function(e,t,n){"use strict";function s(e,t){}var a=(n(11),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){s(e,"forceUpdate")},enqueueReplaceState:function(e,t){s(e,"replaceState")},enqueueSetState:function(e,t){s(e,"setState")}});e.exports=a},function(e,t,n){"use strict";var s={};e.exports=s},function(e,t,n){"use strict";function s(e,t,n){this.props=e,this.context=t,this.refs=l,this.updater=n||i}function a(){}var r=n(4),o=n(17),i=n(18),l=n(19);a.prototype=o.prototype,s.prototype=new a,s.prototype.constructor=s,r(s.prototype,o.prototype),s.prototype.isPureReactComponent=!0,e.exports=s},function(e,t,n){"use strict";function s(e,t){var n=x.hasOwnProperty(t)?x[t]:null;k.hasOwnProperty(t)&&(n!==v.OVERRIDE_BASE?u("73",t):void 0),e&&(n!==v.DEFINE_MANY&&n!==v.DEFINE_MANY_MERGED?u("74",t):void 0)}function a(e,t){if(t){"function"==typeof t?u("75"):void 0,f.isValidElement(t)?u("76"):void 0;var n=e.prototype,a=n.__reactAutoBindPairs;t.hasOwnProperty(w)&&_.mixins(e,t.mixins);for(var r in t)if(t.hasOwnProperty(r)&&r!==w){var o=t[r],p=n.hasOwnProperty(r);if(s(p,r),_.hasOwnProperty(r))_[r](e,o);else{var c=x.hasOwnProperty(r),d="function"==typeof o,h=d&&!c&&!p&&t.autobind!==!1;if(h)a.push(r,o),n[r]=o;else if(p){var m=x[r];!c||m!==v.DEFINE_MANY_MERGED&&m!==v.DEFINE_MANY?u("77",m,r):void 0,m===v.DEFINE_MANY_MERGED?n[r]=i(n[r],o):m===v.DEFINE_MANY&&(n[r]=l(n[r],o))}else n[r]=o}}}else;}function r(e,t){if(t)for(var n in t){var s=t[n];if(t.hasOwnProperty(n)){var a=n in _;a?u("78",n):void 0;var r=n in e;r?u("79",n):void 0,e[n]=s}}}function o(e,t){e&&t&&"object"==typeof e&&"object"==typeof t?void 0:u("80");for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]?u("81",n):void 0,e[n]=t[n]);return e}function i(e,t){return function(){var n=e.apply(this,arguments),s=t.apply(this,arguments);if(null==n)return s;if(null==s)return n;var a={};return o(a,n),o(a,s),a}}function l(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function p(e,t){var n=t.bind(e);return n}function c(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[s]=p(e,a)}}var u=n(7),d=n(4),h=n(17),f=n(9),m=(n(22),n(24),n(18)),g=n(19),y=(n(8),n(23)),b=n(25),w=(n(11),b({mixins:null})),v=y({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),j=[],x={mixins:v.DEFINE_MANY,statics:v.DEFINE_MANY,propTypes:v.DEFINE_MANY,contextTypes:v.DEFINE_MANY,childContextTypes:v.DEFINE_MANY,getDefaultProps:v.DEFINE_MANY_MERGED,getInitialState:v.DEFINE_MANY_MERGED,getChildContext:v.DEFINE_MANY_MERGED,render:v.DEFINE_ONCE,componentWillMount:v.DEFINE_MANY,componentDidMount:v.DEFINE_MANY,componentWillReceiveProps:v.DEFINE_MANY,shouldComponentUpdate:v.DEFINE_ONCE,componentWillUpdate:v.DEFINE_MANY,componentDidUpdate:v.DEFINE_MANY,componentWillUnmount:v.DEFINE_MANY,updateComponent:v.OVERRIDE_BASE},_={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)a(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=d({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=d({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=i(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=d({},e.propTypes,t)},statics:function(e,t){r(e,t)},autobind:function(){}},k={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},E=function(){};d(E.prototype,h.prototype,k);var A={createClass:function(e){var t=function(e,n,s){this.__reactAutoBindPairs.length&&c(this),this.props=e,this.context=n,this.refs=g,this.updater=s||m,this.state=null;var a=this.getInitialState?this.getInitialState():null;"object"!=typeof a||Array.isArray(a)?u("82",t.displayName||"ReactCompositeComponent"):void 0,this.state=a};t.prototype=new E,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],j.forEach(a.bind(null,t)),a(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render?void 0:u("83");for(var n in x)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){j.push(e)}}};e.exports=A},function(e,t,n){"use strict";var s=n(23),a=s({prop:null,context:null,childContext:null});e.exports=a},function(e,t,n){"use strict";var s=n(8),a=function(e){var t,n={};e instanceof Object&&!Array.isArray(e)?void 0:s(!1);for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};e.exports=a},function(e,t,n){"use strict";var s={};e.exports=s},function(e,t){"use strict";var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=n},function(e,t,n){"use strict";var s=n(9),a=s.createFactory,r={a:a("a"),abbr:a("abbr"),address:a("address"),area:a("area"),article:a("article"),aside:a("aside"),audio:a("audio"),b:a("b"),base:a("base"),bdi:a("bdi"),bdo:a("bdo"),big:a("big"),blockquote:a("blockquote"),body:a("body"),br:a("br"),button:a("button"),canvas:a("canvas"),caption:a("caption"),cite:a("cite"),code:a("code"),col:a("col"),colgroup:a("colgroup"),data:a("data"),datalist:a("datalist"),dd:a("dd"),del:a("del"),details:a("details"),dfn:a("dfn"),dialog:a("dialog"),div:a("div"),dl:a("dl"),dt:a("dt"),em:a("em"),embed:a("embed"),fieldset:a("fieldset"),figcaption:a("figcaption"),figure:a("figure"),footer:a("footer"),form:a("form"),h1:a("h1"),h2:a("h2"),h3:a("h3"),h4:a("h4"),h5:a("h5"),h6:a("h6"),head:a("head"),header:a("header"),hgroup:a("hgroup"),hr:a("hr"),html:a("html"),i:a("i"),iframe:a("iframe"),img:a("img"),input:a("input"),ins:a("ins"),kbd:a("kbd"),keygen:a("keygen"),label:a("label"),legend:a("legend"),li:a("li"),link:a("link"),main:a("main"),map:a("map"),mark:a("mark"),menu:a("menu"),menuitem:a("menuitem"),meta:a("meta"),meter:a("meter"),nav:a("nav"),noscript:a("noscript"),object:a("object"),ol:a("ol"),optgroup:a("optgroup"),option:a("option"),output:a("output"),p:a("p"),param:a("param"),picture:a("picture"),pre:a("pre"),progress:a("progress"),q:a("q"),rp:a("rp"),rt:a("rt"),ruby:a("ruby"),s:a("s"),samp:a("samp"),script:a("script"),section:a("section"),select:a("select"),small:a("small"),source:a("source"),span:a("span"),strong:a("strong"),style:a("style"),sub:a("sub"),summary:a("summary"),sup:a("sup"),table:a("table"),tbody:a("tbody"),td:a("td"),textarea:a("textarea"),tfoot:a("tfoot"),th:a("th"),thead:a("thead"),time:a("time"),title:a("title"),tr:a("tr"),track:a("track"),u:a("u"),ul:a("ul"),"var":a("var"),video:a("video"),wbr:a("wbr"),circle:a("circle"),clipPath:a("clipPath"),defs:a("defs"),ellipse:a("ellipse"),g:a("g"),image:a("image"),line:a("line"),linearGradient:a("linearGradient"),mask:a("mask"),path:a("path"),pattern:a("pattern"),polygon:a("polygon"),polyline:a("polyline"),radialGradient:a("radialGradient"),rect:a("rect"),stop:a("stop"),svg:a("svg"),text:a("text"),tspan:a("tspan")};e.exports=r},function(e,t,n){"use strict";function s(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function a(e){this.message=e,this.stack=""}function r(e){function t(t,n,s,r,o,i,l){r=r||A,i=i||s;if(null==n[s]){var p=x[o];return t?new a("Required "+p+" `"+i+"` was not specified in "+("`"+r+"`.")):null}return e(n,s,r,o,i)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function o(e){function t(t,n,s,r,o,i){var l=t[n],p=b(l);if(p!==e){var c=x[r],u=w(l);return new a("Invalid "+c+" `"+o+"` of type "+("`"+u+"` supplied to `"+s+"`, expected ")+("`"+e+"`."))}return null}return r(t)}function i(){return r(k.thatReturns(null))}function l(e){function t(t,n,s,r,o){if("function"!=typeof e)return new a("Property `"+o+"` of component `"+s+"` has invalid PropType notation inside arrayOf.");var i=t[n];if(!Array.isArray(i)){var l=x[r],p=b(i);return new a("Invalid "+l+" `"+o+"` of type "+("`"+p+"` supplied to `"+s+"`, expected an array."))}for(var c=0;c<i.length;c++){var u=e(i,c,s,r,o+"["+c+"]",_);if(u instanceof Error)return u}return null}return r(t)}function p(){function e(e,t,n,s,r){var o=e[t];if(!j.isValidElement(o)){var i=x[s],l=b(o);return new a("Invalid "+i+" `"+r+"` of type "+("`"+l+"` supplied to `"+n+"`, expected a single ReactElement."))}return null}return r(e)}function c(e){function t(t,n,s,r,o){if(!(t[n]instanceof e)){var i=x[r],l=e.name||A,p=v(t[n]);return new a("Invalid "+i+" `"+o+"` of type "+("`"+p+"` supplied to `"+s+"`, expected ")+("instance of `"+l+"`."))}return null}return r(t)}function u(e){function t(t,n,r,o,i){for(var l=t[n],p=0;p<e.length;p++)if(s(l,e[p]))return null;var c=x[o],u=JSON.stringify(e);return new a("Invalid "+c+" `"+i+"` of value `"+l+"` "+("supplied to `"+r+"`, expected one of "+u+"."))}return Array.isArray(e)?r(t):k.thatReturnsNull}function d(e){function t(t,n,s,r,o){if("function"!=typeof e)return new a("Property `"+o+"` of component `"+s+"` has invalid PropType notation inside objectOf.");var i=t[n],l=b(i);if("object"!==l){var p=x[r];return new a("Invalid "+p+" `"+o+"` of type "+("`"+l+"` supplied to `"+s+"`, expected an object."))}for(var c in i)if(i.hasOwnProperty(c)){var u=e(i,c,s,r,o+"."+c,_);if(u instanceof Error)return u}return null}return r(t)}function h(e){function t(t,n,s,r,o){for(var i=0;i<e.length;i++){var l=e[i];if(null==l(t,n,s,r,o,_))return null}var p=x[r];return new a("Invalid "+p+" `"+o+"` supplied to "+("`"+s+"`."))}return Array.isArray(e)?r(t):k.thatReturnsNull}function f(){function e(e,t,n,s,r){if(!g(e[t])){var o=x[s];return new a("Invalid "+o+" `"+r+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(e)}function m(e){function t(t,n,s,r,o){var i=t[n],l=b(i);if("object"!==l){var p=x[r];return new a("Invalid "+p+" `"+o+"` of type `"+l+"` "+("supplied to `"+s+"`, expected `object`."))}for(var c in e){var u=e[c];if(u){var d=u(i,c,s,r,o+"."+c,_);if(d)return d}}return null}return r(t)}function g(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(g);if(null===e||j.isValidElement(e))return!0;var t=E(e);if(!t)return!1;var n,s=t.call(e);if(t!==e.entries){for(;!(n=s.next()).done;)if(!g(n.value))return!1}else for(;!(n=s.next()).done;){var a=n.value;if(a&&!g(a[1]))return!1}return!0;default:return!1}}function y(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function b(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":y(t,e)?"symbol":t}function w(e){var t=b(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function v(e){return e.constructor&&e.constructor.name?e.constructor.name:A}var j=n(9),x=n(24),_=n(28),k=n(12),E=n(15),A=(n(11),"<<anonymous>>"),T={array:o("array"),bool:o("boolean"),func:o("function"),number:o("number"),object:o("object"),string:o("string"),symbol:o("symbol"),any:i(),arrayOf:l,element:p(),instanceOf:c,node:f(),objectOf:d,oneOf:u,oneOfType:h,shape:m};a.prototype=Error.prototype,e.exports=T},function(e,t){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t){"use strict";e.exports="15.3.2"},function(e,t,n){"use strict";function s(e){return r.isValidElement(e)?void 0:a("143"),e}var a=n(7),r=n(9);n(8);e.exports=s},function(e,t,n){"use strict";e.exports=n(32)},function(e,t,n){"use strict";var s=n(33),a=n(36),r=n(156),o=n(56),i=n(53),l=n(29),p=n(161),c=n(162),u=n(163);n(11);a.inject();var d={findDOMNode:p,render:r.render,unmountComponentAtNode:r.unmountComponentAtNode,version:l,unstable_batchedUpdates:i.batchedUpdates,unstable_renderSubtreeIntoContainer:u};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:s.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=c(e)),e?s.getNodeFromInstance(e):null}},Mount:r,Reconciler:o});e.exports=d},function(e,t,n){"use strict";function s(e){for(var t;t=e._renderedComponent;)e=t;return e}function a(e,t){var n=s(e);n._hostNode=t,t[m]=n}function r(e){var t=e._hostNode;t&&(delete t[m],e._hostNode=null)}function o(e,t){if(!(e._flags&f.hasCachedChildNodes)){var n=e._renderedChildren,r=t.firstChild;e:for(var o in n)if(n.hasOwnProperty(o)){var i=n[o],l=s(i)._domID;if(0!==l){for(;null!==r;r=r.nextSibling)if(1===r.nodeType&&r.getAttribute(h)===String(l)||8===r.nodeType&&r.nodeValue===" react-text: "+l+" "||8===r.nodeType&&r.nodeValue===" react-empty: "+l+" "){a(i,r);continue e}c("32",l)}}e._flags|=f.hasCachedChildNodes}}function i(e){if(e[m])return e[m];for(var t=[];!e[m];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,s;e&&(s=e[m]);e=t.pop())n=s,t.length&&o(s,e);return n}function l(e){var t=i(e);return null!=t&&t._hostNode===e?t:null}function p(e){if(void 0===e._hostNode?c("33"):void 0,e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent?void 0:c("34"),e=e._hostParent;for(;t.length;e=t.pop())o(e,e._hostNode);return e._hostNode}var c=n(7),u=n(34),d=n(35),h=(n(8),u.ID_ATTRIBUTE_NAME),f=d,m="__reactInternalInstance$"+Math.random().toString(36).slice(2),g={getClosestInstanceFromNode:i,getInstanceFromNode:l,getNodeFromInstance:p,precacheChildNodes:o,precacheNode:a,uncacheNode:r};e.exports=g},function(e,t,n){"use strict";function s(e,t){return(e&t)===t}var a=n(7),r=(n(8),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=r,n=e.Properties||{},o=e.DOMAttributeNamespaces||{},l=e.DOMAttributeNames||{},p=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&i._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var u in n){i.properties.hasOwnProperty(u)?a("48",u):void 0;var d=u.toLowerCase(),h=n[u],f={attributeName:d,attributeNamespace:null,propertyName:u,mutationMethod:null,mustUseProperty:s(h,t.MUST_USE_PROPERTY),hasBooleanValue:s(h,t.HAS_BOOLEAN_VALUE),hasNumericValue:s(h,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:s(h,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:s(h,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(f.hasBooleanValue+f.hasNumericValue+f.hasOverloadedBooleanValue<=1?void 0:a("50",u),l.hasOwnProperty(u)){var m=l[u];f.attributeName=m}o.hasOwnProperty(u)&&(f.attributeNamespace=o[u]),p.hasOwnProperty(u)&&(f.propertyName=p[u]),c.hasOwnProperty(u)&&(f.mutationMethod=c[u]),i.properties[u]=f}}}),o=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",i={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:o,ATTRIBUTE_NAME_CHAR:o+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<i._isCustomAttributeFunctions.length;t++){var n=i._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},injection:r};e.exports=i},function(e,t){"use strict";var n={hasCachedChildNodes:1};e.exports=n},function(e,t,n){"use strict";function s(){x||(x=!0,y.EventEmitter.injectReactEventListener(g),y.EventPluginHub.injectEventPluginOrder(o),y.EventPluginUtils.injectComponentTree(u),y.EventPluginUtils.injectTreeTraversal(h),y.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:j,EnterLeaveEventPlugin:i,ChangeEventPlugin:r,SelectEventPlugin:v,BeforeInputEventPlugin:a}),y.HostComponent.injectGenericComponentClass(c),y.HostComponent.injectTextComponentClass(f),y.DOMProperty.injectDOMPropertyConfig(l),y.DOMProperty.injectDOMPropertyConfig(w),y.EmptyComponent.injectEmptyComponentFactory(function(e){return new d(e)}),y.Updates.injectReconcileTransaction(b),y.Updates.injectBatchingStrategy(m),y.Component.injectEnvironment(p))}var a=n(37),r=n(52),o=n(64),i=n(65),l=n(70),p=n(71),c=n(85),u=n(33),d=n(127),h=n(128),f=n(129),m=n(130),g=n(131),y=n(134),b=n(135),w=n(143),v=n(144),j=n(145),x=!1;e.exports={inject:s}},function(e,t,n){"use strict";function s(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function a(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function r(e){switch(e){case S.topCompositionStart:return C.compositionStart;case S.topCompositionEnd:return C.compositionEnd;case S.topCompositionUpdate:return C.compositionUpdate}}function o(e,t){return e===S.topKeyDown&&t.keyCode===j}function i(e,t){switch(e){case S.topKeyUp:return v.indexOf(t.keyCode)!==-1;case S.topKeyDown:return t.keyCode!==j;case S.topKeyPress:case S.topMouseDown:case S.topBlur:return!0;default:return!1}}function l(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function p(e,t,n,s){var a,p;if(x?a=r(e):O?i(e,n)&&(a=C.compositionEnd):o(e,n)&&(a=C.compositionStart),!a)return null;E&&(O||a!==C.compositionStart?a===C.compositionEnd&&O&&(p=O.getData()):O=g.getPooled(s));var c=y.getPooled(a,t,n,s);if(p)c.data=p;else{var u=l(n);null!==u&&(c.data=u)}return f.accumulateTwoPhaseDispatches(c),c}function c(e,t){switch(e){case S.topCompositionEnd:return l(t);case S.topKeyPress:var n=t.which;return n!==A?null:(P=!0,T);case S.topTextInput:var s=t.data;return s===T&&P?null:s;default:return null}}function u(e,t){if(O){if(e===S.topCompositionEnd||!x&&i(e,t)){var n=O.getData();return g.release(O),O=null,n}return null}switch(e){case S.topPaste:return null;case S.topKeyPress:return t.which&&!a(t)?String.fromCharCode(t.which):null;case S.topCompositionEnd:return E?null:t.data;default:return null}}function d(e,t,n,s){var a;if(a=k?c(e,n):u(e,n),!a)return null;var r=b.getPooled(C.beforeInput,t,n,s);return r.data=a,f.accumulateTwoPhaseDispatches(r),r}var h=n(38),f=n(39),m=n(46),g=n(47),y=n(49),b=n(51),w=n(25),v=[9,13,27,32],j=229,x=m.canUseDOM&&"CompositionEvent"in window,_=null;m.canUseDOM&&"documentMode"in document&&(_=document.documentMode);var k=m.canUseDOM&&"TextEvent"in window&&!_&&!s(),E=m.canUseDOM&&(!x||_&&_>8&&_<=11),A=32,T=String.fromCharCode(A),S=h.topLevelTypes,C={beforeInput:{phasedRegistrationNames:{bubbled:w({onBeforeInput:null}),captured:w({onBeforeInputCapture:null})},dependencies:[S.topCompositionEnd,S.topKeyPress,S.topTextInput,S.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:w({onCompositionEnd:null}),captured:w({onCompositionEndCapture:null})},dependencies:[S.topBlur,S.topCompositionEnd,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:w({onCompositionStart:null}),captured:w({onCompositionStartCapture:null})},dependencies:[S.topBlur,S.topCompositionStart,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:w({onCompositionUpdate:null}),captured:w({onCompositionUpdateCapture:null})},dependencies:[S.topBlur,S.topCompositionUpdate,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]}},P=!1,O=null,R={eventTypes:C,extractEvents:function(e,t,n,s){return[p(e,t,n,s),d(e,t,n,s)]}};e.exports=R},function(e,t,n){"use strict";var s=n(23),a=s({bubbled:null,captured:null}),r=s({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),o={topLevelTypes:r,PropagationPhases:a};e.exports=o},function(e,t,n){"use strict";function s(e,t,n){var s=t.dispatchConfig.phasedRegistrationNames[n];return w(e,s)}function a(e,t,n){var a=t?b.bubbled:b.captured,r=s(e,n,a);r&&(n._dispatchListeners=g(n._dispatchListeners,r),n._dispatchInstances=g(n._dispatchInstances,e))}function r(e){e&&e.dispatchConfig.phasedRegistrationNames&&m.traverseTwoPhase(e._targetInst,a,e)}function o(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?m.getParentInstance(t):null;m.traverseTwoPhase(n,a,e)}}function i(e,t,n){if(n&&n.dispatchConfig.registrationName){var s=n.dispatchConfig.registrationName,a=w(e,s);a&&(n._dispatchListeners=g(n._dispatchListeners,a),n._dispatchInstances=g(n._dispatchInstances,e))}}function l(e){e&&e.dispatchConfig.registrationName&&i(e._targetInst,null,e)}function p(e){y(e,r)}function c(e){y(e,o)}function u(e,t,n,s){m.traverseEnterLeave(n,s,i,e,t)}function d(e){y(e,l)}var h=n(38),f=n(40),m=n(42),g=n(44),y=n(45),b=(n(11),h.PropagationPhases),w=f.getListener,v={accumulateTwoPhaseDispatches:p,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:d,accumulateEnterLeaveDispatches:u};e.exports=v},function(e,t,n){"use strict";var s=n(7),a=n(41),r=n(42),o=n(43),i=n(44),l=n(45),p=(n(8),{}),c=null,u=function(e,t){e&&(r.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},d=function(e){return u(e,!0)},h=function(e){return u(e,!1);
},f=function(e){return"."+e._rootNodeID},m={injection:{injectEventPluginOrder:a.injectEventPluginOrder,injectEventPluginsByName:a.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n?s("94",t,typeof n):void 0;var r=f(e),o=p[t]||(p[t]={});o[r]=n;var i=a.registrationNameModules[t];i&&i.didPutListener&&i.didPutListener(e,t,n)},getListener:function(e,t){var n=p[t],s=f(e);return n&&n[s]},deleteListener:function(e,t){var n=a.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var s=p[t];if(s){var r=f(e);delete s[r]}},deleteAllListeners:function(e){var t=f(e);for(var n in p)if(p.hasOwnProperty(n)&&p[n][t]){var s=a.registrationNameModules[n];s&&s.willDeleteListener&&s.willDeleteListener(e,n),delete p[n][t]}},extractEvents:function(e,t,n,s){for(var r,o=a.plugins,l=0;l<o.length;l++){var p=o[l];if(p){var c=p.extractEvents(e,t,n,s);c&&(r=i(r,c))}}return r},enqueueEvents:function(e){e&&(c=i(c,e))},processEventQueue:function(e){var t=c;c=null,e?l(t,d):l(t,h),c?s("95"):void 0,o.rethrowCaughtError()},__purge:function(){p={}},__getListenerBank:function(){return p}};e.exports=m},function(e,t,n){"use strict";function s(){if(i)for(var e in l){var t=l[e],n=i.indexOf(e);if(n>-1?void 0:o("96",e),!p.plugins[n]){t.extractEvents?void 0:o("97",e),p.plugins[n]=t;var s=t.eventTypes;for(var r in s)a(s[r],t,r)?void 0:o("98",r,e)}}}function a(e,t,n){p.eventNameDispatchConfigs.hasOwnProperty(n)?o("99",n):void 0,p.eventNameDispatchConfigs[n]=e;var s=e.phasedRegistrationNames;if(s){for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];r(i,t,n)}return!0}return!!e.registrationName&&(r(e.registrationName,t,n),!0)}function r(e,t,n){p.registrationNameModules[e]?o("100",e):void 0,p.registrationNameModules[e]=t,p.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var o=n(7),i=(n(8),null),l={},p={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){i?o("101"):void 0,i=Array.prototype.slice.call(e),s()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];l.hasOwnProperty(n)&&l[n]===a||(l[n]?o("102",n):void 0,l[n]=a,t=!0)}t&&s()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return p.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var s=p.registrationNameModules[t.phasedRegistrationNames[n]];if(s)return s}return null},_resetEventPlugins:function(){i=null;for(var e in l)l.hasOwnProperty(e)&&delete l[e];p.plugins.length=0;var t=p.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var s=p.registrationNameModules;for(var a in s)s.hasOwnProperty(a)&&delete s[a]}};e.exports=p},function(e,t,n){"use strict";function s(e){return e===b.topMouseUp||e===b.topTouchEnd||e===b.topTouchCancel}function a(e){return e===b.topMouseMove||e===b.topTouchMove}function r(e){return e===b.topMouseDown||e===b.topTouchStart}function o(e,t,n,s){var a=e.type||"unknown-event";e.currentTarget=w.getNodeFromInstance(s),t?g.invokeGuardedCallbackWithCatch(a,n,e):g.invokeGuardedCallback(a,n,e),e.currentTarget=null}function i(e,t){var n=e._dispatchListeners,s=e._dispatchInstances;if(Array.isArray(n))for(var a=0;a<n.length&&!e.isPropagationStopped();a++)o(e,t,n[a],s[a]);else n&&o(e,t,n,s);e._dispatchListeners=null,e._dispatchInstances=null}function l(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var s=0;s<t.length&&!e.isPropagationStopped();s++)if(t[s](e,n[s]))return n[s]}else if(t&&t(e,n))return n;return null}function p(e){var t=l(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function c(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)?f("103"):void 0,e.currentTarget=t?w.getNodeFromInstance(n):null;var s=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,s}function u(e){return!!e._dispatchListeners}var d,h,f=n(7),m=n(38),g=n(43),y=(n(8),n(11),{injectComponentTree:function(e){d=e},injectTreeTraversal:function(e){h=e}}),b=m.topLevelTypes,w={isEndish:s,isMoveish:a,isStartish:r,executeDirectDispatch:c,executeDispatchesInOrder:i,executeDispatchesInOrderStopAtTrue:p,hasDispatches:u,getInstanceFromNode:function(e){return d.getInstanceFromNode(e)},getNodeFromInstance:function(e){return d.getNodeFromInstance(e)},isAncestor:function(e,t){return h.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return h.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return h.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return h.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,s,a){return h.traverseEnterLeave(e,t,n,s,a)},injection:y};e.exports=w},function(e,t,n){"use strict";function s(e,t,n,s){try{return t(n,s)}catch(r){return void(null===a&&(a=r))}}var a=null,r={invokeGuardedCallback:s,invokeGuardedCallbackWithCatch:s,rethrowCaughtError:function(){if(a){var e=a;throw a=null,e}}};e.exports=r},function(e,t,n){"use strict";function s(e,t){return null==t?a("30"):void 0,null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}var a=n(7);n(8);e.exports=s},function(e,t){"use strict";function n(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}e.exports=n},function(e,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),s={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=s},function(e,t,n){"use strict";function s(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var a=n(4),r=n(6),o=n(48);a(s.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[o()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,s=n.length,a=this.getText(),r=a.length;for(e=0;e<s&&n[e]===a[e];e++);var o=s-e;for(t=1;t<=o&&n[s-t]===a[r-t];t++);var i=t>1?1-t:void 0;return this._fallbackText=a.slice(e,i),this._fallbackText}}),r.addPoolingTo(s),e.exports=s},function(e,t,n){"use strict";function s(){return!r&&a.canUseDOM&&(r="textContent"in document.documentElement?"textContent":"innerText"),r}var a=n(46),r=null;e.exports=s},function(e,t,n){"use strict";function s(e,t,n,s){return a.call(this,e,t,n,s)}var a=n(50),r={data:null};a.augmentClass(s,r),e.exports=s},function(e,t,n){"use strict";function s(e,t,n,s){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var a=this.constructor.Interface;for(var r in a)if(a.hasOwnProperty(r)){var i=a[r];i?this[r]=i(n):"target"===r?this.target=s:this[r]=n[r]}var l=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return l?this.isDefaultPrevented=o.thatReturnsTrue:this.isDefaultPrevented=o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse,this}var a=n(4),r=n(6),o=n(12),i=(n(11),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),l={type:null,target:null,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};a(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=o.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=o.thatReturnsTrue)},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<i.length;n++)this[i[n]]=null}}),s.Interface=l,s.augmentClass=function(e,t){var n=this,s=function(){};s.prototype=n.prototype;var o=new s;a(o,e.prototype),e.prototype=o,e.prototype.constructor=e,e.Interface=a({},n.Interface,t),e.augmentClass=n.augmentClass,r.addPoolingTo(e,r.fourArgumentPooler)},r.addPoolingTo(s,r.fourArgumentPooler),e.exports=s},function(e,t,n){"use strict";function s(e,t,n,s){return a.call(this,e,t,n,s)}var a=n(50),r={data:null};a.augmentClass(s,r),e.exports=s},function(e,t,n){"use strict";function s(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function a(e){var t=k.getPooled(P.change,R,e,E(e));v.accumulateTwoPhaseDispatches(t),_.batchedUpdates(r,t)}function r(e){w.enqueueEvents(e),w.processEventQueue(!1)}function o(e,t){O=e,R=t,O.attachEvent("onchange",a)}function i(){O&&(O.detachEvent("onchange",a),O=null,R=null)}function l(e,t){if(e===C.topChange)return t}function p(e,t,n){e===C.topFocus?(i(),o(t,n)):e===C.topBlur&&i()}function c(e,t){O=e,R=t,N=e.value,M=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(O,"value",D),O.attachEvent?O.attachEvent("onpropertychange",d):O.addEventListener("propertychange",d,!1)}function u(){O&&(delete O.value,O.detachEvent?O.detachEvent("onpropertychange",d):O.removeEventListener("propertychange",d,!1),O=null,R=null,N=null,M=null)}function d(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==N&&(N=t,a(e))}}function h(e,t){if(e===C.topInput)return t}function f(e,t,n){e===C.topFocus?(u(),c(t,n)):e===C.topBlur&&u()}function m(e,t){if((e===C.topSelectionChange||e===C.topKeyUp||e===C.topKeyDown)&&O&&O.value!==N)return N=O.value,R}function g(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function y(e,t){if(e===C.topClick)return t}var b=n(38),w=n(40),v=n(39),j=n(46),x=n(33),_=n(53),k=n(50),E=n(61),A=n(62),T=n(63),S=n(25),C=b.topLevelTypes,P={change:{phasedRegistrationNames:{bubbled:S({onChange:null}),captured:S({onChangeCapture:null})},dependencies:[C.topBlur,C.topChange,C.topClick,C.topFocus,C.topInput,C.topKeyDown,C.topKeyUp,C.topSelectionChange]}},O=null,R=null,N=null,M=null,q=!1;j.canUseDOM&&(q=A("change")&&(!document.documentMode||document.documentMode>8));var L=!1;j.canUseDOM&&(L=A("input")&&(!document.documentMode||document.documentMode>11));var D={get:function(){return M.get.call(this)},set:function(e){N=""+e,M.set.call(this,e)}},I={eventTypes:P,extractEvents:function(e,t,n,a){var r,o,i=t?x.getNodeFromInstance(t):window;if(s(i)?q?r=l:o=p:T(i)?L?r=h:(r=m,o=f):g(i)&&(r=y),r){var c=r(e,t);if(c){var u=k.getPooled(P.change,c,n,a);return u.type="change",v.accumulateTwoPhaseDispatches(u),u}}o&&o(e,i,t)}};e.exports=I},function(e,t,n){"use strict";function s(){T.ReactReconcileTransaction&&j?void 0:c("123")}function a(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=d.getPooled(),this.reconcileTransaction=T.ReactReconcileTransaction.getPooled(!0)}function r(e,t,n,a,r,o){s(),j.batchedUpdates(e,t,n,a,r,o)}function o(e,t){return e._mountOrder-t._mountOrder}function i(e){var t=e.dirtyComponentsLength;t!==y.length?c("124",t,y.length):void 0,y.sort(o),b++;for(var n=0;n<t;n++){var s=y[n],a=s._pendingCallbacks;s._pendingCallbacks=null;var r;if(f.logTopLevelRenders){var i=s;s._currentElement.props===s._renderedComponent._currentElement&&(i=s._renderedComponent),r="React update: "+i.getName(),console.time(r)}if(m.performUpdateIfNecessary(s,e.reconcileTransaction,b),r&&console.timeEnd(r),a)for(var l=0;l<a.length;l++)e.callbackQueue.enqueue(a[l],s.getPublicInstance())}}function l(e){return s(),j.isBatchingUpdates?(y.push(e),void(null==e._updateBatchNumber&&(e._updateBatchNumber=b+1))):void j.batchedUpdates(l,e)}function p(e,t){j.isBatchingUpdates?void 0:c("125"),w.enqueue(e,t),v=!0}var c=n(7),u=n(4),d=n(54),h=n(6),f=n(55),m=n(56),g=n(60),y=(n(8),[]),b=0,w=d.getPooled(),v=!1,j=null,x={initialize:function(){this.dirtyComponentsLength=y.length},close:function(){this.dirtyComponentsLength!==y.length?(y.splice(0,this.dirtyComponentsLength),E()):y.length=0}},_={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},k=[x,_];u(a.prototype,g.Mixin,{getTransactionWrappers:function(){return k},destructor:function(){this.dirtyComponentsLength=null,d.release(this.callbackQueue),this.callbackQueue=null,T.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return g.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),h.addPoolingTo(a);var E=function(){for(;y.length||v;){if(y.length){var e=a.getPooled();e.perform(i,null,e),a.release(e)}if(v){v=!1;var t=w;w=d.getPooled(),t.notifyAll(),d.release(t)}}},A={injectReconcileTransaction:function(e){e?void 0:c("126"),T.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e?void 0:c("127"),"function"!=typeof e.batchedUpdates?c("128"):void 0,"boolean"!=typeof e.isBatchingUpdates?c("129"):void 0,j=e}},T={ReactReconcileTransaction:null,batchedUpdates:r,enqueueUpdate:l,flushBatchedUpdates:E,injection:A,asap:p};e.exports=T},function(e,t,n){"use strict";function s(){this._callbacks=null,this._contexts=null}var a=n(7),r=n(4),o=n(6);n(8);r(s.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){e.length!==t.length?a("24"):void 0,this._callbacks=null,this._contexts=null;for(var n=0;n<e.length;n++)e[n].call(t[n]);e.length=0,t.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(e){this._callbacks&&(this._callbacks.length=e,this._contexts.length=e)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),o.addPoolingTo(s),e.exports=s},function(e,t){"use strict";var n={logTopLevelRenders:!1};e.exports=n},function(e,t,n){"use strict";function s(){a.attachRefs(this,this._currentElement)}var a=n(57),r=(n(59),n(11),{mountComponent:function(e,t,n,a,r,o){var i=e.mountComponent(t,n,a,r,o);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(s,e),i},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){a.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,r){var o=e._currentElement;if(t!==o||r!==e._context){var i=a.shouldUpdateRefs(o,t);i&&a.detachRefs(e,o),e.receiveComponent(t,n,r),i&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(s,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}});e.exports=r},function(e,t,n){"use strict";function s(e,t,n){"function"==typeof e?e(t.getPublicInstance()):r.addComponentAsRefTo(t,e,n)}function a(e,t,n){"function"==typeof e?e(null):r.removeComponentAsRefFrom(t,e,n)}var r=n(58),o={};o.attachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&s(n,e,t._owner)}},o.shouldUpdateRefs=function(e,t){var n=null===e||e===!1,s=null===t||t===!1;return n||s||t.ref!==e.ref||"string"==typeof t.ref&&t._owner!==e._owner},o.detachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&a(n,e,t._owner)}},e.exports=o},function(e,t,n){"use strict";var s=n(7),a=(n(8),{isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){a.isValidOwner(n)?void 0:s("119"),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){a.isValidOwner(n)?void 0:s("120");var r=n.getPublicInstance();r&&r.refs[t]===e.getPublicInstance()&&n.detachRef(t)}});e.exports=a},function(e,t,n){"use strict";var s=null;e.exports={debugTool:s}},function(e,t,n){"use strict";var s=n(7),a=(n(8),{reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,a,r,o,i,l){this.isInTransaction()?s("27"):void 0;var p,c;try{this._isInTransaction=!0,p=!0,this.initializeAll(0),c=e.call(t,n,a,r,o,i,l),p=!1}finally{try{if(p)try{this.closeAll(0)}catch(u){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var s=t[n];try{this.wrapperInitData[n]=r.OBSERVED_ERROR,this.wrapperInitData[n]=s.initialize?s.initialize.call(this):null}finally{if(this.wrapperInitData[n]===r.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(a){}}}},closeAll:function(e){this.isInTransaction()?void 0:s("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var a,o=t[n],i=this.wrapperInitData[n];try{a=!0,i!==r.OBSERVED_ERROR&&o.close&&o.close.call(this,i),a=!1}finally{if(a)try{this.closeAll(n+1)}catch(l){}}}this.wrapperInitData.length=0}}),r={Mixin:a,OBSERVED_ERROR:{}};e.exports=r},function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}e.exports=n},function(e,t,n){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function s(e,t){if(!r.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,s=n in document;if(!s){var o=document.createElement("div");o.setAttribute(n,"return;"),s="function"==typeof o[n]}return!s&&a&&"wheel"===e&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}var a,r=n(46);r.canUseDOM&&(a=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=s},function(e,t){"use strict";function n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!s[e.type]:"textarea"===t}var s={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=n},function(e,t,n){"use strict";var s=n(25),a=[s({ResponderEventPlugin:null}),s({SimpleEventPlugin:null}),s({TapEventPlugin:null}),s({EnterLeaveEventPlugin:null}),s({ChangeEventPlugin:null}),s({SelectEventPlugin:null}),s({BeforeInputEventPlugin:null})];e.exports=a},function(e,t,n){"use strict";var s=n(38),a=n(39),r=n(33),o=n(66),i=n(25),l=s.topLevelTypes,p={mouseEnter:{registrationName:i({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:i({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},c={eventTypes:p,extractEvents:function(e,t,n,s){if(e===l.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(e!==l.topMouseOut&&e!==l.topMouseOver)return null;var i;if(s.window===s)i=s;else{var c=s.ownerDocument;i=c?c.defaultView||c.parentWindow:window}var u,d;if(e===l.topMouseOut){u=t;var h=n.relatedTarget||n.toElement;d=h?r.getClosestInstanceFromNode(h):null}else u=null,d=t;if(u===d)return null;var f=null==u?i:r.getNodeFromInstance(u),m=null==d?i:r.getNodeFromInstance(d),g=o.getPooled(p.mouseLeave,u,n,s);g.type="mouseleave",g.target=f,g.relatedTarget=m;var y=o.getPooled(p.mouseEnter,d,n,s);return y.type="mouseenter",y.target=m,y.relatedTarget=f,a.accumulateEnterLeaveDispatches(g,y,u,d),[g,y]}};e.exports=c},function(e,t,n){"use strict";function s(e,t,n,s){return a.call(this,e,t,n,s)}var a=n(67),r=n(68),o=n(69),i={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:o,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+r.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+r.currentScrollTop}};a.augmentClass(s,i),e.exports=s},function(e,t,n){"use strict";function s(e,t,n,s){return a.call(this,e,t,n,s)}var a=n(50),r=n(61),o={view:function(e){if(e.view)return e.view;var t=r(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};a.augmentClass(s,o),e.exports=s},function(e,t){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){n.currentScrollLeft=e.x,n.currentScrollTop=e.y}};e.exports=n},function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var s=a[e];return!!s&&!!n[s]}function s(e){return n}var a={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=s},function(e,t,n){"use strict";var s=n(34),a=s.injection.MUST_USE_PROPERTY,r=s.injection.HAS_BOOLEAN_VALUE,o=s.injection.HAS_NUMERIC_VALUE,i=s.injection.HAS_POSITIVE_NUMERIC_VALUE,l=s.injection.HAS_OVERLOADED_BOOLEAN_VALUE,p={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+s.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:r,allowTransparency:0,alt:0,as:0,async:r,autoComplete:0,autoPlay:r,capture:r,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:a|r,cite:0,classID:0,className:0,cols:i,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:r,coords:0,crossOrigin:0,data:0,dateTime:0,"default":r,defer:r,dir:0,disabled:r,download:l,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:r,formTarget:0,frameBorder:0,headers:0,height:0,hidden:r,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:r,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:a|r,muted:a|r,name:0,nonce:0,noValidate:r,open:r,optimum:0,pattern:0,placeholder:0,playsInline:r,poster:0,preload:0,profile:0,radioGroup:0,readOnly:r,referrerPolicy:0,rel:0,required:r,reversed:r,role:0,rows:i,rowSpan:o,sandbox:0,scope:0,scoped:r,scrolling:0,seamless:r,selected:a|r,shape:0,size:i,sizes:0,span:i,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:o,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,"typeof":0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:r,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};e.exports=p},function(e,t,n){"use strict";var s=n(72),a=n(84),r={processChildrenUpdates:a.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:s.dangerouslyReplaceNodeWithMarkup};e.exports=r},function(e,t,n){"use strict";function s(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function a(e,t,n){c.insertTreeBefore(e,t,n)}function r(e,t,n){Array.isArray(t)?i(e,t[0],t[1],n):g(e,t,n)}function o(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],l(e,t,n),e.removeChild(n)}e.removeChild(t)}function i(e,t,n,s){for(var a=t;;){var r=a.nextSibling;if(g(e,a,s),a===n)break;a=r}}function l(e,t,n){for(;;){var s=t.nextSibling;if(s===n)break;e.removeChild(s)}}function p(e,t,n){var s=e.parentNode,a=e.nextSibling;a===t?n&&g(s,document.createTextNode(n),a):n?(m(a,n),l(s,a,t)):l(s,e,t)}var c=n(73),u=n(79),d=n(83),h=(n(33),n(59),n(76)),f=n(75),m=n(77),g=h(function(e,t,n){e.insertBefore(t,n)}),y=u.dangerouslyReplaceNodeWithMarkup,b={dangerouslyReplaceNodeWithMarkup:y,replaceDelimitedText:p,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var i=t[n];switch(i.type){case d.INSERT_MARKUP:a(e,i.content,s(e,i.afterNode));break;case d.MOVE_EXISTING:r(e,i.fromNode,s(e,i.afterNode));break;case d.SET_MARKUP:f(e,i.content);break;case d.TEXT_CONTENT:m(e,i.content);break;case d.REMOVE_NODE:o(e,i.fromNode)}}}};e.exports=b},function(e,t,n){"use strict";function s(e){if(g){var t=e.node,n=e.children;if(n.length)for(var s=0;s<n.length;s++)y(t,n[s],null);else null!=e.html?u(t,e.html):null!=e.text&&h(t,e.text)}}function a(e,t){e.parentNode.replaceChild(t.node,e),s(t)}function r(e,t){g?e.children.push(t):e.node.appendChild(t.node)}function o(e,t){g?e.html=t:u(e.node,t)}function i(e,t){g?e.text=t:h(e.node,t)}function l(){return this.node.nodeName}function p(e){return{node:e,children:[],html:null,text:null,toString:l}}var c=n(74),u=n(75),d=n(76),h=n(77),f=1,m=11,g="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),y=d(function(e,t,n){t.node.nodeType===m||t.node.nodeType===f&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===c.html)?(s(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),s(t))});p.insertTreeBefore=y,p.replaceChildWithTree=a,p.queueChild=r,p.queueHTML=o,p.queueText=i,e.exports=p},function(e,t){"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};e.exports=n},function(e,t,n){"use strict";var s,a=n(46),r=n(74),o=/^[ \r\n\t\f]/,i=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,l=n(76),p=l(function(e,t){if(e.namespaceURI!==r.svg||"innerHTML"in e)e.innerHTML=t;else{s=s||document.createElement("div"),s.innerHTML="<svg>"+t+"</svg>";for(var n=s.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(a.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(p=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),o.test(t)||"<"===t[0]&&i.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),c=null}e.exports=p},function(e,t){"use strict";var n=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e};e.exports=n},function(e,t,n){"use strict";var s=n(46),a=n(78),r=n(75),o=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};s.canUseDOM&&("textContent"in document.documentElement||(o=function(e,t){r(e,a(t))})),e.exports=o},function(e,t){"use strict";function n(e){var t=""+e,n=a.exec(t);if(!n)return t;var s,r="",o=0,i=0;for(o=n.index;o<t.length;o++){switch(t.charCodeAt(o)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 39:s="&#x27;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}i!==o&&(r+=t.substring(i,o)),i=o+1,r+=s}return i!==o?r+t.substring(i,o):r}function s(e){return"boolean"==typeof e||"number"==typeof e?""+e:n(e)}var a=/["'&<>]/;e.exports=s},function(e,t,n){"use strict";var s=n(7),a=n(73),r=n(46),o=n(80),i=n(12),l=(n(8),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(r.canUseDOM?void 0:s("56"),t?void 0:s("57"),"HTML"===e.nodeName?s("58"):void 0,"string"==typeof t){var n=o(t,i)[0];e.parentNode.replaceChild(n,e)}else a.replaceChildWithTree(e,t)}});e.exports=l},function(e,t,n){"use strict";function s(e){var t=e.match(c);return t&&t[1].toLowerCase()}function a(e,t){var n=p;p?void 0:l(!1);var a=s(e),r=a&&i(a);if(r){n.innerHTML=r[1]+e+r[2];for(var c=r[0];c--;)n=n.lastChild}else n.innerHTML=e;var u=n.getElementsByTagName("script");u.length&&(t?void 0:l(!1),o(u).forEach(t));for(var d=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return d}var r=n(46),o=n(81),i=n(82),l=n(8),p=r.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;e.exports=a},function(e,t,n){"use strict";function s(e){var t=e.length;if(Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e?o(!1):void 0,"number"!=typeof t?o(!1):void 0,0===t||t-1 in e?void 0:o(!1),"function"==typeof e.callee?o(!1):void 0,e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var s=Array(t),a=0;a<t;a++)s[a]=e[a];return s}function a(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function r(e){return a(e)?Array.isArray(e)?e.slice():s(e):[e]}var o=n(8);e.exports=r},function(e,t,n){"use strict";function s(e){return o?void 0:r(!1),d.hasOwnProperty(e)||(e="*"),i.hasOwnProperty(e)||("*"===e?o.innerHTML="<link />":o.innerHTML="<"+e+"></"+e+">",i[e]=!o.firstChild),i[e]?d[e]:null}var a=n(46),r=n(8),o=a.canUseDOM?document.createElement("div"):null,i={},l=[1,'<select multiple="true">',"</select>"],p=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],u=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],d={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:p,colgroup:p,tbody:p,tfoot:p,thead:p,td:c,th:c},h=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];h.forEach(function(e){d[e]=u,i[e]=!0}),e.exports=s},function(e,t,n){"use strict";var s=n(23),a=s({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});e.exports=a},function(e,t,n){"use strict";var s=n(72),a=n(33),r={dangerouslyProcessChildrenUpdates:function(e,t){var n=a.getNodeFromInstance(e);s.processUpdates(n,t)}};e.exports=r},function(e,t,n){"use strict";function s(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function a(e,t){t&&(Q[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML?m("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""):void 0),null!=t.dangerouslySetInnerHTML&&(null!=t.children?m("60"):void 0,"object"==typeof t.dangerouslySetInnerHTML&&z in t.dangerouslySetInnerHTML?void 0:m("61")),null!=t.style&&"object"!=typeof t.style?m("62",s(e)):void 0)}function r(e,t,n,s){if(!(s instanceof q)){var a=e._hostContainerInfo,r=a._node&&a._node.nodeType===$,i=r?a._node:a._ownerDocument;B(t,i),s.getReactMountReady().enqueue(o,{inst:e,registrationName:t,listener:n})}}function o(){var e=this;k.putListener(e.inst,e.registrationName,e.listener)}function i(){var e=this;P.postMountWrapper(e)}function l(){var e=this;N.postMountWrapper(e)}function p(){var e=this;O.postMountWrapper(e)}function c(){var e=this;e._rootNodeID?void 0:m("63");var t=F(e);switch(t?void 0:m("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[A.trapBubbledEvent(_.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in Y)Y.hasOwnProperty(n)&&e._wrapperState.listeners.push(A.trapBubbledEvent(_.topLevelTypes[n],Y[n],t));break;case"source":e._wrapperState.listeners=[A.trapBubbledEvent(_.topLevelTypes.topError,"error",t)];break;case"img":e._wrapperState.listeners=[A.trapBubbledEvent(_.topLevelTypes.topError,"error",t),A.trapBubbledEvent(_.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[A.trapBubbledEvent(_.topLevelTypes.topReset,"reset",t),A.trapBubbledEvent(_.topLevelTypes.topSubmit,"submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[A.trapBubbledEvent(_.topLevelTypes.topInvalid,"invalid",t)]}}function u(){R.postUpdateWrapper(this)}function d(e){ee.call(Z,e)||(X.test(e)?void 0:m("65",e),Z[e]=!0)}function h(e,t){return e.indexOf("-")>=0||null!=t.is}function f(e){var t=e.type;d(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var m=n(7),g=n(4),y=n(86),b=n(88),w=n(73),v=n(74),j=n(34),x=n(96),_=n(38),k=n(40),E=n(41),A=n(98),T=n(101),S=n(35),C=n(33),P=n(103),O=n(105),R=n(106),N=n(107),M=(n(59),n(108)),q=n(123),L=(n(12),n(78)),D=(n(8),n(62),n(25)),I=(n(118),n(126),n(11),S),U=k.deleteListener,F=C.getNodeFromInstance,B=A.listenTo,W=E.registrationNameModules,V={string:!0,number:!0},H=D({style:null}),z=D({__html:null}),G={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},$=11,Y={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},K={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},J={listing:!0,pre:!0,textarea:!0},Q=g({menuitem:!0},K),X=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Z={},ee={}.hasOwnProperty,te=1;f.displayName="ReactDOMComponent",f.Mixin={mountComponent:function(e,t,n,s){this._rootNodeID=te++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var r=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(c,this);break;case"button":r=T.getHostProps(this,r,t);break;case"input":P.mountWrapper(this,r,t),r=P.getHostProps(this,r),e.getReactMountReady().enqueue(c,this);break;case"option":O.mountWrapper(this,r,t),r=O.getHostProps(this,r);break;case"select":R.mountWrapper(this,r,t),r=R.getHostProps(this,r),e.getReactMountReady().enqueue(c,this);break;case"textarea":N.mountWrapper(this,r,t),r=N.getHostProps(this,r),e.getReactMountReady().enqueue(c,this)}a(this,r);var o,u;null!=t?(o=t._namespaceURI,u=t._tag):n._tag&&(o=n._namespaceURI,u=n._tag),(null==o||o===v.svg&&"foreignobject"===u)&&(o=v.html),o===v.html&&("svg"===this._tag?o=v.svg:"math"===this._tag&&(o=v.mathml)),this._namespaceURI=o;var d;if(e.useCreateElement){var h,f=n._ownerDocument;if(o===v.html)if("script"===this._tag){var m=f.createElement("div"),g=this._currentElement.type;m.innerHTML="<"+g+"></"+g+">",h=m.removeChild(m.firstChild)}else h=r.is?f.createElement(this._currentElement.type,r.is):f.createElement(this._currentElement.type);else h=f.createElementNS(o,this._currentElement.type);C.precacheNode(this,h),this._flags|=I.hasCachedChildNodes,this._hostParent||x.setAttributeForRoot(h),this._updateDOMProperties(null,r,e);var b=w(h);this._createInitialChildren(e,r,s,b),d=b}else{var j=this._createOpenTagMarkupAndPutListeners(e,r),_=this._createContentMarkup(e,r,s);d=!_&&K[this._tag]?j+"/>":j+">"+_+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(i,this),r.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(l,this),r.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"select":r.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"button":r.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(p,this)}return d},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var s in t)if(t.hasOwnProperty(s)){var a=t[s];if(null!=a)if(W.hasOwnProperty(s))a&&r(this,s,a,e);else{s===H&&(a&&(a=this._previousStyleCopy=g({},t.style)),a=b.createMarkupForStyles(a,this));var o=null;null!=this._tag&&h(this._tag,t)?G.hasOwnProperty(s)||(o=x.createMarkupForCustomAttribute(s,a)):o=x.createMarkupForProperty(s,a),o&&(n+=" "+o)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+x.createMarkupForRoot()),n+=" "+x.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var s="",a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&(s=a.__html);else{var r=V[typeof t.children]?t.children:null,o=null!=r?null:t.children;if(null!=r)s=L(r);else if(null!=o){var i=this.mountChildren(o,e,n);s=i.join("")}}return J[this._tag]&&"\n"===s.charAt(0)?"\n"+s:s},_createInitialChildren:function(e,t,n,s){var a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&w.queueHTML(s,a.__html);else{var r=V[typeof t.children]?t.children:null,o=null!=r?null:t.children;if(null!=r)w.queueText(s,r);else if(null!=o)for(var i=this.mountChildren(o,e,n),l=0;l<i.length;l++)w.queueChild(s,i[l])}},receiveComponent:function(e,t,n){var s=this._currentElement;this._currentElement=e,this.updateComponent(t,s,e,n)},updateComponent:function(e,t,n,s){var r=t.props,o=this._currentElement.props;switch(this._tag){case"button":r=T.getHostProps(this,r),o=T.getHostProps(this,o);break;case"input":r=P.getHostProps(this,r),o=P.getHostProps(this,o);break;case"option":r=O.getHostProps(this,r),o=O.getHostProps(this,o);break;case"select":r=R.getHostProps(this,r),o=R.getHostProps(this,o);break;case"textarea":r=N.getHostProps(this,r),o=N.getHostProps(this,o)}switch(a(this,o),this._updateDOMProperties(r,o,e),this._updateDOMChildren(r,o,e,s),this._tag){case"input":P.updateWrapper(this);break;case"textarea":N.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(u,this)}},_updateDOMProperties:function(e,t,n){var s,a,o;for(s in e)if(!t.hasOwnProperty(s)&&e.hasOwnProperty(s)&&null!=e[s])if(s===H){var i=this._previousStyleCopy;for(a in i)i.hasOwnProperty(a)&&(o=o||{},o[a]="");this._previousStyleCopy=null}else W.hasOwnProperty(s)?e[s]&&U(this,s):h(this._tag,e)?G.hasOwnProperty(s)||x.deleteValueForAttribute(F(this),s):(j.properties[s]||j.isCustomAttribute(s))&&x.deleteValueForProperty(F(this),s);for(s in t){var l=t[s],p=s===H?this._previousStyleCopy:null!=e?e[s]:void 0;if(t.hasOwnProperty(s)&&l!==p&&(null!=l||null!=p))if(s===H)if(l?l=this._previousStyleCopy=g({},l):this._previousStyleCopy=null,p){for(a in p)!p.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(o=o||{},o[a]="");for(a in l)l.hasOwnProperty(a)&&p[a]!==l[a]&&(o=o||{},o[a]=l[a])}else o=l;else if(W.hasOwnProperty(s))l?r(this,s,l,n):p&&U(this,s);else if(h(this._tag,t))G.hasOwnProperty(s)||x.setValueForAttribute(F(this),s,l);else if(j.properties[s]||j.isCustomAttribute(s)){var c=F(this);null!=l?x.setValueForProperty(c,s,l):x.deleteValueForProperty(c,s)}}o&&b.setValueForStyles(F(this),o,this)},_updateDOMChildren:function(e,t,n,s){var a=V[typeof e.children]?e.children:null,r=V[typeof t.children]?t.children:null,o=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,i=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,l=null!=a?null:e.children,p=null!=r?null:t.children,c=null!=a||null!=o,u=null!=r||null!=i;null!=l&&null==p?this.updateChildren(null,n,s):c&&!u&&this.updateTextContent(""),null!=r?a!==r&&this.updateTextContent(""+r):null!=i?o!==i&&this.updateMarkup(""+i):null!=p&&this.updateChildren(p,n,s)},getHostNode:function(){return F(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"html":case"head":case"body":m("66",this._tag)}this.unmountChildren(e),C.uncacheNode(this),k.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return F(this)}},g(f.prototype,f.Mixin,M.Mixin),e.exports=f},function(e,t,n){"use strict";var s=n(33),a=n(87),r={focusDOMComponent:function(){a(s.getNodeFromInstance(this))}};e.exports=r},function(e,t){"use strict";function n(e){try{e.focus()}catch(t){}}e.exports=n},function(e,t,n){"use strict";var s=n(89),a=n(46),r=(n(59),n(90),n(92)),o=n(93),i=n(95),l=(n(11),i(function(e){return o(e)})),p=!1,c="cssFloat";if(a.canUseDOM){var u=document.createElement("div").style;try{u.font=""}catch(d){p=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var h={createMarkupForStyles:function(e,t){var n="";for(var s in e)if(e.hasOwnProperty(s)){var a=e[s];null!=a&&(n+=l(s)+":",n+=r(s,a,t)+";")}return n||null},setValueForStyles:function(e,t,n){var a=e.style;for(var o in t)if(t.hasOwnProperty(o)){var i=r(o,t[o],n);if("float"!==o&&"cssFloat"!==o||(o=c),i)a[o]=i;else{var l=p&&s.shorthandPropertyExpansions[o];if(l)for(var u in l)a[u]="";else a[o]=""}}}};e.exports=h},function(e,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var s={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a=["Webkit","ms","Moz","O"];Object.keys(s).forEach(function(e){a.forEach(function(t){s[n(t,e)]=s[e]})});var r={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},o={isUnitlessNumber:s,shorthandPropertyExpansions:r};e.exports=o},function(e,t,n){"use strict";function s(e){return a(e.replace(r,"ms-"))}var a=n(91),r=/^-ms-/;e.exports=s},function(e,t){"use strict";function n(e){return e.replace(s,function(e,t){return t.toUpperCase()})}var s=/-(.)/g;e.exports=n},function(e,t,n){"use strict";function s(e,t,n){var s=null==t||"boolean"==typeof t||""===t;if(s)return"";var a=isNaN(t);if(a||0===t||r.hasOwnProperty(e)&&r[e])return""+t;if("string"==typeof t){t=t.trim()}return t+"px"}var a=n(89),r=(n(11),a.isUnitlessNumber);e.exports=s},function(e,t,n){"use strict";function s(e){return a(e).replace(r,"-ms-")}var a=n(94),r=/^ms-/;e.exports=s},function(e,t){"use strict";function n(e){return e.replace(s,"-$1").toLowerCase()}var s=/([A-Z])/g;e.exports=n},function(e,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=n},function(e,t,n){"use strict";function s(e){return!!p.hasOwnProperty(e)||!l.hasOwnProperty(e)&&(i.test(e)?(p[e]=!0,!0):(l[e]=!0,!1))}function a(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&t===!1}var r=n(34),o=(n(33),n(59),n(97)),i=(n(11),new RegExp("^["+r.ATTRIBUTE_NAME_START_CHAR+"]["+r.ATTRIBUTE_NAME_CHAR+"]*$")),l={},p={},c={createMarkupForID:function(e){return r.ID_ATTRIBUTE_NAME+"="+o(e)},setAttributeForID:function(e,t){e.setAttribute(r.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return r.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(r.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=r.properties.hasOwnProperty(e)?r.properties[e]:null;if(n){if(a(n,t))return"";var s=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&t===!0?s+'=""':s+"="+o(t)}return r.isCustomAttribute(e)?null==t?"":e+"="+o(t):null},createMarkupForCustomAttribute:function(e,t){return s(e)&&null!=t?e+"="+o(t):""},setValueForProperty:function(e,t,n){var s=r.properties.hasOwnProperty(t)?r.properties[t]:null;if(s){var o=s.mutationMethod;if(o)o(e,n);else{if(a(s,n))return void this.deleteValueForProperty(e,t);if(s.mustUseProperty)e[s.propertyName]=n;else{var i=s.attributeName,l=s.attributeNamespace;l?e.setAttributeNS(l,i,""+n):s.hasBooleanValue||s.hasOverloadedBooleanValue&&n===!0?e.setAttribute(i,""):e.setAttribute(i,""+n)}}}else if(r.isCustomAttribute(t))return void c.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){if(s(t)){null==n?e.removeAttribute(t):e.setAttribute(t,""+n)}},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=r.properties.hasOwnProperty(t)?r.properties[t]:null;if(n){var s=n.mutationMethod;if(s)s(e,void 0);else if(n.mustUseProperty){var a=n.propertyName;n.hasBooleanValue?e[a]=!1:e[a]=""}else e.removeAttribute(n.attributeName)}else r.isCustomAttribute(t)&&e.removeAttribute(t)}};e.exports=c},function(e,t,n){"use strict";function s(e){return'"'+a(e)+'"'}var a=n(78);e.exports=s},function(e,t,n){"use strict";function s(e){return Object.prototype.hasOwnProperty.call(e,g)||(e[g]=f++,d[e[g]]={}),d[e[g]]}var a,r=n(4),o=n(38),i=n(41),l=n(99),p=n(68),c=n(100),u=n(62),d={},h=!1,f=0,m={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},g="_reactListenersID"+String(Math.random()).slice(2),y=r({},l,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(y.handleTopLevel),y.ReactEventListener=e}},setEnabled:function(e){y.ReactEventListener&&y.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!y.ReactEventListener||!y.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,a=s(n),r=i.registrationNameDependencies[e],l=o.topLevelTypes,p=0;p<r.length;p++){var c=r[p];a.hasOwnProperty(c)&&a[c]||(c===l.topWheel?u("wheel")?y.ReactEventListener.trapBubbledEvent(l.topWheel,"wheel",n):u("mousewheel")?y.ReactEventListener.trapBubbledEvent(l.topWheel,"mousewheel",n):y.ReactEventListener.trapBubbledEvent(l.topWheel,"DOMMouseScroll",n):c===l.topScroll?u("scroll",!0)?y.ReactEventListener.trapCapturedEvent(l.topScroll,"scroll",n):y.ReactEventListener.trapBubbledEvent(l.topScroll,"scroll",y.ReactEventListener.WINDOW_HANDLE):c===l.topFocus||c===l.topBlur?(u("focus",!0)?(y.ReactEventListener.trapCapturedEvent(l.topFocus,"focus",n),y.ReactEventListener.trapCapturedEvent(l.topBlur,"blur",n)):u("focusin")&&(y.ReactEventListener.trapBubbledEvent(l.topFocus,"focusin",n),y.ReactEventListener.trapBubbledEvent(l.topBlur,"focusout",n)),a[l.topBlur]=!0,a[l.topFocus]=!0):m.hasOwnProperty(c)&&y.ReactEventListener.trapBubbledEvent(c,m[c],n),a[c]=!0)}},trapBubbledEvent:function(e,t,n){return y.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return y.ReactEventListener.trapCapturedEvent(e,t,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===a&&(a=y.supportsEventPageXY()),!a&&!h){var e=p.refreshScrollValues;y.ReactEventListener.monitorScrollValue(e),h=!0}}});e.exports=y},function(e,t,n){"use strict";function s(e){a.enqueueEvents(e),a.processEventQueue(!1)}var a=n(40),r={handleTopLevel:function(e,t,n,r){var o=a.extractEvents(e,t,n,r);s(o)}};e.exports=r},function(e,t,n){"use strict";function s(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function a(e){if(i[e])return i[e];if(!o[e])return e;var t=o[e];for(var n in t)if(t.hasOwnProperty(n)&&n in l)return i[e]=t[n];return""}var r=n(46),o={
animationend:s("Animation","AnimationEnd"),animationiteration:s("Animation","AnimationIteration"),animationstart:s("Animation","AnimationStart"),transitionend:s("Transition","TransitionEnd")},i={},l={};r.canUseDOM&&(l=document.createElement("div").style,"AnimationEvent"in window||(delete o.animationend.animation,delete o.animationiteration.animation,delete o.animationstart.animation),"TransitionEvent"in window||delete o.transitionend.transition),e.exports=a},function(e,t,n){"use strict";var s=n(102),a={getHostProps:s.getHostProps};e.exports=a},function(e,t){"use strict";var n={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},s={getHostProps:function(e,t){if(!t.disabled)return t;var s={};for(var a in t)!n[a]&&t.hasOwnProperty(a)&&(s[a]=t[a]);return s}};e.exports=s},function(e,t,n){"use strict";function s(){this._rootNodeID&&d.updateWrapper(this)}function a(e){var t=this._currentElement.props,n=p.executeOnChange(t,e);u.asap(s,this);var a=t.name;if("radio"===t.type&&null!=a){for(var o=c.getNodeFromInstance(this),i=o;i.parentNode;)i=i.parentNode;for(var l=i.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),d=0;d<l.length;d++){var h=l[d];if(h!==o&&h.form===o.form){var f=c.getInstanceFromNode(h);f?void 0:r("90"),u.asap(s,f)}}}return n}var r=n(7),o=n(4),i=n(102),l=n(96),p=n(104),c=n(33),u=n(53),d=(n(8),n(11),{getHostProps:function(e,t){var n=p.getValue(t),s=p.getChecked(t),a=o({type:void 0,step:void 0,min:void 0,max:void 0},i.getHostProps(e,t),{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=s?s:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return a},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:a.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&l.setValueForProperty(c.getNodeFromInstance(e),"checked",n||!1);var s=c.getNodeFromInstance(e),a=p.getValue(t);if(null!=a){var r=""+a;r!==s.value&&(s.value=r)}else null==t.value&&null!=t.defaultValue&&(s.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(s.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=c.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var s=n.name;""!==s&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==s&&(n.name=s)}});e.exports=d},function(e,t,n){"use strict";function s(e){null!=e.checkedLink&&null!=e.valueLink?i("87"):void 0}function a(e){s(e),null!=e.value||null!=e.onChange?i("88"):void 0}function r(e){s(e),null!=e.checked||null!=e.onChange?i("89"):void 0}function o(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var i=n(7),l=n(27),p=n(22),c=n(28),u=(n(8),n(11),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),d={value:function(e,t,n){return!e[t]||u[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:l.func},h={},f={checkPropTypes:function(e,t,n){for(var s in d){if(d.hasOwnProperty(s))var a=d[s](t,s,e,p.prop,null,c);if(a instanceof Error&&!(a.message in h)){h[a.message]=!0;o(n)}}},getValue:function(e){return e.valueLink?(a(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(r(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(a(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(r(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=f},function(e,t,n){"use strict";function s(e){var t="";return r.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:l||(l=!0))}),t}var a=n(4),r=n(5),o=n(33),i=n(106),l=(n(11),!1),p={mountWrapper:function(e,t,n){var a=null;if(null!=n){var r=n;"optgroup"===r._tag&&(r=r._hostParent),null!=r&&"select"===r._tag&&(a=i.getSelectValueContext(r))}var o=null;if(null!=a){var l;if(l=null!=t.value?t.value+"":s(t.children),o=!1,Array.isArray(a)){for(var p=0;p<a.length;p++)if(""+a[p]===l){o=!0;break}}else o=""+a===l}e._wrapperState={selected:o}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){var n=o.getNodeFromInstance(e);n.setAttribute("value",t.value)}},getHostProps:function(e,t){var n=a({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var r=s(t.children);return r&&(n.children=r),n}};e.exports=p},function(e,t,n){"use strict";function s(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=l.getValue(e);null!=t&&a(this,Boolean(e.multiple),t)}}function a(e,t,n){var s,a,r=p.getNodeFromInstance(e).options;if(t){for(s={},a=0;a<n.length;a++)s[""+n[a]]=!0;for(a=0;a<r.length;a++){var o=s.hasOwnProperty(r[a].value);r[a].selected!==o&&(r[a].selected=o)}}else{for(s=""+n,a=0;a<r.length;a++)if(r[a].value===s)return void(r[a].selected=!0);r.length&&(r[0].selected=!0)}}function r(e){var t=this._currentElement.props,n=l.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),c.asap(s,this),n}var o=n(4),i=n(102),l=n(104),p=n(33),c=n(53),u=(n(11),!1),d={getHostProps:function(e,t){return o({},i.getHostProps(e,t),{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=l.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:r.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||u||(u=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var s=l.getValue(t);null!=s?(e._wrapperState.pendingUpdate=!1,a(e,Boolean(t.multiple),s)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?a(e,Boolean(t.multiple),t.defaultValue):a(e,Boolean(t.multiple),t.multiple?[]:""))}};e.exports=d},function(e,t,n){"use strict";function s(){this._rootNodeID&&u.updateWrapper(this)}function a(e){var t=this._currentElement.props,n=l.executeOnChange(t,e);return c.asap(s,this),n}var r=n(7),o=n(4),i=n(102),l=n(104),p=n(33),c=n(53),u=(n(8),n(11),{getHostProps:function(e,t){null!=t.dangerouslySetInnerHTML?r("91"):void 0;var n=o({},i.getHostProps(e,t),{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return n},mountWrapper:function(e,t){var n=l.getValue(t),s=n;if(null==n){var o=t.defaultValue,i=t.children;null!=i&&(null!=o?r("92"):void 0,Array.isArray(i)&&(i.length<=1?void 0:r("93"),i=i[0]),o=""+i),null==o&&(o=""),s=o}e._wrapperState={initialValue:""+s,listeners:null,onChange:a.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=p.getNodeFromInstance(e),s=l.getValue(t);if(null!=s){var a=""+s;a!==n.value&&(n.value=a),null==t.defaultValue&&(n.defaultValue=a)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=p.getNodeFromInstance(e);t.value=t.textContent}});e.exports=u},function(e,t,n){"use strict";function s(e,t,n){return{type:d.INSERT_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function a(e,t,n){return{type:d.MOVE_EXISTING,content:null,fromIndex:e._mountIndex,fromNode:h.getHostNode(e),toIndex:n,afterNode:t}}function r(e,t){return{type:d.REMOVE_NODE,content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function o(e){return{type:d.SET_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function i(e){return{type:d.TEXT_CONTENT,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function l(e,t){return t&&(e=e||[],e.push(t)),e}function p(e,t){u.processChildrenUpdates(e,t)}var c=n(7),u=n(109),d=(n(110),n(59),n(83)),h=(n(10),n(56)),f=n(111),m=(n(12),n(122)),g=(n(8),{Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return f.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,s,a,r){var o,i=0;return o=m(t,i),f.updateChildren(e,o,n,s,a,this,this._hostContainerInfo,r,i),o},mountChildren:function(e,t,n){var s=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=s;var a=[],r=0;for(var o in s)if(s.hasOwnProperty(o)){var i=s[o],l=0,p=h.mountComponent(i,t,this,this._hostContainerInfo,n,l);i._mountIndex=r++,a.push(p)}return a},updateTextContent:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");var s=[i(e)];p(this,s)},updateMarkup:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");var s=[o(e)];p(this,s)},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var s=this._renderedChildren,a={},r=[],o=this._reconcilerUpdateChildren(s,e,r,a,t,n);if(o||s){var i,c=null,u=0,d=0,f=0,m=null;for(i in o)if(o.hasOwnProperty(i)){var g=s&&s[i],y=o[i];g===y?(c=l(c,this.moveChild(g,m,u,d)),d=Math.max(g._mountIndex,d),g._mountIndex=u):(g&&(d=Math.max(g._mountIndex,d)),c=l(c,this._mountChildAtIndex(y,r[f],m,u,t,n)),f++),u++,m=h.getHostNode(y)}for(i in a)a.hasOwnProperty(i)&&(c=l(c,this._unmountChild(s[i],a[i])));c&&p(this,c),this._renderedChildren=o}},unmountChildren:function(e){var t=this._renderedChildren;f.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,s){if(e._mountIndex<s)return a(e,t,n)},createChild:function(e,t,n){return s(n,t,e._mountIndex)},removeChild:function(e,t){return r(e,t)},_mountChildAtIndex:function(e,t,n,s,a,r){return e._mountIndex=s,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}});e.exports=g},function(e,t,n){"use strict";var s=n(7),a=(n(8),!1),r={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){a?s("104"):void 0,r.replaceNodeWithMarkup=e.replaceNodeWithMarkup,r.processChildrenUpdates=e.processChildrenUpdates,a=!0}}};e.exports=r},function(e,t){"use strict";var n={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=n},function(e,t,n){(function(t){"use strict";function s(e,t,n,s){var a=void 0===e[n];null!=t&&a&&(e[n]=r(t,!0))}var a=n(56),r=n(113),o=(n(16),n(119)),i=n(14),l=(n(11),{instantiateChildren:function(e,t,n,a){if(null==e)return null;var r={};return i(e,s,r),r},updateChildren:function(e,t,n,s,i,l,p,c,u){if(t||e){var d,h;for(d in t)if(t.hasOwnProperty(d)){h=e&&e[d];var f=h&&h._currentElement,m=t[d];if(null!=h&&o(f,m))a.receiveComponent(h,m,i,c),t[d]=h;else{h&&(s[d]=a.getHostNode(h),a.unmountComponent(h,!1));var g=r(m,!0);t[d]=g;var y=a.mountComponent(g,i,l,p,c,u);n.push(y)}}for(d in e)!e.hasOwnProperty(d)||t&&t.hasOwnProperty(d)||(h=e[d],s[d]=a.getHostNode(h),a.unmountComponent(h,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var s=e[n];a.unmountComponent(s,t)}}});e.exports=l}).call(t,n(112))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function r(e){if(u===clearTimeout)return clearTimeout(e);if((u===s||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function o(){m&&h&&(m=!1,h.length?f=h.concat(f):g=-1,f.length&&i())}function i(){if(!m){var e=a(o);m=!0;for(var t=f.length;t;){for(h=f,f=[];++g<t;)h&&h[g].run();g=-1,t=f.length}h=null,m=!1,r(e)}}function l(e,t){this.fun=e,this.array=t}function p(){}var c,u,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{u="function"==typeof clearTimeout?clearTimeout:s}catch(e){u=s}}();var h,f=[],m=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new l(e,t)),1!==f.length||m||a(i)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=p,d.addListener=p,d.once=p,d.off=p,d.removeListener=p,d.removeAllListeners=p,d.emit=p,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";function s(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function a(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function r(e,t){var n;if(null===e||e===!1)n=p.create(r);else if("object"==typeof e){var i=e;!i||"function"!=typeof i.type&&"string"!=typeof i.type?o("130",null==i.type?i.type:typeof i.type,s(i._owner)):void 0,"string"==typeof i.type?n=c.createInternalComponent(i):a(i.type)?(n=new i.type(i),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new u(i)}else"string"==typeof e||"number"==typeof e?n=c.createInstanceForText(e):o("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}var o=n(7),i=n(4),l=n(114),p=n(120),c=n(121),u=(n(8),n(11),function(e){this.construct(e)});i(u.prototype,l.Mixin,{_instantiateReactComponent:r});e.exports=r},function(e,t,n){"use strict";function s(e){}function a(e,t){}function r(e){return!(!e.prototype||!e.prototype.isReactComponent)}function o(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}var i=n(7),l=n(4),p=n(109),c=n(10),u=n(9),d=n(43),h=n(110),f=(n(59),n(115)),m=(n(22),n(56)),g=n(116),y=n(19),b=(n(8),n(118)),w=n(119),v=(n(11),{ImpureClass:0,PureClass:1,StatelessFunctional:2});s.prototype.render=function(){var e=h.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return a(e,t),t};var j=1,x={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,l){this._context=l,this._mountOrder=j++,this._hostParent=t,this._hostContainerInfo=n;var p,c=this._currentElement.props,d=this._processContext(l),f=this._currentElement.type,m=e.getUpdateQueue(),g=r(f),b=this._constructComponent(g,c,d,m);g||null!=b&&null!=b.render?o(f)?this._compositeType=v.PureClass:this._compositeType=v.ImpureClass:(p=b,a(f,p),null===b||b===!1||u.isValidElement(b)?void 0:i("105",f.displayName||f.name||"Component"),b=new s(f),this._compositeType=v.StatelessFunctional);b.props=c,b.context=d,b.refs=y,b.updater=m,this._instance=b,h.set(b,this);var w=b.state;void 0===w&&(b.state=w=null),"object"!=typeof w||Array.isArray(w)?i("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var x;return x=b.unstable_handleError?this.performInitialMountWithErrorHandling(p,t,n,e,l):this.performInitialMount(p,t,n,e,l),b.componentDidMount&&e.getReactMountReady().enqueue(b.componentDidMount,b),x},_constructComponent:function(e,t,n,s){return this._constructComponentWithoutOwner(e,t,n,s)},_constructComponentWithoutOwner:function(e,t,n,s){var a=this._currentElement.type;return e?new a(t,n,s):a(t,n,s)},performInitialMountWithErrorHandling:function(e,t,n,s,a){var r,o=s.checkpoint();try{r=this.performInitialMount(e,t,n,s,a)}catch(i){s.rollback(o),this._instance.unstable_handleError(i),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),o=s.checkpoint(),this._renderedComponent.unmountComponent(!0),s.rollback(o),r=this.performInitialMount(e,t,n,s,a)}return r},performInitialMount:function(e,t,n,s,a){var r=this._instance,o=0;r.componentWillMount&&(r.componentWillMount(),this._pendingStateQueue&&(r.state=this._processPendingState(r.props,r.context))),void 0===e&&(e=this._renderValidatedComponent());var i=f.getType(e);this._renderedNodeType=i;var l=this._instantiateReactComponent(e,i!==f.EMPTY);this._renderedComponent=l;var p=m.mountComponent(l,s,t,n,this._processChildContext(a),o);return p},getHostNode:function(){return m.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";d.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(m.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,h.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return y;var s={};for(var a in n)s[a]=e[a];return s},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t,n=this._currentElement.type,s=this._instance;if(s.getChildContext&&(t=s.getChildContext()),t){"object"!=typeof n.childContextTypes?i("107",this.getName()||"ReactCompositeComponent"):void 0;for(var a in t)a in n.childContextTypes?void 0:i("108",this.getName()||"ReactCompositeComponent",a);return l({},e,t)}return e},_checkContextTypes:function(e,t,n){g(e,t,n,this.getName(),null,this._debugID)},receiveComponent:function(e,t,n){var s=this._currentElement,a=this._context;this._pendingElement=null,this.updateComponent(t,s,e,a,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?m.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,s,a){var r=this._instance;null==r?i("136",this.getName()||"ReactCompositeComponent"):void 0;var o,l=!1;this._context===a?o=r.context:(o=this._processContext(a),l=!0);var p=t.props,c=n.props;t!==n&&(l=!0),l&&r.componentWillReceiveProps&&r.componentWillReceiveProps(c,o);var u=this._processPendingState(c,o),d=!0;this._pendingForceUpdate||(r.shouldComponentUpdate?d=r.shouldComponentUpdate(c,u,o):this._compositeType===v.PureClass&&(d=!b(p,c)||!b(r.state,u))),this._updateBatchNumber=null,d?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,c,u,o,e,a)):(this._currentElement=n,this._context=a,r.props=c,r.state=u,r.context=o)},_processPendingState:function(e,t){var n=this._instance,s=this._pendingStateQueue,a=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!s)return n.state;if(a&&1===s.length)return s[0];for(var r=l({},a?s[0]:n.state),o=a?1:0;o<s.length;o++){var i=s[o];l(r,"function"==typeof i?i.call(n,r,e,t):i)}return r},_performComponentUpdate:function(e,t,n,s,a,r){var o,i,l,p=this._instance,c=Boolean(p.componentDidUpdate);c&&(o=p.props,i=p.state,l=p.context),p.componentWillUpdate&&p.componentWillUpdate(t,n,s),this._currentElement=e,this._context=r,p.props=t,p.state=n,p.context=s,this._updateRenderedComponent(a,r),c&&a.getReactMountReady().enqueue(p.componentDidUpdate.bind(p,o,i,l),p)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,s=n._currentElement,a=this._renderValidatedComponent(),r=0;if(w(s,a))m.receiveComponent(n,a,e,this._processChildContext(t));else{var o=m.getHostNode(n);m.unmountComponent(n,!1);var i=f.getType(a);this._renderedNodeType=i;var l=this._instantiateReactComponent(a,i!==f.EMPTY);this._renderedComponent=l;var p=m.mountComponent(l,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),r);this._replaceNodeWithMarkup(o,p,n)}},_replaceNodeWithMarkup:function(e,t,n){p.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e,t=this._instance;return e=t.render()},_renderValidatedComponent:function(){var e;if(this._compositeType!==v.StatelessFunctional){c.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{c.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||e===!1||u.isValidElement(e)?void 0:i("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n?i("110"):void 0;var s=t.getPublicInstance(),a=n.refs===y?n.refs={}:n.refs;a[e]=s},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===v.StatelessFunctional?null:e},_instantiateReactComponent:null},_={Mixin:x};e.exports=_},function(e,t,n){"use strict";var s=n(7),a=n(9),r=(n(8),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||e===!1?r.EMPTY:a.isValidElement(e)?"function"==typeof e.type?r.COMPOSITE:r.HOST:void s("26",e)}});e.exports=r},function(e,t,n){(function(t){"use strict";function s(e,t,n,s,l,p){for(var c in e)if(e.hasOwnProperty(c)){var u;try{"function"!=typeof e[c]?a("84",s||"React class",r[n],c):void 0,u=e[c](t,c,s,n,null,o)}catch(d){u=d}if(u instanceof Error&&!(u.message in i)){i[u.message]=!0}}}var a=n(7),r=n(24),o=n(28),i=(n(8),n(11),{});e.exports=s}).call(t,n(112))},function(e,t,n){"use strict";function s(e){var t=Function.prototype.toString,n=Object.prototype.hasOwnProperty,s=RegExp("^"+t.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var a=t.call(e);return s.test(a)}catch(r){return!1}}function a(e){return"."+e}function r(e){return parseInt(e.substr(1),10)}function o(e){if(_)return y.get(e);var t=a(e);return w[t]}function i(e){if(_)y["delete"](e);else{var t=a(e);delete w[t]}}function l(e,t,n){var s={element:t,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0};if(_)y.set(e,s);else{var r=a(e);w[r]=s}}function p(e){if(_)b.add(e);else{var t=a(e);v[t]=!0}}function c(e){if(_)b["delete"](e);else{var t=a(e);delete v[t]}}function u(){return _?Array.from(y.keys()):Object.keys(w).map(r)}function d(){return _?Array.from(b.keys()):Object.keys(v).map(r)}function h(e){var t=o(e);if(t){var n=t.childIDs;i(e),n.forEach(h)}}function f(e,t,n){return"\n    in "+e+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")}function m(e){return null==e?"#empty":"string"==typeof e||"number"==typeof e?"#text":"string"==typeof e.type?e.type:e.type.displayName||e.type.name||"Unknown"}function g(e){var t,n=E.getDisplayName(e),s=E.getElement(e),a=E.getOwnerID(e);return a&&(t=E.getDisplayName(a)),f(n,s&&s._source,t)}var y,b,w,v,j=n(7),x=n(10),_=(n(8),n(11),"function"==typeof Array.from&&"function"==typeof Map&&s(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&s(Map.prototype.keys)&&"function"==typeof Set&&s(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&s(Set.prototype.keys));_?(y=new Map,b=new Set):(w={},v={});var k=[],E={onSetChildren:function(e,t){var n=o(e);n.childIDs=t;for(var s=0;s<t.length;s++){var a=t[s],r=o(a);r?void 0:j("140"),null==r.childIDs&&"object"==typeof r.element&&null!=r.element?j("141"):void 0,r.isMounted?void 0:j("71"),null==r.parentID&&(r.parentID=e),r.parentID!==e?j("142",a,r.parentID,e):void 0}},onBeforeMountComponent:function(e,t,n){l(e,t,n)},onBeforeUpdateComponent:function(e,t){var n=o(e);n&&n.isMounted&&(n.element=t)},onMountComponent:function(e){var t=o(e);t.isMounted=!0;var n=0===t.parentID;n&&p(e)},onUpdateComponent:function(e){var t=o(e);t&&t.isMounted&&t.updateCount++},onUnmountComponent:function(e){var t=o(e);if(t){t.isMounted=!1;var n=0===t.parentID;n&&c(e)}k.push(e)},purgeUnmountedComponents:function(){if(!E._preventPurging){for(var e=0;e<k.length;e++){var t=k[e];h(t)}k.length=0}},isMounted:function(e){var t=o(e);return!!t&&t.isMounted},getCurrentStackAddendum:function(e){var t="";if(e){var n=e.type,s="function"==typeof n?n.displayName||n.name:n,a=e._owner;t+=f(s||"Unknown",e._source,a&&a.getName())}var r=x.current,o=r&&r._debugID;return t+=E.getStackAddendumByID(o)},getStackAddendumByID:function(e){for(var t="";e;)t+=g(e),e=E.getParentID(e);return t},getChildIDs:function(e){var t=o(e);return t?t.childIDs:[]},getDisplayName:function(e){var t=E.getElement(e);return t?m(t):null},getElement:function(e){var t=o(e);return t?t.element:null},getOwnerID:function(e){var t=E.getElement(e);return t&&t._owner?t._owner._debugID:null},getParentID:function(e){var t=o(e);return t?t.parentID:null},getSource:function(e){var t=o(e),n=t?t.element:null,s=null!=n?n._source:null;return s},getText:function(e){var t=E.getElement(e);return"string"==typeof t?t:"number"==typeof t?""+t:null},getUpdateCount:function(e){var t=o(e);return t?t.updateCount:0},getRegisteredIDs:u,getRootIDs:d};e.exports=E},function(e,t){"use strict";function n(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function s(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(var o=0;o<s.length;o++)if(!a.call(t,s[o])||!n(e[s[o]],t[s[o]]))return!1;return!0}var a=Object.prototype.hasOwnProperty;e.exports=s},function(e,t){"use strict";function n(e,t){var n=null===e||e===!1,s=null===t||t===!1;if(n||s)return n===s;var a=typeof e,r=typeof t;return"string"===a||"number"===a?"string"===r||"number"===r:"object"===r&&e.type===t.type&&e.key===t.key}e.exports=n},function(e,t){"use strict";var n,s={injectEmptyComponentFactory:function(e){n=e}},a={create:function(e){return n(e)}};a.injection=s,e.exports=a},function(e,t,n){"use strict";function s(e){return l?void 0:o("111",e.type),new l(e)}function a(e){return new c(e)}function r(e){return e instanceof c}var o=n(7),i=n(4),l=(n(8),null),p={},c=null,u={injectGenericComponentClass:function(e){l=e},injectTextComponentClass:function(e){c=e},injectComponentClasses:function(e){i(p,e)}},d={createInternalComponent:s,createInstanceForText:a,isTextComponent:r,injection:u};e.exports=d},function(e,t,n){(function(t){"use strict";function s(e,t,n,s){if(e&&"object"==typeof e){var a=e,r=void 0===a[n];r&&null!=t&&(a[n]=t)}}function a(e,t){if(null==e)return e;var n={};return r(e,s,n),n}var r=(n(16),n(14));n(11);e.exports=a}).call(t,n(112))},function(e,t,n){"use strict";function s(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new i(this)}var a=n(4),r=n(6),o=n(60),i=(n(59),n(124)),l=[],p={enqueue:function(){}},c={getTransactionWrappers:function(){return l},getReactMountReady:function(){return p},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};a(s.prototype,o.Mixin,c),r.addPoolingTo(s),e.exports=s},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){}var r=n(125),o=(n(60),n(11),function(){function e(t){s(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&r.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()?r.enqueueForceUpdate(e):a(e,"forceUpdate")},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()?r.enqueueReplaceState(e,t):a(e,"replaceState")},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()?r.enqueueSetState(e,t):a(e,"setState")},e}());e.exports=o},function(e,t,n){"use strict";function s(e){l.enqueueUpdate(e)}function a(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,s=Object.keys(e);return s.length>0&&s.length<20?n+" (keys: "+s.join(", ")+")":n}function r(e,t){var n=i.get(e);if(!n){return null}return n}var o=n(7),i=(n(10),n(110)),l=(n(59),n(53)),p=(n(8),n(11),{isMounted:function(e){var t=i.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){p.validateCallback(t,n);var a=r(e);return a?(a._pendingCallbacks?a._pendingCallbacks.push(t):a._pendingCallbacks=[t],void s(a)):null},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],s(e)},enqueueForceUpdate:function(e){var t=r(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,s(t))},enqueueReplaceState:function(e,t){var n=r(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,s(n))},enqueueSetState:function(e,t){var n=r(e,"setState");if(n){var a=n._pendingStateQueue||(n._pendingStateQueue=[]);a.push(t),s(n)}},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,s(e)},validateCallback:function(e,t){e&&"function"!=typeof e?o("122",t,a(e)):void 0}});e.exports=p},function(e,t,n){"use strict";var s=(n(4),n(12)),a=(n(11),s);e.exports=a},function(e,t,n){"use strict";var s=n(4),a=n(73),r=n(33),o=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};s(o.prototype,{mountComponent:function(e,t,n,s){var o=n._idCounter++;this._domID=o,this._hostParent=t,this._hostContainerInfo=n;var i=" react-empty: "+this._domID+" ";if(e.useCreateElement){var l=n._ownerDocument,p=l.createComment(i);return r.precacheNode(this,p),a(p)}return e.renderToStaticMarkup?"":"<!--"+i+"-->"},receiveComponent:function(){},getHostNode:function(){return r.getNodeFromInstance(this)},unmountComponent:function(){r.uncacheNode(this)}}),e.exports=o},function(e,t,n){"use strict";function s(e,t){"_hostNode"in e?void 0:l("33"),"_hostNode"in t?void 0:l("33");for(var n=0,s=e;s;s=s._hostParent)n++;for(var a=0,r=t;r;r=r._hostParent)a++;for(;n-a>0;)e=e._hostParent,n--;for(;a-n>0;)t=t._hostParent,a--;for(var o=n;o--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function a(e,t){"_hostNode"in e?void 0:l("35"),"_hostNode"in t?void 0:l("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function r(e){return"_hostNode"in e?void 0:l("36"),e._hostParent}function o(e,t,n){for(var s=[];e;)s.push(e),e=e._hostParent;var a;for(a=s.length;a-- >0;)t(s[a],!1,n);for(a=0;a<s.length;a++)t(s[a],!0,n)}function i(e,t,n,a,r){for(var o=e&&t?s(e,t):null,i=[];e&&e!==o;)i.push(e),
e=e._hostParent;for(var l=[];t&&t!==o;)l.push(t),t=t._hostParent;var p;for(p=0;p<i.length;p++)n(i[p],!0,a);for(p=l.length;p-- >0;)n(l[p],!1,r)}var l=n(7);n(8);e.exports={isAncestor:a,getLowestCommonAncestor:s,getParentInstance:r,traverseTwoPhase:o,traverseEnterLeave:i}},function(e,t,n){"use strict";var s=n(7),a=n(4),r=n(72),o=n(73),i=n(33),l=n(78),p=(n(8),n(126),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});a(p.prototype,{mountComponent:function(e,t,n,s){var a=n._idCounter++,r=" react-text: "+a+" ",p=" /react-text ";if(this._domID=a,this._hostParent=t,e.useCreateElement){var c=n._ownerDocument,u=c.createComment(r),d=c.createComment(p),h=o(c.createDocumentFragment());return o.queueChild(h,o(u)),this._stringText&&o.queueChild(h,o(c.createTextNode(this._stringText))),o.queueChild(h,o(d)),i.precacheNode(this,u),this._closingComment=d,h}var f=l(this._stringText);return e.renderToStaticMarkup?f:"<!--"+r+"-->"+f+"<!--"+p+"-->"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var s=this.getHostNode();r.replaceDelimitedText(s[0],s[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=i.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n?s("67",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,i.uncacheNode(this)}}),e.exports=p},function(e,t,n){"use strict";function s(){this.reinitializeTransaction()}var a=n(4),r=n(53),o=n(60),i=n(12),l={initialize:i,close:function(){d.isBatchingUpdates=!1}},p={initialize:i,close:r.flushBatchedUpdates.bind(r)},c=[p,l];a(s.prototype,o.Mixin,{getTransactionWrappers:function(){return c}});var u=new s,d={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,s,a,r){var o=d.isBatchingUpdates;d.isBatchingUpdates=!0,o?e(t,n,s,a,r):u.perform(e,null,t,n,s,a,r)}};e.exports=d},function(e,t,n){"use strict";function s(e){for(;e._hostParent;)e=e._hostParent;var t=u.getNodeFromInstance(e),n=t.parentNode;return u.getClosestInstanceFromNode(n)}function a(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function r(e){var t=h(e.nativeEvent),n=u.getClosestInstanceFromNode(t),a=n;do e.ancestors.push(a),a=a&&s(a);while(a);for(var r=0;r<e.ancestors.length;r++)n=e.ancestors[r],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,h(e.nativeEvent))}function o(e){var t=f(window);e(t)}var i=n(4),l=n(132),p=n(46),c=n(6),u=n(33),d=n(53),h=n(61),f=n(133);i(a.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(a,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:p.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){var s=n;return s?l.listen(s,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var s=n;return s?l.capture(s,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=o.bind(null,e);l.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=a.getPooled(e,t);try{d.batchedUpdates(r,n)}finally{a.release(n)}}}};e.exports=m},function(e,t,n){"use strict";var s=n(12),a={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:s}},registerDefault:function(){}};e.exports=a},function(e,t){"use strict";function n(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=n},function(e,t,n){"use strict";var s=n(34),a=n(40),r=n(42),o=n(109),i=n(21),l=n(120),p=n(98),c=n(121),u=n(53),d={Component:o.injection,Class:i.injection,DOMProperty:s.injection,EmptyComponent:l.injection,EventPluginHub:a.injection,EventPluginUtils:r.injection,EventEmitter:p.injection,HostComponent:c.injection,Updates:u.injection};e.exports=d},function(e,t,n){"use strict";function s(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.useCreateElement=e}var a=n(4),r=n(54),o=n(6),i=n(98),l=n(136),p=(n(59),n(60)),c=n(125),u={initialize:l.getSelectionInformation,close:l.restoreSelection},d={initialize:function(){var e=i.isEnabled();return i.setEnabled(!1),e},close:function(e){i.setEnabled(e)}},h={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f=[u,d,h],m={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null}};a(s.prototype,p.Mixin,m),o.addPoolingTo(s),e.exports=s},function(e,t,n){"use strict";function s(e){return r(document.documentElement,e)}var a=n(137),r=n(139),o=n(87),i=n(142),l={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=i();return{focusedElem:e,selectionRange:l.hasSelectionCapabilities(e)?l.getSelection(e):null}},restoreSelection:function(e){var t=i(),n=e.focusedElem,a=e.selectionRange;t!==n&&s(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,a),o(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=a.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,s=t.end;if(void 0===s&&(s=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(s,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",n),r.moveEnd("character",s-n),r.select()}else a.setOffsets(e,t)}};e.exports=l},function(e,t,n){"use strict";function s(e,t,n,s){return e===n&&t===s}function a(e){var t=document.selection,n=t.createRange(),s=n.text.length,a=n.duplicate();a.moveToElementText(e),a.setEndPoint("EndToStart",n);var r=a.text.length,o=r+s;return{start:r,end:o}}function r(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,a=t.anchorOffset,r=t.focusNode,o=t.focusOffset,i=t.getRangeAt(0);try{i.startContainer.nodeType,i.endContainer.nodeType}catch(l){return null}var p=s(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=p?0:i.toString().length,u=i.cloneRange();u.selectNodeContents(e),u.setEnd(i.startContainer,i.startOffset);var d=s(u.startContainer,u.startOffset,u.endContainer,u.endOffset),h=d?0:u.toString().length,f=h+c,m=document.createRange();m.setStart(n,a),m.setEnd(r,o);var g=m.collapsed;return{start:g?f:h,end:g?h:f}}function o(e,t){var n,s,a=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,s=n):t.start>t.end?(n=t.end,s=t.start):(n=t.start,s=t.end),a.moveToElementText(e),a.moveStart("character",n),a.setEndPoint("EndToStart",a),a.moveEnd("character",s-n),a.select()}function i(e,t){if(window.getSelection){var n=window.getSelection(),s=e[c()].length,a=Math.min(t.start,s),r=void 0===t.end?a:Math.min(t.end,s);if(!n.extend&&a>r){var o=r;r=a,a=o}var i=p(e,a),l=p(e,r);if(i&&l){var u=document.createRange();u.setStart(i.node,i.offset),n.removeAllRanges(),a>r?(n.addRange(u),n.extend(l.node,l.offset)):(u.setEnd(l.node,l.offset),n.addRange(u))}}}var l=n(46),p=n(138),c=n(48),u=l.canUseDOM&&"selection"in document&&!("getSelection"in window),d={getOffsets:u?a:r,setOffsets:u?o:i};e.exports=d},function(e,t){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function s(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function a(e,t){for(var a=n(e),r=0,o=0;a;){if(3===a.nodeType){if(o=r+a.textContent.length,r<=t&&o>=t)return{node:a,offset:t-r};r=o}a=n(s(a))}}e.exports=a},function(e,t,n){"use strict";function s(e,t){return!(!e||!t)&&(e===t||!a(e)&&(a(t)?s(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var a=n(140);e.exports=s},function(e,t,n){"use strict";function s(e){return a(e)&&3==e.nodeType}var a=n(141);e.exports=s},function(e,t){"use strict";function n(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=n},function(e,t){"use strict";function n(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}e.exports=n},function(e,t){"use strict";var n={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},s={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering","in":0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},a={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n.xlink,xlinkArcrole:n.xlink,xlinkHref:n.xlink,xlinkRole:n.xlink,xlinkShow:n.xlink,xlinkTitle:n.xlink,xlinkType:n.xlink,xmlBase:n.xml,xmlLang:n.xml,xmlSpace:n.xml},DOMAttributeNames:{}};Object.keys(s).forEach(function(e){a.Properties[e]=0,s[e]&&(a.DOMAttributeNames[e]=s[e])}),e.exports=a},function(e,t,n){"use strict";function s(e){if("selectionStart"in e&&p.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function a(e,t){if(j||null==b||b!==u())return null;var n=s(b);if(!v||!f(v,n)){v=n;var a=c.getPooled(y.select,w,e,t);return a.type="select",a.target=b,o.accumulateTwoPhaseDispatches(a),a}return null}var r=n(38),o=n(39),i=n(46),l=n(33),p=n(136),c=n(50),u=n(142),d=n(63),h=n(25),f=n(118),m=r.topLevelTypes,g=i.canUseDOM&&"documentMode"in document&&document.documentMode<=11,y={select:{phasedRegistrationNames:{bubbled:h({onSelect:null}),captured:h({onSelectCapture:null})},dependencies:[m.topBlur,m.topContextMenu,m.topFocus,m.topKeyDown,m.topKeyUp,m.topMouseDown,m.topMouseUp,m.topSelectionChange]}},b=null,w=null,v=null,j=!1,x=!1,_=h({onSelect:null}),k={eventTypes:y,extractEvents:function(e,t,n,s){if(!x)return null;var r=t?l.getNodeFromInstance(t):window;switch(e){case m.topFocus:(d(r)||"true"===r.contentEditable)&&(b=r,w=t,v=null);break;case m.topBlur:b=null,w=null,v=null;break;case m.topMouseDown:j=!0;break;case m.topContextMenu:case m.topMouseUp:return j=!1,a(n,s);case m.topSelectionChange:if(g)break;case m.topKeyDown:case m.topKeyUp:return a(n,s)}return null},didPutListener:function(e,t,n){t===_&&(x=!0)}};e.exports=k},function(e,t,n){"use strict";function s(e){return"."+e._rootNodeID}var a=n(7),r=n(38),o=n(132),i=n(39),l=n(33),p=n(146),c=n(147),u=n(50),d=n(148),h=n(149),f=n(66),m=n(152),g=n(153),y=n(154),b=n(67),w=n(155),v=n(12),j=n(150),x=(n(8),n(25)),_=r.topLevelTypes,k={abort:{phasedRegistrationNames:{bubbled:x({onAbort:!0}),captured:x({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:x({onAnimationEnd:!0}),captured:x({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:x({onAnimationIteration:!0}),captured:x({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:x({onAnimationStart:!0}),captured:x({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:x({onBlur:!0}),captured:x({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:x({onCanPlay:!0}),captured:x({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:x({onCanPlayThrough:!0}),captured:x({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:x({onClick:!0}),captured:x({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:x({onContextMenu:!0}),captured:x({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:x({onCopy:!0}),captured:x({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:x({onCut:!0}),captured:x({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:x({onDoubleClick:!0}),captured:x({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:x({onDrag:!0}),captured:x({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:x({onDragEnd:!0}),captured:x({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:x({onDragEnter:!0}),captured:x({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:x({onDragExit:!0}),captured:x({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:x({onDragLeave:!0}),captured:x({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:x({onDragOver:!0}),captured:x({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:x({onDragStart:!0}),captured:x({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:x({onDrop:!0}),captured:x({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:x({onDurationChange:!0}),captured:x({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:x({onEmptied:!0}),captured:x({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:x({onEncrypted:!0}),captured:x({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:x({onEnded:!0}),captured:x({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:x({onError:!0}),captured:x({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:x({onFocus:!0}),captured:x({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:x({onInput:!0}),captured:x({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:x({onInvalid:!0}),captured:x({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:x({onKeyDown:!0}),captured:x({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:x({onKeyPress:!0}),captured:x({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:x({onKeyUp:!0}),captured:x({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:x({onLoad:!0}),captured:x({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:x({onLoadedData:!0}),captured:x({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:x({onLoadedMetadata:!0}),captured:x({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:x({onLoadStart:!0}),captured:x({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:x({onMouseDown:!0}),captured:x({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:x({onMouseMove:!0}),captured:x({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:x({onMouseOut:!0}),captured:x({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:x({onMouseOver:!0}),captured:x({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:x({onMouseUp:!0}),captured:x({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:x({onPaste:!0}),captured:x({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:x({onPause:!0}),captured:x({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:x({onPlay:!0}),captured:x({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:x({onPlaying:!0}),captured:x({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:x({onProgress:!0}),captured:x({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:x({onRateChange:!0}),captured:x({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:x({onReset:!0}),captured:x({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:x({onScroll:!0}),captured:x({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:x({onSeeked:!0}),captured:x({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:x({onSeeking:!0}),captured:x({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:x({onStalled:!0}),captured:x({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:x({onSubmit:!0}),captured:x({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:x({onSuspend:!0}),captured:x({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:x({onTimeUpdate:!0}),captured:x({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:x({onTouchCancel:!0}),captured:x({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:x({onTouchEnd:!0}),captured:x({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:x({onTouchMove:!0}),captured:x({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:x({onTouchStart:!0}),captured:x({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:x({onTransitionEnd:!0}),captured:x({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:x({onVolumeChange:!0}),captured:x({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:x({onWaiting:!0}),captured:x({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:x({onWheel:!0}),captured:x({onWheelCapture:!0})}}},E={topAbort:k.abort,topAnimationEnd:k.animationEnd,topAnimationIteration:k.animationIteration,topAnimationStart:k.animationStart,topBlur:k.blur,topCanPlay:k.canPlay,topCanPlayThrough:k.canPlayThrough,topClick:k.click,topContextMenu:k.contextMenu,topCopy:k.copy,topCut:k.cut,topDoubleClick:k.doubleClick,topDrag:k.drag,topDragEnd:k.dragEnd,topDragEnter:k.dragEnter,topDragExit:k.dragExit,topDragLeave:k.dragLeave,topDragOver:k.dragOver,topDragStart:k.dragStart,topDrop:k.drop,topDurationChange:k.durationChange,topEmptied:k.emptied,topEncrypted:k.encrypted,topEnded:k.ended,topError:k.error,topFocus:k.focus,topInput:k.input,topInvalid:k.invalid,topKeyDown:k.keyDown,topKeyPress:k.keyPress,topKeyUp:k.keyUp,topLoad:k.load,topLoadedData:k.loadedData,topLoadedMetadata:k.loadedMetadata,topLoadStart:k.loadStart,topMouseDown:k.mouseDown,topMouseMove:k.mouseMove,topMouseOut:k.mouseOut,topMouseOver:k.mouseOver,topMouseUp:k.mouseUp,topPaste:k.paste,topPause:k.pause,topPlay:k.play,topPlaying:k.playing,topProgress:k.progress,topRateChange:k.rateChange,topReset:k.reset,topScroll:k.scroll,topSeeked:k.seeked,topSeeking:k.seeking,topStalled:k.stalled,topSubmit:k.submit,topSuspend:k.suspend,topTimeUpdate:k.timeUpdate,topTouchCancel:k.touchCancel,topTouchEnd:k.touchEnd,topTouchMove:k.touchMove,topTouchStart:k.touchStart,topTransitionEnd:k.transitionEnd,topVolumeChange:k.volumeChange,topWaiting:k.waiting,topWheel:k.wheel};for(var A in E)E[A].dependencies=[A];var T=x({onClick:null}),S={},C={eventTypes:k,extractEvents:function(e,t,n,s){var r=E[e];if(!r)return null;var o;switch(e){case _.topAbort:case _.topCanPlay:case _.topCanPlayThrough:case _.topDurationChange:case _.topEmptied:case _.topEncrypted:case _.topEnded:case _.topError:case _.topInput:case _.topInvalid:case _.topLoad:case _.topLoadedData:case _.topLoadedMetadata:case _.topLoadStart:case _.topPause:case _.topPlay:case _.topPlaying:case _.topProgress:case _.topRateChange:case _.topReset:case _.topSeeked:case _.topSeeking:case _.topStalled:case _.topSubmit:case _.topSuspend:case _.topTimeUpdate:case _.topVolumeChange:case _.topWaiting:o=u;break;case _.topKeyPress:if(0===j(n))return null;case _.topKeyDown:case _.topKeyUp:o=h;break;case _.topBlur:case _.topFocus:o=d;break;case _.topClick:if(2===n.button)return null;case _.topContextMenu:case _.topDoubleClick:case _.topMouseDown:case _.topMouseMove:case _.topMouseOut:case _.topMouseOver:case _.topMouseUp:o=f;break;case _.topDrag:case _.topDragEnd:case _.topDragEnter:case _.topDragExit:case _.topDragLeave:case _.topDragOver:case _.topDragStart:case _.topDrop:o=m;break;case _.topTouchCancel:case _.topTouchEnd:case _.topTouchMove:case _.topTouchStart:o=g;break;case _.topAnimationEnd:case _.topAnimationIteration:case _.topAnimationStart:o=p;break;case _.topTransitionEnd:o=y;break;case _.topScroll:o=b;break;case _.topWheel:o=w;break;case _.topCopy:case _.topCut:case _.topPaste:o=c}o?void 0:a("86",e);var l=o.getPooled(r,t,n,s);return i.accumulateTwoPhaseDispatches(l),l},didPutListener:function(e,t,n){if(t===T){var a=s(e),r=l.getNodeFromInstance(e);S[a]||(S[a]=o.listen(r,"click",v))}},willDeleteListener:function(e,t){if(t===T){var n=s(e);S[n].remove(),delete S[n]}}};e.exports=C},function(e,t,n){"use strict";function s(e,t,n,s){return a.call(this,e,t,n,s)}var a=n(50),r={animationName:null,elapsedTime:null,pseudoElement:null};a.augmentClass(s,r),e.exports=s},function(e,t,n){"use strict";function s(e,t,n,s){return a.call(this,e,t,n,s)}var a=n(50),r={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};a.augmentClass(s,r),e.exports=s},function(e,t,n){"use strict";function s(e,t,n,s){return a.call(this,e,t,n,s)}var a=n(67),r={relatedTarget:null};a.augmentClass(s,r),e.exports=s},function(e,t,n){"use strict";function s(e,t,n,s){return a.call(this,e,t,n,s)}var a=n(67),r=n(150),o=n(151),i=n(69),l={key:o,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:i,charCode:function(e){return"keypress"===e.type?r(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?r(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};a.augmentClass(s,l),e.exports=s},function(e,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}e.exports=n},function(e,t,n){"use strict";function s(e){if(e.key){var t=r[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=a(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?o[e.keyCode]||"Unidentified":""}var a=n(150),r={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=s},function(e,t,n){"use strict";function s(e,t,n,s){return a.call(this,e,t,n,s)}var a=n(66),r={dataTransfer:null};a.augmentClass(s,r),e.exports=s},function(e,t,n){"use strict";function s(e,t,n,s){return a.call(this,e,t,n,s)}var a=n(67),r=n(69),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:r};a.augmentClass(s,o),e.exports=s},function(e,t,n){"use strict";function s(e,t,n,s){return a.call(this,e,t,n,s)}var a=n(50),r={propertyName:null,elapsedTime:null,pseudoElement:null};a.augmentClass(s,r),e.exports=s},function(e,t,n){"use strict";function s(e,t,n,s){return a.call(this,e,t,n,s)}var a=n(66),r={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};a.augmentClass(s,r),e.exports=s},function(e,t,n){"use strict";function s(e,t){for(var n=Math.min(e.length,t.length),s=0;s<n;s++)if(e.charAt(s)!==t.charAt(s))return s;return e.length===t.length?-1:n}function a(e){return e?e.nodeType===M?e.documentElement:e.firstChild:null}function r(e){return e.getAttribute&&e.getAttribute(O)||""}function o(e,t,n,s,a){var r;if(j.logTopLevelRenders){var o=e._currentElement.props,i=o.type;r="React mount: "+("string"==typeof i?i:i.displayName||i.name),console.time(r)}var l=k.mountComponent(e,n,null,b(e,t),a,0);r&&console.timeEnd(r),e._renderedComponent._topLevelWrapper=e,U._mountImageIntoNode(l,t,e,s,n)}function i(e,t,n,s){var a=A.ReactReconcileTransaction.getPooled(!n&&w.useCreateElement);a.perform(o,null,e,t,a,n,s),A.ReactReconcileTransaction.release(a)}function l(e,t,n){for(k.unmountComponent(e,n),t.nodeType===M&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function p(e){var t=a(e);if(t){var n=y.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function c(e){return!(!e||e.nodeType!==N&&e.nodeType!==M&&e.nodeType!==q)}function u(e){var t=a(e),n=t&&y.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function d(e){var t=u(e);return t?t._hostContainerInfo._topLevelWrapper:null}var h=n(7),f=n(73),m=n(34),g=n(98),y=(n(10),n(33)),b=n(157),w=n(158),v=n(9),j=n(55),x=n(110),_=(n(59),n(159)),k=n(56),E=n(125),A=n(53),T=n(19),S=n(113),C=(n(8),n(75)),P=n(119),O=(n(11),m.ID_ATTRIBUTE_NAME),R=m.ROOT_ATTRIBUTE_NAME,N=1,M=9,q=11,L={},D=1,I=function(){this.rootID=D++};I.prototype.isReactComponent={},I.prototype.render=function(){return this.props};var U={TopLevelWrapper:I,_instancesByReactRootID:L,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,s,a){return U.scrollMonitor(s,function(){E.enqueueElementInternal(e,t,n),a&&E.enqueueCallbackInternal(e,a)}),e},_renderNewRootComponent:function(e,t,n,s){c(t)?void 0:h("37"),g.ensureScrollValueMonitoring();var a=S(e,!1);A.batchedUpdates(i,a,t,n,s);var r=a._instance.rootID;return L[r]=a,a},renderSubtreeIntoContainer:function(e,t,n,s){return null!=e&&x.has(e)?void 0:h("38"),U._renderSubtreeIntoContainer(e,t,n,s)},_renderSubtreeIntoContainer:function(e,t,n,s){E.validateCallback(s,"ReactDOM.render"),v.isValidElement(t)?void 0:h("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var o,i=v(I,null,null,null,null,null,t);if(e){var l=x.get(e);o=l._processChildContext(l._context)}else o=T;var c=d(n);if(c){var u=c._currentElement,f=u.props;if(P(f,t)){var m=c._renderedComponent.getPublicInstance(),g=s&&function(){s.call(m)};return U._updateRootComponent(c,i,o,n,g),
m}U.unmountComponentAtNode(n)}var y=a(n),b=y&&!!r(y),w=p(n),j=b&&!c&&!w,_=U._renderNewRootComponent(i,n,j,o)._renderedComponent.getPublicInstance();return s&&s.call(_),_},render:function(e,t,n){return U._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){c(e)?void 0:h("40");var t=d(e);if(!t){p(e),1===e.nodeType&&e.hasAttribute(R);return!1}return delete L[t._instance.rootID],A.batchedUpdates(l,t,e,!1),!0},_mountImageIntoNode:function(e,t,n,r,o){if(c(t)?void 0:h("41"),r){var i=a(t);if(_.canReuseMarkup(e,i))return void y.precacheNode(n,i);var l=i.getAttribute(_.CHECKSUM_ATTR_NAME);i.removeAttribute(_.CHECKSUM_ATTR_NAME);var p=i.outerHTML;i.setAttribute(_.CHECKSUM_ATTR_NAME,l);var u=e,d=s(u,p),m=" (client) "+u.substring(d-20,d+20)+"\n (server) "+p.substring(d-20,d+20);t.nodeType===M?h("42",m):void 0}if(t.nodeType===M?h("43"):void 0,o.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);f.insertTreeBefore(t,e,null)}else C(t,e),y.precacheNode(n,t.firstChild)}};e.exports=U},function(e,t,n){"use strict";function s(e,t){var n={_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===a?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null};return n}var a=(n(126),9);e.exports=s},function(e,t){"use strict";var n={useCreateElement:!0};e.exports=n},function(e,t,n){"use strict";var s=n(160),a=/\/?>/,r=/^<\!\-\-/,o={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=s(e);return r.test(e)?e:e.replace(a," "+o.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(o.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var a=s(e);return a===n}};e.exports=o},function(e,t){"use strict";function n(e){for(var t=1,n=0,a=0,r=e.length,o=r&-4;a<o;){for(var i=Math.min(a+4096,o);a<i;a+=4)n+=(t+=e.charCodeAt(a))+(t+=e.charCodeAt(a+1))+(t+=e.charCodeAt(a+2))+(t+=e.charCodeAt(a+3));t%=s,n%=s}for(;a<r;a++)n+=t+=e.charCodeAt(a);return t%=s,n%=s,t|n<<16}var s=65521;e.exports=n},function(e,t,n){"use strict";function s(e){if(null==e)return null;if(1===e.nodeType)return e;var t=o.get(e);return t?(t=i(t),t?r.getNodeFromInstance(t):null):void("function"==typeof e.render?a("44"):a("45",Object.keys(e)))}var a=n(7),r=(n(10),n(33)),o=n(110),i=n(162);n(8),n(11);e.exports=s},function(e,t,n){"use strict";function s(e){for(var t;(t=e._renderedNodeType)===a.COMPOSITE;)e=e._renderedComponent;return t===a.HOST?e._renderedComponent:t===a.EMPTY?null:void 0}var a=n(115);e.exports=s},function(e,t,n){"use strict";var s=n(156);e.exports=s.renderSubtreeIntoContainer},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.createMemoryHistory=t.hashHistory=t.browserHistory=t.applyRouterMiddleware=t.formatPattern=t.useRouterHistory=t.match=t.routerShape=t.locationShape=t.PropTypes=t.RoutingContext=t.RouterContext=t.createRoutes=t.useRoutes=t.RouteContext=t.Lifecycle=t.History=t.Route=t.Redirect=t.IndexRoute=t.IndexRedirect=t.withRouter=t.IndexLink=t.Link=t.Router=void 0;var a=n(165);Object.defineProperty(t,"createRoutes",{enumerable:!0,get:function(){return a.createRoutes}});var r=n(166);Object.defineProperty(t,"locationShape",{enumerable:!0,get:function(){return r.locationShape}}),Object.defineProperty(t,"routerShape",{enumerable:!0,get:function(){return r.routerShape}});var o=n(171);Object.defineProperty(t,"formatPattern",{enumerable:!0,get:function(){return o.formatPattern}});var i=n(173),l=s(i),p=n(204),c=s(p),u=n(205),d=s(u),h=n(206),f=s(h),m=n(208),g=s(m),y=n(210),b=s(y),w=n(209),v=s(w),j=n(211),x=s(j),_=n(212),k=s(_),E=n(213),A=s(E),T=n(214),S=s(T),C=n(215),P=s(C),O=n(201),R=s(O),N=n(216),M=s(N),q=s(r),L=n(217),D=s(L),I=n(221),U=s(I),F=n(222),B=s(F),W=n(223),V=s(W),H=n(226),z=s(H),G=n(218),$=s(G);t.Router=l["default"],t.Link=c["default"],t.IndexLink=d["default"],t.withRouter=f["default"],t.IndexRedirect=g["default"],t.IndexRoute=b["default"],t.Redirect=v["default"],t.Route=x["default"],t.History=k["default"],t.Lifecycle=A["default"],t.RouteContext=S["default"],t.useRoutes=P["default"],t.RouterContext=R["default"],t.RoutingContext=M["default"],t.PropTypes=q["default"],t.match=D["default"],t.useRouterHistory=U["default"],t.applyRouterMiddleware=B["default"],t.browserHistory=V["default"],t.hashHistory=z["default"],t.createMemoryHistory=$["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){return null==e||d["default"].isValidElement(e)}function r(e){return a(e)||Array.isArray(e)&&e.every(a)}function o(e,t){return c({},e,t)}function i(e){var t=e.type,n=o(t.defaultProps,e.props);if(n.children){var s=l(n.children,n);s.length&&(n.childRoutes=s),delete n.children}return n}function l(e,t){var n=[];return d["default"].Children.forEach(e,function(e){if(d["default"].isValidElement(e))if(e.type.createRouteFromReactElement){var s=e.type.createRouteFromReactElement(e,t);s&&n.push(s)}else n.push(i(e))}),n}function p(e){return r(e)?e=l(e):e&&!Array.isArray(e)&&(e=[e]),e}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};t.isReactChildren=r,t.createRouteFromReactElement=i,t.createRoutesFromReactChildren=l,t.createRoutes=p;var u=n(2),d=s(u)},function(e,t,n){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.router=t.routes=t.route=t.components=t.component=t.location=t.history=t.falsy=t.locationShape=t.routerShape=void 0;var r=n(2),o=n(167),i=(a(o),n(170)),l=s(i),p=n(168),c=(a(p),r.PropTypes.func),u=r.PropTypes.object,d=r.PropTypes.shape,h=r.PropTypes.string,f=t.routerShape=d({push:c.isRequired,replace:c.isRequired,go:c.isRequired,goBack:c.isRequired,goForward:c.isRequired,setRouteLeaveHook:c.isRequired,isActive:c.isRequired}),m=t.locationShape=d({pathname:h.isRequired,search:h.isRequired,state:u,action:h.isRequired,key:h}),g=t.falsy=l.falsy,y=t.history=l.history,b=t.location=m,w=t.component=l.component,v=t.components=l.components,j=t.route=l.route,x=(t.routes=l.routes,t.router=f),_={falsy:g,history:y,location:b,component:w,components:v,route:j,router:x};t["default"]=_},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.canUseMembrane=void 0;var a=n(168),r=(s(a),t.canUseMembrane=!1,function(e){return e});t["default"]=r},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(t.indexOf("deprecated")!==-1){if(l[t])return;l[t]=!0}t="[react-router] "+t;for(var n=arguments.length,s=Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a];i["default"].apply(void 0,[e,t].concat(s))}function r(){l={}}t.__esModule=!0,t["default"]=a,t._resetWarned=r;var o=n(169),i=s(o),l={}},function(e,t,n){"use strict";var s=function(){};e.exports=s},function(e,t,n){"use strict";function s(e,t,n){if(e[t])return new Error("<"+n+'> should not have a "'+t+'" prop')}t.__esModule=!0,t.routes=t.route=t.components=t.component=t.history=void 0,t.falsy=s;var a=n(2),r=a.PropTypes.func,o=a.PropTypes.object,i=a.PropTypes.arrayOf,l=a.PropTypes.oneOfType,p=a.PropTypes.element,c=a.PropTypes.shape,u=a.PropTypes.string,d=(t.history=c({listen:r.isRequired,push:r.isRequired,replace:r.isRequired,go:r.isRequired,goBack:r.isRequired,goForward:r.isRequired}),t.component=l([r,u])),h=(t.components=l([d,o]),t.route=l([o,p]));t.routes=l([h,i(h)])},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(e){for(var t="",n=[],s=[],r=void 0,o=0,i=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*\*|\*|\(|\)/g;r=i.exec(e);)r.index!==o&&(s.push(e.slice(o,r.index)),t+=a(e.slice(o,r.index))),r[1]?(t+="([^/]+)",n.push(r[1])):"**"===r[0]?(t+="(.*)",n.push("splat")):"*"===r[0]?(t+="(.*?)",n.push("splat")):"("===r[0]?t+="(?:":")"===r[0]&&(t+=")?"),s.push(r[0]),o=i.lastIndex;return o!==e.length&&(s.push(e.slice(o,e.length)),t+=a(e.slice(o,e.length))),{pattern:e,regexpSource:t,paramNames:n,tokens:s}}function o(e){return h[e]||(h[e]=r(e)),h[e]}function i(e,t){"/"!==e.charAt(0)&&(e="/"+e);var n=o(e),s=n.regexpSource,a=n.paramNames,r=n.tokens;"/"!==e.charAt(e.length-1)&&(s+="/?"),"*"===r[r.length-1]&&(s+="$");var i=t.match(new RegExp("^"+s,"i"));if(null==i)return null;var l=i[0],p=t.substr(l.length);if(p){if("/"!==l.charAt(l.length-1))return null;p="/"+p}return{remainingPathname:p,paramNames:a,paramValues:i.slice(1).map(function(e){return e&&decodeURIComponent(e)})}}function l(e){return o(e).paramNames}function p(e,t){var n=i(e,t);if(!n)return null;var s=n.paramNames,a=n.paramValues,r={};return s.forEach(function(e,t){r[e]=a[t]}),r}function c(e,t){t=t||{};for(var n=o(e),s=n.tokens,a=0,r="",i=0,l=void 0,p=void 0,c=void 0,u=0,h=s.length;u<h;++u)l=s[u],"*"===l||"**"===l?(c=Array.isArray(t.splat)?t.splat[i++]:t.splat,null!=c||a>0?void 0:(0,d["default"])(!1),null!=c&&(r+=encodeURI(c))):"("===l?a+=1:")"===l?a-=1:":"===l.charAt(0)?(p=l.substring(1),c=t[p],null!=c||a>0?void 0:(0,d["default"])(!1),null!=c&&(r+=encodeURIComponent(c))):r+=l;return r.replace(/\/+/g,"/")}t.__esModule=!0,t.compilePattern=o,t.matchPattern=i,t.getParamNames=l,t.getParams=p,t.formatPattern=c;var u=n(172),d=s(u),h=Object.create(null)},function(e,t,n){"use strict";var s=function(e,t,n,s,a,r,o,i){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[n,s,a,r,o,i],c=0;l=new Error(t.replace(/%s/g,function(){return p[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=s},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}function r(e){return!e||!e.__v2_compatible__}function o(e){return e&&e.getCurrentLocation}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l=n(174),p=s(l),c=n(190),u=s(c),d=n(172),h=s(d),f=n(2),m=s(f),g=n(193),y=s(g),b=n(170),w=n(201),v=s(w),j=n(165),x=n(203),_=n(168),k=(s(_),m["default"].PropTypes),E=k.func,A=k.object,T=m["default"].createClass({displayName:"Router",propTypes:{history:A,children:b.routes,routes:b.routes,render:E,createElement:E,onError:E,onUpdate:E,parseQueryString:E,stringifyQuery:E,matchContext:A},getDefaultProps:function(){return{render:function(e){return m["default"].createElement(v["default"],e)}}},getInitialState:function(){return{location:null,routes:null,params:null,components:null}},handleError:function(e){if(!this.props.onError)throw e;this.props.onError.call(this,e)},componentWillMount:function(){var e=this,t=this.props,n=(t.parseQueryString,t.stringifyQuery,this.createRouterObjects()),s=n.history,a=n.transitionManager,r=n.router;this._unlisten=a.listen(function(t,n){t?e.handleError(t):e.setState(n,e.props.onUpdate)}),this.history=s,this.router=r},createRouterObjects:function(){var e=this.props.matchContext;if(e)return e;var t=this.props.history,n=this.props,s=n.routes,a=n.children;o(t)?(0,h["default"])(!1):void 0,r(t)&&(t=this.wrapDeprecatedHistory(t));var i=(0,y["default"])(t,(0,j.createRoutes)(s||a)),l=(0,x.createRouterObject)(t,i),p=(0,x.createRoutingHistory)(t,i);return{history:p,transitionManager:i,router:l}},wrapDeprecatedHistory:function(e){var t=this.props,n=t.parseQueryString,s=t.stringifyQuery,a=void 0;return a=e?function(){return e}:p["default"],(0,u["default"])(a)({parseQueryString:n,stringifyQuery:s})},componentWillReceiveProps:function(e){},componentWillUnmount:function(){this._unlisten&&this._unlisten()},render:function S(){var e=this.state,t=e.location,n=e.routes,s=e.params,r=e.components,o=this.props,l=o.createElement,S=o.render,p=a(o,["createElement","render"]);return null==t?null:(Object.keys(T.propTypes).forEach(function(e){return delete p[e]}),S(i({},p,{history:this.history,router:this.router,location:t,routes:n,params:s,components:r,createElement:l})))}});t["default"]=T,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){return"string"==typeof e&&"/"===e.charAt(0)}function r(){var e=y.getHashPath();return!!a(e)||(y.replaceHashPath("/"+e),!1)}function o(e,t,n){return e+(e.indexOf("?")===-1?"?":"&")+(t+"="+n)}function i(e,t){return e.replace(new RegExp("[?&]?"+t+"=[a-zA-Z0-9]+"),"")}function l(e,t){var n=e.match(new RegExp("\\?.*?\\b"+t+"=(.+?)\\b"));return n&&n[1]}function p(){function e(){var e=y.getHashPath(),t=void 0,n=void 0;T?(t=l(e,T),e=i(e,T),t?n=b.readState(t):(n=null,t=S.createKey(),y.replaceHashPath(o(e,T,t)))):t=n=null;var s=m.parsePath(e);return S.createLocation(c({},s,{state:n}),void 0,t)}function t(t){function n(){r()&&s(e())}var s=t.transitionTo;return r(),y.addEventListener(window,"hashchange",n),function(){y.removeEventListener(window,"hashchange",n)}}function n(e){var t=e.basename,n=e.pathname,s=e.search,a=e.state,r=e.action,i=e.key;if(r!==f.POP){var l=(t||"")+n+s;T?(l=o(l,T,i),b.saveState(i,a)):e.key=e.state=null;var p=y.getHashPath();r===f.PUSH?p!==l&&(window.location.hash=l):p!==l&&y.replaceHashPath(l)}}function s(e){1===++C&&(P=t(S));var n=S.listenBefore(e);return function(){n(),0===--C&&P()}}function a(e){1===++C&&(P=t(S));var n=S.listen(e);return function(){n(),0===--C&&P()}}function p(e){S.push(e)}function u(e){S.replace(e)}function d(e){S.go(e)}function w(e){return"#"+S.createHref(e)}function x(e){1===++C&&(P=t(S)),S.registerTransitionHook(e)}function _(e){S.unregisterTransitionHook(e),0===--C&&P()}function k(e,t){S.pushState(e,t)}function E(e,t){S.replaceState(e,t)}var A=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];g.canUseDOM?void 0:h["default"](!1);var T=A.queryKey;(void 0===T||T)&&(T="string"==typeof T?T:j);var S=v["default"](c({},A,{getCurrentLocation:e,finishTransition:n,saveState:b.saveState})),C=0,P=void 0;y.supportsGoWithoutReloadUsingHash();return c({},S,{listenBefore:s,listen:a,push:p,replace:u,go:d,createHref:w,registerTransitionHook:x,unregisterTransitionHook:_,pushState:k,replaceState:E})}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},u=n(175),d=(s(u),n(172)),h=s(d),f=n(176),m=n(177),g=n(178),y=n(179),b=n(180),w=n(181),v=s(w),j="_k";t["default"]=p,e.exports=t["default"]},169,function(e,t){"use strict";t.__esModule=!0;var n="PUSH";t.PUSH=n;var s="REPLACE";t.REPLACE=s;var a="POP";t.POP=a,t["default"]={PUSH:n,REPLACE:s,POP:a}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.match(/^https?:\/\/[^\/]*/);return null==t?e:e.substring(t[0].length)}function r(e){var t=a(e),n="",s="",r=t.indexOf("#");r!==-1&&(s=t.substring(r),t=t.substring(0,r));var o=t.indexOf("?");return o!==-1&&(n=t.substring(o),t=t.substring(0,o)),""===t&&(t="/"),{pathname:t,search:n,hash:s}}t.__esModule=!0,t.extractPath=a,t.parsePath=r;var o=n(175);s(o)},function(e,t){"use strict";t.__esModule=!0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.canUseDOM=n},function(e,t){"use strict";function n(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function s(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}function a(){return window.location.href.split("#")[1]||""}function r(e){window.location.replace(window.location.pathname+window.location.search+"#"+e)}function o(){return window.location.pathname+window.location.search+window.location.hash}function i(e){e&&window.history.go(e)}function l(e,t){t(window.confirm(e))}function p(){var e=navigator.userAgent;return(e.indexOf("Android 2.")===-1&&e.indexOf("Android 4.0")===-1||e.indexOf("Mobile Safari")===-1||e.indexOf("Chrome")!==-1||e.indexOf("Windows Phone")!==-1)&&(window.history&&"pushState"in window.history)}function c(){var e=navigator.userAgent;return e.indexOf("Firefox")===-1}t.__esModule=!0,t.addEventListener=n,t.removeEventListener=s,t.getHashPath=a,t.replaceHashPath=r,t.getWindowPath=o,t.go=i,t.getUserConfirmation=l,t.supportsHistory=p,t.supportsGoWithoutReloadUsingHash=c},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){return l+e}function r(e,t){try{null==t?window.sessionStorage.removeItem(a(e)):window.sessionStorage.setItem(a(e),JSON.stringify(t))}catch(n){if(n.name===c)return;if(p.indexOf(n.name)>=0&&0===window.sessionStorage.length)return;throw n}}function o(e){var t=void 0;try{t=window.sessionStorage.getItem(a(e))}catch(n){if(n.name===c)return null}if(t)try{return JSON.parse(t)}catch(n){}return null}t.__esModule=!0,t.saveState=r,t.readState=o;var i=n(175),l=(s(i),"@@History/"),p=["QuotaExceededError","QUOTA_EXCEEDED_ERR"],c="SecurityError"},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){function t(e){return l.canUseDOM?void 0:i["default"](!1),n.listen(e)}var n=u["default"](r({getUserConfirmation:p.getUserConfirmation},e,{go:p.go}));return r({},n,{listen:t})}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n(172),i=s(o),l=n(178),p=n(179),c=n(182),u=s(c);t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){return Math.random().toString(36).substr(2,e)}function r(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.key===t.key&&c["default"](e.state,t.state)}function o(){function e(e){return I.push(e),function(){I=I.filter(function(t){return t!==e})}}function t(){return W&&W.action===h.POP?U.indexOf(W.key):B?U.indexOf(B.key):-1}function n(e){var n=t();B=e,B.action===h.PUSH?U=[].concat(U.slice(0,n+1),[B.key]):B.action===h.REPLACE&&(U[n]=B.key),F.forEach(function(e){e(B)})}function s(e){if(F.push(e),B)e(B);else{var t=R();U=[t.key],n(t)}return function(){F=F.filter(function(t){return t!==e})}}function o(e,t){d.loopAsync(I.length,function(t,n,s){y["default"](I[t],e,function(e){null!=e?s(e):n()})},function(e){L&&"string"==typeof e?L(e,function(e){t(e!==!1)}):t(e!==!1)})}function l(e){B&&r(B,e)||(W=e,o(e,function(t){if(W===e)if(t){if(e.action===h.PUSH){var s=x(B),a=x(e);a===s&&c["default"](B.state,e.state)&&(e.action=h.REPLACE)}N(e)!==!1&&n(e)}else if(B&&e.action===h.POP){var r=U.indexOf(B.key),o=U.indexOf(e.key);r!==-1&&o!==-1&&q(r-o)}}))}function p(e){l(k(e,h.PUSH,j()))}function f(e){l(k(e,h.REPLACE,j()))}function g(){q(-1)}function b(){q(1)}function j(){return a(D)}function x(e){if(null==e||"string"==typeof e)return e;var t=e.pathname,n=e.search,s=e.hash,a=t;return n&&(a+=n),s&&(a+=s),a}function _(e){return x(e)}function k(e,t){var n=arguments.length<=2||void 0===arguments[2]?j():arguments[2];return"object"==typeof t&&("string"==typeof e&&(e=u.parsePath(e)),e=i({},e,{state:t}),t=n,n=arguments[3]||j()),m["default"](e,t,n)}function E(e){B?(A(B,e),n(B)):A(R(),e)}function A(e,t){e.state=i({},e.state,t),M(e.key,e.state)}function T(e){I.indexOf(e)===-1&&I.push(e)}function S(e){I=I.filter(function(t){return t!==e})}function C(e,t){"string"==typeof t&&(t=u.parsePath(t)),p(i({state:e},t))}function P(e,t){"string"==typeof t&&(t=u.parsePath(t)),f(i({state:e},t))}var O=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],R=O.getCurrentLocation,N=O.finishTransition,M=O.saveState,q=O.go,L=O.getUserConfirmation,D=O.keyLength;"number"!=typeof D&&(D=v);var I=[],U=[],F=[],B=void 0,W=void 0;return{listenBefore:e,listen:s,transitionTo:l,push:p,replace:f,go:q,goBack:g,goForward:b,createKey:j,createPath:x,createHref:_,createLocation:k,setState:w["default"](E,"setState is deprecated; use location.key to save state instead"),registerTransitionHook:w["default"](T,"registerTransitionHook is deprecated; use listenBefore instead"),unregisterTransitionHook:w["default"](S,"unregisterTransitionHook is deprecated; use the callback returned from listenBefore instead"),pushState:w["default"](C,"pushState is deprecated; use push instead"),replaceState:w["default"](P,"replaceState is deprecated; use replace instead")}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l=n(175),p=(s(l),n(183)),c=s(p),u=n(177),d=n(186),h=n(176),f=n(187),m=s(f),g=n(188),y=s(g),b=n(189),w=s(b),v=6;t["default"]=o,e.exports=t["default"]},function(e,t,n){function s(e){return null===e||void 0===e}function a(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}function r(e,t,n){var r,c;if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(l(e))return!!l(t)&&(e=o.call(e),t=o.call(t),p(e,t,n));if(a(e)){if(!a(t))return!1;if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}try{var u=i(e),d=i(t)}catch(h){return!1}if(u.length!=d.length)return!1;for(u.sort(),d.sort(),r=u.length-1;r>=0;r--)if(u[r]!=d[r])return!1;for(r=u.length-1;r>=0;r--)if(c=u[r],!p(e[c],t[c],n))return!1;return typeof e==typeof t}var o=Array.prototype.slice,i=n(184),l=n(185),p=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:r(e,t,n))}},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}t=e.exports="function"==typeof Object.keys?Object.keys:n,t.shim=n},function(e,t){function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function s(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var a="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=a?n:s,t.supported=n,t.unsupported=s},function(e,t){"use strict";function n(e,t,n){function a(){return i=!0,l?void(c=[].concat(s.call(arguments))):void n.apply(this,arguments)}function r(){if(!i&&(p=!0,!l)){for(l=!0;!i&&o<e&&p;)p=!1,t.call(this,o++,r,a);return l=!1,i?void n.apply(this,c):void(o>=e&&p&&(i=!0,n()))}}var o=0,i=!1,l=!1,p=!1,c=void 0;r()}t.__esModule=!0;var s=Array.prototype.slice;t.loopAsync=n},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(){var e=arguments.length<=0||void 0===arguments[0]?"/":arguments[0],t=arguments.length<=1||void 0===arguments[1]?i.POP:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],s=arguments.length<=3||void 0===arguments[3]?null:arguments[3];"string"==typeof e&&(e=l.parsePath(e)),"object"==typeof t&&(e=r({},e,{state:t}),t=n||i.POP,n=s);var a=e.pathname||"/",o=e.search||"",p=e.hash||"",c=e.state||null;return{pathname:a,search:o,hash:p,state:c,action:t,key:n}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n(175),i=(s(o),n(176)),l=n(177);t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){var s=e(t,n);e.length<2&&n(s)}t.__esModule=!0;var r=n(175);s(r);t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){return function(){return e.apply(this,arguments)}}t.__esModule=!0;var r=n(175);s(r);t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){return l.stringify(e).replace(/%20/g,"+")}function r(e){return function(){function t(e){if(null==e.query){var t=e.search;e.query=x(t.substring(1)),e[f]={search:t,searchBase:""}}return e}function n(e,t){var n,s=e[f],a=t?j(t):"";if(!s&&!a)return e;"string"==typeof e&&(e=u.parsePath(e));var r=void 0;r=s&&e.search===s.search?s.searchBase:e.search||"";var i=r;return a&&(i+=(i?"&":"?")+a),o({},e,(n={search:i},n[f]={search:i,searchBase:r},n))}function s(e){return v.listenBefore(function(n,s){c["default"](e,t(n),s)})}function r(e){return v.listen(function(n){e(t(n))})}function i(e){v.push(n(e,e.query))}function l(e){v.replace(n(e,e.query))}function p(e,t){return v.createPath(n(e,t||e.query))}function d(e,t){return v.createHref(n(e,t||e.query))}function g(e){for(var s=arguments.length,a=Array(s>1?s-1:0),r=1;r<s;r++)a[r-1]=arguments[r];var o=v.createLocation.apply(v,[n(e,e.query)].concat(a));return e.query&&(o.query=e.query),t(o)}function y(e,t,n){"string"==typeof t&&(t=u.parsePath(t)),i(o({state:e},t,{query:n}))}function b(e,t,n){"string"==typeof t&&(t=u.parsePath(t)),l(o({state:e},t,{query:n}))}var w=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],v=e(w),j=w.stringifyQuery,x=w.parseQueryString;return"function"!=typeof j&&(j=a),"function"!=typeof x&&(x=m),o({},v,{listenBefore:s,listen:r,push:i,replace:l,createPath:p,createHref:d,createLocation:g,pushState:h["default"](y,"pushState is deprecated; use push instead"),replaceState:h["default"](b,"replaceState is deprecated; use replace instead")})}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i=n(175),l=(s(i),n(191)),p=n(188),c=s(p),u=n(177),d=n(189),h=s(d),f="$searchBase",m=l.parse;t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";var s=n(192);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#|&)/,""),e?e.split("&").reduce(function(e,t){var n=t.replace(/\+/g," ").split("="),s=n.shift(),a=n.length>0?n.join("="):void 0;return s=decodeURIComponent(s),a=void 0===a?null:decodeURIComponent(a),e.hasOwnProperty(s)?Array.isArray(e[s])?e[s].push(a):e[s]=[e[s],a]:e[s]=a,e},{}):{})},t.stringify=function(e){return e?Object.keys(e).sort().map(function(t){var n=e[t];return void 0===n?"":null===n?t:Array.isArray(n)?n.slice().sort().map(function(e){return s(t)+"="+s(e)}).join("&"):s(t)+"="+s(n)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function r(e,t){function n(t){var n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],s=arguments.length<=2||void 0===arguments[2]?null:arguments[2],a=void 0;return n&&n!==!0||null!==s?(t={pathname:t,query:n},a=s||!1):(t=e.createLocation(t),a=n),(0,d["default"])(t,a,w.location,w.routes,w.params)}function s(e,n){v&&v.location===e?r(v,n):(0,g["default"])(t,e,function(t,s){t?n(t):s?r(o({},s,{location:e}),n):n()})}function r(e,t){function n(n,a){return n||a?s(n,a):void(0,f["default"])(e,function(n,s){n?t(n):t(null,null,w=o({},e,{components:s}))})}function s(e,n){e?t(e):t(null,n)}var a=(0,p["default"])(w,e),r=a.leaveRoutes,i=a.changeRoutes,l=a.enterRoutes;(0,c.runLeaveHooks)(r,w),r.filter(function(e){return l.indexOf(e)===-1}).forEach(m),(0,c.runChangeHooks)(i,w,e,function(t,a){return t||a?s(t,a):void(0,c.runEnterHooks)(l,e,n)})}function i(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];return e.__id__||t&&(e.__id__=j++)}function l(e){return e.reduce(function(e,t){return e.push.apply(e,x[i(t)]),e},[])}function u(e,n){(0,g["default"])(t,e,function(t,s){if(null==s)return void n();v=o({},s,{location:e});for(var a=l((0,p["default"])(w,v).leaveRoutes),r=void 0,i=0,c=a.length;null==r&&i<c;++i)r=a[i](e);n(r)})}function h(){if(w.routes){for(var e=l(w.routes),t=void 0,n=0,s=e.length;"string"!=typeof t&&n<s;++n)t=e[n]();return t}}function m(e){var t=i(e,!1);t&&(delete x[t],a(x)||(_&&(_(),_=null),k&&(k(),k=null)))}function y(t,n){var s=i(t),r=x[s];if(r)r.indexOf(n)===-1&&r.push(n);else{var o=!a(x);x[s]=[n],o&&(_=e.listenBefore(u),e.listenBeforeUnload&&(k=e.listenBeforeUnload(h)))}return function(){var e=x[s];if(e){var a=e.filter(function(e){return e!==n});0===a.length?m(t):x[s]=a}}}function b(t){return e.listen(function(n){w.location===n?t(null,w):s(n,function(n,s,a){n?t(n):s?e.replace(s):a&&t(null,a)})})}var w={},v=void 0,j=1,x=Object.create(null),_=void 0,k=void 0;return{isActive:n,match:s,listenBeforeLeavingRoute:y,listen:b}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};t["default"]=r;var i=n(168),l=(s(i),n(194)),p=s(l),c=n(195),u=n(197),d=s(u),h=n(198),f=s(h),m=n(200),g=s(m);e.exports=t["default"]},function(e,t,n){"use strict";function s(e,t,n){if(!e.path)return!1;var s=(0,r.getParamNames)(e.path);return s.some(function(e){return t.params[e]!==n.params[e]})}function a(e,t){var n=e&&e.routes,a=t.routes,r=void 0,o=void 0,i=void 0;return n?!function(){var l=!1;r=n.filter(function(n){if(l)return!0;var r=a.indexOf(n)===-1||s(n,e,t);return r&&(l=!0),r}),r.reverse(),i=[],o=[],a.forEach(function(e){var t=n.indexOf(e)===-1,s=r.indexOf(e)!==-1;t||s?i.push(e):o.push(e)})}():(r=[],o=[],i=a),{leaveRoutes:r,changeRoutes:o,enterRoutes:i}}t.__esModule=!0;var r=n(171);t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return function(){for(var s=arguments.length,a=Array(s),r=0;r<s;r++)a[r]=arguments[r];if(e.apply(t,a),e.length<n){var o=a[a.length-1];o()}}}function r(e){return e.reduce(function(e,t){return t.onEnter&&e.push(a(t.onEnter,t,3)),e},[])}function o(e){return e.reduce(function(e,t){return t.onChange&&e.push(a(t.onChange,t,4)),e},[])}function i(e,t,n){function s(e,t,n){return t?void(a={pathname:t,query:n,state:e}):void(a=e)}if(!e)return void n();var a=void 0;(0,u.loopAsync)(e,function(e,n,r){t(e,s,function(e){e||a?r(e,a):n()})},n)}function l(e,t,n){var s=r(e);return i(s.length,function(e,n,a){s[e](t,n,a)},n)}function p(e,t,n,s){var a=o(e);return i(a.length,function(e,s,r){a[e](t,n,s,r)},s)}function c(e,t){for(var n=0,s=e.length;n<s;++n)e[n].onLeave&&e[n].onLeave.call(e[n],t)}t.__esModule=!0,t.runEnterHooks=l,t.runChangeHooks=p,t.runLeaveHooks=c;var u=n(196),d=n(168);s(d)},function(e,t){"use strict";function n(e,t,n){function s(){return o=!0,i?void(p=[].concat(Array.prototype.slice.call(arguments))):void n.apply(this,arguments)}function a(){if(!o&&(l=!0,!i)){for(i=!0;!o&&r<e&&l;)l=!1,t.call(this,r++,a,s);return i=!1,o?void n.apply(this,p):void(r>=e&&l&&(o=!0,n()))}}var r=0,o=!1,i=!1,l=!1,p=void 0;a()}function s(e,t,n){function s(e,t,s){o||(t?(o=!0,n(t)):(r[e]=s,o=++i===a,o&&n(null,r)))}var a=e.length,r=[];if(0===a)return n(null,r);var o=!1,i=0;e.forEach(function(e,n){t(e,n,function(e,t){s(n,e,t)})})}t.__esModule=!0,t.loopAsync=n,t.mapAsync=s},function(e,t,n){"use strict";function s(e,t){if(e==t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return s(e,t[n])});if("object"===("undefined"==typeof e?"undefined":l(e))){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))if(void 0===e[n]){if(void 0!==t[n])return!1}else{if(!Object.prototype.hasOwnProperty.call(t,n))return!1;if(!s(e[n],t[n]))return!1}return!0}return String(e)===String(t)}function a(e,t){return"/"!==t.charAt(0)&&(t="/"+t),"/"!==e.charAt(e.length-1)&&(e+="/"),
"/"!==t.charAt(t.length-1)&&(t+="/"),t===e}function r(e,t,n){for(var s=e,a=[],r=[],o=0,i=t.length;o<i;++o){var l=t[o],c=l.path||"";if("/"===c.charAt(0)&&(s=e,a=[],r=[]),null!==s&&c){var u=(0,p.matchPattern)(c,s);if(u?(s=u.remainingPathname,a=[].concat(a,u.paramNames),r=[].concat(r,u.paramValues)):s=null,""===s)return a.every(function(e,t){return String(r[t])===String(n[e])})}}return!1}function o(e,t){return null==t?null==e:null==e||s(e,t)}function i(e,t,n,s,i){var l=e.pathname,p=e.query;return null!=n&&("/"!==l.charAt(0)&&(l="/"+l),!!(a(l,n.pathname)||!t&&r(l,s,i))&&o(p,n.query))}t.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t["default"]=i;var p=n(171);e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){if(t.component||t.components)return void n(null,t.component||t.components);var s=t.getComponent||t.getComponents;if(!s)return void n();var a=e.location,r=(0,l["default"])(e,a);s.call(t,r,n)}function r(e,t){(0,o.mapAsync)(e.routes,function(t,n,s){a(e,t,s)},t)}t.__esModule=!0;var o=n(196),i=n(199),l=s(i);t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){return r({},e,t)}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};t["default"]=a;var o=(n(167),n(168));s(o);e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n,s,a){if(e.childRoutes)return[null,e.childRoutes];if(!e.getChildRoutes)return[];var r=!0,o=void 0,l={location:t,params:i(n,s)},p=(0,f["default"])(l,t);return e.getChildRoutes(p,function(e,t){return t=!e&&(0,y.createRoutes)(t),r?void(o=[e,t]):void a(e,t)}),r=!1,o}function r(e,t,n,s,a){if(e.indexRoute)a(null,e.indexRoute);else if(e.getIndexRoute){var o={location:t,params:i(n,s)},l=(0,f["default"])(o,t);e.getIndexRoute(l,function(e,t){a(e,!e&&(0,y.createRoutes)(t)[0])})}else e.childRoutes?!function(){var o=e.childRoutes.filter(function(e){return!e.path});(0,d.loopAsync)(o.length,function(e,a,i){r(o[e],t,n,s,function(t,n){if(t||n){var s=[o[e]].concat(Array.isArray(n)?n:[n]);i(t,s)}else a()})},function(e,t){a(null,t)})}():a()}function o(e,t,n){return t.reduce(function(e,t,s){var a=n&&n[s];return Array.isArray(e[t])?e[t].push(a):t in e?e[t]=[e[t],a]:e[t]=a,e},e)}function i(e,t){return o({},e,t)}function l(e,t,n,s,o,l){var c=e.path||"";if("/"===c.charAt(0)&&(n=t.pathname,s=[],o=[]),null!==n&&c){try{var d=(0,m.matchPattern)(c,n);d?(n=d.remainingPathname,s=[].concat(s,d.paramNames),o=[].concat(o,d.paramValues)):n=null}catch(h){l(h)}if(""===n){var f=function(){var n={routes:[e],params:i(s,o)};return r(e,t,s,o,function(e,t){if(e)l(e);else{if(Array.isArray(t)){var s;(s=n.routes).push.apply(s,t)}else t&&n.routes.push(t);l(null,n)}}),{v:void 0}}();if("object"===("undefined"==typeof f?"undefined":u(f)))return f.v}}if(null!=n||e.childRoutes){var g=function(a,r){a?l(a):r?p(r,t,function(t,n){t?l(t):n?(n.routes.unshift(e),l(null,n)):l()},n,s,o):l()},y=a(e,t,s,o,g);y&&g.apply(void 0,y)}else l()}function p(e,t,n,s){var a=arguments.length<=4||void 0===arguments[4]?[]:arguments[4],r=arguments.length<=5||void 0===arguments[5]?[]:arguments[5];void 0===s&&("/"!==t.pathname.charAt(0)&&(t=c({},t,{pathname:"/"+t.pathname})),s=t.pathname),(0,d.loopAsync)(e.length,function(n,o,i){l(e[n],t,s,a,r,function(e,t){e||t?i(e,t):o()})},n)}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t["default"]=p;var d=n(196),h=n(199),f=s(h),m=n(171),g=n(168),y=(s(g),n(165));e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n(172),i=s(o),l=n(2),p=s(l),c=n(167),u=(s(c),n(202)),d=s(u),h=n(165),f=n(168),m=(s(f),p["default"].PropTypes),g=m.array,y=m.func,b=m.object,w=p["default"].createClass({displayName:"RouterContext",propTypes:{history:b,router:b.isRequired,location:b.isRequired,routes:g.isRequired,params:b.isRequired,components:g.isRequired,createElement:y.isRequired},getDefaultProps:function(){return{createElement:p["default"].createElement}},childContextTypes:{history:b,location:b.isRequired,router:b.isRequired},getChildContext:function(){var e=this.props,t=e.router,n=e.history,s=e.location;return t||(t=r({},n,{setRouteLeaveHook:n.listenBeforeLeavingRoute}),delete t.listenBeforeLeavingRoute),{history:n,location:s,router:t}},createElement:function(e,t){return null==e?null:this.props.createElement(e,t)},render:function(){var e=this,t=this.props,n=t.history,s=t.location,o=t.routes,l=t.params,c=t.components,u=null;return c&&(u=c.reduceRight(function(t,i,p){if(null==i)return t;var c=o[p],u=(0,d["default"])(c,l),f={history:n,location:s,params:l,route:c,routeParams:u,routes:o};if((0,h.isReactChildren)(t))f.children=t;else if(t)for(var m in t)Object.prototype.hasOwnProperty.call(t,m)&&(f[m]=t[m]);if("object"===("undefined"==typeof i?"undefined":a(i))){var g={};for(var y in i)Object.prototype.hasOwnProperty.call(i,y)&&(g[y]=e.createElement(i[y],r({key:y},f)));return g}return e.createElement(i,f)},u)),null===u||u===!1||p["default"].isValidElement(u)?void 0:(0,i["default"])(!1),u}});t["default"]=w,e.exports=t["default"]},function(e,t,n){"use strict";function s(e,t){var n={};return e.path?((0,a.getParamNames)(e.path).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}),n):n}t.__esModule=!0;var a=n(171);t["default"]=s,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){return o({},e,{setRouteLeaveHook:t.listenBeforeLeavingRoute,isActive:t.isActive})}function r(e,t){return e=o({},e,t)}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};t.createRouterObject=a,t.createRoutingHistory=r;var i=n(167);s(i)},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}function r(e){return 0===e.button}function o(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function i(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function l(e,t){var n=t.query,s=t.hash,a=t.state;return n||s||a?{pathname:e,query:n,hash:s,state:a}:e}t.__esModule=!0;var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},c=n(2),u=s(c),d=n(168),h=(s(d),n(172)),f=s(h),m=n(166),g=u["default"].PropTypes,y=g.bool,b=g.object,w=g.string,v=g.func,j=g.oneOfType,x=u["default"].createClass({displayName:"Link",contextTypes:{router:m.routerShape},propTypes:{to:j([w,b]),query:b,hash:w,state:b,activeStyle:b,activeClassName:w,onlyActiveOnIndex:y.isRequired,onClick:v,target:w},getDefaultProps:function(){return{onlyActiveOnIndex:!1,style:{}}},handleClick:function(e){if(this.props.onClick&&this.props.onClick(e),!e.defaultPrevented&&(this.context.router?void 0:(0,f["default"])(!1),!o(e)&&r(e)&&!this.props.target)){e.preventDefault();var t=this.props,n=t.to,s=t.query,a=t.hash,i=t.state,p=l(n,{query:s,hash:a,state:i});this.context.router.push(p)}},render:function(){var e=this.props,t=e.to,n=e.query,s=e.hash,r=e.state,o=e.activeClassName,c=e.activeStyle,d=e.onlyActiveOnIndex,h=a(e,["to","query","hash","state","activeClassName","activeStyle","onlyActiveOnIndex"]),f=this.context.router;if(f){if(null==t)return u["default"].createElement("a",h);var m=l(t,{query:n,hash:s,state:r});h.href=f.createHref(m),(o||null!=c&&!i(c))&&f.isActive(m,d)&&(o&&(h.className?h.className+=" "+o:h.className=o),c&&(h.style=p({},h.style,c)))}return u["default"].createElement("a",p({},h,{onClick:this.handleClick}))}});t["default"]=x,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r=n(2),o=s(r),i=n(204),l=s(i),p=o["default"].createClass({displayName:"IndexLink",render:function(){return o["default"].createElement(l["default"],a({},this.props,{onlyActiveOnIndex:!0}))}});t["default"]=p,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){return e.displayName||e.name||"Component"}function r(e,t){var n=t&&t.withRef,s=c["default"].createClass({displayName:"WithRouter",contextTypes:{router:h.routerShape},propTypes:{router:h.routerShape},getWrappedInstance:function(){return n?void 0:(0,l["default"])(!1),this.wrappedInstance},render:function(){var t=this,s=this.props.router||this.context.router,a=o({},this.props,{router:s});return n&&(a.ref=function(e){t.wrappedInstance=e}),c["default"].createElement(e,a)}});return s.displayName="withRouter("+a(e)+")",s.WrappedComponent=e,(0,d["default"])(s,e)}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};t["default"]=r;var i=n(172),l=s(i),p=n(2),c=s(p),u=n(207),d=s(u),h=n(166);e.exports=t["default"]},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},a="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,r){if("string"!=typeof t){var o=Object.getOwnPropertyNames(t);a&&(o=o.concat(Object.getOwnPropertySymbols(t)));for(var i=0;i<o.length;++i)if(!(n[o[i]]||s[o[i]]||r&&r[o[i]]))try{e[o[i]]=t[o[i]]}catch(l){}}return e}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(2),r=s(a),o=n(168),i=(s(o),n(172)),l=s(i),p=n(209),c=s(p),u=n(170),d=r["default"].PropTypes,h=d.string,f=d.object,m=r["default"].createClass({displayName:"IndexRedirect",statics:{createRouteFromReactElement:function(e,t){t&&(t.indexRoute=c["default"].createRouteFromReactElement(e))}},propTypes:{to:h.isRequired,query:f,state:f,onEnter:u.falsy,children:u.falsy},render:function(){(0,l["default"])(!1)}});t["default"]=m,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(2),r=s(a),o=n(172),i=s(o),l=n(165),p=n(171),c=n(170),u=r["default"].PropTypes,d=u.string,h=u.object,f=r["default"].createClass({displayName:"Redirect",statics:{createRouteFromReactElement:function(e){var t=(0,l.createRouteFromReactElement)(e);return t.from&&(t.path=t.from),t.onEnter=function(e,n){var s=e.location,a=e.params,r=void 0;if("/"===t.to.charAt(0))r=(0,p.formatPattern)(t.to,a);else if(t.to){var o=e.routes.indexOf(t),i=f.getRoutePattern(e.routes,o-1),l=i.replace(/\/*$/,"/")+t.to;r=(0,p.formatPattern)(l,a)}else r=s.pathname;n({pathname:r,query:t.query||s.query,state:t.state||s.state})},t},getRoutePattern:function(e,t){for(var n="",s=t;s>=0;s--){var a=e[s],r=a.path||"";if(n=r.replace(/\/*$/,"/")+n,0===r.indexOf("/"))break}return"/"+n}},propTypes:{path:d,from:d,to:d.isRequired,query:h,state:h,onEnter:c.falsy,children:c.falsy},render:function(){(0,i["default"])(!1)}});t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(2),r=s(a),o=n(168),i=(s(o),n(172)),l=s(i),p=n(165),c=n(170),u=r["default"].PropTypes.func,d=r["default"].createClass({displayName:"IndexRoute",statics:{createRouteFromReactElement:function(e,t){t&&(t.indexRoute=(0,p.createRouteFromReactElement)(e))}},propTypes:{path:c.falsy,component:c.component,components:c.components,getComponent:u,getComponents:u},render:function(){(0,l["default"])(!1)}});t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(2),r=s(a),o=n(172),i=s(o),l=n(165),p=n(170),c=r["default"].PropTypes,u=c.string,d=c.func,h=r["default"].createClass({displayName:"Route",statics:{createRouteFromReactElement:l.createRouteFromReactElement},propTypes:{path:u,component:p.component,components:p.components,getComponent:d,getComponents:d},render:function(){(0,i["default"])(!1)}});t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(168),r=(s(a),n(170)),o={contextTypes:{history:r.history},componentWillMount:function(){this.history=this.context.history}};t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(168),r=(s(a),n(2)),o=s(r),i=n(172),l=s(i),p=o["default"].PropTypes.object,c={contextTypes:{history:p.isRequired,route:p},propTypes:{route:p},componentDidMount:function(){this.routerWillLeave?void 0:(0,l["default"])(!1);var e=this.props.route||this.context.route;e?void 0:(0,l["default"])(!1),this._unlistenBeforeLeavingRoute=this.context.history.listenBeforeLeavingRoute(e,this.routerWillLeave)},componentWillUnmount:function(){this._unlistenBeforeLeavingRoute&&this._unlistenBeforeLeavingRoute()}};t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(168),r=(s(a),n(2)),o=s(r),i=o["default"].PropTypes.object,l={propTypes:{route:i.isRequired},childContextTypes:{route:i.isRequired},getChildContext:function(){return{route:this.props.route}},componentWillMount:function(){}};t["default"]=l,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}function r(e){return function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t.routes,s=a(t,["routes"]),r=(0,l["default"])(e)(s),i=(0,c["default"])(r,n);return o({},r,i)}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i=n(190),l=s(i),p=n(193),c=s(p),u=n(168);s(u);t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(2),r=s(a),o=n(201),i=s(o),l=n(168),p=(s(l),r["default"].createClass({displayName:"RoutingContext",componentWillMount:function(){},render:function(){return r["default"].createElement(i["default"],this.props)}}));t["default"]=p,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}function r(e,t){var n=e.history,s=e.routes,r=e.location,l=a(e,["history","routes","location"]);n||r?void 0:(0,p["default"])(!1),n=n?n:(0,u["default"])(l);var c=(0,h["default"])(n,(0,f.createRoutes)(s)),d=void 0;r?r=n.createLocation(r):d=n.listen(function(e){r=e});var g=(0,m.createRouterObject)(n,c);n=(0,m.createRoutingHistory)(n,c),c.match(r,function(e,s,a){t(e,s&&g.createLocation(s,i.REPLACE),a&&o({},a,{history:n,router:g,matchContext:{history:n,transitionManager:c,router:g}})),d&&d()})}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i=n(176),l=n(172),p=s(l),c=n(218),u=s(c),d=n(193),h=s(d),f=n(165),m=n(203);t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=(0,c["default"])(e),n=function(){return t},s=(0,o["default"])((0,l["default"])(n))(e);return s.__v2_compatible__=!0,s}t.__esModule=!0,t["default"]=a;var r=n(190),o=s(r),i=n(219),l=s(i),p=n(220),c=s(p);e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){return function(){function t(){if(!j){if(null==v&&i.canUseDOM){var e=document.getElementsByTagName("base")[0],t=e&&e.getAttribute("href");null!=t&&(v=t)}j=!0}}function n(e){return t(),v&&null==e.basename&&(0===e.pathname.indexOf(v)?(e.pathname=e.pathname.substring(v.length),e.basename=v,""===e.pathname&&(e.pathname="/")):e.basename=""),e}function s(e){if(t(),!v)return e;"string"==typeof e&&(e=l.parsePath(e));var n=e.pathname,s="/"===v.slice(-1)?v:v+"/",a="/"===n.charAt(0)?n.slice(1):n,o=s+a;return r({},e,{pathname:o})}function a(e){return w.listenBefore(function(t,s){c["default"](e,n(t),s)})}function o(e){return w.listen(function(t){e(n(t))})}function p(e){w.push(s(e))}function u(e){w.replace(s(e))}function h(e){return w.createPath(s(e))}function f(e){return w.createHref(s(e))}function m(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return n(w.createLocation.apply(w,[s(e)].concat(a)))}function g(e,t){"string"==typeof t&&(t=l.parsePath(t)),p(r({state:e},t))}function y(e,t){"string"==typeof t&&(t=l.parsePath(t)),u(r({state:e},t))}var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],w=e(b),v=b.basename,j=!1;return r({},w,{listenBefore:a,listen:o,push:p,replace:u,createPath:h,createHref:f,createLocation:m,pushState:d["default"](g,"pushState is deprecated; use push instead"),replaceState:d["default"](y,"replaceState is deprecated; use replace instead")})}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n(175),i=(s(o),n(178)),l=n(177),p=n(188),c=s(p),u=n(189),d=s(u);t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){return e.filter(function(e){return e.state}).reduce(function(e,t){return e[t.key]=t.state,e},{})}function r(){function e(e,t){y[e]=t}function t(e){return y[e]}function n(){var e=m[g],n=e.basename,s=e.pathname,a=e.search,r=(n||"")+s+(a||""),i=void 0,l=void 0;e.key?(i=e.key,l=t(i)):(i=d.createKey(),l=null,e.key=i);var p=c.parsePath(r);return d.createLocation(o({},p,{state:l}),void 0,i)}function s(e){var t=g+e;return t>=0&&t<m.length}function r(e){if(e){if(!s(e))return;g+=e;var t=n();d.transitionTo(o({},t,{action:u.POP}))}}function i(t){switch(t.action){case u.PUSH:g+=1,g<m.length&&m.splice(g),m.push(t),e(t.key,t.state);break;case u.REPLACE:m[g]=t,e(t.key,t.state)}}var l=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];Array.isArray(l)?l={entries:l}:"string"==typeof l&&(l={entries:[l]});var d=h["default"](o({},l,{getCurrentLocation:n,finishTransition:i,saveState:e,go:r})),f=l,m=f.entries,g=f.current;"string"==typeof m?m=[m]:Array.isArray(m)||(m=["/"]),m=m.map(function(e){var t=d.createKey();return"string"==typeof e?{pathname:e,key:t}:"object"==typeof e&&e?o({},e,{key:t}):void p["default"](!1)}),null==g?g=m.length-1:g>=0&&g<m.length?void 0:p["default"](!1);var y=a(m);return d}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i=n(175),l=(s(i),n(172)),p=s(l),c=n(177),u=n(176),d=n(182),h=s(d);t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){return function(t){var n=(0,o["default"])((0,l["default"])(e))(t);return n.__v2_compatible__=!0,n}}t.__esModule=!0,t["default"]=a;var r=n(190),o=s(r),i=n(219),l=s(i);e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r=n(2),o=s(r),i=n(201),l=s(i),p=n(168);s(p);t["default"]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=t.map(function(e){return e.renderRouterContext}).filter(Boolean),i=t.map(function(e){return e.renderRouteComponent}).filter(Boolean),p=function(){var e=arguments.length<=0||void 0===arguments[0]?r.createElement:arguments[0];return function(t,n){return i.reduceRight(function(e,t){return t(e,n)},e(t,n))}};return function(e){return s.reduceRight(function(t,n){return n(t,e)},o["default"].createElement(l["default"],a({},e,{createElement:p(e.createElement)})))}},e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(224),r=s(a),o=n(225),i=s(o);t["default"]=(0,i["default"])(r["default"]),e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(){function e(e){try{e=e||window.history.state||{}}catch(t){e={}}var n=u.getWindowPath(),s=e,a=s.key,o=void 0;a?o=d.readState(a):(o=null,a=w.createKey(),y&&window.history.replaceState(r({},e,{key:a}),null));var i=p.parsePath(n);return w.createLocation(r({},i,{state:o}),void 0,a)}function t(t){function n(t){void 0!==t.state&&s(e(t.state))}var s=t.transitionTo;return u.addEventListener(window,"popstate",n),function(){u.removeEventListener(window,"popstate",n)}}function n(e){var t=e.basename,n=e.pathname,s=e.search,a=e.hash,r=e.state,o=e.action,i=e.key;if(o!==l.POP){d.saveState(i,r);var p=(t||"")+n+s+a,c={key:i};if(o===l.PUSH){if(b)return window.location.href=p,!1;window.history.pushState(c,null,p)}else{if(b)return window.location.replace(p),!1;window.history.replaceState(c,null,p)}}}function s(e){1===++v&&(j=t(w));var n=w.listenBefore(e);return function(){n(),0===--v&&j()}}function a(e){1===++v&&(j=t(w));var n=w.listen(e);return function(){n(),0===--v&&j()}}function o(e){1===++v&&(j=t(w)),w.registerTransitionHook(e)}function h(e){w.unregisterTransitionHook(e),0===--v&&j()}var m=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];c.canUseDOM?void 0:i["default"](!1);var g=m.forceRefresh,y=u.supportsHistory(),b=!y||g,w=f["default"](r({},m,{getCurrentLocation:e,finishTransition:n,saveState:d.saveState})),v=0,j=void 0;return r({},w,{listenBefore:s,listen:a,registerTransitionHook:o,unregisterTransitionHook:h})}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n(172),i=s(o),l=n(176),p=n(177),c=n(178),u=n(179),d=n(180),h=n(181),f=s(h);t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t["default"]=function(e){var t=void 0;return o&&(t=(0,r["default"])(e)()),t};var a=n(221),r=s(a),o=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(174),r=s(a),o=n(225),i=s(o);t["default"]=(0,i["default"])(r["default"]),e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){return{renderRouterContext:function(t,n){return o["default"].createElement(l["default"],{shouldUpdateScroll:e,routerProps:n},t)}}}t.__esModule=!0,t["default"]=a;var r=n(2),o=s(r),i=n(228),l=s(i);e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=n(2),l=s(i),p=n(229),c=s(p),u={shouldUpdateScroll:l["default"].PropTypes.func,routerProps:l["default"].PropTypes.object.isRequired,children:l["default"].PropTypes.element.isRequired},d={scrollBehavior:l["default"].PropTypes.object.isRequired},h=function(e){function t(n,s){a(this,t);var o=r(this,e.call(this,n,s));f.call(o);var i=n.routerProps;return o.scrollBehavior=new c["default"](i.router,function(){return o.props.routerProps.location},o.shouldUpdateScroll),o.scrollBehavior.updateScroll(null,i),o}return o(t,e),t.prototype.getChildContext=function(){return{scrollBehavior:this}},t.prototype.componentDidUpdate=function(e){var t=this.props.routerProps,n=e.routerProps;t.location!==n.location&&this.scrollBehavior.updateScroll(n,t)},t.prototype.componentWillUnmount=function(){this.scrollBehavior.stop()},t.prototype.render=function(){return this.props.children},t}(l["default"].Component),f=function(){var e=this;this.shouldUpdateScroll=function(t,n){var s=e.props.shouldUpdateScroll;return!s||s.call(e.scrollBehavior,t,n)},this.registerElement=function(t,n,s){e.scrollBehavior.registerElement(t,n,s,e.props.routerProps)},this.unregisterElement=function(t){e.scrollBehavior.unregisterElement(t)}};h.propTypes=u,h.childContextTypes=d,t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=n(230),o=s(r),i=n(232),l=s(i),p=n(233),c=s(p),u=n(235),d=s(u),h=n(236),f=s(h),m=n(176),g=n(180),y=n(172),b=s(y),w="s/",v=2,j=function(){function e(t,n,s){var r=this;a(this,e),this._onWindowScroll=function(){if(null===r._saveWindowPositionHandle&&(r._saveWindowPositionHandle=(0,f["default"])(r._saveWindowPosition)),r._windowScrollTarget){var e=r._windowScrollTarget,t=e[0],n=e[1],s=(0,c["default"])(window),a=(0,d["default"])(window);s===t&&a===n&&(r._windowScrollTarget=null,r._cancelCheckWindowScroll())}},this._saveWindowPosition=function(){r._saveWindowPositionHandle=null,r._savePosition(null,window)},this._checkWindowScrollPosition=function(){if(r._checkWindowScrollHandle=null,r._windowScrollTarget){var e=r._windowScrollTarget,t=e[0],n=e[1];return window.scrollTo(t,n),++r._numWindowScrollAttempts,r._numWindowScrollAttempts>=v?void(r._windowScrollTarget=null):void(r._checkWindowScrollHandle=(0,f["default"])(r._checkWindowScrollPosition))}},this._history=t,this._getCurrentLocation=n,this._shouldUpdateScroll=s,"scrollRestoration"in window.history?(this._oldScrollRestoration=window.history.scrollRestoration,window.history.scrollRestoration="manual"):this._oldScrollRestoration=null,this._saveWindowPositionHandle=null,this._checkWindowScrollHandle=null,this._windowScrollTarget=null,this._numWindowScrollAttempts=0,this._scrollElements={},(0,l["default"])(window,"scroll",this._onWindowScroll),this._unlistenBefore=t.listenBefore(function(){null!==r._saveWindowPositionHandle&&(f["default"].cancel(r._saveWindowPositionHandle),r._saveWindowPositionHandle=null),Object.keys(r._scrollElements).forEach(function(e){r._saveElementPosition(e)})})}return e.prototype.stop=function(){this._oldScrollRestoration&&(window.history.scrollRestoration=this._oldScrollRestoration),(0,o["default"])(window,"scroll",this._onWindowScroll),this._cancelCheckWindowScroll(),this._unlistenBefore()},e.prototype.registerElement=function(e,t,n,s){this._scrollElements[e]?(0,b["default"])(!1):void 0,this._scrollElements[e]={element:t,shouldUpdateScroll:n},this._updateElementScroll(e,null,s)},e.prototype.unregisterElement=function(e){this._scrollElements[e]?void 0:(0,b["default"])(!1),delete this._scrollElements[e]},e.prototype.updateScroll=function(e,t){var n=this;this._updateWindowScroll(e,t),Object.keys(this._scrollElements).forEach(function(s){n._updateElementScroll(s,e,t)})},e.prototype.readPosition=function(e,t){return(0,g.readState)(this._getKey(e,t))},e.prototype._cancelCheckWindowScroll=function(){null!==this._checkWindowScrollHandle&&(f["default"].cancel(this._checkWindowScrollHandle),this._checkWindowScrollHandle=null)},e.prototype._saveElementPosition=function(e){var t=this._scrollElements[e].element;this._savePosition(e,t)},e.prototype._savePosition=function(e,t){(0,g.saveState)(this._getKey(this._getCurrentLocation(),e),[(0,c["default"])(t),(0,d["default"])(t)])},e.prototype._getKey=function(e,t){var n=e.key||this._history.createHref(e);return null==t?""+w+n:""+w+t+"/"+n},e.prototype._updateWindowScroll=function(e,t){this._cancelCheckWindowScroll(),this._windowScrollTarget=this._getScrollTarget(null,this._shouldUpdateScroll,e,t),this._onWindowScroll(),this._windowScrollTarget&&(this._numWindowScrollAttempts=0,this._checkWindowScrollPosition())},e.prototype._updateElementScroll=function(e,t,n){var s=this._scrollElements[e],a=s.element,r=s.shouldUpdateScroll,o=this._getScrollTarget(e,r,t,n);if(o){var i=o[0],l=o[1];(0,c["default"])(a,i),(0,d["default"])(a,l)}},e.prototype._getScrollTarget=function(e,t,n,s){var a=!t||t.call(this,n,s);if(!a||Array.isArray(a))return a;var r=this._getCurrentLocation();return r.action===m.PUSH?[0,0]:this.readPosition(r,e)||[0,0]},e}();t["default"]=j,e.exports=t["default"]},function(e,t,n){"use strict";var s=n(231),a=function(){};s&&(a=function(){return document.addEventListener?function(e,t,n,s){return e.removeEventListener(t,n,s||!1)}:document.attachEvent?function(e,t,n){return e.detachEvent("on"+t,n)}:void 0}()),e.exports=a},function(e,t){"use strict";e.exports=!("undefined"==typeof window||!window.document||!window.document.createElement)},function(e,t,n){"use strict";var s=n(231),a=function(){};s&&(a=function(){return document.addEventListener?function(e,t,n,s){return e.addEventListener(t,n,s||!1)}:document.attachEvent?function(e,t,n){return e.attachEvent("on"+t,n)}:void 0}()),e.exports=a},function(e,t,n){"use strict";var s=n(234);e.exports=function(e,t){var n=s(e);return void 0===t?n?"pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft:e.scrollLeft:void(n?n.scrollTo(t,"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop):e.scrollLeft=t)}},function(e,t){"use strict";e.exports=function(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}},function(e,t,n){"use strict";var s=n(234);e.exports=function(e,t){var n=s(e);return void 0===t?n?"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop:e.scrollTop:void(n?n.scrollTo("pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft,t):e.scrollTop=t)}},function(e,t,n){"use strict";function s(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-c)),s=setTimeout(e,n);return c=t,s}var a,r=n(231),o=["","webkit","moz","o","ms"],i="clearTimeout",l=s,p=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};r&&o.some(function(e){var t=p(e,"request");if(t in window)return i=p(e,"cancel"),l=function(e){return window[t](e);
}});var c=(new Date).getTime();a=function(e){return l(e)},a.cancel=function(e){return window[i](e)},e.exports=a},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var a=n(238),r=s(a),o=n(239),i=s(o),l=n(369),p=s(l),c=n(372);e.exports=function(e,t){var s=(0,p["default"])(e,function(e){return"_"!==e.file.name.slice(0,1)}),a=(0,p["default"])(e,function(e){return"_template"===e.file.name}),o={path:(0,c.prefixLink)("/"),component:n(375),childRoutes:[],indexRoute:{},pages:s,templates:a},l=null,u={};u.root=o,u["/"]=o;var d=(0,p["default"])(e,function(e){return"_template"===e.file.name&&""!==e.file.dirname});d.forEach(function(e){var n=(0,p["default"])(d,function(t){return 0===e.requirePath.indexOf(t.file.dirname)});n=(0,i["default"])(n,function(e){return e?e.file.dirname.length:0});var o=(0,r["default"])(n),l=void 0;o&&(l=u[o.file.dirname]),l||(l=u.root);var h={path:(0,c.prefixLink)(e.templatePath),component:t("./"+e.requirePath),childRoutes:[],indexRoute:{},pages:s,templates:a,parentTemplateFile:o};u[e.file.dirname]=h,l.childRoutes.push(h)});var h=["ipynb","md","markdown","html","json","yaml","toml"],f=["js","jsx","cjsx"],m={};return h.forEach(function(e){try{m[e]=n(377)("./"+e)}catch(t){"MODULE_NOT_FOUND"!==t.code&&t.message&&!t.message.match(/^Cannot find module/)&&"undefined"!=typeof console&&console.error("Error requiring wrapper",e,":",t)}}),s.forEach(function(e){var n=e,o=void 0;h.indexOf(n.file.ext)!==-1?(o=m[n.file.ext],n.data=t("./"+n.requirePath)):f.indexOf(n.file.ext)!==-1&&(o=t("./"+n.requirePath),n.data=function(){return t("./"+n.requirePath).metadata?t("./"+n.requirePath).metadata():{}}());var g=(0,p["default"])(d,function(e){return 0===n.requirePath.indexOf(e.file.dirname)}),y=(0,i["default"])(g,function(e){return e.file.dirname.length}),b=(0,r["default"])(y),w=void 0;b&&(w=u[b.file.dirname]),w||(w=u.root),"index"===n.file.name&&(0,c.prefixLink)(n.path)===w.path?w.indexRoute={component:o,page:n,pages:s,templates:a,parentTemplateFile:b}:w.childRoutes.push({path:(0,c.prefixLink)(n.path),component:o,page:n,pages:s,templates:a,parentTemplateFile:b}),n.path.indexOf("/404")!==-1&&(l={path:"*",component:o,page:n,pages:s,templates:a,parentTemplateFile:b})}),l&&o.childRoutes.push(l),o}},function(e,t){function n(e){var t=e?e.length:0;return t?e[t-1]:void 0}e.exports=n},function(e,t,n){var s=n(240),a=n(250),r=n(360),o=n(368),i=r(function(e,t){if(null==e)return[];var n=t.length;return n>1&&o(e,t[0],t[1])?t=[]:n>2&&o(t[0],t[1],t[2])&&(t=[t[0]]),a(e,s(t,1),[])});e.exports=i},function(e,t,n){function s(e,t,n,o,i){var l=-1,p=e.length;for(n||(n=r),i||(i=[]);++l<p;){var c=e[l];t>0&&n(c)?t>1?s(c,t-1,n,o,i):a(i,c):o||(i[i.length]=c)}return i}var a=n(241),r=n(242);e.exports=s},function(e,t){function n(e,t){for(var n=-1,s=t.length,a=e.length;++n<s;)e[a+n]=t[n];return e}e.exports=n},function(e,t,n){function s(e){return o(e)||r(e)||!!(i&&e&&e[i])}var a=n(243),r=n(246),o=n(249),i=a?a.isConcatSpreadable:void 0;e.exports=s},function(e,t,n){var s=n(244),a=s.Symbol;e.exports=a},function(e,t,n){var s=n(245),a="object"==typeof self&&self&&self.Object===Object&&self,r=s||a||Function("return this")();e.exports=r},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){var s=n(247),a=n(248),r=Object.prototype,o=r.hasOwnProperty,i=r.propertyIsEnumerable,l=s(function(){return arguments}())?s:function(e){return a(e)&&o.call(e,"callee")&&!i.call(e,"callee")};e.exports=l},function(e,t,n){function s(e){return a(e)&&i.call(e)==r}var a=n(248),r="[object Arguments]",o=Object.prototype,i=o.toString;e.exports=s},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){function s(e,t,n){var s=-1;t=a(t.length?t:[c],l(r));var u=o(e,function(e,n,r){var o=a(t,function(t){return t(e)});return{criteria:o,index:++s,value:e}});return i(u,function(e,t){return p(e,t,n)})}var a=n(251),r=n(252),o=n(351),i=n(357),l=n(316),p=n(358),c=n(347);e.exports=s},function(e,t){function n(e,t){for(var n=-1,s=e?e.length:0,a=Array(s);++n<s;)a[n]=t(e[n],n,e);return a}e.exports=n},function(e,t,n){function s(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?i(e)?r(e[0],e[1]):a(e):l(e)}var a=n(253),r=n(332),o=n(347),i=n(249),l=n(348);e.exports=s},function(e,t,n){function s(e){var t=r(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||a(n,e,t)}}var a=n(254),r=n(329),o=n(331);e.exports=s},function(e,t,n){function s(e,t,n,s){var l=n.length,p=l,c=!s;if(null==e)return!p;for(e=Object(e);l--;){var u=n[l];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++l<p;){u=n[l];var d=u[0],h=e[d],f=u[1];if(c&&u[2]){if(void 0===h&&!(d in e))return!1}else{var m=new a;if(s)var g=s(h,f,d,e,t,m);if(!(void 0===g?r(f,h,s,o|i,m):g))return!1}}return!0}var a=n(255),r=n(293),o=1,i=2;e.exports=s},function(e,t,n){function s(e){var t=this.__data__=new a(e);this.size=t.size}var a=n(256),r=n(264),o=n(265),i=n(266),l=n(267),p=n(268);s.prototype.clear=r,s.prototype["delete"]=o,s.prototype.get=i,s.prototype.has=l,s.prototype.set=p,e.exports=s},function(e,t,n){function s(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}var a=n(257),r=n(258),o=n(261),i=n(262),l=n(263);s.prototype.clear=a,s.prototype["delete"]=r,s.prototype.get=o,s.prototype.has=i,s.prototype.set=l,e.exports=s},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function s(e){var t=this.__data__,n=a(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():o.call(t,n,1),--this.size,!0}var a=n(259),r=Array.prototype,o=r.splice;e.exports=s},function(e,t,n){function s(e,t){for(var n=e.length;n--;)if(a(e[n][0],t))return n;return-1}var a=n(260);e.exports=s},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function s(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]}var a=n(259);e.exports=s},function(e,t,n){function s(e){return a(this.__data__,e)>-1}var a=n(259);e.exports=s},function(e,t,n){function s(e,t){var n=this.__data__,s=a(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var a=n(259);e.exports=s},function(e,t,n){function s(){this.__data__=new a,this.size=0}var a=n(256);e.exports=s},function(e,t){function n(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function s(e,t){var n=this.__data__;if(n instanceof a){var s=n.__data__;if(!r||s.length<i-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}var a=n(256),r=n(269),o=n(278),i=200;e.exports=s},function(e,t,n){var s=n(270),a=n(244),r=s(a,"Map");e.exports=r},function(e,t,n){function s(e,t){var n=r(e,t);return a(n)?n:void 0}var a=n(271),r=n(277);e.exports=s},function(e,t,n){function s(e){if(!o(e)||r(e))return!1;var t=a(e)?f:p;return t.test(i(e))}var a=n(272),r=n(274),o=n(273),i=n(276),l=/[\\^$.*+?()[\]{}|]/g,p=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,d=c.toString,h=u.hasOwnProperty,f=RegExp("^"+d.call(h).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=s},function(e,t,n){function s(e){var t=a(e)?p.call(e):"";return t==r||t==o||t==i}var a=n(273),r="[object Function]",o="[object GeneratorFunction]",i="[object Proxy]",l=Object.prototype,p=l.toString;e.exports=s},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function s(e){return!!r&&r in e}var a=n(275),r=function(){var e=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=s},function(e,t,n){var s=n(244),a=s["__core-js_shared__"];e.exports=a},function(e,t){function n(e){if(null!=e){try{return a.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var s=Function.prototype,a=s.toString;e.exports=n},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function s(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}var a=n(279),r=n(287),o=n(290),i=n(291),l=n(292);s.prototype.clear=a,s.prototype["delete"]=r,s.prototype.get=o,s.prototype.has=i,s.prototype.set=l,e.exports=s},function(e,t,n){function s(){this.size=0,this.__data__={hash:new a,map:new(o||r),string:new a}}var a=n(280),r=n(256),o=n(269);e.exports=s},function(e,t,n){function s(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}var a=n(281),r=n(283),o=n(284),i=n(285),l=n(286);s.prototype.clear=a,s.prototype["delete"]=r,s.prototype.get=o,s.prototype.has=i,s.prototype.set=l,e.exports=s},function(e,t,n){function s(){this.__data__=a?a(null):{},this.size=0}var a=n(282);e.exports=s},function(e,t,n){var s=n(270),a=s(Object,"create");e.exports=a},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function s(e){var t=this.__data__;if(a){var n=t[e];return n===r?void 0:n}return i.call(t,e)?t[e]:void 0}var a=n(282),r="__lodash_hash_undefined__",o=Object.prototype,i=o.hasOwnProperty;e.exports=s},function(e,t,n){function s(e){var t=this.__data__;return a?void 0!==t[e]:o.call(t,e)}var a=n(282),r=Object.prototype,o=r.hasOwnProperty;e.exports=s},function(e,t,n){function s(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=a&&void 0===t?r:t,this}var a=n(282),r="__lodash_hash_undefined__";e.exports=s},function(e,t,n){function s(e){var t=a(this,e)["delete"](e);return this.size-=t?1:0,t}var a=n(288);e.exports=s},function(e,t,n){function s(e,t){var n=e.__data__;return a(t)?n["string"==typeof t?"string":"hash"]:n.map}var a=n(289);e.exports=s},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function s(e){return a(this,e).get(e)}var a=n(288);e.exports=s},function(e,t,n){function s(e){return a(this,e).has(e)}var a=n(288);e.exports=s},function(e,t,n){function s(e,t){var n=a(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var a=n(288);e.exports=s},function(e,t,n){function s(e,t,n,i,l){return e===t||(null==e||null==t||!r(e)&&!o(t)?e!==e&&t!==t:a(e,t,s,n,i,l))}var a=n(294),r=n(273),o=n(248);e.exports=s},function(e,t,n){function s(e,t,n,s,g,b){var w=p(e),v=p(t),j=f,x=f;w||(j=l(e),j=j==h?m:j),v||(x=l(t),x=x==h?m:x);var _=j==m,k=x==m,E=j==x;if(E&&c(e)){if(!c(t))return!1;w=!0,_=!1}if(E&&!_)return b||(b=new a),w||u(e)?r(e,t,n,s,g,b):o(e,t,j,n,s,g,b);if(!(g&d)){var A=_&&y.call(e,"__wrapped__"),T=k&&y.call(t,"__wrapped__");if(A||T){var S=A?e.value():e,C=T?t.value():t;return b||(b=new a),n(S,C,s,g,b)}}return!!E&&(b||(b=new a),i(e,t,n,s,g,b))}var a=n(255),r=n(295),o=n(301),i=n(305),l=n(323),p=n(249),c=n(309),u=n(313),d=2,h="[object Arguments]",f="[object Array]",m="[object Object]",g=Object.prototype,y=g.hasOwnProperty;e.exports=s},function(e,t,n){function s(e,t,n,s,p,c){var u=p&l,d=e.length,h=t.length;if(d!=h&&!(u&&h>d))return!1;var f=c.get(e);if(f&&c.get(t))return f==t;var m=-1,g=!0,y=p&i?new a:void 0;for(c.set(e,t),c.set(t,e);++m<d;){var b=e[m],w=t[m];if(s)var v=u?s(w,b,m,t,e,c):s(b,w,m,e,t,c);if(void 0!==v){if(v)continue;g=!1;break}if(y){if(!r(t,function(e,t){if(!o(y,t)&&(b===e||n(b,e,s,p,c)))return y.push(t)})){g=!1;break}}else if(b!==w&&!n(b,w,s,p,c)){g=!1;break}}return c["delete"](e),c["delete"](t),g}var a=n(296),r=n(299),o=n(300),i=1,l=2;e.exports=s},function(e,t,n){function s(e){var t=-1,n=e?e.length:0;for(this.__data__=new a;++t<n;)this.add(e[t])}var a=n(278),r=n(297),o=n(298);s.prototype.add=s.prototype.push=r,s.prototype.has=o,e.exports=s},function(e,t){function n(e){return this.__data__.set(e,s),this}var s="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e,t){for(var n=-1,s=e?e.length:0;++n<s;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t,n){function s(e,t,n,s,a,_,E){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case j:return!(e.byteLength!=t.byteLength||!s(new r(e),new r(t)));case d:case h:case g:return o(+e,+t);case f:return e.name==t.name&&e.message==t.message;case y:case w:return e==t+"";case m:var A=l;case b:var T=_&u;if(A||(A=p),e.size!=t.size&&!T)return!1;var S=E.get(e);if(S)return S==t;_|=c,E.set(e,t);var C=i(A(e),A(t),s,a,_,E);return E["delete"](e),C;case v:if(k)return k.call(e)==k.call(t)}return!1}var a=n(243),r=n(302),o=n(260),i=n(295),l=n(303),p=n(304),c=1,u=2,d="[object Boolean]",h="[object Date]",f="[object Error]",m="[object Map]",g="[object Number]",y="[object RegExp]",b="[object Set]",w="[object String]",v="[object Symbol]",j="[object ArrayBuffer]",x="[object DataView]",_=a?a.prototype:void 0,k=_?_.valueOf:void 0;e.exports=s},function(e,t,n){var s=n(244),a=s.Uint8Array;e.exports=a},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,s){n[++t]=[s,e]}),n}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function s(e,t,n,s,o,l){var p=o&r,c=a(e),u=c.length,d=a(t),h=d.length;if(u!=h&&!p)return!1;for(var f=u;f--;){var m=c[f];if(!(p?m in t:i.call(t,m)))return!1}var g=l.get(e);if(g&&l.get(t))return g==t;var y=!0;l.set(e,t),l.set(t,e);for(var b=p;++f<u;){m=c[f];var w=e[m],v=t[m];if(s)var j=p?s(v,w,m,t,e,l):s(w,v,m,e,t,l);if(!(void 0===j?w===v||n(w,v,s,o,l):j)){y=!1;break}b||(b="constructor"==m)}if(y&&!b){var x=e.constructor,_=t.constructor;x!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _)&&(y=!1)}return l["delete"](e),l["delete"](t),y}var a=n(306),r=2,o=Object.prototype,i=o.hasOwnProperty;e.exports=s},function(e,t,n){function s(e){return o(e)?a(e):r(e)}var a=n(307),r=n(318),o=n(322);e.exports=s},function(e,t,n){function s(e,t){var n=o(e),s=!n&&r(e),c=!n&&!s&&i(e),d=!n&&!s&&!c&&p(e),h=n||s||c||d,f=h?a(e.length,String):[],m=f.length;for(var g in e)!t&&!u.call(e,g)||h&&("length"==g||c&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||l(g,m))||f.push(g);return f}var a=n(308),r=n(246),o=n(249),i=n(309),l=n(312),p=n(313),c=Object.prototype,u=c.hasOwnProperty;e.exports=s},function(e,t){function n(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}e.exports=n},function(e,t,n){(function(e){var s=n(244),a=n(311),r="object"==typeof t&&t&&!t.nodeType&&t,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,i=o&&o.exports===r,l=i?s.Buffer:void 0,p=l?l.isBuffer:void 0,c=p||a;e.exports=c}).call(t,n(310)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(){return!1}e.exports=n},function(e,t){function n(e,t){return t=null==t?s:t,!!t&&("number"==typeof e||a.test(e))&&e>-1&&e%1==0&&e<t}var s=9007199254740991,a=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){var s=n(314),a=n(316),r=n(317),o=r&&r.isTypedArray,i=o?a(o):s;e.exports=i},function(e,t,n){function s(e){return r(e)&&a(e.length)&&!!P[R.call(e)]}var a=n(315),r=n(248),o="[object Arguments]",i="[object Array]",l="[object Boolean]",p="[object Date]",c="[object Error]",u="[object Function]",d="[object Map]",h="[object Number]",f="[object Object]",m="[object RegExp]",g="[object Set]",y="[object String]",b="[object WeakMap]",w="[object ArrayBuffer]",v="[object DataView]",j="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",k="[object Int16Array]",E="[object Int32Array]",A="[object Uint8Array]",T="[object Uint8ClampedArray]",S="[object Uint16Array]",C="[object Uint32Array]",P={};P[j]=P[x]=P[_]=P[k]=P[E]=P[A]=P[T]=P[S]=P[C]=!0,P[o]=P[i]=P[w]=P[l]=P[v]=P[p]=P[c]=P[u]=P[d]=P[h]=P[f]=P[m]=P[g]=P[y]=P[b]=!1;var O=Object.prototype,R=O.toString;e.exports=s},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}var s=9007199254740991;e.exports=n},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){(function(e){var s=n(245),a="object"==typeof t&&t&&!t.nodeType&&t,r=a&&"object"==typeof e&&e&&!e.nodeType&&e,o=r&&r.exports===a,i=o&&s.process,l=function(){try{return i&&i.binding("util")}catch(e){}}();e.exports=l}).call(t,n(310)(e))},function(e,t,n){function s(e){if(!a(e))return r(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}var a=n(319),r=n(320),o=Object.prototype,i=o.hasOwnProperty;e.exports=s},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||s;return e===n}var s=Object.prototype;e.exports=n},function(e,t,n){var s=n(321),a=s(Object.keys,Object);e.exports=a},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function s(e){return null!=e&&r(e.length)&&!a(e)}var a=n(272),r=n(315);e.exports=s},function(e,t,n){var s=n(324),a=n(269),r=n(325),o=n(326),i=n(327),l=n(328),p=n(276),c="[object Map]",u="[object Object]",d="[object Promise]",h="[object Set]",f="[object WeakMap]",m="[object DataView]",g=Object.prototype,y=g.toString,b=p(s),w=p(a),v=p(r),j=p(o),x=p(i),_=l;(s&&_(new s(new ArrayBuffer(1)))!=m||a&&_(new a)!=c||r&&_(r.resolve())!=d||o&&_(new o)!=h||i&&_(new i)!=f)&&(_=function(e){var t=y.call(e),n=t==u?e.constructor:void 0,s=n?p(n):void 0;if(s)switch(s){case b:return m;case w:return c;case v:return d;case j:return h;case x:return f}return t}),e.exports=_},function(e,t,n){var s=n(270),a=n(244),r=s(a,"DataView");e.exports=r},function(e,t,n){var s=n(270),a=n(244),r=s(a,"Promise");e.exports=r},function(e,t,n){var s=n(270),a=n(244),r=s(a,"Set");e.exports=r},function(e,t,n){var s=n(270),a=n(244),r=s(a,"WeakMap");e.exports=r},function(e,t){function n(e){return a.call(e)}var s=Object.prototype,a=s.toString;e.exports=n},function(e,t,n){function s(e){for(var t=r(e),n=t.length;n--;){var s=t[n],o=e[s];t[n]=[s,o,a(o)]}return t}var a=n(330),r=n(306);e.exports=s},function(e,t,n){function s(e){return e===e&&!a(e)}var a=n(273);e.exports=s},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t,n){function s(e,t){return i(e)&&l(t)?p(c(e),t):function(n){var s=r(n,e);return void 0===s&&s===t?o(n,e):a(t,s,void 0,u|d)}}var a=n(293),r=n(333),o=n(344),i=n(342),l=n(330),p=n(331),c=n(343),u=1,d=2;e.exports=s},function(e,t,n){function s(e,t,n){var s=null==e?void 0:a(e,t);return void 0===s?n:s}var a=n(334);e.exports=s},function(e,t,n){function s(e,t){t=r(t,e)?[t]:a(t);for(var n=0,s=t.length;null!=e&&n<s;)e=e[o(t[n++])];return n&&n==s?e:void 0}var a=n(335),r=n(342),o=n(343);e.exports=s},function(e,t,n){function s(e){return a(e)?e:r(e)}var a=n(249),r=n(336);e.exports=s},function(e,t,n){var s=n(337),a=n(339),r=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,l=s(function(e){e=a(e);var t=[];return r.test(e)&&t.push(""),e.replace(o,function(e,n,s,a){t.push(s?a.replace(i,"$1"):n||e)}),t});e.exports=l},function(e,t,n){function s(e){var t=a(e,function(e){return n.size===r&&n.clear(),e}),n=t.cache;return t}var a=n(338),r=500;e.exports=s},function(e,t,n){function s(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(r);var n=function(){var s=arguments,a=t?t.apply(this,s):s[0],r=n.cache;if(r.has(a))return r.get(a);var o=e.apply(this,s);return n.cache=r.set(a,o)||r,o};return n.cache=new(s.Cache||a),n}var a=n(278),r="Expected a function";s.Cache=a,e.exports=s},function(e,t,n){function s(e){return null==e?"":a(e)}var a=n(340);e.exports=s},function(e,t,n){function s(e){if("string"==typeof e)return e;if(o(e))return r(e,s)+"";if(i(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}var a=n(243),r=n(251),o=n(249),i=n(341),l=1/0,p=a?a.prototype:void 0,c=p?p.toString:void 0;e.exports=s},function(e,t,n){function s(e){return"symbol"==typeof e||a(e)&&i.call(e)==r}var a=n(248),r="[object Symbol]",o=Object.prototype,i=o.toString;e.exports=s},function(e,t,n){function s(e,t){if(a(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!r(e))||(i.test(e)||!o.test(e)||null!=t&&e in Object(t))}var a=n(249),r=n(341),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=s},function(e,t,n){function s(e){if("string"==typeof e||a(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}var a=n(341),r=1/0;e.exports=s},function(e,t,n){function s(e,t){return null!=e&&r(e,t,a)}var a=n(345),r=n(346);e.exports=s},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function s(e,t,n){t=l(t,e)?[t]:a(t);for(var s=-1,u=t.length,d=!1;++s<u;){var h=c(t[s]);if(!(d=null!=e&&n(e,h)))break;e=e[h]}return d||++s!=u?d:(u=e?e.length:0,!!u&&p(u)&&i(h,u)&&(o(e)||r(e)))}var a=n(335),r=n(246),o=n(249),i=n(312),l=n(342),p=n(315),c=n(343);e.exports=s},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function s(e){return o(e)?a(i(e)):r(e)}var a=n(349),r=n(350),o=n(342),i=n(343);e.exports=s},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function s(e){return function(t){return a(t,e)}}var a=n(334);e.exports=s},function(e,t,n){function s(e,t){var n=-1,s=r(e)?Array(e.length):[];return a(e,function(e,a,r){s[++n]=t(e,a,r)}),s}var a=n(352),r=n(322);e.exports=s},function(e,t,n){var s=n(353),a=n(356),r=a(s);e.exports=r},function(e,t,n){function s(e,t){return e&&a(e,t,r)}var a=n(354),r=n(306);e.exports=s},function(e,t,n){var s=n(355),a=s();e.exports=a},function(e,t){function n(e){return function(t,n,s){for(var a=-1,r=Object(t),o=s(t),i=o.length;i--;){var l=o[e?i:++a];if(n(r[l],l,r)===!1)break}return t}}e.exports=n},function(e,t,n){function s(e,t){return function(n,s){if(null==n)return n;if(!a(n))return e(n,s);for(var r=n.length,o=t?r:-1,i=Object(n);(t?o--:++o<r)&&s(i[o],o,i)!==!1;);return n}}var a=n(322);e.exports=s},function(e,t){function n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}e.exports=n},function(e,t,n){function s(e,t,n){for(var s=-1,r=e.criteria,o=t.criteria,i=r.length,l=n.length;++s<i;){var p=a(r[s],o[s]);if(p){if(s>=l)return p;var c=n[s];return p*("desc"==c?-1:1)}}return e.index-t.index}var a=n(359);e.exports=s},function(e,t,n){function s(e,t){if(e!==t){var n=void 0!==e,s=null===e,r=e===e,o=a(e),i=void 0!==t,l=null===t,p=t===t,c=a(t);if(!l&&!c&&!o&&e>t||o&&i&&p&&!l&&!c||s&&i&&p||!n&&p||!r)return 1;if(!s&&!o&&!c&&e<t||c&&n&&r&&!s&&!o||l&&n&&r||!i&&r||!p)return-1}return 0}var a=n(341);e.exports=s},function(e,t,n){function s(e,t){return o(r(e,t,a),e+"")}var a=n(347),r=n(361),o=n(363);e.exports=s},function(e,t,n){function s(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var s=arguments,o=-1,i=r(s.length-t,0),l=Array(i);++o<i;)l[o]=s[t+o];o=-1;for(var p=Array(t+1);++o<t;)p[o]=s[o];return p[t]=n(l),a(e,this,p)}}var a=n(362),r=Math.max;e.exports=s},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var s=n(364),a=n(367),r=a(s);e.exports=r},function(e,t,n){var s=n(365),a=n(366),r=n(347),o=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:s(t),writable:!0})}:r;e.exports=o},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t,n){var s=n(270),a=function(){try{var e=s(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=a},function(e,t){function n(e){var t=0,n=0;return function(){var o=r(),i=a-(o-n);if(n=o,i>0){if(++t>=s)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var s=500,a=16,r=Date.now;e.exports=n},function(e,t,n){function s(e,t,n){if(!i(n))return!1;var s=typeof t;return!!("number"==s?r(n)&&o(t,n.length):"string"==s&&t in n)&&a(n[t],e)}var a=n(260),r=n(322),o=n(312),i=n(273);e.exports=s},function(e,t,n){function s(e,t){var n=i(e)?a:r;return n(e,o(t,3))}var a=n(370),r=n(371),o=n(252),i=n(249);e.exports=s},function(e,t){function n(e,t){for(var n=-1,s=e?e.length:0,a=0,r=[];++n<s;){var o=e[n];t(o,n,e)&&(r[a++]=o)}return r}e.exports=n},function(e,t,n){function s(e,t){var n=[];return a(e,function(e,s,a){t(e,s,a)&&n.push(e)}),n}var a=n(352);e.exports=s},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var a=n(373),r=(s(a),n(374),n(172)),o=(s(r),function(e){return e});e.exports={prefixLink:o}},function(e,t,n){function s(e){return"string"==typeof e||!a(e)&&r(e)&&l.call(e)==o}var a=n(249),r=n(248),o="[object String]",i=Object.prototype,l=i.toString;e.exports=s},function(e,t){e.exports={config:{siteTitle:"Waigo.js",tagLine:"Node.js ES6 framework for reactive, data-driven apps and APIs",linkPrefix:"/",githubUrl:"https://github.com/waigo/waigo",twitterId:"waigojs",twitterUrl:"https://twitter.com/waigojs",discussUrl:"https://discord.gg/Jf3pGjf",docsLink:"/docs/introduction/motivation/",apiLink:"/api/",gettingStartedLink:"/docs/gettingstarted/requirements/",apiBaseUrl:"/api",githubDocsBaseUrl:"https://github.com/waigo/waigo/tree/master/docs"},relativePath:"",pages:[{file:{root:"",dir:"",base:"_template.jsx",ext:"jsx",name:"_template",extname:".jsx",basename:"_template.jsx",dirname:"",stem:"_template",path:"_template.jsx",absolute:"/home/travis/build/waigo/waigo.github.io/_template.jsx",isAbsolute:!1},requirePath:"_template.jsx",templatePath:"//",data:{}},{file:{root:"",dir:"",base:"404.md",ext:"md",name:"404",extname:".md",basename:"404.md",dirname:"",stem:"404",path:"404.md",absolute:"/home/travis/build/waigo/waigo.github.io/404.md",isAbsolute:!1},requirePath:"404.md",path:"/404.html",data:{path:"/404.html"}},{file:{root:"",dir:"api",base:"application.json",ext:"json",name:"application",extname:".json",basename:"application.json",dirname:"api",stem:"application",path:"api/application.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/application.json",isAbsolute:!1},requirePath:"api/application.json",path:"/api/application/",data:{}},{file:{root:"",dir:"api/cli",base:"init-gulp.json",ext:"json",name:"init-gulp",extname:".json",basename:"init-gulp.json",dirname:"api/cli",stem:"init-gulp",path:"api/cli/init-gulp.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/cli/init-gulp.json",isAbsolute:!1},requirePath:"api/cli/init-gulp.json",path:"/api/cli/init-gulp/",data:{}},{file:{root:"",dir:"api/cli",base:"init.json",ext:"json",name:"init",extname:".json",basename:"init.json",dirname:"api/cli",stem:"init",path:"api/cli/init.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/cli/init.json",isAbsolute:!1},requirePath:"api/cli/init.json",path:"/api/cli/init/",data:{}},{file:{root:"",dir:"api/config",base:"base.json",ext:"json",name:"base",extname:".json",basename:"base.json",dirname:"api/config",stem:"base",path:"api/config/base.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/config/base.json",isAbsolute:!1},requirePath:"api/config/base.json",path:"/api/config/base/",data:{}},{file:{root:"",dir:"api/config/index",base:"index.json",ext:"json",name:"index",extname:".json",basename:"index.json",dirname:"api/config/index",stem:"index",path:"api/config/index/index.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/config/index/index.json",isAbsolute:!1},requirePath:"api/config/index/index.json",path:"/api/config/index/",data:{}},{file:{root:"",dir:"api/controllers/index",base:"index.json",ext:"json",name:"index",extname:".json",basename:"index.json",dirname:"api/controllers/index",stem:"index",path:"api/controllers/index/index.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/controllers/index/index.json",isAbsolute:!1},requirePath:"api/controllers/index/index.json",path:"/api/controllers/index/",data:{}},{file:{root:"",dir:"api/controllers",base:"oauth.json",ext:"json",name:"oauth",extname:".json",basename:"oauth.json",dirname:"api/controllers",stem:"oauth",path:"api/controllers/oauth.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/controllers/oauth.json",isAbsolute:!1},requirePath:"api/controllers/oauth.json",path:"/api/controllers/oauth/",data:{}},{file:{root:"",dir:"api/controllers",base:"user.json",ext:"json",name:"user",extname:".json",basename:"user.json",dirname:"api/controllers",stem:"user",path:"api/controllers/user.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/controllers/user.json",isAbsolute:!1},requirePath:"api/controllers/user.json",path:"/api/controllers/user/",data:{}},{file:{root:"",dir:"api/forms",base:"forgotPassword.json",ext:"json",name:"forgotPassword",extname:".json",basename:"forgotPassword.json",dirname:"api/forms",stem:"forgotPassword",path:"api/forms/forgotPassword.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/forms/forgotPassword.json",isAbsolute:!1},requirePath:"api/forms/forgotPassword.json",path:"/api/forms/forgotPassword/",data:{}},{file:{root:"",dir:"api/forms",base:"login.json",ext:"json",name:"login",extname:".json",basename:"login.json",dirname:"api/forms",stem:"login",path:"api/forms/login.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/forms/login.json",isAbsolute:!1},requirePath:"api/forms/login.json",path:"/api/forms/login/",data:{}},{file:{root:"",dir:"api/forms",base:"register.json",ext:"json",name:"register",extname:".json",basename:"register.json",dirname:"api/forms",stem:"register",path:"api/forms/register.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/forms/register.json",isAbsolute:!1},requirePath:"api/forms/register.json",path:"/api/forms/register/",data:{}},{file:{root:"",dir:"api/forms",base:"resetPassword.json",ext:"json",name:"resetPassword",extname:".json",basename:"resetPassword.json",dirname:"api/forms",stem:"resetPassword",path:"api/forms/resetPassword.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/forms/resetPassword.json",isAbsolute:!1},requirePath:"api/forms/resetPassword.json",path:"/api/forms/resetPassword/",data:{}},{file:{root:"",dir:"api/frontend/js",base:"app.json",ext:"json",name:"app",extname:".json",basename:"app.json",dirname:"api/frontend/js",stem:"app",path:"api/frontend/js/app.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/frontend/js/app.json",isAbsolute:!1},requirePath:"api/frontend/js/app.json",path:"/api/frontend/js/app/",data:{}},{file:{root:"",dir:"api",base:"index.json",ext:"json",name:"index",extname:".json",basename:"index.json",dirname:"api",stem:"index",path:"api/index.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/index.json",isAbsolute:!1},requirePath:"api/index.json",path:"/api/",data:{}},{file:{root:"",dir:"api/index",base:"index.json",ext:"json",name:"index",extname:".json",basename:"index.json",dirname:"api/index",stem:"index",path:"api/index/index.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/index/index.json",isAbsolute:!1},requirePath:"api/index/index.json",path:"/api/index/",data:{}},{file:{root:"",dir:"api",base:"loader.json",ext:"json",name:"loader",extname:".json",basename:"loader.json",dirname:"api",stem:"loader",path:"api/loader.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/loader.json",isAbsolute:!1},requirePath:"api/loader.json",path:"/api/loader/",data:{}},{file:{root:"",dir:"api/models",base:"acl.json",ext:"json",name:"acl",extname:".json",basename:"acl.json",dirname:"api/models",stem:"acl",path:"api/models/acl.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/models/acl.json",isAbsolute:!1},requirePath:"api/models/acl.json",path:"/api/models/acl/",data:{}},{file:{root:"",dir:"api/models",base:"activity.json",ext:"json",name:"activity",extname:".json",basename:"activity.json",dirname:"api/models",stem:"activity",
path:"api/models/activity.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/models/activity.json",isAbsolute:!1},requirePath:"api/models/activity.json",path:"/api/models/activity/",data:{}},{file:{root:"",dir:"api/models",base:"cron.json",ext:"json",name:"cron",extname:".json",basename:"cron.json",dirname:"api/models",stem:"cron",path:"api/models/cron.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/models/cron.json",isAbsolute:!1},requirePath:"api/models/cron.json",path:"/api/models/cron/",data:{}},{file:{root:"",dir:"api/models",base:"user.json",ext:"json",name:"user",extname:".json",basename:"user.json",dirname:"api/models",stem:"user",path:"api/models/user.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/models/user.json",isAbsolute:!1},requirePath:"api/models/user.json",path:"/api/models/user/",data:{}},{file:{root:"",dir:"api/routes/index",base:"index.json",ext:"json",name:"index",extname:".json",basename:"index.json",dirname:"api/routes/index",stem:"index",path:"api/routes/index/index.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/routes/index/index.json",isAbsolute:!1},requirePath:"api/routes/index/index.json",path:"/api/routes/index/",data:{}},{file:{root:"",dir:"api/routes",base:"oauth.json",ext:"json",name:"oauth",extname:".json",basename:"oauth.json",dirname:"api/routes",stem:"oauth",path:"api/routes/oauth.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/routes/oauth.json",isAbsolute:!1},requirePath:"api/routes/oauth.json",path:"/api/routes/oauth/",data:{}},{file:{root:"",dir:"api/support",base:"acl.json",ext:"json",name:"acl",extname:".json",basename:"acl.json",dirname:"api/support",stem:"acl",path:"api/support/acl.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/acl.json",isAbsolute:!1},requirePath:"api/support/acl.json",path:"/api/support/acl/",data:{}},{file:{root:"",dir:"api/support",base:"actionTokens.json",ext:"json",name:"actionTokens",extname:".json",basename:"actionTokens.json",dirname:"api/support",stem:"actionTokens",path:"api/support/actionTokens.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/actionTokens.json",isAbsolute:!1},requirePath:"api/support/actionTokens.json",path:"/api/support/actionTokens/",data:{}},{file:{root:"",dir:"api/support",base:"cliCommand.json",ext:"json",name:"cliCommand",extname:".json",basename:"cliCommand.json",dirname:"api/support",stem:"cliCommand",path:"api/support/cliCommand.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/cliCommand.json",isAbsolute:!1},requirePath:"api/support/cliCommand.json",path:"/api/support/cliCommand/",data:{}},{file:{root:"",dir:"api/support/cronTasks",base:"notifyAdminsAboutUserStats.json",ext:"json",name:"notifyAdminsAboutUserStats",extname:".json",basename:"notifyAdminsAboutUserStats.json",dirname:"api/support/cronTasks",stem:"notifyAdminsAboutUserStats",path:"api/support/cronTasks/notifyAdminsAboutUserStats.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/cronTasks/notifyAdminsAboutUserStats.json",isAbsolute:!1},requirePath:"api/support/cronTasks/notifyAdminsAboutUserStats.json",path:"/api/support/cronTasks/notifyAdminsAboutUserStats/",data:{}},{file:{root:"",dir:"api/support/db",base:"rethinkdb.json",ext:"json",name:"rethinkdb",extname:".json",basename:"rethinkdb.json",dirname:"api/support/db",stem:"rethinkdb",path:"api/support/db/rethinkdb.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/db/rethinkdb.json",isAbsolute:!1},requirePath:"api/support/db/rethinkdb.json",path:"/api/support/db/rethinkdb/",data:{}},{file:{root:"",dir:"api/support",base:"errors.json",ext:"json",name:"errors",extname:".json",basename:"errors.json",dirname:"api/support",stem:"errors",path:"api/support/errors.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/errors.json",isAbsolute:!1},requirePath:"api/support/errors.json",path:"/api/support/errors/",data:{}},{file:{root:"",dir:"api/support/forms",base:"field.json",ext:"json",name:"field",extname:".json",basename:"field.json",dirname:"api/support/forms",stem:"field",path:"api/support/forms/field.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/field.json",isAbsolute:!1},requirePath:"api/support/forms/field.json",path:"/api/support/forms/field/",data:{}},{file:{root:"",dir:"api/support/forms/fields",base:"checkbox.json",ext:"json",name:"checkbox",extname:".json",basename:"checkbox.json",dirname:"api/support/forms/fields",stem:"checkbox",path:"api/support/forms/fields/checkbox.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/fields/checkbox.json",isAbsolute:!1},requirePath:"api/support/forms/fields/checkbox.json",path:"/api/support/forms/fields/checkbox/",data:{}},{file:{root:"",dir:"api/support/forms/fields",base:"csrf.json",ext:"json",name:"csrf",extname:".json",basename:"csrf.json",dirname:"api/support/forms/fields",stem:"csrf",path:"api/support/forms/fields/csrf.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/fields/csrf.json",isAbsolute:!1},requirePath:"api/support/forms/fields/csrf.json",path:"/api/support/forms/fields/csrf/",data:{}},{file:{root:"",dir:"api/support/forms/fields",base:"email.json",ext:"json",name:"email",extname:".json",basename:"email.json",dirname:"api/support/forms/fields",stem:"email",path:"api/support/forms/fields/email.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/fields/email.json",isAbsolute:!1},requirePath:"api/support/forms/fields/email.json",path:"/api/support/forms/fields/email/",data:{}},{file:{root:"",dir:"api/support/forms/fields",base:"hidden.json",ext:"json",name:"hidden",extname:".json",basename:"hidden.json",dirname:"api/support/forms/fields",stem:"hidden",path:"api/support/forms/fields/hidden.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/fields/hidden.json",isAbsolute:!1},requirePath:"api/support/forms/fields/hidden.json",path:"/api/support/forms/fields/hidden/",data:{}},{file:{root:"",dir:"api/support/forms/fields",base:"number.json",ext:"json",name:"number",extname:".json",basename:"number.json",dirname:"api/support/forms/fields",stem:"number",path:"api/support/forms/fields/number.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/fields/number.json",isAbsolute:!1},requirePath:"api/support/forms/fields/number.json",path:"/api/support/forms/fields/number/",data:{}},{file:{root:"",dir:"api/support/forms/fields",base:"password.json",ext:"json",name:"password",extname:".json",basename:"password.json",dirname:"api/support/forms/fields",stem:"password",path:"api/support/forms/fields/password.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/fields/password.json",isAbsolute:!1},requirePath:"api/support/forms/fields/password.json",path:"/api/support/forms/fields/password/",data:{}},{file:{root:"",dir:"api/support/forms/fields",base:"select.json",ext:"json",name:"select",extname:".json",basename:"select.json",dirname:"api/support/forms/fields",stem:"select",path:"api/support/forms/fields/select.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/fields/select.json",isAbsolute:!1},requirePath:"api/support/forms/fields/select.json",path:"/api/support/forms/fields/select/",data:{}},{file:{root:"",dir:"api/support/forms/fields",base:"text.json",ext:"json",name:"text",extname:".json",basename:"text.json",dirname:"api/support/forms/fields",stem:"text",path:"api/support/forms/fields/text.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/fields/text.json",isAbsolute:!1},requirePath:"api/support/forms/fields/text.json",path:"/api/support/forms/fields/text/",data:{}},{file:{root:"",dir:"api/support/forms",base:"form.json",ext:"json",name:"form",extname:".json",basename:"form.json",dirname:"api/support/forms",stem:"form",path:"api/support/forms/form.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/form.json",isAbsolute:!1},requirePath:"api/support/forms/form.json",path:"/api/support/forms/form/",data:{}},{file:{root:"",dir:"api/support/forms/sanitizers",base:"lib.json",ext:"json",name:"lib",extname:".json",basename:"lib.json",dirname:"api/support/forms/sanitizers",stem:"lib",path:"api/support/forms/sanitizers/lib.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/sanitizers/lib.json",isAbsolute:!1},requirePath:"api/support/forms/sanitizers/lib.json",path:"/api/support/forms/sanitizers/lib/",data:{}},{file:{root:"",dir:"api/support/forms/sanitizers",base:"trim.json",ext:"json",name:"trim",extname:".json",basename:"trim.json",dirname:"api/support/forms/sanitizers",stem:"trim",path:"api/support/forms/sanitizers/trim.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/sanitizers/trim.json",isAbsolute:!1},requirePath:"api/support/forms/sanitizers/trim.json",path:"/api/support/forms/sanitizers/trim/",data:{}},{file:{root:"",dir:"api/support/forms/validators",base:"compareToField.json",ext:"json",name:"compareToField",extname:".json",basename:"compareToField.json",dirname:"api/support/forms/validators",stem:"compareToField",path:"api/support/forms/validators/compareToField.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/validators/compareToField.json",isAbsolute:!1},requirePath:"api/support/forms/validators/compareToField.json",path:"/api/support/forms/validators/compareToField/",data:{}},{file:{root:"",dir:"api/support/forms/validators",base:"emailAddressNotInUse.json",ext:"json",name:"emailAddressNotInUse",extname:".json",basename:"emailAddressNotInUse.json",dirname:"api/support/forms/validators",stem:"emailAddressNotInUse",path:"api/support/forms/validators/emailAddressNotInUse.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/validators/emailAddressNotInUse.json",isAbsolute:!1},requirePath:"api/support/forms/validators/emailAddressNotInUse.json",path:"/api/support/forms/validators/emailAddressNotInUse/",data:{}},{file:{root:"",dir:"api/support/forms/validators",base:"isEmailAddress.json",ext:"json",name:"isEmailAddress",extname:".json",basename:"isEmailAddress.json",dirname:"api/support/forms/validators",stem:"isEmailAddress",path:"api/support/forms/validators/isEmailAddress.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/validators/isEmailAddress.json",isAbsolute:!1},requirePath:"api/support/forms/validators/isEmailAddress.json",path:"/api/support/forms/validators/isEmailAddress/",data:{}},{file:{root:"",dir:"api/support/forms/validators",base:"isLength.json",ext:"json",name:"isLength",extname:".json",basename:"isLength.json",dirname:"api/support/forms/validators",stem:"isLength",path:"api/support/forms/validators/isLength.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/validators/isLength.json",isAbsolute:!1},requirePath:"api/support/forms/validators/isLength.json",path:"/api/support/forms/validators/isLength/",data:{}},{file:{root:"",dir:"api/support/forms/validators",base:"lib.json",ext:"json",name:"lib",extname:".json",basename:"lib.json",dirname:"api/support/forms/validators",stem:"lib",path:"api/support/forms/validators/lib.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/validators/lib.json",isAbsolute:!1},requirePath:"api/support/forms/validators/lib.json",path:"/api/support/forms/validators/lib/",data:{}},{file:{root:"",dir:"api/support/forms/validators",base:"notEmpty.json",ext:"json",name:"notEmpty",extname:".json",basename:"notEmpty.json",dirname:"api/support/forms/validators",stem:"notEmpty",path:"api/support/forms/validators/notEmpty.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/validators/notEmpty.json",isAbsolute:!1},requirePath:"api/support/forms/validators/notEmpty.json",path:"/api/support/forms/validators/notEmpty/",data:{}},{file:{root:"",dir:"api/support/forms/validators",base:"numberInRange.json",ext:"json",name:"numberInRange",extname:".json",basename:"numberInRange.json",dirname:"api/support/forms/validators",stem:"numberInRange",path:"api/support/forms/validators/numberInRange.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/forms/validators/numberInRange.json",isAbsolute:!1},requirePath:"api/support/forms/validators/numberInRange.json",path:"/api/support/forms/validators/numberInRange/",data:{}},{file:{root:"",dir:"api/support",base:"lodashMixins.json",ext:"json",name:"lodashMixins",extname:".json",basename:"lodashMixins.json",dirname:"api/support",stem:"lodashMixins",path:"api/support/lodashMixins.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/lodashMixins.json",isAbsolute:!1},requirePath:"api/support/lodashMixins.json",path:"/api/support/lodashMixins/",data:{}},{file:{root:"",dir:"api/support",base:"logger.json",ext:"json",name:"logger",extname:".json",basename:"logger.json",dirname:"api/support",stem:"logger",path:"api/support/logger.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/logger.json",isAbsolute:!1},requirePath:"api/support/logger.json",path:"/api/support/logger/",data:{}},{file:{root:"",dir:"api/support/mailer",base:"base.json",ext:"json",name:"base",extname:".json",basename:"base.json",dirname:"api/support/mailer",stem:"base",path:"api/support/mailer/base.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/mailer/base.json",isAbsolute:!1},requirePath:"api/support/mailer/base.json",path:"/api/support/mailer/base/",data:{}},{file:{root:"",dir:"api/support/mailer",base:"console.json",ext:"json",name:"console",extname:".json",basename:"console.json",dirname:"api/support/mailer",stem:"console",path:"api/support/mailer/console.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/mailer/console.json",isAbsolute:!1},requirePath:"api/support/mailer/console.json",path:"/api/support/mailer/console/",data:{}},{file:{root:"",dir:"api/support/mailer/engines",base:"nodeMailer.json",ext:"json",name:"nodeMailer",extname:".json",basename:"nodeMailer.json",dirname:"api/support/mailer/engines",stem:"nodeMailer",path:"api/support/mailer/engines/nodeMailer.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/mailer/engines/nodeMailer.json",isAbsolute:!1},requirePath:"api/support/mailer/engines/nodeMailer.json",path:"/api/support/mailer/engines/nodeMailer/",data:{}},{file:{root:"",dir:"api/support/middleware",base:"assertUser.json",ext:"json",name:"assertUser",extname:".json",basename:"assertUser.json",dirname:"api/support/middleware",stem:"assertUser",path:"api/support/middleware/assertUser.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/middleware/assertUser.json",isAbsolute:!1},requirePath:"api/support/middleware/assertUser.json",path:"/api/support/middleware/assertUser/",data:{}},{file:{root:"",dir:"api/support/middleware",base:"bodyParser.json",ext:"json",name:"bodyParser",extname:".json",basename:"bodyParser.json",dirname:"api/support/middleware",stem:"bodyParser",path:"api/support/middleware/bodyParser.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/middleware/bodyParser.json",isAbsolute:!1},requirePath:"api/support/middleware/bodyParser.json",path:"/api/support/middleware/bodyParser/",data:{}},{file:{root:"",dir:"api/support/middleware",base:"contextHelpers.json",ext:"json",name:"contextHelpers",extname:".json",basename:"contextHelpers.json",dirname:"api/support/middleware",stem:"contextHelpers",path:"api/support/middleware/contextHelpers.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/middleware/contextHelpers.json",isAbsolute:!1},requirePath:"api/support/middleware/contextHelpers.json",path:"/api/support/middleware/contextHelpers/",data:{}},{file:{root:"",dir:"api/support/middleware",base:"csrf.json",ext:"json",name:"csrf",extname:".json",basename:"csrf.json",dirname:"api/support/middleware",stem:"csrf",path:"api/support/middleware/csrf.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/middleware/csrf.json",isAbsolute:!1},requirePath:"api/support/middleware/csrf.json",path:"/api/support/middleware/csrf/",data:{}},{file:{root:"",dir:"api/support/middleware",base:"currentUser.json",ext:"json",name:"currentUser",extname:".json",basename:"currentUser.json",dirname:"api/support/middleware",stem:"currentUser",path:"api/support/middleware/currentUser.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/middleware/currentUser.json",isAbsolute:!1},requirePath:"api/support/middleware/currentUser.json",path:"/api/support/middleware/currentUser/",data:{}},{file:{root:"",dir:"api/support/middleware",base:"errorHandler.json",ext:"json",name:"errorHandler",extname:".json",basename:"errorHandler.json",dirname:"api/support/middleware",stem:"errorHandler",path:"api/support/middleware/errorHandler.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/middleware/errorHandler.json",isAbsolute:!1},requirePath:"api/support/middleware/errorHandler.json",path:"/api/support/middleware/errorHandler/",data:{}},{file:{root:"",dir:"api/support/middleware",base:"outputFormats.json",ext:"json",name:"outputFormats",extname:".json",basename:"outputFormats.json",dirname:"api/support/middleware",stem:"outputFormats",path:"api/support/middleware/outputFormats.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/middleware/outputFormats.json",isAbsolute:!1},requirePath:"api/support/middleware/outputFormats.json",path:"/api/support/middleware/outputFormats/",data:{}},{file:{root:"",dir:"api/support/middleware",base:"sessions.json",ext:"json",name:"sessions",extname:".json",basename:"sessions.json",dirname:"api/support/middleware",stem:"sessions",path:"api/support/middleware/sessions.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/middleware/sessions.json",isAbsolute:!1},requirePath:"api/support/middleware/sessions.json",path:"/api/support/middleware/sessions/",data:{}},{file:{root:"",dir:"api/support/middleware",base:"staticResources.json",ext:"json",name:"staticResources",extname:".json",basename:"staticResources.json",dirname:"api/support/middleware",stem:"staticResources",path:"api/support/middleware/staticResources.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/middleware/staticResources.json",isAbsolute:!1},requirePath:"api/support/middleware/staticResources.json",path:"/api/support/middleware/staticResources/",data:{}},{file:{root:"",dir:"api/support/notifications",base:"log.json",ext:"json",name:"log",extname:".json",basename:"log.json",dirname:"api/support/notifications",stem:"log",path:"api/support/notifications/log.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/notifications/log.json",isAbsolute:!1},requirePath:"api/support/notifications/log.json",path:"/api/support/notifications/log/",data:{}},{file:{root:"",dir:"api/support/notifications",base:"slack.json",ext:"json",name:"slack",extname:".json",basename:"slack.json",dirname:"api/support/notifications",stem:"slack",path:"api/support/notifications/slack.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/notifications/slack.json",isAbsolute:!1},requirePath:"api/support/notifications/slack.json",path:"/api/support/notifications/slack/",data:{}},{file:{root:"",dir:"api/support/oauth",base:"error.json",ext:"json",name:"error",extname:".json",basename:"error.json",dirname:"api/support/oauth",stem:"error",path:"api/support/oauth/error.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/oauth/error.json",isAbsolute:!1},requirePath:"api/support/oauth/error.json",path:"/api/support/oauth/error/",data:{}},{file:{root:"",dir:"api/support/oauth/index",base:"index.json",ext:"json",name:"index",extname:".json",basename:"index.json",dirname:"api/support/oauth/index",stem:"index",path:"api/support/oauth/index/index.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/oauth/index/index.json",isAbsolute:!1},requirePath:"api/support/oauth/index/index.json",path:"/api/support/oauth/index/",data:{}},{file:{root:"",dir:"api/support/oauth/providers",base:"generic.json",ext:"json",name:"generic",extname:".json",basename:"generic.json",dirname:"api/support/oauth/providers",stem:"generic",path:"api/support/oauth/providers/generic.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/oauth/providers/generic.json",isAbsolute:!1},requirePath:"api/support/oauth/providers/generic.json",path:"/api/support/oauth/providers/generic/",data:{}},{file:{root:"",dir:"api/support/outputFormats",base:"html.json",ext:"json",name:"html",extname:".json",basename:"html.json",dirname:"api/support/outputFormats",stem:"html",path:"api/support/outputFormats/html.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/outputFormats/html.json",isAbsolute:!1},requirePath:"api/support/outputFormats/html.json",path:"/api/support/outputFormats/html/",data:{}},{file:{root:"",dir:"api/support/outputFormats",base:"json.json",ext:"json",name:"json",extname:".json",basename:"json.json",dirname:"api/support/outputFormats",stem:"json",path:"api/support/outputFormats/json.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/outputFormats/json.json",isAbsolute:!1},requirePath:"api/support/outputFormats/json.json",path:"/api/support/outputFormats/json/",data:{}},{file:{root:"",dir:"api/support",base:"promise.json",ext:"json",name:"promise",extname:".json",basename:"promise.json",dirname:"api/support",stem:"promise",path:"api/support/promise.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/promise.json",isAbsolute:!1},requirePath:"api/support/promise.json",path:"/api/support/promise/",data:{}},{file:{root:"",dir:"api/support",base:"routeMapper.json",ext:"json",name:"routeMapper",extname:".json",basename:"routeMapper.json",dirname:"api/support",stem:"routeMapper",path:"api/support/routeMapper.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/routeMapper.json",isAbsolute:!1},requirePath:"api/support/routeMapper.json",path:"/api/support/routeMapper/",data:{}},{file:{root:"",dir:"api/support/session/store",base:"cookie.json",ext:"json",name:"cookie",extname:".json",basename:"cookie.json",dirname:"api/support/session/store",stem:"cookie",path:"api/support/session/store/cookie.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/session/store/cookie.json",isAbsolute:!1},requirePath:"api/support/session/store/cookie.json",path:"/api/support/session/store/cookie/",data:{}},{file:{root:"",dir:"api/support/shutdown",base:"acl.json",ext:"json",name:"acl",extname:".json",basename:"acl.json",dirname:"api/support/shutdown",stem:"acl",path:"api/support/shutdown/acl.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/shutdown/acl.json",isAbsolute:!1},requirePath:"api/support/shutdown/acl.json",path:"/api/support/shutdown/acl/",data:{}},{file:{root:"",dir:"api/support/shutdown",base:"cron.json",ext:"json",name:"cron",extname:".json",basename:"cron.json",dirname:"api/support/shutdown",stem:"cron",path:"api/support/shutdown/cron.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/shutdown/cron.json",isAbsolute:!1},requirePath:"api/support/shutdown/cron.json",path:"/api/support/shutdown/cron/",data:{}},{file:{root:"",dir:"api/support/shutdown",base:"db.json",ext:"json",name:"db",extname:".json",basename:"db.json",dirname:"api/support/shutdown",stem:"db",path:"api/support/shutdown/db.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/shutdown/db.json",isAbsolute:!1},requirePath:"api/support/shutdown/db.json",path:"/api/support/shutdown/db/",data:{}},{file:{root:"",dir:"api/support/shutdown",base:"listener.json",ext:"json",name:"listener",extname:".json",basename:"listener.json",dirname:"api/support/shutdown",stem:"listener",path:"api/support/shutdown/listener.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/shutdown/listener.json",isAbsolute:!1},requirePath:"api/support/shutdown/listener.json",path:"/api/support/shutdown/listener/",data:{}},{file:{root:"",dir:"api/support/startup",base:"acl.json",ext:"json",name:"acl",extname:".json",basename:"acl.json",dirname:"api/support/startup",stem:"acl",path:"api/support/startup/acl.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/acl.json",isAbsolute:!1},requirePath:"api/support/startup/acl.json",path:"/api/support/startup/acl/",data:{}},{file:{root:"",dir:"api/support/startup",base:"actionTokens.json",ext:"json",name:"actionTokens",extname:".json",basename:"actionTokens.json",dirname:"api/support/startup",stem:"actionTokens",path:"api/support/startup/actionTokens.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/actionTokens.json",isAbsolute:!1},requirePath:"api/support/startup/actionTokens.json",path:"/api/support/startup/actionTokens/",data:{}},{file:{root:"",dir:"api/support/startup",base:"activityRecorder.json",ext:"json",name:"activityRecorder",extname:".json",basename:"activityRecorder.json",dirname:"api/support/startup",stem:"activityRecorder",path:"api/support/startup/activityRecorder.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/activityRecorder.json",isAbsolute:!1},requirePath:"api/support/startup/activityRecorder.json",path:"/api/support/startup/activityRecorder/",data:{}},{file:{root:"",dir:"api/support/startup",base:"appTemplateVars.json",ext:"json",name:"appTemplateVars",extname:".json",basename:"appTemplateVars.json",dirname:"api/support/startup",stem:"appTemplateVars",path:"api/support/startup/appTemplateVars.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/appTemplateVars.json",isAbsolute:!1},requirePath:"api/support/startup/appTemplateVars.json",path:"/api/support/startup/appTemplateVars/",data:{}},{file:{root:"",dir:"api/support/startup",base:"cron.json",ext:"json",name:"cron",extname:".json",basename:"cron.json",dirname:"api/support/startup",stem:"cron",path:"api/support/startup/cron.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/cron.json",isAbsolute:!1},requirePath:"api/support/startup/cron.json",path:"/api/support/startup/cron/",data:{}},{file:{root:"",dir:"api/support/startup",base:"db.json",ext:"json",name:"db",extname:".json",basename:"db.json",dirname:"api/support/startup",stem:"db",path:"api/support/startup/db.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/db.json",isAbsolute:!1},requirePath:"api/support/startup/db.json",path:"/api/support/startup/db/",data:{}},{file:{root:"",dir:"api/support/startup",base:"forms.json",ext:"json",name:"forms",extname:".json",basename:"forms.json",dirname:"api/support/startup",stem:"forms",path:"api/support/startup/forms.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/forms.json",isAbsolute:!1},requirePath:"api/support/startup/forms.json",path:"/api/support/startup/forms/",data:{}},{file:{root:"",dir:"api/support/startup",base:"listener.json",ext:"json",name:"listener",extname:".json",basename:"listener.json",dirname:"api/support/startup",stem:"listener",path:"api/support/startup/listener.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/listener.json",isAbsolute:!1},requirePath:"api/support/startup/listener.json",path:"/api/support/startup/listener/",data:{}},{file:{root:"",dir:"api/support/startup",base:"mailer.json",ext:"json",name:"mailer",extname:".json",basename:"mailer.json",dirname:"api/support/startup",stem:"mailer",path:"api/support/startup/mailer.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/mailer.json",isAbsolute:!1},requirePath:"api/support/startup/mailer.json",path:"/api/support/startup/mailer/",data:{}},{file:{root:"",dir:"api/support/startup",base:"middleware.json",ext:"json",name:"middleware",extname:".json",basename:"middleware.json",dirname:"api/support/startup",stem:"middleware",path:"api/support/startup/middleware.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/middleware.json",isAbsolute:!1},requirePath:"api/support/startup/middleware.json",path:"/api/support/startup/middleware/",data:{}},{file:{root:"",dir:"api/support/startup",base:"models.json",ext:"json",name:"models",extname:".json",basename:"models.json",dirname:"api/support/startup",stem:"models",path:"api/support/startup/models.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/models.json",isAbsolute:!1},requirePath:"api/support/startup/models.json",path:"/api/support/startup/models/",data:{}},{file:{root:"",dir:"api/support/startup",base:"notifications.json",ext:"json",name:"notifications",extname:".json",basename:"notifications.json",dirname:"api/support/startup",stem:"notifications",path:"api/support/startup/notifications.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/notifications.json",isAbsolute:!1},requirePath:"api/support/startup/notifications.json",path:"/api/support/startup/notifications/",data:{}},{file:{root:"",dir:"api/support/startup",base:"routes.json",ext:"json",name:"routes",extname:".json",basename:"routes.json",dirname:"api/support/startup",stem:"routes",path:"api/support/startup/routes.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/routes.json",isAbsolute:!1},requirePath:"api/support/startup/routes.json",path:"/api/support/startup/routes/",data:{}},{file:{root:"",dir:"api/support/startup",base:"staticResources.json",ext:"json",name:"staticResources",extname:".json",basename:"staticResources.json",dirname:"api/support/startup",stem:"staticResources",path:"api/support/startup/staticResources.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/startup/staticResources.json",isAbsolute:!1},requirePath:"api/support/startup/staticResources.json",path:"/api/support/startup/staticResources/",data:{}},{file:{root:"",dir:"api/support",base:"viewObjects.json",ext:"json",name:"viewObjects",extname:".json",basename:"viewObjects.json",dirname:"api/support",stem:"viewObjects",path:"api/support/viewObjects.json",absolute:"/home/travis/build/waigo/waigo.github.io/api/support/viewObjects.json",isAbsolute:!1},requirePath:"api/support/viewObjects.json",path:"/api/support/viewObjects/",data:{}},{file:{root:"",dir:"docs/appconfiguration",base:"appobject.md",ext:"md",name:"appobject",extname:".md",basename:"appobject.md",dirname:"docs/appconfiguration",stem:"appobject",path:"docs/appconfiguration/appobject.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/appconfiguration/appobject.md",isAbsolute:!1},requirePath:"docs/appconfiguration/appobject.md",path:"/docs/appconfiguration/appobject/",data:{title:"App object"}},{file:{root:"",dir:"docs/appconfiguration",base:"configuration.md",ext:"md",name:"configuration",extname:".md",basename:"configuration.md",dirname:"docs/appconfiguration",stem:"configuration",path:"docs/appconfiguration/configuration.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/appconfiguration/configuration.md",isAbsolute:!1},requirePath:"docs/appconfiguration/configuration.md",path:"/docs/appconfiguration/configuration/",data:{title:"Configuration"}},{file:{root:"",dir:"docs/appconfiguration",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/appconfiguration",stem:"index",path:"docs/appconfiguration/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/appconfiguration/index.md",isAbsolute:!1},requirePath:"docs/appconfiguration/index.md",path:"/docs/appconfiguration/",data:{title:"App configuration"}},{file:{root:"",dir:"docs/appconfiguration",base:"shutdownsteps.md",ext:"md",name:"shutdownsteps",extname:".md",basename:"shutdownsteps.md",dirname:"docs/appconfiguration",stem:"shutdownsteps",path:"docs/appconfiguration/shutdownsteps.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/appconfiguration/shutdownsteps.md",
isAbsolute:!1},requirePath:"docs/appconfiguration/shutdownsteps.md",path:"/docs/appconfiguration/shutdownsteps/",data:{title:"Shutdown steps"}},{file:{root:"",dir:"docs/appconfiguration",base:"startupsteps.md",ext:"md",name:"startupsteps",extname:".md",basename:"startupsteps.md",dirname:"docs/appconfiguration",stem:"startupsteps",path:"docs/appconfiguration/startupsteps.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/appconfiguration/startupsteps.md",isAbsolute:!1},requirePath:"docs/appconfiguration/startupsteps.md",path:"/docs/appconfiguration/startupsteps/",data:{title:"Startup steps"}},{file:{root:"",dir:"docs/bestpractices",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/bestpractices",stem:"index",path:"docs/bestpractices/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/bestpractices/index.md",isAbsolute:!1},requirePath:"docs/bestpractices/index.md",path:"/docs/bestpractices/",data:{title:"Best practices"}},{file:{root:"",dir:"docs/commandline",base:"creatingcustomcommands.md",ext:"md",name:"creatingcustomcommands",extname:".md",basename:"creatingcustomcommands.md",dirname:"docs/commandline",stem:"creatingcustomcommands",path:"docs/commandline/creatingcustomcommands.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/commandline/creatingcustomcommands.md",isAbsolute:!1},requirePath:"docs/commandline/creatingcustomcommands.md",path:"/docs/commandline/creatingcustomcommands/",data:{title:"Creating custom commands"}},{file:{root:"",dir:"docs/commandline",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/commandline",stem:"index",path:"docs/commandline/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/commandline/index.md",isAbsolute:!1},requirePath:"docs/commandline/index.md",path:"/docs/commandline/",data:{title:"Command-Line (CLI)"}},{file:{root:"",dir:"docs/commandline",base:"usingthecli.md",ext:"md",name:"usingthecli",extname:".md",basename:"usingthecli.md",dirname:"docs/commandline",stem:"usingthecli",path:"docs/commandline/usingthecli.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/commandline/usingthecli.md",isAbsolute:!1},requirePath:"docs/commandline/usingthecli.md",path:"/docs/commandline/usingthecli/",data:{title:"Using the CLI"}},{file:{root:"",dir:"docs/controllers",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/controllers",stem:"index",path:"docs/controllers/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/controllers/index.md",isAbsolute:!1},requirePath:"docs/controllers/index.md",path:"/docs/controllers/",data:{title:"Controllers"}},{file:{root:"",dir:"docs/databaseandmodels",base:"builtinmodels.md",ext:"md",name:"builtinmodels",extname:".md",basename:"builtinmodels.md",dirname:"docs/databaseandmodels",stem:"builtinmodels",path:"docs/databaseandmodels/builtinmodels.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/databaseandmodels/builtinmodels.md",isAbsolute:!1},requirePath:"docs/databaseandmodels/builtinmodels.md",path:"/docs/databaseandmodels/builtinmodels/",data:{title:"Built-in models"}},{file:{root:"",dir:"docs/databaseandmodels",base:"databaseconnections.md",ext:"md",name:"databaseconnections",extname:".md",basename:"databaseconnections.md",dirname:"docs/databaseandmodels",stem:"databaseconnections",path:"docs/databaseandmodels/databaseconnections.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/databaseandmodels/databaseconnections.md",isAbsolute:!1},requirePath:"docs/databaseandmodels/databaseconnections.md",path:"/docs/databaseandmodels/databaseconnections/",data:{title:"Database connections"}},{file:{root:"",dir:"docs/databaseandmodels",base:"definingandusingmodels.md",ext:"md",name:"definingandusingmodels",extname:".md",basename:"definingandusingmodels.md",dirname:"docs/databaseandmodels",stem:"definingandusingmodels",path:"docs/databaseandmodels/definingandusingmodels.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/databaseandmodels/definingandusingmodels.md",isAbsolute:!1},requirePath:"docs/databaseandmodels/definingandusingmodels.md",path:"/docs/databaseandmodels/definingandusingmodels/",data:{title:"Defining and using models"}},{file:{root:"",dir:"docs/databaseandmodels",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/databaseandmodels",stem:"index",path:"docs/databaseandmodels/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/databaseandmodels/index.md",isAbsolute:!1},requirePath:"docs/databaseandmodels/index.md",path:"/docs/databaseandmodels/",data:{title:"Database and Models"}},{file:{root:"",dir:"docs/databaseandmodels",base:"overviewofmodels.md",ext:"md",name:"overviewofmodels",extname:".md",basename:"overviewofmodels.md",dirname:"docs/databaseandmodels",stem:"overviewofmodels",path:"docs/databaseandmodels/overviewofmodels.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/databaseandmodels/overviewofmodels.md",isAbsolute:!1},requirePath:"docs/databaseandmodels/overviewofmodels.md",path:"/docs/databaseandmodels/overviewofmodels/",data:{title:"How models work"}},{file:{root:"",dir:"docs/databaseandmodels",base:"reactiveupdates.md",ext:"md",name:"reactiveupdates",extname:".md",basename:"reactiveupdates.md",dirname:"docs/databaseandmodels",stem:"reactiveupdates",path:"docs/databaseandmodels/reactiveupdates.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/databaseandmodels/reactiveupdates.md",isAbsolute:!1},requirePath:"docs/databaseandmodels/reactiveupdates.md",path:"/docs/databaseandmodels/reactiveupdates/",data:{title:"Reactive updates"}},{file:{root:"",dir:"docs/errorhandling",base:"builtinerrorclasses.md",ext:"md",name:"builtinerrorclasses",extname:".md",basename:"builtinerrorclasses.md",dirname:"docs/errorhandling",stem:"builtinerrorclasses",path:"docs/errorhandling/builtinerrorclasses.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/errorhandling/builtinerrorclasses.md",isAbsolute:!1},requirePath:"docs/errorhandling/builtinerrorclasses.md",path:"/docs/errorhandling/builtinerrorclasses/",data:{title:"Built-in Error classes"}},{file:{root:"",dir:"docs/errorhandling",base:"creatingyourown.md",ext:"md",name:"creatingyourown",extname:".md",basename:"creatingyourown.md",dirname:"docs/errorhandling",stem:"creatingyourown",path:"docs/errorhandling/creatingyourown.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/errorhandling/creatingyourown.md",isAbsolute:!1},requirePath:"docs/errorhandling/creatingyourown.md",path:"/docs/errorhandling/creatingyourown/",data:{title:"Creating your own"}},{file:{root:"",dir:"docs/errorhandling",base:"errormiddleware.md",ext:"md",name:"errormiddleware",extname:".md",basename:"errormiddleware.md",dirname:"docs/errorhandling",stem:"errormiddleware",path:"docs/errorhandling/errormiddleware.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/errorhandling/errormiddleware.md",isAbsolute:!1},requirePath:"docs/errorhandling/errormiddleware.md",path:"/docs/errorhandling/errormiddleware/",data:{title:"Error middleware"}},{file:{root:"",dir:"docs/errorhandling",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/errorhandling",stem:"index",path:"docs/errorhandling/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/errorhandling/index.md",isAbsolute:!1},requirePath:"docs/errorhandling/index.md",path:"/docs/errorhandling/",data:{title:"Error handling"}},{file:{root:"",dir:"docs/events",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/events",stem:"index",path:"docs/events/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/events/index.md",isAbsolute:!1},requirePath:"docs/events/index.md",path:"/docs/events/",data:{title:"Events"}},{file:{root:"",dir:"docs/extendandoverride",base:"creatingplugins.md",ext:"md",name:"creatingplugins",extname:".md",basename:"creatingplugins.md",dirname:"docs/extendandoverride",stem:"creatingplugins",path:"docs/extendandoverride/creatingplugins.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/extendandoverride/creatingplugins.md",isAbsolute:!1},requirePath:"docs/extendandoverride/creatingplugins.md",path:"/docs/extendandoverride/creatingplugins/",data:{title:"Creating plugins"}},{file:{root:"",dir:"docs/extendandoverride",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/extendandoverride",stem:"index",path:"docs/extendandoverride/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/extendandoverride/index.md",isAbsolute:!1},requirePath:"docs/extendandoverride/index.md",path:"/docs/extendandoverride/",data:{title:"Extend and Override"}},{file:{root:"",dir:"docs/extendandoverride",base:"moduleloader.md",ext:"md",name:"moduleloader",extname:".md",basename:"moduleloader.md",dirname:"docs/extendandoverride",stem:"moduleloader",path:"docs/extendandoverride/moduleloader.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/extendandoverride/moduleloader.md",isAbsolute:!1},requirePath:"docs/extendandoverride/moduleloader.md",path:"/docs/extendandoverride/moduleloader/",data:{title:"Module loader"}},{file:{root:"",dir:"docs/extendandoverride",base:"usingplugins.md",ext:"md",name:"usingplugins",extname:".md",basename:"usingplugins.md",dirname:"docs/extendandoverride",stem:"usingplugins",path:"docs/extendandoverride/usingplugins.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/extendandoverride/usingplugins.md",isAbsolute:!1},requirePath:"docs/extendandoverride/usingplugins.md",path:"/docs/extendandoverride/usingplugins/",data:{title:"Using plugins"}},{file:{root:"",dir:"docs/forms",base:"builtinfieldtypes.md",ext:"md",name:"builtinfieldtypes",extname:".md",basename:"builtinfieldtypes.md",dirname:"docs/forms",stem:"builtinfieldtypes",path:"docs/forms/builtinfieldtypes.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/forms/builtinfieldtypes.md",isAbsolute:!1},requirePath:"docs/forms/builtinfieldtypes.md",path:"/docs/forms/builtinfieldtypes/",data:{title:"Built-in field types"}},{file:{root:"",dir:"docs/forms",base:"customfieldtypes.md",ext:"md",name:"customfieldtypes",extname:".md",basename:"customfieldtypes.md",dirname:"docs/forms",stem:"customfieldtypes",path:"docs/forms/customfieldtypes.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/forms/customfieldtypes.md",isAbsolute:!1},requirePath:"docs/forms/customfieldtypes.md",path:"/docs/forms/customfieldtypes/",data:{title:"Custom field types"}},{file:{root:"",dir:"docs/forms",base:"definingandusing.md",ext:"md",name:"definingandusing",extname:".md",basename:"definingandusing.md",dirname:"docs/forms",stem:"definingandusing",path:"docs/forms/definingandusing.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/forms/definingandusing.md",isAbsolute:!1},requirePath:"docs/forms/definingandusing.md",path:"/docs/forms/definingandusing/",data:{title:"Defining and using forms"}},{file:{root:"",dir:"docs/forms",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/forms",stem:"index",path:"docs/forms/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/forms/index.md",isAbsolute:!1},requirePath:"docs/forms/index.md",path:"/docs/forms/",data:{title:"Forms"}},{file:{root:"",dir:"docs/forms",base:"postvalidationhooks.md",ext:"md",name:"postvalidationhooks",extname:".md",basename:"postvalidationhooks.md",dirname:"docs/forms",stem:"postvalidationhooks",path:"docs/forms/postvalidationhooks.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/forms/postvalidationhooks.md",isAbsolute:!1},requirePath:"docs/forms/postvalidationhooks.md",path:"/docs/forms/postvalidationhooks/",data:{title:"Post-validation hooks"}},{file:{root:"",dir:"docs/forms",base:"sanitizers.md",ext:"md",name:"sanitizers",extname:".md",basename:"sanitizers.md",dirname:"docs/forms",stem:"sanitizers",path:"docs/forms/sanitizers.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/forms/sanitizers.md",isAbsolute:!1},requirePath:"docs/forms/sanitizers.md",path:"/docs/forms/sanitizers/",data:{title:"Field sanitizers"}},{file:{root:"",dir:"docs/forms",base:"stateanddirtychecking.md",ext:"md",name:"stateanddirtychecking",extname:".md",basename:"stateanddirtychecking.md",dirname:"docs/forms",stem:"stateanddirtychecking",path:"docs/forms/stateanddirtychecking.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/forms/stateanddirtychecking.md",isAbsolute:!1},requirePath:"docs/forms/stateanddirtychecking.md",path:"/docs/forms/stateanddirtychecking/",data:{title:"Form state and dirty-checking"}},{file:{root:"",dir:"docs/forms",base:"validators.md",ext:"md",name:"validators",extname:".md",basename:"validators.md",dirname:"docs/forms",stem:"validators",path:"docs/forms/validators.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/forms/validators.md",isAbsolute:!1},requirePath:"docs/forms/validators.md",path:"/docs/forms/validators/",data:{title:"Field validators"}},{file:{root:"",dir:"docs/gettingstarted",base:"buildworkflowlivereload.md",ext:"md",name:"buildworkflowlivereload",extname:".md",basename:"buildworkflowlivereload.md",dirname:"docs/gettingstarted",stem:"buildworkflowlivereload",path:"docs/gettingstarted/buildworkflowlivereload.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/gettingstarted/buildworkflowlivereload.md",isAbsolute:!1},requirePath:"docs/gettingstarted/buildworkflowlivereload.md",path:"/docs/gettingstarted/buildworkflowlivereload/",data:{title:"Build workflow and Live reload"}},{file:{root:"",dir:"docs/gettingstarted",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/gettingstarted",stem:"index",path:"docs/gettingstarted/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/gettingstarted/index.md",isAbsolute:!1},requirePath:"docs/gettingstarted/index.md",path:"/docs/gettingstarted/",data:{title:"Getting Started"}},{file:{root:"",dir:"docs/gettingstarted",base:"installation.md",ext:"md",name:"installation",extname:".md",basename:"installation.md",dirname:"docs/gettingstarted",stem:"installation",path:"docs/gettingstarted/installation.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/gettingstarted/installation.md",isAbsolute:!1},requirePath:"docs/gettingstarted/installation.md",path:"/docs/gettingstarted/installation/",data:{title:"Installation"}},{file:{root:"",dir:"docs/gettingstarted",base:"requirements.md",ext:"md",name:"requirements",extname:".md",basename:"requirements.md",dirname:"docs/gettingstarted",stem:"requirements",path:"docs/gettingstarted/requirements.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/gettingstarted/requirements.md",isAbsolute:!1},requirePath:"docs/gettingstarted/requirements.md",path:"/docs/gettingstarted/requirements/",data:{title:"Requirements"}},{file:{root:"",dir:"docs/gettingstarted",base:"runninghelloworld.md",ext:"md",name:"runninghelloworld",extname:".md",basename:"runninghelloworld.md",dirname:"docs/gettingstarted",stem:"runninghelloworld",path:"docs/gettingstarted/runninghelloworld.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/gettingstarted/runninghelloworld.md",isAbsolute:!1},requirePath:"docs/gettingstarted/runninghelloworld.md",path:"/docs/gettingstarted/runninghelloworld/",data:{title:'Running "Hello World"'}},{file:{root:"",dir:"docs",base:"guide.md",ext:"md",name:"guide",extname:".md",basename:"guide.md",dirname:"docs",stem:"guide",path:"docs/guide.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/guide.md",isAbsolute:!1},requirePath:"docs/guide.md",path:"/docs/guide/",data:{title:"What is Waigo?"}},{file:{root:"",dir:"docs",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs",stem:"index",path:"docs/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/index.md",isAbsolute:!1},requirePath:"docs/index.md",path:"/docs/",data:{title:"Waigo v2 Guide"}},{file:{root:"",dir:"docs/introduction",base:"codingstandard.md",ext:"md",name:"codingstandard",extname:".md",basename:"codingstandard.md",dirname:"docs/introduction",stem:"codingstandard",path:"docs/introduction/codingstandard.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/introduction/codingstandard.md",isAbsolute:!1},requirePath:"docs/introduction/codingstandard.md",path:"/docs/introduction/codingstandard/",data:{title:"Coding standard"}},{file:{root:"",dir:"docs/introduction",base:"folderstructure.md",ext:"md",name:"folderstructure",extname:".md",basename:"folderstructure.md",dirname:"docs/introduction",stem:"folderstructure",path:"docs/introduction/folderstructure.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/introduction/folderstructure.md",isAbsolute:!1},requirePath:"docs/introduction/folderstructure.md",path:"/docs/introduction/folderstructure/",data:{title:"Folder structure"}},{file:{root:"",dir:"docs/introduction",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/introduction",stem:"index",path:"docs/introduction/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/introduction/index.md",isAbsolute:!1},requirePath:"docs/introduction/index.md",path:"/docs/introduction/",data:{title:"Introduction"}},{file:{root:"",dir:"docs/introduction",base:"middlewareprimer.md",ext:"md",name:"middlewareprimer",extname:".md",basename:"middlewareprimer.md",dirname:"docs/introduction",stem:"middlewareprimer",path:"docs/introduction/middlewareprimer.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/introduction/middlewareprimer.md",isAbsolute:!1},requirePath:"docs/introduction/middlewareprimer.md",path:"/docs/introduction/middlewareprimer/",data:{title:"Middleware primer"}},{file:{root:"",dir:"docs/introduction",base:"motivation.md",ext:"md",name:"motivation",extname:".md",basename:"motivation.md",dirname:"docs/introduction",stem:"motivation",path:"docs/introduction/motivation.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/introduction/motivation.md",isAbsolute:!1},requirePath:"docs/introduction/motivation.md",path:"/docs/introduction/motivation/",data:{title:"Motivation"}},{file:{root:"",dir:"docs/logging",base:"howtouse.md",ext:"md",name:"howtouse",extname:".md",basename:"howtouse.md",dirname:"docs/logging",stem:"howtouse",path:"docs/logging/howtouse.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/logging/howtouse.md",isAbsolute:!1},requirePath:"docs/logging/howtouse.md",path:"/docs/logging/howtouse/",data:{title:"How to use"}},{file:{root:"",dir:"docs/logging",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/logging",stem:"index",path:"docs/logging/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/logging/index.md",isAbsolute:!1},requirePath:"docs/logging/index.md",path:"/docs/logging/",data:{title:"Logging"}},{file:{root:"",dir:"docs/logging",base:"subcategories.md",ext:"md",name:"subcategories",extname:".md",basename:"subcategories.md",dirname:"docs/logging",stem:"subcategories",path:"docs/logging/subcategories.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/logging/subcategories.md",isAbsolute:!1},requirePath:"docs/logging/subcategories.md",path:"/docs/logging/subcategories/",data:{title:"Sub-categories"}},{file:{root:"",dir:"docs/middleware",base:"commonmiddleware.md",ext:"md",name:"commonmiddleware",extname:".md",basename:"commonmiddleware.md",dirname:"docs/middleware",stem:"commonmiddleware",path:"docs/middleware/commonmiddleware.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/middleware/commonmiddleware.md",isAbsolute:!1},requirePath:"docs/middleware/commonmiddleware.md",path:"/docs/middleware/commonmiddleware/",data:{title:"Common middleware"}},{file:{root:"",dir:"docs/middleware",base:"configuring.md",ext:"md",name:"configuring",extname:".md",basename:"configuring.md",dirname:"docs/middleware",stem:"configuring",path:"docs/middleware/configuring.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/middleware/configuring.md",isAbsolute:!1},requirePath:"docs/middleware/configuring.md",path:"/docs/middleware/configuring/",data:{title:"Configuring middleware"}},{file:{root:"",dir:"docs/middleware",base:"defining.md",ext:"md",name:"defining",extname:".md",basename:"defining.md",dirname:"docs/middleware",stem:"defining",path:"docs/middleware/defining.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/middleware/defining.md",isAbsolute:!1},requirePath:"docs/middleware/defining.md",path:"/docs/middleware/defining/",data:{title:"Defining middleware"}},{file:{root:"",dir:"docs/middleware",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/middleware",stem:"index",path:"docs/middleware/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/middleware/index.md",isAbsolute:!1},requirePath:"docs/middleware/index.md",path:"/docs/middleware/",data:{title:"Middleware"}},{file:{root:"",dir:"docs/renderingoutput",base:"customformats.md",ext:"md",name:"customformats",extname:".md",basename:"customformats.md",dirname:"docs/renderingoutput",stem:"customformats",path:"docs/renderingoutput/customformats.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/renderingoutput/customformats.md",isAbsolute:!1},requirePath:"docs/renderingoutput/customformats.md",path:"/docs/renderingoutput/customformats/",data:{title:"Custom output formats"}},{file:{root:"",dir:"docs/renderingoutput",base:"enabling.md",ext:"md",name:"enabling",extname:".md",basename:"enabling.md",dirname:"docs/renderingoutput",stem:"enabling",path:"docs/renderingoutput/enabling.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/renderingoutput/enabling.md",isAbsolute:!1},requirePath:"docs/renderingoutput/enabling.md",path:"/docs/renderingoutput/enabling/",data:{title:"Enabling output formats"}},{file:{root:"",dir:"docs/renderingoutput",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/renderingoutput",stem:"index",path:"docs/renderingoutput/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/renderingoutput/index.md",isAbsolute:!1},requirePath:"docs/renderingoutput/index.md",path:"/docs/renderingoutput/",data:{title:"Rendering output"}},{file:{root:"",dir:"docs/renderingoutput",base:"jsonoutput.md",ext:"md",name:"jsonoutput",extname:".md",basename:"jsonoutput.md",dirname:"docs/renderingoutput",stem:"jsonoutput",path:"docs/renderingoutput/jsonoutput.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/renderingoutput/jsonoutput.md",isAbsolute:!1},requirePath:"docs/renderingoutput/jsonoutput.md",path:"/docs/renderingoutput/jsonoutput/",data:{title:"JSON output"}},{file:{root:"",dir:"docs/renderingoutput",base:"renderingmethods.md",ext:"md",name:"renderingmethods",extname:".md",basename:"renderingmethods.md",dirname:"docs/renderingoutput",stem:"renderingmethods",path:"docs/renderingoutput/renderingmethods.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/renderingoutput/renderingmethods.md",isAbsolute:!1},requirePath:"docs/renderingoutput/renderingmethods.md",path:"/docs/renderingoutput/renderingmethods/",data:{title:"Rendering methods"}},{file:{root:"",dir:"docs/renderingoutput",base:"settingoutputformat.md",ext:"md",name:"settingoutputformat",extname:".md",basename:"settingoutputformat.md",dirname:"docs/renderingoutput",stem:"settingoutputformat",path:"docs/renderingoutput/settingoutputformat.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/renderingoutput/settingoutputformat.md",isAbsolute:!1},requirePath:"docs/renderingoutput/settingoutputformat.md",path:"/docs/renderingoutput/settingoutputformat/",data:{title:"Setting the output format"}},{file:{root:"",dir:"docs/routing",base:"generatingurls.md",ext:"md",name:"generatingurls",extname:".md",basename:"generatingurls.md",dirname:"docs/routing",stem:"generatingurls",path:"docs/routing/generatingurls.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/routing/generatingurls.md",isAbsolute:!1},requirePath:"docs/routing/generatingurls.md",path:"/docs/routing/generatingurls/",data:{title:"Generating URLs"}},{file:{root:"",dir:"docs/routing",base:"howtouse.md",ext:"md",name:"howtouse",extname:".md",basename:"howtouse.md",dirname:"docs/routing",stem:"howtouse",path:"docs/routing/howtouse.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/routing/howtouse.md",isAbsolute:!1},requirePath:"docs/routing/howtouse.md",path:"/docs/routing/howtouse/",data:{title:"How to use"}},{file:{root:"",dir:"docs/routing",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/routing",stem:"index",path:"docs/routing/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/routing/index.md",isAbsolute:!1},requirePath:"docs/routing/index.md",path:"/docs/routing/",data:{title:"Routing"}},{file:{root:"",dir:"docs/routing",base:"singlepageapps.md",ext:"md",name:"singlepageapps",extname:".md",basename:"singlepageapps.md",dirname:"docs/routing",stem:"singlepageapps",path:"docs/routing/singlepageapps.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/routing/singlepageapps.md",isAbsolute:!1},requirePath:"docs/routing/singlepageapps.md",path:"/docs/routing/singlepageapps/",data:{title:"Single-page app routing"}},{file:{root:"",dir:"docs/scaling",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/scaling",stem:"index",path:"docs/scaling/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/scaling/index.md",isAbsolute:!1},requirePath:"docs/scaling/index.md",path:"/docs/scaling/",data:{title:"Scaling"}},{file:{root:"",dir:"docs/scaling",base:"multiprocessclustering.md",ext:"md",name:"multiprocessclustering",extname:".md",basename:"multiprocessclustering.md",dirname:"docs/scaling",stem:"multiprocessclustering",path:"docs/scaling/multiprocessclustering.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/scaling/multiprocessclustering.md",isAbsolute:!1},requirePath:"docs/scaling/multiprocessclustering.md",path:"/docs/scaling/multiprocessclustering/",data:{title:"Multi-process clustering"}},{file:{root:"",dir:"docs/sessions",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/sessions",stem:"index",path:"docs/sessions/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/sessions/index.md",isAbsolute:!1},requirePath:"docs/sessions/index.md",path:"/docs/sessions/",data:{title:"Sessions"}},{file:{root:"",dir:"docs/staticresources",base:"collationofstaticresources.md",ext:"md",name:"collationofstaticresources",extname:".md",basename:"collationofstaticresources.md",dirname:"docs/staticresources",stem:"collationofstaticresources",path:"docs/staticresources/collationofstaticresources.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/staticresources/collationofstaticresources.md",isAbsolute:!1},requirePath:"docs/staticresources/collationofstaticresources.md",path:"/docs/staticresources/collationofstaticresources/",data:{title:"Collation of static resources"}},{file:{root:"",dir:"docs/staticresources",base:"generatingurlpaths.md",ext:"md",name:"generatingurlpaths",extname:".md",basename:"generatingurlpaths.md",dirname:"docs/staticresources",stem:"generatingurlpaths",path:"docs/staticresources/generatingurlpaths.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/staticresources/generatingurlpaths.md",isAbsolute:!1},requirePath:"docs/staticresources/generatingurlpaths.md",path:"/docs/staticresources/generatingurlpaths/",data:{title:"Generating URL paths"}},{file:{root:"",dir:"docs/staticresources",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/staticresources",stem:"index",path:"docs/staticresources/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/staticresources/index.md",isAbsolute:!1},requirePath:"docs/staticresources/index.md",path:"/docs/staticresources/",data:{title:"Static resources"}},{file:{root:"",dir:"docs/staticresources",base:"requestmiddleware.md",ext:"md",name:"requestmiddleware",extname:".md",basename:"requestmiddleware.md",dirname:"docs/staticresources",stem:"requestmiddleware",path:"docs/staticresources/requestmiddleware.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/staticresources/requestmiddleware.md",isAbsolute:!1},requirePath:"docs/staticresources/requestmiddleware.md",path:"/docs/staticresources/requestmiddleware/",data:{title:"Request middleware"}},{file:{root:"",dir:"docs/viewobjects",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/viewobjects",stem:"index",path:"docs/viewobjects/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/viewobjects/index.md",isAbsolute:!1},requirePath:"docs/viewobjects/index.md",path:"/docs/viewobjects/",data:{}},{file:{root:"",dir:"docs/viewtemplates",base:"contextlevelandappleveldata.md",ext:"md",name:"contextlevelandappleveldata",extname:".md",basename:"contextlevelandappleveldata.md",dirname:"docs/viewtemplates",stem:"contextlevelandappleveldata",path:"docs/viewtemplates/contextlevelandappleveldata.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/viewtemplates/contextlevelandappleveldata.md",isAbsolute:!1},requirePath:"docs/viewtemplates/contextlevelandappleveldata.md",path:"/docs/viewtemplates/contextlevelandappleveldata/",data:{title:"Context-level and App-level data"}},{file:{root:"",dir:"docs/viewtemplates",base:"index.md",ext:"md",name:"index",extname:".md",basename:"index.md",dirname:"docs/viewtemplates",stem:"index",path:"docs/viewtemplates/index.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/viewtemplates/index.md",isAbsolute:!1},requirePath:"docs/viewtemplates/index.md",path:"/docs/viewtemplates/",data:{title:"View templates"}},{file:{root:"",dir:"docs/viewtemplates",base:"templatedata.md",ext:"md",name:"templatedata",extname:".md",basename:"templatedata.md",dirname:"docs/viewtemplates",stem:"templatedata",path:"docs/viewtemplates/templatedata.md",absolute:"/home/travis/build/waigo/waigo.github.io/docs/viewtemplates/templatedata.md",isAbsolute:!1},requirePath:"docs/viewtemplates/templatedata.md",path:"/docs/viewtemplates/templatedata/",data:{title:"Template data"}},{file:{root:"",dir:"",base:"index.js",ext:"js",name:"index",extname:".js",basename:"index.js",dirname:"",stem:"index",path:"index.js",absolute:"/home/travis/build/waigo/waigo.github.io/index.js",isAbsolute:!1},requirePath:"index.js",path:"/",data:{}}]}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var a=n(2),r=s(a);n(376),e.exports=r["default"].createClass({displayName:"exports",propTypes:function(){return{children:r["default"].PropTypes.any}},render:function(){return this.props.children}})},function(e,t){},function(e,t,n){function s(e){return n(a(e))}function a(e){return r[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var r={"./json":378,"./json.js":378,"./md":517,"./md.js":517};s.keys=function(){return Object.keys(r)},s.resolve=a,e.exports=s,s.id=377},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),
Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),l=n(2),p=s(l),c=n(379),u=s(c),d=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return p["default"].createElement(u["default"],{page:this.props.route.page})}}]),t}(p["default"].Component);t["default"]=d,d.propTypes={route:p["default"].PropTypes.object},e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),l=n(380),p=(s(l),n(381)),c=(s(p),n(2)),u=s(c),d=(n(164),n(382)),h=(s(d),n(497)),f=s(h),m=n(501),g=(s(m),n(374)),y=n(502),b=(s(y),n(503)),w=s(b),v=n(513),j=s(v),x=n(514),_=s(x),k={children:n(516).map(function(e){return{label:e,url:g.config.apiBaseUrl+"/"+e}})},E=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){var e=this.props.page;return u["default"].createElement(f["default"],{title:"API"},u["default"].createElement("div",{className:"page api"},u["default"].createElement(w["default"],{activeNav:"api"}),u["default"].createElement(_["default"],{nav:k,page:e},"Coming soon..."),u["default"].createElement(j["default"],null)))}}]),t}(u["default"].Component);t["default"]=E,E.propTypes={page:u["default"].PropTypes.object},e.exports=t["default"]},function(e,t,n){var s;(function(e,a){(function(){function r(e,t){return e.set(t[0],t[1]),e}function o(e,t){return e.add(t),e}function i(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function l(e,t,n,s){for(var a=-1,r=e?e.length:0;++a<r;){var o=e[a];t(s,o,n(o),e)}return s}function p(e,t){for(var n=-1,s=e?e.length:0;++n<s&&t(e[n],n,e)!==!1;);return e}function c(e,t){for(var n=e?e.length:0;n--&&t(e[n],n,e)!==!1;);return e}function u(e,t){for(var n=-1,s=e?e.length:0;++n<s;)if(!t(e[n],n,e))return!1;return!0}function d(e,t){for(var n=-1,s=e?e.length:0,a=0,r=[];++n<s;){var o=e[n];t(o,n,e)&&(r[a++]=o)}return r}function h(e,t){var n=e?e.length:0;return!!n&&k(e,t,0)>-1}function f(e,t,n){for(var s=-1,a=e?e.length:0;++s<a;)if(n(t,e[s]))return!0;return!1}function m(e,t){for(var n=-1,s=e?e.length:0,a=Array(s);++n<s;)a[n]=t(e[n],n,e);return a}function g(e,t){for(var n=-1,s=t.length,a=e.length;++n<s;)e[a+n]=t[n];return e}function y(e,t,n,s){var a=-1,r=e?e.length:0;for(s&&r&&(n=e[++a]);++a<r;)n=t(n,e[a],a,e);return n}function b(e,t,n,s){var a=e?e.length:0;for(s&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function w(e,t){for(var n=-1,s=e?e.length:0;++n<s;)if(t(e[n],n,e))return!0;return!1}function v(e){return e.split("")}function j(e){return e.match(Lt)||[]}function x(e,t,n){var s;return n(e,function(e,n,a){if(t(e,n,a))return s=n,!1}),s}function _(e,t,n,s){for(var a=e.length,r=n+(s?1:-1);s?r--:++r<a;)if(t(e[r],r,e))return r;return-1}function k(e,t,n){return t===t?Q(e,t,n):_(e,A,n)}function E(e,t,n,s){for(var a=n-1,r=e.length;++a<r;)if(s(e[a],t))return a;return-1}function A(e){return e!==e}function T(e,t){var n=e?e.length:0;return n?R(e,t)/n:Me}function S(e){return function(t){return null==t?ae:t[e]}}function C(e){return function(t){return null==e?ae:e[t]}}function P(e,t,n,s,a){return a(e,function(e,a,r){n=s?(s=!1,e):t(n,e,a,r)}),n}function O(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function R(e,t){for(var n,s=-1,a=e.length;++s<a;){var r=t(e[s]);r!==ae&&(n=n===ae?r:n+r)}return n}function N(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}function M(e,t){return m(t,function(t){return[t,e[t]]})}function q(e){return function(t){return e(t)}}function L(e,t){return m(t,function(t){return e[t]})}function D(e,t){return e.has(t)}function I(e,t){for(var n=-1,s=e.length;++n<s&&k(t,e[n],0)>-1;);return n}function U(e,t){for(var n=e.length;n--&&k(t,e[n],0)>-1;);return n}function F(e,t){for(var n=e.length,s=0;n--;)e[n]===t&&++s;return s}function B(e){return"\\"+zn[e]}function W(e,t){return null==e?ae:e[t]}function V(e){return Ln.test(e)}function H(e){return Dn.test(e)}function z(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function G(e){var t=-1,n=Array(e.size);return e.forEach(function(e,s){n[++t]=[s,e]}),n}function $(e,t){return function(n){return e(t(n))}}function Y(e,t){for(var n=-1,s=e.length,a=0,r=[];++n<s;){var o=e[n];o!==t&&o!==ue||(e[n]=ue,r[a++]=n)}return r}function K(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function J(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Q(e,t,n){for(var s=n-1,a=e.length;++s<a;)if(e[s]===t)return s;return-1}function X(e,t,n){for(var s=n+1;s--;)if(e[s]===t)return s;return s}function Z(e){return V(e)?te(e):ls(e)}function ee(e){return V(e)?ne(e):v(e)}function te(e){for(var t=Mn.lastIndex=0;Mn.test(e);)++t;return t}function ne(e){return e.match(Mn)||[]}function se(e){return e.match(qn)||[]}var ae,re="4.16.4",oe=200,ie="Unsupported core-js use. Try https://github.com/es-shims.",le="Expected a function",pe="__lodash_hash_undefined__",ce=500,ue="__lodash_placeholder__",de=1,he=2,fe=4,me=8,ge=16,ye=32,be=64,we=128,ve=256,je=512,xe=1,_e=2,ke=30,Ee="...",Ae=500,Te=16,Se=1,Ce=2,Pe=3,Oe=1/0,Re=9007199254740991,Ne=1.7976931348623157e308,Me=NaN,qe=4294967295,Le=qe-1,De=qe>>>1,Ie=[["ary",we],["bind",de],["bindKey",he],["curry",me],["curryRight",ge],["flip",je],["partial",ye],["partialRight",be],["rearg",ve]],Ue="[object Arguments]",Fe="[object Array]",Be="[object Boolean]",We="[object Date]",Ve="[object Error]",He="[object Function]",ze="[object GeneratorFunction]",Ge="[object Map]",$e="[object Number]",Ye="[object Object]",Ke="[object Promise]",Je="[object Proxy]",Qe="[object RegExp]",Xe="[object Set]",Ze="[object String]",et="[object Symbol]",tt="[object WeakMap]",nt="[object WeakSet]",st="[object ArrayBuffer]",at="[object DataView]",rt="[object Float32Array]",ot="[object Float64Array]",it="[object Int8Array]",lt="[object Int16Array]",pt="[object Int32Array]",ct="[object Uint8Array]",ut="[object Uint8ClampedArray]",dt="[object Uint16Array]",ht="[object Uint32Array]",ft=/\b__p \+= '';/g,mt=/\b(__p \+=) '' \+/g,gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yt=/&(?:amp|lt|gt|quot|#39);/g,bt=/[&<>"']/g,wt=RegExp(yt.source),vt=RegExp(bt.source),jt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,_t=/<%=([\s\S]+?)%>/g,kt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Et=/^\w*$/,At=/^\./,Tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,Ct=RegExp(St.source),Pt=/^\s+|\s+$/g,Ot=/^\s+/,Rt=/\s+$/,Nt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Mt=/\{\n\/\* \[wrapped with (.+)\] \*/,qt=/,? & /,Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dt=/\\(\\)?/g,It=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ut=/\w*$/,Ft=/^[-+]0x[0-9a-f]+$/i,Bt=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,Vt=/^0o[0-7]+$/i,Ht=/^(?:0|[1-9]\d*)$/,zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gt=/($^)/,$t=/['\n\r\u2028\u2029\\]/g,Yt="\\ud800-\\udfff",Kt="\\u0300-\\u036f\\ufe20-\\ufe23",Jt="\\u20d0-\\u20f0",Qt="\\u2700-\\u27bf",Xt="a-z\\xdf-\\xf6\\xf8-\\xff",Zt="\\xac\\xb1\\xd7\\xf7",en="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tn="\\u2000-\\u206f",nn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",sn="A-Z\\xc0-\\xd6\\xd8-\\xde",an="\\ufe0e\\ufe0f",rn=Zt+en+tn+nn,on="[']",ln="["+Yt+"]",pn="["+rn+"]",cn="["+Kt+Jt+"]",un="\\d+",dn="["+Qt+"]",hn="["+Xt+"]",fn="[^"+Yt+rn+un+Qt+Xt+sn+"]",mn="\\ud83c[\\udffb-\\udfff]",gn="(?:"+cn+"|"+mn+")",yn="[^"+Yt+"]",bn="(?:\\ud83c[\\udde6-\\uddff]){2}",wn="[\\ud800-\\udbff][\\udc00-\\udfff]",vn="["+sn+"]",jn="\\u200d",xn="(?:"+hn+"|"+fn+")",_n="(?:"+vn+"|"+fn+")",kn="(?:"+on+"(?:d|ll|m|re|s|t|ve))?",En="(?:"+on+"(?:D|LL|M|RE|S|T|VE))?",An=gn+"?",Tn="["+an+"]?",Sn="(?:"+jn+"(?:"+[yn,bn,wn].join("|")+")"+Tn+An+")*",Cn=Tn+An+Sn,Pn="(?:"+[dn,bn,wn].join("|")+")"+Cn,On="(?:"+[yn+cn+"?",cn,bn,wn,ln].join("|")+")",Rn=RegExp(on,"g"),Nn=RegExp(cn,"g"),Mn=RegExp(mn+"(?="+mn+")|"+On+Cn,"g"),qn=RegExp([vn+"?"+hn+"+"+kn+"(?="+[pn,vn,"$"].join("|")+")",_n+"+"+En+"(?="+[pn,vn+xn,"$"].join("|")+")",vn+"?"+xn+"+"+kn,vn+"+"+En,un,Pn].join("|"),"g"),Ln=RegExp("["+jn+Yt+Kt+Jt+an+"]"),Dn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,In=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Un=-1,Fn={};Fn[rt]=Fn[ot]=Fn[it]=Fn[lt]=Fn[pt]=Fn[ct]=Fn[ut]=Fn[dt]=Fn[ht]=!0,Fn[Ue]=Fn[Fe]=Fn[st]=Fn[Be]=Fn[at]=Fn[We]=Fn[Ve]=Fn[He]=Fn[Ge]=Fn[$e]=Fn[Ye]=Fn[Qe]=Fn[Xe]=Fn[Ze]=Fn[tt]=!1;var Bn={};Bn[Ue]=Bn[Fe]=Bn[st]=Bn[at]=Bn[Be]=Bn[We]=Bn[rt]=Bn[ot]=Bn[it]=Bn[lt]=Bn[pt]=Bn[Ge]=Bn[$e]=Bn[Ye]=Bn[Qe]=Bn[Xe]=Bn[Ze]=Bn[et]=Bn[ct]=Bn[ut]=Bn[dt]=Bn[ht]=!0,Bn[Ve]=Bn[He]=Bn[tt]=!1;var Wn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},Vn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gn=parseFloat,$n=parseInt,Yn="object"==typeof e&&e&&e.Object===Object&&e,Kn="object"==typeof self&&self&&self.Object===Object&&self,Jn=Yn||Kn||Function("return this")(),Qn="object"==typeof t&&t&&!t.nodeType&&t,Xn=Qn&&"object"==typeof a&&a&&!a.nodeType&&a,Zn=Xn&&Xn.exports===Qn,es=Zn&&Yn.process,ts=function(){try{return es&&es.binding("util")}catch(e){}}(),ns=ts&&ts.isArrayBuffer,ss=ts&&ts.isDate,as=ts&&ts.isMap,rs=ts&&ts.isRegExp,os=ts&&ts.isSet,is=ts&&ts.isTypedArray,ls=S("length"),ps=C(Wn),cs=C(Vn),us=C(Hn),ds=function fs(e){function t(e){if(Qi(e)&&!id(e)&&!(e instanceof a)){if(e instanceof s)return e;if(pc.call(e,"__wrapped__"))return $r(e)}return new s(e)}function n(){}function s(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ae}function a(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=qe,this.__views__=[]}function v(){var e=new a(this.__wrapped__);return e.__actions__=Na(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Na(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Na(this.__views__),e}function C(){if(this.__filtered__){var e=new a(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Q(){var e=this.__wrapped__.value(),t=this.__dir__,n=id(e),s=t<0,a=n?e.length:0,r=yr(0,a,this.__views__),o=r.start,i=r.end,l=i-o,p=s?i:o-1,c=this.__iteratees__,u=c.length,d=0,h=Dc(l,this.__takeCount__);if(!n||a<oe||a==l&&h==l)return fa(e,this.__actions__);var f=[];e:for(;l--&&d<h;){p+=t;for(var m=-1,g=e[p];++m<u;){var y=c[m],b=y.iteratee,w=y.type,v=b(g);if(w==Ce)g=v;else if(!v){if(w==Se)continue e;break e}}f[d++]=g}return f}function te(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}function ne(){this.__data__=$c?$c(null):{},this.size=0}function Lt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Yt(e){var t=this.__data__;if($c){var n=t[e];return n===pe?ae:n}return pc.call(t,e)?t[e]:ae}function Kt(e){var t=this.__data__;return $c?t[e]!==ae:pc.call(t,e)}function Jt(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=$c&&t===ae?pe:t,this}function Qt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}function Xt(){this.__data__=[],this.size=0}function Zt(e){var t=this.__data__,n=An(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():_c.call(t,n,1),--this.size,!0}function en(e){var t=this.__data__,n=An(t,e);return n<0?ae:t[n][1]}function tn(e){return An(this.__data__,e)>-1}function nn(e,t){var n=this.__data__,s=An(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}function sn(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}function an(){this.size=0,this.__data__={hash:new te,map:new(Vc||Qt),string:new te}}function rn(e){var t=fr(this,e)["delete"](e);return this.size-=t?1:0,t}function on(e){return fr(this,e).get(e)}function ln(e){return fr(this,e).has(e)}function pn(e,t){var n=fr(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}function cn(e){var t=-1,n=e?e.length:0;for(this.__data__=new sn;++t<n;)this.add(e[t])}function un(e){return this.__data__.set(e,pe),this}function dn(e){return this.__data__.has(e)}function hn(e){var t=this.__data__=new Qt(e);this.size=t.size}function fn(){this.__data__=new Qt,this.size=0}function mn(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}function gn(e){return this.__data__.get(e)}function yn(e){return this.__data__.has(e)}function bn(e,t){var n=this.__data__;if(n instanceof Qt){var s=n.__data__;if(!Vc||s.length<oe-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new sn(s)}return n.set(e,t),this.size=n.size,this}function wn(e,t){var n=id(e),s=!n&&od(e),a=!n&&!s&&pd(e),r=!n&&!s&&!a&&fd(e),o=n||s||a||r,i=o?N(e.length,tc):[],l=i.length;for(var p in e)!t&&!pc.call(e,p)||o&&("length"==p||a&&("offset"==p||"parent"==p)||r&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||Er(p,l))||i.push(p);return i}function vn(e){var t=e.length;return t?e[Ks(0,t-1)]:ae}function jn(e,t){return Vr(Na(e),On(t,0,e.length))}function xn(e){return Vr(Na(e))}function _n(e,t,n,s){return e===ae||Di(e,rc[n])&&!pc.call(s,n)?t:e}function kn(e,t,n){(n===ae||Di(e[t],n))&&(n!==ae||t in e)||Cn(e,t,n)}function En(e,t,n){var s=e[t];pc.call(e,t)&&Di(s,n)&&(n!==ae||t in e)||Cn(e,t,n)}function An(e,t){for(var n=e.length;n--;)if(Di(e[n][0],t))return n;return-1}function Tn(e,t,n,s){return ru(e,function(e,a,r){t(s,e,n(e),r)}),s}function Sn(e,t){return e&&Ma(t,Rl(t),e)}function Cn(e,t,n){"__proto__"==t&&Ec?Ec(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Pn(e,t){for(var n=-1,s=null==e,a=t.length,r=Yp(a);++n<a;)r[n]=s?ae:Cl(e,t[n]);return r}function On(e,t,n){return e===e&&(n!==ae&&(e=e<=n?e:n),t!==ae&&(e=e>=t?e:t)),e}function Mn(e,t,n,s,a,r,o){var i;if(s&&(i=r?s(e,a,r,o):s(e)),i!==ae)return i;if(!Ji(e))return e;var l=id(e);if(l){if(i=vr(e),!t)return Na(e,i)}else{var c=yu(e),u=c==He||c==ze;if(pd(e))return ja(e,t);if(c==Ye||c==Ue||u&&!r){if(i=jr(u?{}:e),!t)return qa(e,Sn(i,e))}else{if(!Bn[c])return r?e:{};i=xr(e,c,Mn,t)}}o||(o=new hn);var d=o.get(e);if(d)return d;o.set(e,i);var h=l?ae:(n?pr:Rl)(e);return p(h||e,function(a,r){h&&(r=a,a=e[r]),En(i,r,Mn(a,t,n,s,r,e,o))}),i}function qn(e){var t=Rl(e);return function(n){return Ln(n,e,t)}}function Ln(e,t,n){var s=n.length;if(null==e)return!s;for(e=Zp(e);s--;){var a=n[s],r=t[a],o=e[a];if(o===ae&&!(a in e)||!r(o))return!1}return!0}function Dn(e,t,n){if("function"!=typeof e)throw new nc(le);return vu(function(){e.apply(ae,n)},t)}function Wn(e,t,n,s){var a=-1,r=h,o=!0,i=e.length,l=[],p=t.length;if(!i)return l;n&&(t=m(t,q(n))),s?(r=f,o=!1):t.length>=oe&&(r=D,o=!1,t=new cn(t));e:for(;++a<i;){var c=e[a],u=n?n(c):c;if(c=s||0!==c?c:0,o&&u===u){for(var d=p;d--;)if(t[d]===u)continue e;l.push(c)}else r(t,u,s)||l.push(c)}return l}function Vn(e,t){var n=!0;return ru(e,function(e,s,a){return n=!!t(e,s,a)}),n}function Hn(e,t,n){for(var s=-1,a=e.length;++s<a;){var r=e[s],o=t(r);if(null!=o&&(i===ae?o===o&&!ll(o):n(o,i)))var i=o,l=r}return l}function zn(e,t,n,s){var a=e.length;for(n=fl(n),n<0&&(n=-n>a?0:a+n),s=s===ae||s>a?a:fl(s),s<0&&(s+=a),s=n>s?0:ml(s);n<s;)e[n++]=t;return e}function Yn(e,t){var n=[];return ru(e,function(e,s,a){t(e,s,a)&&n.push(e)}),n}function Kn(e,t,n,s,a){var r=-1,o=e.length;for(n||(n=kr),a||(a=[]);++r<o;){var i=e[r];t>0&&n(i)?t>1?Kn(i,t-1,n,s,a):g(a,i):s||(a[a.length]=i)}return a}function Qn(e,t){return e&&iu(e,t,Rl)}function Xn(e,t){return e&&lu(e,t,Rl)}function es(e,t){return d(t,function(t){return $i(e[t])})}function ts(e,t){t=Tr(t,e)?[t]:wa(t);for(var n=0,s=t.length;null!=e&&n<s;)e=e[Hr(t[n++])];return n&&n==s?e:ae}function ls(e,t,n){var s=t(e);return id(e)?s:g(s,n(e))}function ds(e){return dc.call(e)}function ms(e,t){return e>t}function gs(e,t){return null!=e&&pc.call(e,t)}function ys(e,t){return null!=e&&t in Zp(e)}function bs(e,t,n){return e>=Dc(t,n)&&e<Lc(t,n)}function ws(e,t,n){for(var s=n?f:h,a=e[0].length,r=e.length,o=r,i=Yp(r),l=1/0,p=[];o--;){var c=e[o];o&&t&&(c=m(c,q(t))),l=Dc(c.length,l),i[o]=!n&&(t||a>=120&&c.length>=120)?new cn(o&&c):ae}c=e[0];var u=-1,d=i[0];e:for(;++u<a&&p.length<l;){var g=c[u],y=t?t(g):g;if(g=n||0!==g?g:0,!(d?D(d,y):s(p,y,n))){for(o=r;--o;){var b=i[o];if(!(b?D(b,y):s(e[o],y,n)))continue e}d&&d.push(y),p.push(g)}}return p}function vs(e,t,n,s){return Qn(e,function(e,a,r){t(s,n(e),a,r)}),s}function js(e,t,n){Tr(t,e)||(t=wa(t),e=Ur(e,t),t=ho(t));var s=null==e?e:e[Hr(t)];return null==s?ae:i(s,e,n)}function xs(e){return Qi(e)&&dc.call(e)==Ue}function _s(e){return Qi(e)&&dc.call(e)==st}function ks(e){return Qi(e)&&dc.call(e)==We}function Es(e,t,n,s,a){return e===t||(null==e||null==t||!Ji(e)&&!Qi(t)?e!==e&&t!==t:As(e,t,Es,n,s,a))}function As(e,t,n,s,a,r){var o=id(e),i=id(t),l=Fe,p=Fe;o||(l=yu(e),l=l==Ue?Ye:l),i||(p=yu(t),p=p==Ue?Ye:p);var c=l==Ye,u=p==Ye,d=l==p;if(d&&pd(e)){if(!pd(t))return!1;o=!0,c=!1}if(d&&!c)return r||(r=new hn),o||fd(e)?rr(e,t,n,s,a,r):or(e,t,l,n,s,a,r);if(!(a&_e)){var h=c&&pc.call(e,"__wrapped__"),f=u&&pc.call(t,"__wrapped__");if(h||f){var m=h?e.value():e,g=f?t.value():t;return r||(r=new hn),n(m,g,s,a,r)}}return!!d&&(r||(r=new hn),ir(e,t,n,s,a,r))}function Ts(e){return Qi(e)&&yu(e)==Ge}function Ss(e,t,n,s){var a=n.length,r=a,o=!s;if(null==e)return!r;for(e=Zp(e);a--;){var i=n[a];if(o&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++a<r;){i=n[a];var l=i[0],p=e[l],c=i[1];if(o&&i[2]){if(p===ae&&!(l in e))return!1}else{var u=new hn;if(s)var d=s(p,c,l,e,t,u);if(!(d===ae?Es(c,p,s,xe|_e,u):d))return!1}}return!0}function Cs(e){if(!Ji(e)||Pr(e))return!1;var t=$i(e)?fc:Wt;return t.test(zr(e))}function Ps(e){return Ji(e)&&dc.call(e)==Qe}function Os(e){return Qi(e)&&yu(e)==Xe}function Rs(e){return Qi(e)&&Ki(e.length)&&!!Fn[dc.call(e)]}function Ns(e){return"function"==typeof e?e:null==e?xp:"object"==typeof e?id(e)?Us(e[0],e[1]):Is(e):Pp(e)}function Ms(e){if(!Or(e))return qc(e);var t=[];for(var n in Zp(e))pc.call(e,n)&&"constructor"!=n&&t.push(n);return t}function qs(e){if(!Ji(e))return Dr(e);var t=Or(e),n=[];for(var s in e)("constructor"!=s||!t&&pc.call(e,s))&&n.push(s);return n}function Ls(e,t){return e<t}function Ds(e,t){var n=-1,s=Ii(e)?Yp(e.length):[];return ru(e,function(e,a,r){s[++n]=t(e,a,r)}),s}function Is(e){var t=mr(e);return 1==t.length&&t[0][2]?Nr(t[0][0],t[0][1]):function(n){return n===e||Ss(n,e,t)}}function Us(e,t){return Tr(e)&&Rr(t)?Nr(Hr(e),t):function(n){var s=Cl(n,e);return s===ae&&s===t?Ol(n,e):Es(t,s,ae,xe|_e)}}function Fs(e,t,n,s,a){e!==t&&iu(t,function(r,o){if(Ji(r))a||(a=new hn),Bs(e,t,o,n,Fs,s,a);else{var i=s?s(e[o],r,o+"",e,t,a):ae;i===ae&&(i=r),kn(e,o,i)}},Nl)}function Bs(e,t,n,s,a,r,o){var i=e[n],l=t[n],p=o.get(l);if(p)return void kn(e,n,p);var c=r?r(i,l,n+"",e,t,o):ae,u=c===ae;if(u){var d=id(l),h=!d&&pd(l),f=!d&&!h&&fd(l);c=l,d||h||f?id(i)?c=i:Ui(i)?c=Na(i):h?(u=!1,c=ja(l,!0)):f?(u=!1,c=Sa(l,!0)):c=[]:rl(l)||od(l)?(c=i,od(i)?c=yl(i):(!Ji(i)||s&&$i(i))&&(c=jr(l))):u=!1}u&&(o.set(l,c),a(c,l,s,r,o),o["delete"](l)),kn(e,n,c)}function Ws(e,t){var n=e.length;if(n)return t+=t<0?n:0,Er(t,n)?e[t]:ae}function Vs(e,t,n){var s=-1;t=m(t.length?t:[xp],q(hr()));var a=Ds(e,function(e,n,a){var r=m(t,function(t){return t(e)});return{criteria:r,index:++s,value:e}});return O(a,function(e,t){return Pa(e,t,n)})}function Hs(e,t){return e=Zp(e),zs(e,t,function(t,n){return n in e})}function zs(e,t,n){for(var s=-1,a=t.length,r={};++s<a;){var o=t[s],i=e[o];n(i,o)&&Cn(r,o,i)}return r}function Gs(e){return function(t){return ts(t,e)}}function $s(e,t,n,s){var a=s?E:k,r=-1,o=t.length,i=e;for(e===t&&(t=Na(t)),n&&(i=m(e,q(n)));++r<o;)for(var l=0,p=t[r],c=n?n(p):p;(l=a(i,c,l,s))>-1;)i!==e&&_c.call(i,l,1),_c.call(e,l,1);return e}function Ys(e,t){for(var n=e?t.length:0,s=n-1;n--;){var a=t[n];if(n==s||a!==r){var r=a;if(Er(a))_c.call(e,a,1);else if(Tr(a,e))delete e[Hr(a)];else{var o=wa(a),i=Ur(e,o);null!=i&&delete i[Hr(ho(o))]}}}return e}function Ks(e,t){return e+Pc(Fc()*(t-e+1))}function Js(e,t,n,s){for(var a=-1,r=Lc(Cc((t-e)/(n||1)),0),o=Yp(r);r--;)o[s?r:++a]=e,e+=n;return o}function Qs(e,t){var n="";if(!e||t<1||t>Re)return n;do t%2&&(n+=e),t=Pc(t/2),t&&(e+=e);while(t);return n}function Xs(e,t){return ju(Ir(e,t,xp),e+"")}function Zs(e){return vn(zl(e))}function ea(e,t){var n=zl(e);return Vr(n,On(t,0,n.length))}function ta(e,t,n,s){if(!Ji(e))return e;t=Tr(t,e)?[t]:wa(t);for(var a=-1,r=t.length,o=r-1,i=e;null!=i&&++a<r;){var l=Hr(t[a]),p=n;if(a!=o){var c=i[l];p=s?s(c,l,i):ae,p===ae&&(p=Ji(c)?c:Er(t[a+1])?[]:{})}En(i,l,p),i=i[l]}return e}function na(e){return Vr(zl(e))}function sa(e,t,n){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var r=Yp(a);++s<a;)r[s]=e[s+t];return r}function aa(e,t){var n;return ru(e,function(e,s,a){return n=t(e,s,a),!n}),!!n}function ra(e,t,n){var s=0,a=e?e.length:s;if("number"==typeof t&&t===t&&a<=De){for(;s<a;){var r=s+a>>>1,o=e[r];null!==o&&!ll(o)&&(n?o<=t:o<t)?s=r+1:a=r}return a}return oa(e,t,xp,n)}function oa(e,t,n,s){t=n(t);for(var a=0,r=e?e.length:0,o=t!==t,i=null===t,l=ll(t),p=t===ae;a<r;){var c=Pc((a+r)/2),u=n(e[c]),d=u!==ae,h=null===u,f=u===u,m=ll(u);if(o)var g=s||f;else g=p?f&&(s||d):i?f&&d&&(s||!h):l?f&&d&&!h&&(s||!m):!h&&!m&&(s?u<=t:u<t);g?a=c+1:r=c}return Dc(r,Le)}function ia(e,t){for(var n=-1,s=e.length,a=0,r=[];++n<s;){var o=e[n],i=t?t(o):o;if(!n||!Di(i,l)){var l=i;r[a++]=0===o?0:o}}return r}function la(e){return"number"==typeof e?e:ll(e)?Me:+e}function pa(e){if("string"==typeof e)return e;if(id(e))return m(e,pa)+"";if(ll(e))return su?su.call(e):"";var t=e+"";return"0"==t&&1/e==-Oe?"-0":t}function ca(e,t,n){var s=-1,a=h,r=e.length,o=!0,i=[],l=i;if(n)o=!1,a=f;else if(r>=oe){var p=t?null:hu(e);if(p)return K(p);o=!1,a=D,l=new cn}else l=t?[]:i;e:for(;++s<r;){var c=e[s],u=t?t(c):c;if(c=n||0!==c?c:0,o&&u===u){for(var d=l.length;d--;)if(l[d]===u)continue e;t&&l.push(u),i.push(c)}else a(l,u,n)||(l!==i&&l.push(u),i.push(c))}return i}function ua(e,t){t=Tr(t,e)?[t]:wa(t),e=Ur(e,t);var n=Hr(ho(t));return!(null!=e&&pc.call(e,n))||delete e[n]}function da(e,t,n,s){return ta(e,t,n(ts(e,t)),s)}function ha(e,t,n,s){for(var a=e.length,r=s?a:-1;(s?r--:++r<a)&&t(e[r],r,e););return n?sa(e,s?0:r,s?r+1:a):sa(e,s?r+1:0,s?a:r)}function fa(e,t){var n=e;return n instanceof a&&(n=n.value()),y(t,function(e,t){return t.func.apply(t.thisArg,g([e],t.args))},n)}function ma(e,t,n){for(var s=-1,a=e.length;++s<a;)var r=r?g(Wn(r,e[s],t,n),Wn(e[s],r,t,n)):e[s];return r&&r.length?ca(r,t,n):[]}function ga(e,t,n){for(var s=-1,a=e.length,r=t.length,o={};++s<a;){var i=s<r?t[s]:ae;n(o,e[s],i)}return o}function ya(e){return Ui(e)?e:[]}function ba(e){return"function"==typeof e?e:xp}function wa(e){return id(e)?e:xu(e)}function va(e,t,n){var s=e.length;return n=n===ae?s:n,!t&&n>=s?e:sa(e,t,n)}function ja(e,t){if(t)return e.slice();var n=e.length,s=bc?bc(n):new e.constructor(n);return e.copy(s),s}function xa(e){var t=new e.constructor(e.byteLength);return new yc(t).set(new yc(e)),t}function _a(e,t){var n=t?xa(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function ka(e,t,n){var s=t?n(G(e),!0):G(e);return y(s,r,new e.constructor)}function Ea(e){var t=new e.constructor(e.source,Ut.exec(e));return t.lastIndex=e.lastIndex,t}function Aa(e,t,n){var s=t?n(K(e),!0):K(e);return y(s,o,new e.constructor)}function Ta(e){return nu?Zp(nu.call(e)):{}}function Sa(e,t){var n=t?xa(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ca(e,t){if(e!==t){var n=e!==ae,s=null===e,a=e===e,r=ll(e),o=t!==ae,i=null===t,l=t===t,p=ll(t);if(!i&&!p&&!r&&e>t||r&&o&&l&&!i&&!p||s&&o&&l||!n&&l||!a)return 1;if(!s&&!r&&!p&&e<t||p&&n&&a&&!s&&!r||i&&n&&a||!o&&a||!l)return-1}return 0}function Pa(e,t,n){for(var s=-1,a=e.criteria,r=t.criteria,o=a.length,i=n.length;++s<o;){var l=Ca(a[s],r[s]);if(l){if(s>=i)return l;var p=n[s];return l*("desc"==p?-1:1)}}return e.index-t.index}function Oa(e,t,n,s){for(var a=-1,r=e.length,o=n.length,i=-1,l=t.length,p=Lc(r-o,0),c=Yp(l+p),u=!s;++i<l;)c[i]=t[i];for(;++a<o;)(u||a<r)&&(c[n[a]]=e[a]);for(;p--;)c[i++]=e[a++];return c}function Ra(e,t,n,s){for(var a=-1,r=e.length,o=-1,i=n.length,l=-1,p=t.length,c=Lc(r-i,0),u=Yp(c+p),d=!s;++a<c;)u[a]=e[a];for(var h=a;++l<p;)u[h+l]=t[l];for(;++o<i;)(d||a<r)&&(u[h+n[o]]=e[a++]);return u}function Na(e,t){var n=-1,s=e.length;for(t||(t=Yp(s));++n<s;)t[n]=e[n];return t}function Ma(e,t,n,s){var a=!n;n||(n={});for(var r=-1,o=t.length;++r<o;){var i=t[r],l=s?s(n[i],e[i],i,n,e):ae;l===ae&&(l=e[i]),a?Cn(n,i,l):En(n,i,l)}return n}function qa(e,t){return Ma(e,mu(e),t)}function La(e,t){return function(n,s){var a=id(n)?l:Tn,r=t?t():{};return a(n,e,hr(s,2),r)}}function Da(e){return Xs(function(t,n){var s=-1,a=n.length,r=a>1?n[a-1]:ae,o=a>2?n[2]:ae;for(r=e.length>3&&"function"==typeof r?(a--,r):ae,o&&Ar(n[0],n[1],o)&&(r=a<3?ae:r,a=1),t=Zp(t);++s<a;){var i=n[s];i&&e(t,i,s,r)}return t})}function Ia(e,t){return function(n,s){if(null==n)return n;if(!Ii(n))return e(n,s);for(var a=n.length,r=t?a:-1,o=Zp(n);(t?r--:++r<a)&&s(o[r],r,o)!==!1;);return n}}function Ua(e){return function(t,n,s){for(var a=-1,r=Zp(t),o=s(t),i=o.length;i--;){var l=o[e?i:++a];if(n(r[l],l,r)===!1)break}return t}}function Fa(e,t,n){function s(){var t=this&&this!==Jn&&this instanceof s?r:e;return t.apply(a?n:this,arguments)}var a=t&de,r=Va(e);return s}function Ba(e){return function(t){t=wl(t);var n=V(t)?ee(t):ae,s=n?n[0]:t.charAt(0),a=n?va(n,1).join(""):t.slice(1);return s[e]()+a}}function Wa(e){return function(t){return y(yp(Ql(t).replace(Rn,"")),e,"")}}function Va(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=au(e.prototype),s=e.apply(n,t);return Ji(s)?s:n}}function Ha(e,t,n){function s(){for(var r=arguments.length,o=Yp(r),l=r,p=dr(s);l--;)o[l]=arguments[l];var c=r<3&&o[0]!==p&&o[r-1]!==p?[]:Y(o,p);if(r-=c.length,r<n)return tr(e,t,$a,s.placeholder,ae,o,c,ae,ae,n-r);var u=this&&this!==Jn&&this instanceof s?a:e;return i(u,this,o)}var a=Va(e);return s}function za(e){return function(t,n,s){var a=Zp(t);if(!Ii(t)){var r=hr(n,3);t=Rl(t),n=function(e){return r(a[e],e,a)}}var o=e(t,n,s);return o>-1?a[r?t[o]:o]:ae}}function Ga(e){return lr(function(t){var n=t.length,a=n,r=s.prototype.thru;for(e&&t.reverse();a--;){var o=t[a];if("function"!=typeof o)throw new nc(le);if(r&&!i&&"wrapper"==ur(o))var i=new s([],(!0))}for(a=i?a:n;++a<n;){o=t[a];var l=ur(o),p="wrapper"==l?fu(o):ae;i=p&&Cr(p[0])&&p[1]==(we|me|ye|ve)&&!p[4].length&&1==p[9]?i[ur(p[0])].apply(i,p[3]):1==o.length&&Cr(o)?i[l]():i.thru(o)}return function(){var e=arguments,s=e[0];if(i&&1==e.length&&id(s)&&s.length>=oe)return i.plant(s).value();for(var a=0,r=n?t[a].apply(this,e):s;++a<n;)r=t[a].call(this,r);return r}})}function $a(e,t,n,s,a,r,o,i,l,p){function c(){for(var y=arguments.length,b=Yp(y),w=y;w--;)b[w]=arguments[w];if(f)var v=dr(c),j=F(b,v);if(s&&(b=Oa(b,s,a,f)),r&&(b=Ra(b,r,o,f)),y-=j,f&&y<p){var x=Y(b,v);return tr(e,t,$a,c.placeholder,n,b,x,i,l,p-y)}var _=d?n:this,k=h?_[e]:e;return y=b.length,i?b=Fr(b,i):m&&y>1&&b.reverse(),u&&l<y&&(b.length=l),this&&this!==Jn&&this instanceof c&&(k=g||Va(k)),k.apply(_,b)}var u=t&we,d=t&de,h=t&he,f=t&(me|ge),m=t&je,g=h?ae:Va(e);return c}function Ya(e,t){return function(n,s){return vs(n,e,t(s),{})}}function Ka(e,t){return function(n,s){var a;if(n===ae&&s===ae)return t;if(n!==ae&&(a=n),s!==ae){if(a===ae)return s;"string"==typeof n||"string"==typeof s?(n=pa(n),s=pa(s)):(n=la(n),s=la(s)),a=e(n,s)}return a}}function Ja(e){return lr(function(t){return t=m(t,q(hr())),Xs(function(n){var s=this;return e(t,function(e){return i(e,s,n)})})})}function Qa(e,t){t=t===ae?" ":pa(t);var n=t.length;if(n<2)return n?Qs(t,e):t;var s=Qs(t,Cc(e/Z(t)));return V(t)?va(ee(s),0,e).join(""):s.slice(0,e)}function Xa(e,t,n,s){function a(){for(var t=-1,l=arguments.length,p=-1,c=s.length,u=Yp(c+l),d=this&&this!==Jn&&this instanceof a?o:e;++p<c;)u[p]=s[p];for(;l--;)u[p++]=arguments[++t];return i(d,r?n:this,u)}var r=t&de,o=Va(e);return a}function Za(e){return function(t,n,s){return s&&"number"!=typeof s&&Ar(t,n,s)&&(n=s=ae),t=hl(t),n===ae?(n=t,t=0):n=hl(n),s=s===ae?t<n?1:-1:hl(s),Js(t,n,s,e)}}function er(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gl(t),n=gl(n)),e(t,n)}}function tr(e,t,n,s,a,r,o,i,l,p){var c=t&me,u=c?o:ae,d=c?ae:o,h=c?r:ae,f=c?ae:r;t|=c?ye:be,t&=~(c?be:ye),t&fe||(t&=~(de|he));var m=[e,t,a,h,u,f,d,i,l,p],g=n.apply(ae,m);return Cr(e)&&wu(g,m),g.placeholder=s,Br(g,e,t)}function nr(e){var t=Xp[e];return function(e,n){if(e=gl(e),n=Dc(fl(n),292)){var s=(wl(e)+"e").split("e"),a=t(s[0]+"e"+(+s[1]+n));return s=(wl(a)+"e").split("e"),+(s[0]+"e"+(+s[1]-n))}return t(e)}}function sr(e){return function(t){var n=yu(t);return n==Ge?G(t):n==Xe?J(t):M(t,e(t))}}function ar(e,t,n,s,a,r,o,i){var l=t&he;if(!l&&"function"!=typeof e)throw new nc(le);var p=s?s.length:0;if(p||(t&=~(ye|be),
s=a=ae),o=o===ae?o:Lc(fl(o),0),i=i===ae?i:fl(i),p-=a?a.length:0,t&be){var c=s,u=a;s=a=ae}var d=l?ae:fu(e),h=[e,t,n,s,a,c,u,r,o,i];if(d&&qr(h,d),e=h[0],t=h[1],n=h[2],s=h[3],a=h[4],i=h[9]=null==h[9]?l?0:e.length:Lc(h[9]-p,0),!i&&t&(me|ge)&&(t&=~(me|ge)),t&&t!=de)f=t==me||t==ge?Ha(e,t,i):t!=ye&&t!=(de|ye)||a.length?$a.apply(ae,h):Xa(e,t,n,s);else var f=Fa(e,t,n);var m=d?pu:wu;return Br(m(f,h),e,t)}function rr(e,t,n,s,a,r){var o=a&_e,i=e.length,l=t.length;if(i!=l&&!(o&&l>i))return!1;var p=r.get(e);if(p&&r.get(t))return p==t;var c=-1,u=!0,d=a&xe?new cn:ae;for(r.set(e,t),r.set(t,e);++c<i;){var h=e[c],f=t[c];if(s)var m=o?s(f,h,c,t,e,r):s(h,f,c,e,t,r);if(m!==ae){if(m)continue;u=!1;break}if(d){if(!w(t,function(e,t){if(!D(d,t)&&(h===e||n(h,e,s,a,r)))return d.push(t)})){u=!1;break}}else if(h!==f&&!n(h,f,s,a,r)){u=!1;break}}return r["delete"](e),r["delete"](t),u}function or(e,t,n,s,a,r,o){switch(n){case at:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case st:return!(e.byteLength!=t.byteLength||!s(new yc(e),new yc(t)));case Be:case We:case $e:return Di(+e,+t);case Ve:return e.name==t.name&&e.message==t.message;case Qe:case Ze:return e==t+"";case Ge:var i=G;case Xe:var l=r&_e;if(i||(i=K),e.size!=t.size&&!l)return!1;var p=o.get(e);if(p)return p==t;r|=xe,o.set(e,t);var c=rr(i(e),i(t),s,a,r,o);return o["delete"](e),c;case et:if(nu)return nu.call(e)==nu.call(t)}return!1}function ir(e,t,n,s,a,r){var o=a&_e,i=Rl(e),l=i.length,p=Rl(t),c=p.length;if(l!=c&&!o)return!1;for(var u=l;u--;){var d=i[u];if(!(o?d in t:pc.call(t,d)))return!1}var h=r.get(e);if(h&&r.get(t))return h==t;var f=!0;r.set(e,t),r.set(t,e);for(var m=o;++u<l;){d=i[u];var g=e[d],y=t[d];if(s)var b=o?s(y,g,d,t,e,r):s(g,y,d,e,t,r);if(!(b===ae?g===y||n(g,y,s,a,r):b)){f=!1;break}m||(m="constructor"==d)}if(f&&!m){var w=e.constructor,v=t.constructor;w!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof v&&v instanceof v)&&(f=!1)}return r["delete"](e),r["delete"](t),f}function lr(e){return ju(Ir(e,ae,ao),e+"")}function pr(e){return ls(e,Rl,mu)}function cr(e){return ls(e,Nl,gu)}function ur(e){for(var t=e.name+"",n=Kc[t],s=pc.call(Kc,t)?n.length:0;s--;){var a=n[s],r=a.func;if(null==r||r==e)return a.name}return t}function dr(e){var n=pc.call(t,"placeholder")?t:e;return n.placeholder}function hr(){var e=t.iteratee||_p;return e=e===_p?Ns:e,arguments.length?e(arguments[0],arguments[1]):e}function fr(e,t){var n=e.__data__;return Sr(t)?n["string"==typeof t?"string":"hash"]:n.map}function mr(e){for(var t=Rl(e),n=t.length;n--;){var s=t[n],a=e[s];t[n]=[s,a,Rr(a)]}return t}function gr(e,t){var n=W(e,t);return Cs(n)?n:ae}function yr(e,t,n){for(var s=-1,a=n.length;++s<a;){var r=n[s],o=r.size;switch(r.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Dc(t,e+o);break;case"takeRight":e=Lc(e,t-o)}}return{start:e,end:t}}function br(e){var t=e.match(Mt);return t?t[1].split(qt):[]}function wr(e,t,n){t=Tr(t,e)?[t]:wa(t);for(var s=-1,a=t.length,r=!1;++s<a;){var o=Hr(t[s]);if(!(r=null!=e&&n(e,o)))break;e=e[o]}return r||++s!=a?r:(a=e?e.length:0,!!a&&Ki(a)&&Er(o,a)&&(id(e)||od(e)))}function vr(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&pc.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function jr(e){return"function"!=typeof e.constructor||Or(e)?{}:au(wc(e))}function xr(e,t,n,s){var a=e.constructor;switch(t){case st:return xa(e);case Be:case We:return new a((+e));case at:return _a(e,s);case rt:case ot:case it:case lt:case pt:case ct:case ut:case dt:case ht:return Sa(e,s);case Ge:return ka(e,s,n);case $e:case Ze:return new a(e);case Qe:return Ea(e);case Xe:return Aa(e,s,n);case et:return Ta(e)}}function _r(e,t){var n=t.length;if(!n)return e;var s=n-1;return t[s]=(n>1?"& ":"")+t[s],t=t.join(n>2?", ":" "),e.replace(Nt,"{\n/* [wrapped with "+t+"] */\n")}function kr(e){return id(e)||od(e)||!!(kc&&e&&e[kc])}function Er(e,t){return t=null==t?Re:t,!!t&&("number"==typeof e||Ht.test(e))&&e>-1&&e%1==0&&e<t}function Ar(e,t,n){if(!Ji(n))return!1;var s=typeof t;return!!("number"==s?Ii(n)&&Er(t,n.length):"string"==s&&t in n)&&Di(n[t],e)}function Tr(e,t){if(id(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ll(e))||(Et.test(e)||!kt.test(e)||null!=t&&e in Zp(t))}function Sr(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Cr(e){var n=ur(e),s=t[n];if("function"!=typeof s||!(n in a.prototype))return!1;if(e===s)return!0;var r=fu(s);return!!r&&e===r[0]}function Pr(e){return!!ic&&ic in e}function Or(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||rc;return e===n}function Rr(e){return e===e&&!Ji(e)}function Nr(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==ae||e in Zp(n)))}}function Mr(e){var t=_i(e,function(e){return n.size===ce&&n.clear(),e}),n=t.cache;return t}function qr(e,t){var n=e[1],s=t[1],a=n|s,r=a<(de|he|we),o=s==we&&n==me||s==we&&n==ve&&e[7].length<=t[8]||s==(we|ve)&&t[7].length<=t[8]&&n==me;if(!r&&!o)return e;s&de&&(e[2]=t[2],a|=n&de?0:fe);var i=t[3];if(i){var l=e[3];e[3]=l?Oa(l,i,t[4]):i,e[4]=l?Y(e[3],ue):t[4]}return i=t[5],i&&(l=e[5],e[5]=l?Ra(l,i,t[6]):i,e[6]=l?Y(e[5],ue):t[6]),i=t[7],i&&(e[7]=i),s&we&&(e[8]=null==e[8]?t[8]:Dc(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function Lr(e,t,n,s,a,r){return Ji(e)&&Ji(t)&&(r.set(t,e),Fs(e,t,ae,Lr,r),r["delete"](t)),e}function Dr(e){var t=[];if(null!=e)for(var n in Zp(e))t.push(n);return t}function Ir(e,t,n){return t=Lc(t===ae?e.length-1:t,0),function(){for(var s=arguments,a=-1,r=Lc(s.length-t,0),o=Yp(r);++a<r;)o[a]=s[t+a];a=-1;for(var l=Yp(t+1);++a<t;)l[a]=s[a];return l[t]=n(o),i(e,this,l)}}function Ur(e,t){return 1==t.length?e:ts(e,sa(t,0,-1))}function Fr(e,t){for(var n=e.length,s=Dc(t.length,n),a=Na(e);s--;){var r=t[s];e[s]=Er(r,n)?a[r]:ae}return e}function Br(e,t,n){var s=t+"";return ju(e,_r(s,Gr(br(s),n)))}function Wr(e){var t=0,n=0;return function(){var s=Ic(),a=Te-(s-n);if(n=s,a>0){if(++t>=Ae)return arguments[0]}else t=0;return e.apply(ae,arguments)}}function Vr(e,t){var n=-1,s=e.length,a=s-1;for(t=t===ae?s:t;++n<t;){var r=Ks(n,a),o=e[r];e[r]=e[n],e[n]=o}return e.length=t,e}function Hr(e){if("string"==typeof e||ll(e))return e;var t=e+"";return"0"==t&&1/e==-Oe?"-0":t}function zr(e){if(null!=e){try{return lc.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Gr(e,t){return p(Ie,function(n){var s="_."+n[0];t&n[1]&&!h(e,s)&&e.push(s)}),e.sort()}function $r(e){if(e instanceof a)return e.clone();var t=new s(e.__wrapped__,e.__chain__);return t.__actions__=Na(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Yr(e,t,n){t=(n?Ar(e,t,n):t===ae)?1:Lc(fl(t),0);var s=e?e.length:0;if(!s||t<1)return[];for(var a=0,r=0,o=Yp(Cc(s/t));a<s;)o[r++]=sa(e,a,a+=t);return o}function Kr(e){for(var t=-1,n=e?e.length:0,s=0,a=[];++t<n;){var r=e[t];r&&(a[s++]=r)}return a}function Jr(){var e=arguments.length;if(!e)return[];for(var t=Yp(e-1),n=arguments[0],s=e;s--;)t[s-1]=arguments[s];return g(id(n)?Na(n):[n],Kn(t,1))}function Qr(e,t,n){var s=e?e.length:0;return s?(t=n||t===ae?1:fl(t),sa(e,t<0?0:t,s)):[]}function Xr(e,t,n){var s=e?e.length:0;return s?(t=n||t===ae?1:fl(t),t=s-t,sa(e,0,t<0?0:t)):[]}function Zr(e,t){return e&&e.length?ha(e,hr(t,3),!0,!0):[]}function eo(e,t){return e&&e.length?ha(e,hr(t,3),!0):[]}function to(e,t,n,s){var a=e?e.length:0;return a?(n&&"number"!=typeof n&&Ar(e,t,n)&&(n=0,s=a),zn(e,t,n,s)):[]}function no(e,t,n){var s=e?e.length:0;if(!s)return-1;var a=null==n?0:fl(n);return a<0&&(a=Lc(s+a,0)),_(e,hr(t,3),a)}function so(e,t,n){var s=e?e.length:0;if(!s)return-1;var a=s-1;return n!==ae&&(a=fl(n),a=n<0?Lc(s+a,0):Dc(a,s-1)),_(e,hr(t,3),a,!0)}function ao(e){var t=e?e.length:0;return t?Kn(e,1):[]}function ro(e){var t=e?e.length:0;return t?Kn(e,Oe):[]}function oo(e,t){var n=e?e.length:0;return n?(t=t===ae?1:fl(t),Kn(e,t)):[]}function io(e){for(var t=-1,n=e?e.length:0,s={};++t<n;){var a=e[t];s[a[0]]=a[1]}return s}function lo(e){return e&&e.length?e[0]:ae}function po(e,t,n){var s=e?e.length:0;if(!s)return-1;var a=null==n?0:fl(n);return a<0&&(a=Lc(s+a,0)),k(e,t,a)}function co(e){var t=e?e.length:0;return t?sa(e,0,-1):[]}function uo(e,t){return e?Mc.call(e,t):""}function ho(e){var t=e?e.length:0;return t?e[t-1]:ae}function fo(e,t,n){var s=e?e.length:0;if(!s)return-1;var a=s;return n!==ae&&(a=fl(n),a=a<0?Lc(s+a,0):Dc(a,s-1)),t===t?X(e,t,a):_(e,A,a,!0)}function mo(e,t){return e&&e.length?Ws(e,fl(t)):ae}function go(e,t){return e&&e.length&&t&&t.length?$s(e,t):e}function yo(e,t,n){return e&&e.length&&t&&t.length?$s(e,t,hr(n,2)):e}function bo(e,t,n){return e&&e.length&&t&&t.length?$s(e,t,ae,n):e}function wo(e,t){var n=[];if(!e||!e.length)return n;var s=-1,a=[],r=e.length;for(t=hr(t,3);++s<r;){var o=e[s];t(o,s,e)&&(n.push(o),a.push(s))}return Ys(e,a),n}function vo(e){return e?Bc.call(e):e}function jo(e,t,n){var s=e?e.length:0;return s?(n&&"number"!=typeof n&&Ar(e,t,n)?(t=0,n=s):(t=null==t?0:fl(t),n=n===ae?s:fl(n)),sa(e,t,n)):[]}function xo(e,t){return ra(e,t)}function _o(e,t,n){return oa(e,t,hr(n,2))}function ko(e,t){var n=e?e.length:0;if(n){var s=ra(e,t);if(s<n&&Di(e[s],t))return s}return-1}function Eo(e,t){return ra(e,t,!0)}function Ao(e,t,n){return oa(e,t,hr(n,2),!0)}function To(e,t){var n=e?e.length:0;if(n){var s=ra(e,t,!0)-1;if(Di(e[s],t))return s}return-1}function So(e){return e&&e.length?ia(e):[]}function Co(e,t){return e&&e.length?ia(e,hr(t,2)):[]}function Po(e){var t=e?e.length:0;return t?sa(e,1,t):[]}function Oo(e,t,n){return e&&e.length?(t=n||t===ae?1:fl(t),sa(e,0,t<0?0:t)):[]}function Ro(e,t,n){var s=e?e.length:0;return s?(t=n||t===ae?1:fl(t),t=s-t,sa(e,t<0?0:t,s)):[]}function No(e,t){return e&&e.length?ha(e,hr(t,3),!1,!0):[]}function Mo(e,t){return e&&e.length?ha(e,hr(t,3)):[]}function qo(e){return e&&e.length?ca(e):[]}function Lo(e,t){return e&&e.length?ca(e,hr(t,2)):[]}function Do(e,t){return e&&e.length?ca(e,ae,t):[]}function Io(e){if(!e||!e.length)return[];var t=0;return e=d(e,function(e){if(Ui(e))return t=Lc(e.length,t),!0}),N(t,function(t){return m(e,S(t))})}function Uo(e,t){if(!e||!e.length)return[];var n=Io(e);return null==t?n:m(n,function(e){return i(t,ae,e)})}function Fo(e,t){return ga(e||[],t||[],En)}function Bo(e,t){return ga(e||[],t||[],ta)}function Wo(e){var n=t(e);return n.__chain__=!0,n}function Vo(e,t){return t(e),e}function Ho(e,t){return t(e)}function zo(){return Wo(this)}function Go(){return new s(this.value(),this.__chain__)}function $o(){this.__values__===ae&&(this.__values__=dl(this.value()));var e=this.__index__>=this.__values__.length,t=e?ae:this.__values__[this.__index__++];return{done:e,value:t}}function Yo(){return this}function Ko(e){for(var t,s=this;s instanceof n;){var a=$r(s);a.__index__=0,a.__values__=ae,t?r.__wrapped__=a:t=a;var r=a;s=s.__wrapped__}return r.__wrapped__=e,t}function Jo(){var e=this.__wrapped__;if(e instanceof a){var t=e;return this.__actions__.length&&(t=new a(this)),t=t.reverse(),t.__actions__.push({func:Ho,args:[vo],thisArg:ae}),new s(t,this.__chain__)}return this.thru(vo)}function Qo(){return fa(this.__wrapped__,this.__actions__)}function Xo(e,t,n){var s=id(e)?u:Vn;return n&&Ar(e,t,n)&&(t=ae),s(e,hr(t,3))}function Zo(e,t){var n=id(e)?d:Yn;return n(e,hr(t,3))}function ei(e,t){return Kn(oi(e,t),1)}function ti(e,t){return Kn(oi(e,t),Oe)}function ni(e,t,n){return n=n===ae?1:fl(n),Kn(oi(e,t),n)}function si(e,t){var n=id(e)?p:ru;return n(e,hr(t,3))}function ai(e,t){var n=id(e)?c:ou;return n(e,hr(t,3))}function ri(e,t,n,s){e=Ii(e)?e:zl(e),n=n&&!s?fl(n):0;var a=e.length;return n<0&&(n=Lc(a+n,0)),il(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&k(e,t,n)>-1}function oi(e,t){var n=id(e)?m:Ds;return n(e,hr(t,3))}function ii(e,t,n,s){return null==e?[]:(id(t)||(t=null==t?[]:[t]),n=s?ae:n,id(n)||(n=null==n?[]:[n]),Vs(e,t,n))}function li(e,t,n){var s=id(e)?y:P,a=arguments.length<3;return s(e,hr(t,4),n,a,ru)}function pi(e,t,n){var s=id(e)?b:P,a=arguments.length<3;return s(e,hr(t,4),n,a,ou)}function ci(e,t){var n=id(e)?d:Yn;return n(e,ki(hr(t,3)))}function ui(e){var t=id(e)?vn:Zs;return t(e)}function di(e,t,n){t=(n?Ar(e,t,n):t===ae)?1:fl(t);var s=id(e)?jn:ea;return s(e,t)}function hi(e){var t=id(e)?xn:na;return t(e)}function fi(e){if(null==e)return 0;if(Ii(e))return il(e)?Z(e):e.length;var t=yu(e);return t==Ge||t==Xe?e.size:Ms(e).length}function mi(e,t,n){var s=id(e)?w:aa;return n&&Ar(e,t,n)&&(t=ae),s(e,hr(t,3))}function gi(e,t){if("function"!=typeof t)throw new nc(le);return e=fl(e),function(){if(--e<1)return t.apply(this,arguments)}}function yi(e,t,n){return t=n?ae:t,t=e&&null==t?e.length:t,ar(e,we,ae,ae,ae,ae,t)}function bi(e,t){var n;if("function"!=typeof t)throw new nc(le);return e=fl(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=ae),n}}function wi(e,t,n){t=n?ae:t;var s=ar(e,me,ae,ae,ae,ae,ae,t);return s.placeholder=wi.placeholder,s}function vi(e,t,n){t=n?ae:t;var s=ar(e,ge,ae,ae,ae,ae,ae,t);return s.placeholder=vi.placeholder,s}function ji(e,t,n){function s(t){var n=d,s=h;return d=h=ae,b=t,m=e.apply(s,n)}function a(e){return b=e,g=vu(i,t),w?s(e):m}function r(e){var n=e-y,s=e-b,a=t-n;return v?Dc(a,f-s):a}function o(e){var n=e-y,s=e-b;return y===ae||n>=t||n<0||v&&s>=f}function i(){var e=Ku();return o(e)?l(e):void(g=vu(i,r(e)))}function l(e){return g=ae,j&&d?s(e):(d=h=ae,m)}function p(){g!==ae&&du(g),b=0,d=y=h=g=ae}function c(){return g===ae?m:l(Ku())}function u(){var e=Ku(),n=o(e);if(d=arguments,h=this,y=e,n){if(g===ae)return a(y);if(v)return g=vu(i,t),s(y)}return g===ae&&(g=vu(i,t)),m}var d,h,f,m,g,y,b=0,w=!1,v=!1,j=!0;if("function"!=typeof e)throw new nc(le);return t=gl(t)||0,Ji(n)&&(w=!!n.leading,v="maxWait"in n,f=v?Lc(gl(n.maxWait)||0,t):f,j="trailing"in n?!!n.trailing:j),u.cancel=p,u.flush=c,u}function xi(e){return ar(e,je)}function _i(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new nc(le);var n=function(){var s=arguments,a=t?t.apply(this,s):s[0],r=n.cache;if(r.has(a))return r.get(a);var o=e.apply(this,s);return n.cache=r.set(a,o)||r,o};return n.cache=new(_i.Cache||sn),n}function ki(e){if("function"!=typeof e)throw new nc(le);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Ei(e){return bi(2,e)}function Ai(e,t){if("function"!=typeof e)throw new nc(le);return t=t===ae?t:fl(t),Xs(e,t)}function Ti(e,t){if("function"!=typeof e)throw new nc(le);return t=t===ae?0:Lc(fl(t),0),Xs(function(n){var s=n[t],a=va(n,0,t);return s&&g(a,s),i(e,this,a)})}function Si(e,t,n){var s=!0,a=!0;if("function"!=typeof e)throw new nc(le);return Ji(n)&&(s="leading"in n?!!n.leading:s,a="trailing"in n?!!n.trailing:a),ji(e,t,{leading:s,maxWait:t,trailing:a})}function Ci(e){return yi(e,1)}function Pi(e,t){return t=null==t?xp:t,td(t,e)}function Oi(){if(!arguments.length)return[];var e=arguments[0];return id(e)?e:[e]}function Ri(e){return Mn(e,!1,!0)}function Ni(e,t){return Mn(e,!1,!0,t)}function Mi(e){return Mn(e,!0,!0)}function qi(e,t){return Mn(e,!0,!0,t)}function Li(e,t){return null==t||Ln(e,t,Rl(t))}function Di(e,t){return e===t||e!==e&&t!==t}function Ii(e){return null!=e&&Ki(e.length)&&!$i(e)}function Ui(e){return Qi(e)&&Ii(e)}function Fi(e){return e===!0||e===!1||Qi(e)&&dc.call(e)==Be}function Bi(e){return null!=e&&1===e.nodeType&&Qi(e)&&!rl(e)}function Wi(e){if(Ii(e)&&(id(e)||"string"==typeof e||"function"==typeof e.splice||pd(e)||fd(e)||od(e)))return!e.length;var t=yu(e);if(t==Ge||t==Xe)return!e.size;if(Or(e))return!Ms(e).length;for(var n in e)if(pc.call(e,n))return!1;return!0}function Vi(e,t){return Es(e,t)}function Hi(e,t,n){n="function"==typeof n?n:ae;var s=n?n(e,t):ae;return s===ae?Es(e,t,n):!!s}function zi(e){return!!Qi(e)&&(dc.call(e)==Ve||"string"==typeof e.message&&"string"==typeof e.name)}function Gi(e){return"number"==typeof e&&Nc(e)}function $i(e){var t=Ji(e)?dc.call(e):"";return t==He||t==ze||t==Je}function Yi(e){return"number"==typeof e&&e==fl(e)}function Ki(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Re}function Ji(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Qi(e){return null!=e&&"object"==typeof e}function Xi(e,t){return e===t||Ss(e,t,mr(t))}function Zi(e,t,n){return n="function"==typeof n?n:ae,Ss(e,t,mr(t),n)}function el(e){return al(e)&&e!=+e}function tl(e){if(bu(e))throw new Jp(ie);return Cs(e)}function nl(e){return null===e}function sl(e){return null==e}function al(e){return"number"==typeof e||Qi(e)&&dc.call(e)==$e}function rl(e){if(!Qi(e)||dc.call(e)!=Ye)return!1;var t=wc(e);if(null===t)return!0;var n=pc.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&lc.call(n)==uc}function ol(e){return Yi(e)&&e>=-Re&&e<=Re}function il(e){return"string"==typeof e||!id(e)&&Qi(e)&&dc.call(e)==Ze}function ll(e){return"symbol"==typeof e||Qi(e)&&dc.call(e)==et}function pl(e){return e===ae}function cl(e){return Qi(e)&&yu(e)==tt}function ul(e){return Qi(e)&&dc.call(e)==nt}function dl(e){if(!e)return[];if(Ii(e))return il(e)?ee(e):Na(e);if(vc&&e[vc])return z(e[vc]());var t=yu(e),n=t==Ge?G:t==Xe?K:zl;return n(e)}function hl(e){if(!e)return 0===e?e:0;if(e=gl(e),e===Oe||e===-Oe){var t=e<0?-1:1;return t*Ne}return e===e?e:0}function fl(e){var t=hl(e),n=t%1;return t===t?n?t-n:t:0}function ml(e){return e?On(fl(e),0,qe):0}function gl(e){if("number"==typeof e)return e;if(ll(e))return Me;if(Ji(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ji(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Pt,"");var n=Bt.test(e);return n||Vt.test(e)?$n(e.slice(2),n?2:8):Ft.test(e)?Me:+e}function yl(e){return Ma(e,Nl(e))}function bl(e){return On(fl(e),-Re,Re)}function wl(e){return null==e?"":pa(e)}function vl(e,t){var n=au(e);return t?Sn(n,t):n}function jl(e,t){return x(e,hr(t,3),Qn)}function xl(e,t){return x(e,hr(t,3),Xn)}function _l(e,t){return null==e?e:iu(e,hr(t,3),Nl)}function kl(e,t){return null==e?e:lu(e,hr(t,3),Nl)}function El(e,t){return e&&Qn(e,hr(t,3))}function Al(e,t){return e&&Xn(e,hr(t,3))}function Tl(e){return null==e?[]:es(e,Rl(e))}function Sl(e){return null==e?[]:es(e,Nl(e))}function Cl(e,t,n){var s=null==e?ae:ts(e,t);return s===ae?n:s}function Pl(e,t){return null!=e&&wr(e,t,gs)}function Ol(e,t){return null!=e&&wr(e,t,ys)}function Rl(e){return Ii(e)?wn(e):Ms(e)}function Nl(e){return Ii(e)?wn(e,!0):qs(e)}function Ml(e,t){var n={};return t=hr(t,3),Qn(e,function(e,s,a){Cn(n,t(e,s,a),e)}),n}function ql(e,t){var n={};return t=hr(t,3),Qn(e,function(e,s,a){Cn(n,s,t(e,s,a))}),n}function Ll(e,t){return Dl(e,ki(hr(t)))}function Dl(e,t){return null==e?{}:zs(e,cr(e),hr(t))}function Il(e,t,n){t=Tr(t,e)?[t]:wa(t);var s=-1,a=t.length;for(a||(e=ae,a=1);++s<a;){var r=null==e?ae:e[Hr(t[s])];r===ae&&(s=a,r=n),e=$i(r)?r.call(e):r}return e}function Ul(e,t,n){return null==e?e:ta(e,t,n)}function Fl(e,t,n,s){return s="function"==typeof s?s:ae,null==e?e:ta(e,t,n,s)}function Bl(e,t,n){var s=id(e),a=s||pd(e)||fd(e);if(t=hr(t,4),null==n){var r=e&&e.constructor;n=a?s?new r:[]:Ji(e)&&$i(r)?au(wc(e)):{}}return(a?p:Qn)(e,function(e,s,a){return t(n,e,s,a)}),n}function Wl(e,t){return null==e||ua(e,t)}function Vl(e,t,n){return null==e?e:da(e,t,ba(n))}function Hl(e,t,n,s){return s="function"==typeof s?s:ae,null==e?e:da(e,t,ba(n),s)}function zl(e){return e?L(e,Rl(e)):[]}function Gl(e){return null==e?[]:L(e,Nl(e))}function $l(e,t,n){return n===ae&&(n=t,t=ae),n!==ae&&(n=gl(n),n=n===n?n:0),t!==ae&&(t=gl(t),t=t===t?t:0),On(gl(e),t,n)}function Yl(e,t,n){return t=hl(t),n===ae?(n=t,t=0):n=hl(n),e=gl(e),bs(e,t,n)}function Kl(e,t,n){if(n&&"boolean"!=typeof n&&Ar(e,t,n)&&(t=n=ae),n===ae&&("boolean"==typeof t?(n=t,t=ae):"boolean"==typeof e&&(n=e,e=ae)),e===ae&&t===ae?(e=0,t=1):(e=hl(e),t===ae?(t=e,e=0):t=hl(t)),e>t){var s=e;e=t,t=s}if(n||e%1||t%1){var a=Fc();return Dc(e+a*(t-e+Gn("1e-"+((a+"").length-1))),t)}return Ks(e,t)}function Jl(e){return Fd(wl(e).toLowerCase())}function Ql(e){return e=wl(e),e&&e.replace(zt,ps).replace(Nn,"")}function Xl(e,t,n){e=wl(e),t=pa(t);var s=e.length;n=n===ae?s:On(fl(n),0,s);var a=n;return n-=t.length,n>=0&&e.slice(n,a)==t}function Zl(e){return e=wl(e),e&&vt.test(e)?e.replace(bt,cs):e}function ep(e){return e=wl(e),e&&Ct.test(e)?e.replace(St,"\\$&"):e}function tp(e,t,n){e=wl(e),t=fl(t);var s=t?Z(e):0;if(!t||s>=t)return e;var a=(t-s)/2;return Qa(Pc(a),n)+e+Qa(Cc(a),n)}function np(e,t,n){e=wl(e),t=fl(t);var s=t?Z(e):0;return t&&s<t?e+Qa(t-s,n):e}function sp(e,t,n){e=wl(e),t=fl(t);var s=t?Z(e):0;return t&&s<t?Qa(t-s,n)+e:e}function ap(e,t,n){return n||null==t?t=0:t&&(t=+t),Uc(wl(e).replace(Ot,""),t||0)}function rp(e,t,n){return t=(n?Ar(e,t,n):t===ae)?1:fl(t),Qs(wl(e),t)}function op(){var e=arguments,t=wl(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function ip(e,t,n){return n&&"number"!=typeof n&&Ar(e,t,n)&&(t=n=ae),(n=n===ae?qe:n>>>0)?(e=wl(e),e&&("string"==typeof t||null!=t&&!dd(t))&&(t=pa(t),!t&&V(e))?va(ee(e),0,n):e.split(t,n)):[]}function lp(e,t,n){return e=wl(e),n=On(fl(n),0,e.length),t=pa(t),e.slice(n,n+t.length)==t}function pp(e,n,s){var a=t.templateSettings;s&&Ar(e,n,s)&&(n=ae),e=wl(e),n=wd({},n,a,_n);var r,o,i=wd({},n.imports,a.imports,_n),l=Rl(i),p=L(i,l),c=0,u=n.interpolate||Gt,d="__p += '",h=ec((n.escape||Gt).source+"|"+u.source+"|"+(u===_t?It:Gt).source+"|"+(n.evaluate||Gt).source+"|$","g"),f="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Un+"]")+"\n";e.replace(h,function(t,n,s,a,i,l){return s||(s=a),d+=e.slice(c,l).replace($t,B),n&&(r=!0,d+="' +\n__e("+n+") +\n'"),i&&(o=!0,d+="';\n"+i+";\n__p += '"),s&&(d+="' +\n((__t = ("+s+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),d+="';\n";var m=n.variable;m||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(ft,""):d).replace(mt,"$1").replace(gt,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Bd(function(){return Qp(l,f+"return "+d).apply(ae,p)});if(g.source=d,zi(g))throw g;return g}function cp(e){return wl(e).toLowerCase()}function up(e){return wl(e).toUpperCase()}function dp(e,t,n){if(e=wl(e),e&&(n||t===ae))return e.replace(Pt,"");if(!e||!(t=pa(t)))return e;var s=ee(e),a=ee(t),r=I(s,a),o=U(s,a)+1;return va(s,r,o).join("")}function hp(e,t,n){if(e=wl(e),e&&(n||t===ae))return e.replace(Rt,"");if(!e||!(t=pa(t)))return e;var s=ee(e),a=U(s,ee(t))+1;return va(s,0,a).join("")}function fp(e,t,n){if(e=wl(e),e&&(n||t===ae))return e.replace(Ot,"");if(!e||!(t=pa(t)))return e;var s=ee(e),a=I(s,ee(t));return va(s,a).join("")}function mp(e,t){var n=ke,s=Ee;if(Ji(t)){var a="separator"in t?t.separator:a;n="length"in t?fl(t.length):n,s="omission"in t?pa(t.omission):s}e=wl(e);var r=e.length;if(V(e)){var o=ee(e);r=o.length}if(n>=r)return e;var i=n-Z(s);if(i<1)return s;var l=o?va(o,0,i).join(""):e.slice(0,i);if(a===ae)return l+s;if(o&&(i+=l.length-i),dd(a)){if(e.slice(i).search(a)){var p,c=l;for(a.global||(a=ec(a.source,wl(Ut.exec(a))+"g")),a.lastIndex=0;p=a.exec(c);)var u=p.index;l=l.slice(0,u===ae?i:u)}}else if(e.indexOf(pa(a),i)!=i){var d=l.lastIndexOf(a);d>-1&&(l=l.slice(0,d))}return l+s}function gp(e){return e=wl(e),e&&wt.test(e)?e.replace(yt,us):e}function yp(e,t,n){return e=wl(e),t=n?ae:t,t===ae?H(e)?se(e):j(e):e.match(t)||[]}function bp(e){var t=e?e.length:0,n=hr();return e=t?m(e,function(e){if("function"!=typeof e[1])throw new nc(le);return[n(e[0]),e[1]]}):[],Xs(function(n){for(var s=-1;++s<t;){var a=e[s];if(i(a[0],this,n))return i(a[1],this,n)}})}function wp(e){return qn(Mn(e,!0))}function vp(e){return function(){return e}}function jp(e,t){return null==e||e!==e?t:e}function xp(e){return e}function _p(e){return Ns("function"==typeof e?e:Mn(e,!0))}function kp(e){return Is(Mn(e,!0))}function Ep(e,t){return Us(e,Mn(t,!0))}function Ap(e,t,n){var s=Rl(t),a=es(t,s);null!=n||Ji(t)&&(a.length||!s.length)||(n=t,t=e,e=this,a=es(t,Rl(t)));var r=!(Ji(n)&&"chain"in n&&!n.chain),o=$i(e);return p(a,function(n){var s=t[n];e[n]=s,o&&(e.prototype[n]=function(){var t=this.__chain__;if(r||t){var n=e(this.__wrapped__),a=n.__actions__=Na(this.__actions__);return a.push({func:s,args:arguments,thisArg:e}),n.__chain__=t,n}return s.apply(e,g([this.value()],arguments))})}),e}function Tp(){return Jn._===this&&(Jn._=hc),this}function Sp(){}function Cp(e){return e=fl(e),Xs(function(t){return Ws(t,e)})}function Pp(e){return Tr(e)?S(Hr(e)):Gs(e)}function Op(e){return function(t){return null==e?ae:ts(e,t)}}function Rp(){return[]}function Np(){return!1}function Mp(){return{}}function qp(){return""}function Lp(){return!0}function Dp(e,t){if(e=fl(e),e<1||e>Re)return[];var n=qe,s=Dc(e,qe);t=hr(t),e-=qe;for(var a=N(s,t);++n<e;)t(n);return a}function Ip(e){return id(e)?m(e,Hr):ll(e)?[e]:Na(xu(e))}function Up(e){var t=++cc;return wl(e)+t}function Fp(e){return e&&e.length?Hn(e,xp,ms):ae}function Bp(e,t){return e&&e.length?Hn(e,hr(t,2),ms):ae}function Wp(e){return T(e,xp)}function Vp(e,t){return T(e,hr(t,2))}function Hp(e){return e&&e.length?Hn(e,xp,Ls):ae}function zp(e,t){return e&&e.length?Hn(e,hr(t,2),Ls):ae}function Gp(e){return e&&e.length?R(e,xp):0}function $p(e,t){return e&&e.length?R(e,hr(t,2)):0}e=e?hs.defaults(Jn.Object(),e,hs.pick(Jn,In)):Jn;var Yp=e.Array,Kp=e.Date,Jp=e.Error,Qp=e.Function,Xp=e.Math,Zp=e.Object,ec=e.RegExp,tc=e.String,nc=e.TypeError,sc=Yp.prototype,ac=Qp.prototype,rc=Zp.prototype,oc=e["__core-js_shared__"],ic=function(){var e=/[^.]+$/.exec(oc&&oc.keys&&oc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),lc=ac.toString,pc=rc.hasOwnProperty,cc=0,uc=lc.call(Zp),dc=rc.toString,hc=Jn._,fc=ec("^"+lc.call(pc).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mc=Zn?e.Buffer:ae,gc=e.Symbol,yc=e.Uint8Array,bc=mc?mc.allocUnsafe:ae,wc=$(Zp.getPrototypeOf,Zp),vc=gc?gc.iterator:ae,jc=Zp.create,xc=rc.propertyIsEnumerable,_c=sc.splice,kc=gc?gc.isConcatSpreadable:ae,Ec=function(){try{var e=gr(Zp,"defineProperty");return e({},"",{}),e}catch(t){}}(),Ac=e.clearTimeout!==Jn.clearTimeout&&e.clearTimeout,Tc=Kp&&Kp.now!==Jn.Date.now&&Kp.now,Sc=e.setTimeout!==Jn.setTimeout&&e.setTimeout,Cc=Xp.ceil,Pc=Xp.floor,Oc=Zp.getOwnPropertySymbols,Rc=mc?mc.isBuffer:ae,Nc=e.isFinite,Mc=sc.join,qc=$(Zp.keys,Zp),Lc=Xp.max,Dc=Xp.min,Ic=Kp.now,Uc=e.parseInt,Fc=Xp.random,Bc=sc.reverse,Wc=gr(e,"DataView"),Vc=gr(e,"Map"),Hc=gr(e,"Promise"),zc=gr(e,"Set"),Gc=gr(e,"WeakMap"),$c=gr(Zp,"create"),Yc=Gc&&new Gc,Kc={},Jc=zr(Wc),Qc=zr(Vc),Xc=zr(Hc),Zc=zr(zc),eu=zr(Gc),tu=gc?gc.prototype:ae,nu=tu?tu.valueOf:ae,su=tu?tu.toString:ae,au=function(){function e(){}return function(t){if(!Ji(t))return{};if(jc)return jc(t);e.prototype=t;var n=new e;return e.prototype=ae,n}}();t.templateSettings={escape:jt,evaluate:xt,interpolate:_t,variable:"",imports:{_:t}},t.prototype=n.prototype,t.prototype.constructor=t,s.prototype=au(n.prototype),s.prototype.constructor=s,a.prototype=au(n.prototype),a.prototype.constructor=a,te.prototype.clear=ne,te.prototype["delete"]=Lt,te.prototype.get=Yt,te.prototype.has=Kt,te.prototype.set=Jt,Qt.prototype.clear=Xt,Qt.prototype["delete"]=Zt,Qt.prototype.get=en,Qt.prototype.has=tn,Qt.prototype.set=nn,sn.prototype.clear=an,sn.prototype["delete"]=rn,sn.prototype.get=on,sn.prototype.has=ln,sn.prototype.set=pn,cn.prototype.add=cn.prototype.push=un,cn.prototype.has=dn,hn.prototype.clear=fn,hn.prototype["delete"]=mn,hn.prototype.get=gn,hn.prototype.has=yn,hn.prototype.set=bn;var ru=Ia(Qn),ou=Ia(Xn,!0),iu=Ua(),lu=Ua(!0),pu=Yc?function(e,t){return Yc.set(e,t),e}:xp,cu=Ec?function(e,t){return Ec(e,"toString",{configurable:!0,enumerable:!1,value:vp(t),writable:!0})}:xp,uu=Xs,du=Ac||function(e){return Jn.clearTimeout(e)},hu=zc&&1/K(new zc([,-0]))[1]==Oe?function(e){return new zc(e)}:Sp,fu=Yc?function(e){return Yc.get(e)}:Sp,mu=Oc?$(Oc,Zp):Rp,gu=Oc?function(e){for(var t=[];e;)g(t,mu(e)),e=wc(e);return t}:Rp,yu=ds;(Wc&&yu(new Wc(new ArrayBuffer(1)))!=at||Vc&&yu(new Vc)!=Ge||Hc&&yu(Hc.resolve())!=Ke||zc&&yu(new zc)!=Xe||Gc&&yu(new Gc)!=tt)&&(yu=function(e){var t=dc.call(e),n=t==Ye?e.constructor:ae,s=n?zr(n):ae;if(s)switch(s){case Jc:return at;case Qc:return Ge;case Xc:return Ke;case Zc:return Xe;case eu:return tt}return t});var bu=oc?$i:Np,wu=Wr(pu),vu=Sc||function(e,t){return Jn.setTimeout(e,t)},ju=Wr(cu),xu=Mr(function(e){e=wl(e);var t=[];return At.test(e)&&t.push(""),e.replace(Tt,function(e,n,s,a){t.push(s?a.replace(Dt,"$1"):n||e)}),t}),_u=Xs(function(e,t){return Ui(e)?Wn(e,Kn(t,1,Ui,!0)):[]}),ku=Xs(function(e,t){var n=ho(t);return Ui(n)&&(n=ae),Ui(e)?Wn(e,Kn(t,1,Ui,!0),hr(n,2)):[]}),Eu=Xs(function(e,t){var n=ho(t);return Ui(n)&&(n=ae),Ui(e)?Wn(e,Kn(t,1,Ui,!0),ae,n):[]}),Au=Xs(function(e){var t=m(e,ya);return t.length&&t[0]===e[0]?ws(t):[]}),Tu=Xs(function(e){var t=ho(e),n=m(e,ya);return t===ho(n)?t=ae:n.pop(),n.length&&n[0]===e[0]?ws(n,hr(t,2)):[]}),Su=Xs(function(e){var t=ho(e),n=m(e,ya);return t===ho(n)?t=ae:n.pop(),n.length&&n[0]===e[0]?ws(n,ae,t):[]}),Cu=Xs(go),Pu=lr(function(e,t){var n=e?e.length:0,s=Pn(e,t);return Ys(e,m(t,function(e){return Er(e,n)?+e:e}).sort(Ca)),s}),Ou=Xs(function(e){return ca(Kn(e,1,Ui,!0))}),Ru=Xs(function(e){var t=ho(e);return Ui(t)&&(t=ae),ca(Kn(e,1,Ui,!0),hr(t,2))}),Nu=Xs(function(e){var t=ho(e);return Ui(t)&&(t=ae),ca(Kn(e,1,Ui,!0),ae,t)}),Mu=Xs(function(e,t){return Ui(e)?Wn(e,t):[]}),qu=Xs(function(e){return ma(d(e,Ui))}),Lu=Xs(function(e){var t=ho(e);return Ui(t)&&(t=ae),ma(d(e,Ui),hr(t,2))}),Du=Xs(function(e){var t=ho(e);return Ui(t)&&(t=ae),ma(d(e,Ui),ae,t)}),Iu=Xs(Io),Uu=Xs(function(e){var t=e.length,n=t>1?e[t-1]:ae;return n="function"==typeof n?(e.pop(),n):ae,Uo(e,n)}),Fu=lr(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return Pn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof a&&Er(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Ho,args:[o],thisArg:ae}),new s(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(ae),e})):this.thru(o)}),Bu=La(function(e,t,n){pc.call(e,n)?++e[n]:Cn(e,n,1)}),Wu=za(no),Vu=za(so),Hu=La(function(e,t,n){pc.call(e,n)?e[n].push(t):Cn(e,n,[t])}),zu=Xs(function(e,t,n){var s=-1,a="function"==typeof t,r=Tr(t),o=Ii(e)?Yp(e.length):[];return ru(e,function(e){var l=a?t:r&&null!=e?e[t]:ae;o[++s]=l?i(l,e,n):js(e,t,n)}),o}),Gu=La(function(e,t,n){Cn(e,n,t)}),$u=La(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Yu=Xs(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Ar(e,t[0],t[1])?t=[]:n>2&&Ar(t[0],t[1],t[2])&&(t=[t[0]]),Vs(e,Kn(t,1),[])}),Ku=Tc||function(){return Jn.Date.now()},Ju=Xs(function(e,t,n){var s=de;if(n.length){var a=Y(n,dr(Ju));s|=ye}return ar(e,s,t,n,a)}),Qu=Xs(function(e,t,n){var s=de|he;if(n.length){var a=Y(n,dr(Qu));s|=ye}return ar(t,s,e,n,a)}),Xu=Xs(function(e,t){return Dn(e,1,t)}),Zu=Xs(function(e,t,n){return Dn(e,gl(t)||0,n)});_i.Cache=sn;var ed=uu(function(e,t){t=1==t.length&&id(t[0])?m(t[0],q(hr())):m(Kn(t,1),q(hr()));var n=t.length;return Xs(function(s){for(var a=-1,r=Dc(s.length,n);++a<r;)s[a]=t[a].call(this,s[a]);return i(e,this,s)})}),td=Xs(function(e,t){var n=Y(t,dr(td));return ar(e,ye,ae,t,n)}),nd=Xs(function(e,t){var n=Y(t,dr(nd));return ar(e,be,ae,t,n)}),sd=lr(function(e,t){return ar(e,ve,ae,ae,ae,t)}),ad=er(ms),rd=er(function(e,t){return e>=t}),od=xs(function(){return arguments}())?xs:function(e){return Qi(e)&&pc.call(e,"callee")&&!xc.call(e,"callee")},id=Yp.isArray,ld=ns?q(ns):_s,pd=Rc||Np,cd=ss?q(ss):ks,ud=as?q(as):Ts,dd=rs?q(rs):Ps,hd=os?q(os):Os,fd=is?q(is):Rs,md=er(Ls),gd=er(function(e,t){return e<=t}),yd=Da(function(e,t){if(Or(t)||Ii(t))return void Ma(t,Rl(t),e);for(var n in t)pc.call(t,n)&&En(e,n,t[n])}),bd=Da(function(e,t){Ma(t,Nl(t),e)}),wd=Da(function(e,t,n,s){Ma(t,Nl(t),e,s)}),vd=Da(function(e,t,n,s){Ma(t,Rl(t),e,s)}),jd=lr(Pn),xd=Xs(function(e){return e.push(ae,_n),i(wd,ae,e)}),_d=Xs(function(e){return e.push(ae,Lr),i(Sd,ae,e)}),kd=Ya(function(e,t,n){e[t]=n},vp(xp)),Ed=Ya(function(e,t,n){pc.call(e,t)?e[t].push(n):e[t]=[n]},hr),Ad=Xs(js),Td=Da(function(e,t,n){Fs(e,t,n);
}),Sd=Da(function(e,t,n,s){Fs(e,t,n,s)}),Cd=lr(function(e,t){return null==e?{}:(t=m(t,Hr),Hs(e,Wn(cr(e),t)))}),Pd=lr(function(e,t){return null==e?{}:Hs(e,m(t,Hr))}),Od=sr(Rl),Rd=sr(Nl),Nd=Wa(function(e,t,n){return t=t.toLowerCase(),e+(n?Jl(t):t)}),Md=Wa(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),qd=Wa(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Ld=Ba("toLowerCase"),Dd=Wa(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Id=Wa(function(e,t,n){return e+(n?" ":"")+Fd(t)}),Ud=Wa(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Fd=Ba("toUpperCase"),Bd=Xs(function(e,t){try{return i(e,ae,t)}catch(n){return zi(n)?n:new Jp(n)}}),Wd=lr(function(e,t){return p(t,function(t){t=Hr(t),Cn(e,t,Ju(e[t],e))}),e}),Vd=Ga(),Hd=Ga(!0),zd=Xs(function(e,t){return function(n){return js(n,e,t)}}),Gd=Xs(function(e,t){return function(n){return js(e,n,t)}}),$d=Ja(m),Yd=Ja(u),Kd=Ja(w),Jd=Za(),Qd=Za(!0),Xd=Ka(function(e,t){return e+t},0),Zd=nr("ceil"),eh=Ka(function(e,t){return e/t},1),th=nr("floor"),nh=Ka(function(e,t){return e*t},1),sh=nr("round"),ah=Ka(function(e,t){return e-t},0);return t.after=gi,t.ary=yi,t.assign=yd,t.assignIn=bd,t.assignInWith=wd,t.assignWith=vd,t.at=jd,t.before=bi,t.bind=Ju,t.bindAll=Wd,t.bindKey=Qu,t.castArray=Oi,t.chain=Wo,t.chunk=Yr,t.compact=Kr,t.concat=Jr,t.cond=bp,t.conforms=wp,t.constant=vp,t.countBy=Bu,t.create=vl,t.curry=wi,t.curryRight=vi,t.debounce=ji,t.defaults=xd,t.defaultsDeep=_d,t.defer=Xu,t.delay=Zu,t.difference=_u,t.differenceBy=ku,t.differenceWith=Eu,t.drop=Qr,t.dropRight=Xr,t.dropRightWhile=Zr,t.dropWhile=eo,t.fill=to,t.filter=Zo,t.flatMap=ei,t.flatMapDeep=ti,t.flatMapDepth=ni,t.flatten=ao,t.flattenDeep=ro,t.flattenDepth=oo,t.flip=xi,t.flow=Vd,t.flowRight=Hd,t.fromPairs=io,t.functions=Tl,t.functionsIn=Sl,t.groupBy=Hu,t.initial=co,t.intersection=Au,t.intersectionBy=Tu,t.intersectionWith=Su,t.invert=kd,t.invertBy=Ed,t.invokeMap=zu,t.iteratee=_p,t.keyBy=Gu,t.keys=Rl,t.keysIn=Nl,t.map=oi,t.mapKeys=Ml,t.mapValues=ql,t.matches=kp,t.matchesProperty=Ep,t.memoize=_i,t.merge=Td,t.mergeWith=Sd,t.method=zd,t.methodOf=Gd,t.mixin=Ap,t.negate=ki,t.nthArg=Cp,t.omit=Cd,t.omitBy=Ll,t.once=Ei,t.orderBy=ii,t.over=$d,t.overArgs=ed,t.overEvery=Yd,t.overSome=Kd,t.partial=td,t.partialRight=nd,t.partition=$u,t.pick=Pd,t.pickBy=Dl,t.property=Pp,t.propertyOf=Op,t.pull=Cu,t.pullAll=go,t.pullAllBy=yo,t.pullAllWith=bo,t.pullAt=Pu,t.range=Jd,t.rangeRight=Qd,t.rearg=sd,t.reject=ci,t.remove=wo,t.rest=Ai,t.reverse=vo,t.sampleSize=di,t.set=Ul,t.setWith=Fl,t.shuffle=hi,t.slice=jo,t.sortBy=Yu,t.sortedUniq=So,t.sortedUniqBy=Co,t.split=ip,t.spread=Ti,t.tail=Po,t.take=Oo,t.takeRight=Ro,t.takeRightWhile=No,t.takeWhile=Mo,t.tap=Vo,t.throttle=Si,t.thru=Ho,t.toArray=dl,t.toPairs=Od,t.toPairsIn=Rd,t.toPath=Ip,t.toPlainObject=yl,t.transform=Bl,t.unary=Ci,t.union=Ou,t.unionBy=Ru,t.unionWith=Nu,t.uniq=qo,t.uniqBy=Lo,t.uniqWith=Do,t.unset=Wl,t.unzip=Io,t.unzipWith=Uo,t.update=Vl,t.updateWith=Hl,t.values=zl,t.valuesIn=Gl,t.without=Mu,t.words=yp,t.wrap=Pi,t.xor=qu,t.xorBy=Lu,t.xorWith=Du,t.zip=Iu,t.zipObject=Fo,t.zipObjectDeep=Bo,t.zipWith=Uu,t.entries=Od,t.entriesIn=Rd,t.extend=bd,t.extendWith=wd,Ap(t,t),t.add=Xd,t.attempt=Bd,t.camelCase=Nd,t.capitalize=Jl,t.ceil=Zd,t.clamp=$l,t.clone=Ri,t.cloneDeep=Mi,t.cloneDeepWith=qi,t.cloneWith=Ni,t.conformsTo=Li,t.deburr=Ql,t.defaultTo=jp,t.divide=eh,t.endsWith=Xl,t.eq=Di,t.escape=Zl,t.escapeRegExp=ep,t.every=Xo,t.find=Wu,t.findIndex=no,t.findKey=jl,t.findLast=Vu,t.findLastIndex=so,t.findLastKey=xl,t.floor=th,t.forEach=si,t.forEachRight=ai,t.forIn=_l,t.forInRight=kl,t.forOwn=El,t.forOwnRight=Al,t.get=Cl,t.gt=ad,t.gte=rd,t.has=Pl,t.hasIn=Ol,t.head=lo,t.identity=xp,t.includes=ri,t.indexOf=po,t.inRange=Yl,t.invoke=Ad,t.isArguments=od,t.isArray=id,t.isArrayBuffer=ld,t.isArrayLike=Ii,t.isArrayLikeObject=Ui,t.isBoolean=Fi,t.isBuffer=pd,t.isDate=cd,t.isElement=Bi,t.isEmpty=Wi,t.isEqual=Vi,t.isEqualWith=Hi,t.isError=zi,t.isFinite=Gi,t.isFunction=$i,t.isInteger=Yi,t.isLength=Ki,t.isMap=ud,t.isMatch=Xi,t.isMatchWith=Zi,t.isNaN=el,t.isNative=tl,t.isNil=sl,t.isNull=nl,t.isNumber=al,t.isObject=Ji,t.isObjectLike=Qi,t.isPlainObject=rl,t.isRegExp=dd,t.isSafeInteger=ol,t.isSet=hd,t.isString=il,t.isSymbol=ll,t.isTypedArray=fd,t.isUndefined=pl,t.isWeakMap=cl,t.isWeakSet=ul,t.join=uo,t.kebabCase=Md,t.last=ho,t.lastIndexOf=fo,t.lowerCase=qd,t.lowerFirst=Ld,t.lt=md,t.lte=gd,t.max=Fp,t.maxBy=Bp,t.mean=Wp,t.meanBy=Vp,t.min=Hp,t.minBy=zp,t.stubArray=Rp,t.stubFalse=Np,t.stubObject=Mp,t.stubString=qp,t.stubTrue=Lp,t.multiply=nh,t.nth=mo,t.noConflict=Tp,t.noop=Sp,t.now=Ku,t.pad=tp,t.padEnd=np,t.padStart=sp,t.parseInt=ap,t.random=Kl,t.reduce=li,t.reduceRight=pi,t.repeat=rp,t.replace=op,t.result=Il,t.round=sh,t.runInContext=fs,t.sample=ui,t.size=fi,t.snakeCase=Dd,t.some=mi,t.sortedIndex=xo,t.sortedIndexBy=_o,t.sortedIndexOf=ko,t.sortedLastIndex=Eo,t.sortedLastIndexBy=Ao,t.sortedLastIndexOf=To,t.startCase=Id,t.startsWith=lp,t.subtract=ah,t.sum=Gp,t.sumBy=$p,t.template=pp,t.times=Dp,t.toFinite=hl,t.toInteger=fl,t.toLength=ml,t.toLower=cp,t.toNumber=gl,t.toSafeInteger=bl,t.toString=wl,t.toUpper=up,t.trim=dp,t.trimEnd=hp,t.trimStart=fp,t.truncate=mp,t.unescape=gp,t.uniqueId=Up,t.upperCase=Ud,t.upperFirst=Fd,t.each=si,t.eachRight=ai,t.first=lo,Ap(t,function(){var e={};return Qn(t,function(n,s){pc.call(t.prototype,s)||(e[s]=n)}),e}(),{chain:!1}),t.VERSION=re,p(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),p(["drop","take"],function(e,t){a.prototype[e]=function(n){var s=this.__filtered__;if(s&&!t)return new a(this);n=n===ae?1:Lc(fl(n),0);var r=this.clone();return s?r.__takeCount__=Dc(n,r.__takeCount__):r.__views__.push({size:Dc(n,qe),type:e+(r.__dir__<0?"Right":"")}),r},a.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),p(["filter","map","takeWhile"],function(e,t){var n=t+1,s=n==Se||n==Pe;a.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:hr(e,3),type:n}),t.__filtered__=t.__filtered__||s,t}}),p(["head","last"],function(e,t){var n="take"+(t?"Right":"");a.prototype[e]=function(){return this[n](1).value()[0]}}),p(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");a.prototype[e]=function(){return this.__filtered__?new a(this):this[n](1)}}),a.prototype.compact=function(){return this.filter(xp)},a.prototype.find=function(e){return this.filter(e).head()},a.prototype.findLast=function(e){return this.reverse().find(e)},a.prototype.invokeMap=Xs(function(e,t){return"function"==typeof e?new a(this):this.map(function(n){return js(n,e,t)})}),a.prototype.reject=function(e){return this.filter(ki(hr(e)))},a.prototype.slice=function(e,t){e=fl(e);var n=this;return n.__filtered__&&(e>0||t<0)?new a(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==ae&&(t=fl(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},a.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},a.prototype.toArray=function(){return this.take(qe)},Qn(a.prototype,function(e,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),o=/^(?:head|last)$/.test(n),i=t[o?"take"+("last"==n?"Right":""):n],l=o||/^find/.test(n);i&&(t.prototype[n]=function(){var n=this.__wrapped__,p=o?[1]:arguments,c=n instanceof a,u=p[0],d=c||id(n),h=function(e){var n=i.apply(t,g([e],p));return o&&f?n[0]:n};d&&r&&"function"==typeof u&&1!=u.length&&(c=d=!1);var f=this.__chain__,m=!!this.__actions__.length,y=l&&!f,b=c&&!m;if(!l&&d){n=b?n:new a(this);var w=e.apply(n,p);return w.__actions__.push({func:Ho,args:[h],thisArg:ae}),new s(w,f)}return y&&b?e.apply(this,p):(w=this.thru(h),y?o?w.value()[0]:w.value():w)})}),p(["pop","push","shift","sort","splice","unshift"],function(e){var n=sc[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;if(a&&!this.__chain__){var t=this.value();return n.apply(id(t)?t:[],e)}return this[s](function(t){return n.apply(id(t)?t:[],e)})}}),Qn(a.prototype,function(e,n){var s=t[n];if(s){var a=s.name+"",r=Kc[a]||(Kc[a]=[]);r.push({name:n,func:s})}}),Kc[$a(ae,he).name]=[{name:"wrapper",func:ae}],a.prototype.clone=v,a.prototype.reverse=C,a.prototype.value=Q,t.prototype.at=Fu,t.prototype.chain=zo,t.prototype.commit=Go,t.prototype.next=$o,t.prototype.plant=Ko,t.prototype.reverse=Jo,t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=Qo,t.prototype.first=t.prototype.head,vc&&(t.prototype[vc]=Yo),t},hs=ds();Jn._=hs,s=function(){return hs}.call(t,n,t,a),!(s!==ae&&(a.exports=s))}).call(this)}).call(t,function(){return this}(),n(310)(e))},function(e,t,n){(function(e){function n(e,t){for(var n=0,s=e.length-1;s>=0;s--){var a=e[s];"."===a?e.splice(s,1):".."===a?(e.splice(s,1),n++):n&&(e.splice(s,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function s(e,t){if(e.filter)return e.filter(t);for(var n=[],s=0;s<e.length;s++)t(e[s],s,e)&&n.push(e[s]);return n}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(e){return a.exec(e).slice(1)};t.resolve=function(){for(var t="",a=!1,r=arguments.length-1;r>=-1&&!a;r--){var o=r>=0?arguments[r]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,a="/"===o.charAt(0))}return t=n(s(t.split("/"),function(e){return!!e}),!a).join("/"),(a?"/":"")+t||"."},t.normalize=function(e){var a=t.isAbsolute(e),r="/"===o(e,-1);return e=n(s(e.split("/"),function(e){return!!e}),!a).join("/"),e||a||(e="."),e&&r&&(e+="/"),(a?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(s(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function s(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var a=s(e.split("/")),r=s(n.split("/")),o=Math.min(a.length,r.length),i=o,l=0;l<o;l++)if(a[l]!==r[l]){i=l;break}for(var p=[],l=i;l<a.length;l++)p.push("..");return p=p.concat(r.slice(i)),p.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=r(e),n=t[0],s=t[1];return n||s?(s&&(s=s.substr(0,s.length-1)),n+s):"."},t.basename=function(e,t){var n=r(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return r(e)[3]};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(112))},function(e,t,n){"use strict";var s=n(383),a=n(470),r=n(496),o=n(472);e.exports={Parser:s,ProcessingInstructions:a,IsValidNodeDefinitions:r,ProcessNodeDefinitions:o}},function(e,t,n){"use strict";function s(e){function t(t){var n=new l.DomHandler,s=new l.Parser(n,e);return s.parseComplete(t),n.dom}function n(e,t,s,l){if(t(e)){var p=a(function(t){return t.shouldProcessNode(e)},s);if(null!=p){var c=r(function(e){return null==e||e===!1},o(i)(function(e,a){return n(e,t,s,a)},e.children||[]));return p.replaceChildren?u.createElement(e,l,e.data,[p.processNode(e,c,l)]):p.processNode(e,c,l)}return!1}return!1}function s(e,s,a){var r=t(e);if(r&&1!==r.length)throw new Error("html-to-react currently only supports HTML with one single root element. The HTML provided contains "+r.length+" root elements. You can fix that by simply wrapping your HTML in a <div> element.");return n(r[0],s,a,0)}function d(e){var t=new p;return s(e,c.alwaysValid,t.defaultProcessingInstructions)}return{parse:d,parseWithInstructions:s}}var a=n(384),r=n(395),o=n(410),i=n(414),l=n(417),p=n(470),c=n(496),u=n(479);e.exports=s},function(e,t,n){var s=n(385),a=n(388),r=n(392);e.exports=s(a("find",r,function(e,t){for(var n=0,s=t.length;n<s;){if(e(t[n]))return t[n];n+=1}}))},function(e,t,n){var s=n(386),a=n(387);e.exports=function(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return a(n)?t:s(function(t){return e(n,t)});default:return a(n)&&a(r)?t:a(n)?s(function(t){return e(t,r)}):a(r)?s(function(t){return e(n,t)}):e(n,r)}}}},function(e,t,n){var s=n(387);e.exports=function(e){return function t(n){return 0===arguments.length||s(n)?t:e.apply(this,arguments)}}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e&&e["@@functional/placeholder"]===!0}},function(e,t,n){var s=n(389),a=n(390),r=n(391);e.exports=function(e,t,n){return function(){var o=arguments.length;if(0===o)return n();var i=arguments[o-1];if(!s(i)){var l=r(arguments,0,o-1);if("function"==typeof i[e])return i[e].apply(i,l);if(a(i)){var p=t.apply(null,l);return p(i)}}return n.apply(this,arguments)}}},function(e,t){e.exports=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)}},function(e,t){e.exports=function(e){return"function"==typeof e["@@transducer/step"]}},function(e,t){e.exports=function n(e,t,s){switch(arguments.length){case 1:return n(e,0,e.length);case 2:return n(e,t,e.length);default:for(var a=[],r=0,o=Math.max(0,Math.min(e.length,s)-t);r<o;)a[r]=e[t+r],r+=1;return a}}},function(e,t,n){var s=n(385),a=n(393),r=n(394);e.exports=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=r.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=a(this.xf["@@transducer/step"](e,t))),e},s(function(t,n){return new e(t,n)})}()},function(e,t){e.exports=function(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}},function(e,t){e.exports={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}}},function(e,t,n){var s=n(396),a=n(385),r=n(397);e.exports=a(function(e,t){return r(s(e),t)})},function(e,t){e.exports=function(e){return function(){return!e.apply(this,arguments)}}},function(e,t,n){var s=n(385),a=n(388),r=n(398),o=n(399),i=n(400),l=n(406),p=n(407);e.exports=s(a("filter",l,function(e,t){return o(t)?i(function(n,s){return e(t[s])&&(n[s]=t[s]),n},{},p(t)):r(e,t)}))},function(e,t){e.exports=function(e,t){for(var n=0,s=t.length,a=[];n<s;)e(t[n])&&(a[a.length]=t[n]),n+=1;return a}},function(e,t){e.exports=function(e){return"[object Object]"===Object.prototype.toString.call(e)}},function(e,t,n){var s=n(401),a=n(402),r=n(404);e.exports=function(){function e(e,t,n){for(var s=0,a=n.length;s<a;){if(t=e["@@transducer/step"](t,n[s]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}s+=1}return e["@@transducer/result"](t)}function t(e,t,n){for(var s=n.next();!s.done;){if(t=e["@@transducer/step"](t,s.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}s=n.next()}return e["@@transducer/result"](t)}function n(e,t,n){return e["@@transducer/result"](n.reduce(a(e["@@transducer/step"],e),t))}var o="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(a,i,l){if("function"==typeof a&&(a=s(a)),r(l))return e(a,i,l);if("function"==typeof l.reduce)return n(a,i,l);if(null!=l[o])return t(a,i,l[o]());if("function"==typeof l.next)return t(a,i,l);throw new TypeError("reduce: list must be array or iterable")}}()},function(e,t){e.exports=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},function(t){return new e(t)}}()},function(e,t,n){var s=n(403),a=n(385);e.exports=a(function(e,t){return s(e.length,function(){return e.apply(t,arguments)})})},function(e,t){e.exports=function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,s){return t.apply(this,arguments)};case 4:return function(e,n,s,a){return t.apply(this,arguments)};case 5:return function(e,n,s,a,r){return t.apply(this,arguments)};case 6:return function(e,n,s,a,r,o){return t.apply(this,arguments)};case 7:return function(e,n,s,a,r,o,i){return t.apply(this,arguments)};case 8:return function(e,n,s,a,r,o,i,l){return t.apply(this,arguments)};case 9:return function(e,n,s,a,r,o,i,l,p){return t.apply(this,arguments)};case 10:return function(e,n,s,a,r,o,i,l,p,c){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}},function(e,t,n){var s=n(386),a=n(389),r=n(405);e.exports=s(function(e){return!!a(e)||!!e&&("object"==typeof e&&(!r(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))})},function(e,t){e.exports=function(e){return"[object String]"===Object.prototype.toString.call(e)}},function(e,t,n){var s=n(385),a=n(394);e.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},s(function(t,n){return new e(t,n)})}()},function(e,t,n){var s=n(386),a=n(408),r=n(409);e.exports=function(){var e=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],n=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),o=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};return s("function"!=typeof Object.keys||n?function(s){if(Object(s)!==s)return[];var i,l,p=[],c=n&&r(s);for(i in s)!a(i,s)||c&&"length"===i||(p[p.length]=i);if(e)for(l=t.length-1;l>=0;)i=t[l],a(i,s)&&!o(p,i)&&(p[p.length]=i),l-=1;return p}:function(e){return Object(e)!==e?[]:Object.keys(e)})}()},function(e,t){e.exports=function(e,t){return Object.prototype.hasOwnProperty.call(t,e)}},function(e,t,n){var s=n(408);e.exports=function(){var e=Object.prototype.toString;return"[object Arguments]"===e.call(arguments)?function(t){return"[object Arguments]"===e.call(t)}:function(e){return s("callee",e)}}()},function(e,t,n){var s=n(411),a=n(386),r=n(391),o=n(412);e.exports=a(function(e){return o(e.length,function(){var t=0,n=arguments[0],a=arguments[arguments.length-1],o=r(arguments);return o[0]=function(){var e=n.apply(this,s(arguments,[t,a]));return t+=1,e},e.apply(this,o)})})},function(e,t){e.exports=function(e,t){e=e||[],t=t||[];var n,s=e.length,a=t.length,r=[];for(n=0;n<s;)r[r.length]=e[n],n+=1;for(n=0;n<a;)r[r.length]=t[n],n+=1;return r}},function(e,t,n){var s=n(403),a=n(386),r=n(385),o=n(413);e.exports=r(function(e,t){return 1===e?a(t):s(e,o(e,[],t))})},function(e,t,n){var s=n(403),a=n(387);e.exports=function r(e,t,n){return function(){for(var o=[],i=0,l=e,p=0;p<t.length||i<arguments.length;){var c;p<t.length&&(!a(t[p])||i>=arguments.length)?c=t[p]:(c=arguments[i],i+=1),o[p]=c,a(c)||(l-=1),p+=1}return l<=0?n.apply(this,o):s(l,r(e,o,n))}}},function(e,t,n){var s=n(385),a=n(388),r=n(415),o=n(400),i=n(416),l=n(412),p=n(407);e.exports=s(a("map",i,function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return l(t.length,function(){return e.call(this,t.apply(this,arguments))});case"[object Object]":return o(function(n,s){return n[s]=e(t[s]),n},{},p(t));default:return r(e,t)}}))},function(e,t){e.exports=function(e,t){for(var n=0,s=t.length,a=Array(s);n<s;)a[n]=e(t[n]),n+=1;return a}},function(e,t,n){var s=n(385),a=n(394);e.exports=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=a.init,e.prototype["@@transducer/result"]=a.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},s(function(t,n){return new e(t,n)})}()},function(e,t,n){function s(t,n){return delete e.exports[t],e.exports[t]=n,n}var a=n(418),r=n(427);e.exports={Parser:a,Tokenizer:n(419),ElementType:n(428),DomHandler:r,get FeedHandler(){return s("FeedHandler",n(431))},get Stream(){return s("Stream",n(432))},get WritableStream(){return s("WritableStream",n(433))},get ProxyHandler(){return s("ProxyHandler",n(456))},get DomUtils(){return s("DomUtils",n(457))},get CollectingHandler(){return s("CollectingHandler",n(469))},DefaultHandler:r,get RssHandler(){return s("RssHandler",this.FeedHandler)},parseDOM:function(e,t){var n=new r(t);return new a(n,t).end(e),n.dom},parseFeed:function(t,n){var s=new e.exports.FeedHandler(n);return new a(s,n).end(t),s.dom},createDomStream:function(e,t,n){var s=new r(e,t,n);return new a(s,t)},EVENTS:{attribute:2,cdatastart:0,cdataend:0,text:1,processinginstruction:2,comment:1,commentend:0,closetag:1,opentag:2,opentagname:1,error:1,end:0}}},function(e,t,n){function s(e,t){this._options=t||{},this._cbs=e||{},this._tagname="",this._attribname="",this._attribvalue="",this._attribs=null,this._stack=[],this.startIndex=0,this.endIndex=null,this._lowerCaseTagNames="lowerCaseTags"in this._options?!!this._options.lowerCaseTags:!this._options.xmlMode,this._lowerCaseAttributeNames="lowerCaseAttributeNames"in this._options?!!this._options.lowerCaseAttributeNames:!this._options.xmlMode,this._options.Tokenizer&&(a=this._options.Tokenizer),this._tokenizer=new a(this._options,this),this._cbs.onparserinit&&this._cbs.onparserinit(this)}var a=n(419),r={input:!0,option:!0,optgroup:!0,select:!0,button:!0,datalist:!0,textarea:!0},o={tr:{tr:!0,th:!0,td:!0},th:{th:!0},td:{thead:!0,th:!0,td:!0},body:{head:!0,link:!0,script:!0},li:{li:!0},p:{p:!0},h1:{p:!0},h2:{p:!0},h3:{p:!0},h4:{p:!0},h5:{p:!0},h6:{p:!0},select:r,input:r,output:r,button:r,datalist:r,textarea:r,option:{option:!0},optgroup:{optgroup:!0}},i={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,path:!0,circle:!0,ellipse:!0,line:!0,rect:!0,use:!0,stop:!0,polyline:!0,polygon:!0},l=/\s|\//;n(425)(s,n(426).EventEmitter),s.prototype._updatePosition=function(e){null===this.endIndex?this._tokenizer._sectionStart<=e?this.startIndex=0:this.startIndex=this._tokenizer._sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this._tokenizer.getAbsoluteIndex()},s.prototype.ontext=function(e){this._updatePosition(1),this.endIndex--,this._cbs.ontext&&this._cbs.ontext(e)},s.prototype.onopentagname=function(e){if(this._lowerCaseTagNames&&(e=e.toLowerCase()),this._tagname=e,!this._options.xmlMode&&e in o)for(var t;(t=this._stack[this._stack.length-1])in o[e];this.onclosetag(t));!this._options.xmlMode&&e in i||this._stack.push(e),this._cbs.onopentagname&&this._cbs.onopentagname(e),this._cbs.onopentag&&(this._attribs={})},s.prototype.onopentagend=function(){this._updatePosition(1),this._attribs&&(this._cbs.onopentag&&this._cbs.onopentag(this._tagname,this._attribs),this._attribs=null),!this._options.xmlMode&&this._cbs.onclosetag&&this._tagname in i&&this._cbs.onclosetag(this._tagname),this._tagname=""},s.prototype.onclosetag=function(e){if(this._updatePosition(1),this._lowerCaseTagNames&&(e=e.toLowerCase()),!this._stack.length||e in i&&!this._options.xmlMode)this._options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this._closeCurrentTag());else{var t=this._stack.lastIndexOf(e);if(t!==-1)if(this._cbs.onclosetag)for(t=this._stack.length-t;t--;)this._cbs.onclosetag(this._stack.pop());else this._stack.length=t;else"p"!==e||this._options.xmlMode||(this.onopentagname(e),this._closeCurrentTag())}},s.prototype.onselfclosingtag=function(){this._options.xmlMode||this._options.recognizeSelfClosing?this._closeCurrentTag():this.onopentagend()},s.prototype._closeCurrentTag=function(){var e=this._tagname;this.onopentagend(),this._stack[this._stack.length-1]===e&&(this._cbs.onclosetag&&this._cbs.onclosetag(e),this._stack.pop())},s.prototype.onattribname=function(e){this._lowerCaseAttributeNames&&(e=e.toLowerCase()),this._attribname=e},s.prototype.onattribdata=function(e){this._attribvalue+=e},s.prototype.onattribend=function(){this._cbs.onattribute&&this._cbs.onattribute(this._attribname,this._attribvalue),this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)&&(this._attribs[this._attribname]=this._attribvalue),this._attribname="",this._attribvalue=""},s.prototype._getInstructionName=function(e){var t=e.search(l),n=t<0?e:e.substr(0,t);return this._lowerCaseTagNames&&(n=n.toLowerCase()),n},s.prototype.ondeclaration=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("!"+t,"!"+e)}},s.prototype.onprocessinginstruction=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("?"+t,"?"+e)}},s.prototype.oncomment=function(e){this._updatePosition(4),this._cbs.oncomment&&this._cbs.oncomment(e),this._cbs.oncommentend&&this._cbs.oncommentend()},s.prototype.oncdata=function(e){this._updatePosition(1),this._options.xmlMode||this._options.recognizeCDATA?(this._cbs.oncdatastart&&this._cbs.oncdatastart(),this._cbs.ontext&&this._cbs.ontext(e),this._cbs.oncdataend&&this._cbs.oncdataend()):this.oncomment("[CDATA["+e+"]]")},s.prototype.onerror=function(e){this._cbs.onerror&&this._cbs.onerror(e)},s.prototype.onend=function(){if(this._cbs.onclosetag)for(var e=this._stack.length;e>0;this._cbs.onclosetag(this._stack[--e]));this._cbs.onend&&this._cbs.onend()},s.prototype.reset=function(){this._cbs.onreset&&this._cbs.onreset(),this._tokenizer.reset(),this._tagname="",this._attribname="",this._attribs=null,this._stack=[],this._cbs.onparserinit&&this._cbs.onparserinit(this)},s.prototype.parseComplete=function(e){this.reset(),this.end(e)},s.prototype.write=function(e){this._tokenizer.write(e)},s.prototype.end=function(e){this._tokenizer.end(e)},s.prototype.pause=function(){this._tokenizer.pause()},s.prototype.resume=function(){this._tokenizer.resume()},s.prototype.parseChunk=s.prototype.write,s.prototype.done=s.prototype.end,e.exports=s},function(e,t,n){function s(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function a(e,t){return function(n){n===e&&(this._state=t)}}function r(e,t,n){var s=e.toLowerCase();return e===s?function(e){e===s?this._state=t:(this._state=n,this._index--)}:function(a){a===s||a===e?this._state=t:(this._state=n,this._index--)}}function o(e,t){var n=e.toLowerCase();return function(s){s===n||s===e?this._state=t:(this._state=m,this._index--)}}function i(e,t){this._state=h,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=h,this._special=me,this._cbs=t,this._running=!0,this._ended=!1,this._xmlMode=!(!e||!e.xmlMode),this._decodeEntities=!(!e||!e.decodeEntities)}e.exports=i;var l=n(420),p=n(422),c=n(423),u=n(424),d=0,h=d++,f=d++,m=d++,g=d++,y=d++,b=d++,w=d++,v=d++,j=d++,x=d++,_=d++,k=d++,E=d++,A=d++,T=d++,S=d++,C=d++,P=d++,O=d++,R=d++,N=d++,M=d++,q=d++,L=d++,D=d++,I=d++,U=d++,F=d++,B=d++,W=d++,V=d++,H=d++,z=d++,G=d++,$=d++,Y=d++,K=d++,J=d++,Q=d++,X=d++,Z=d++,ee=d++,te=d++,ne=d++,se=d++,ae=d++,re=d++,oe=d++,ie=d++,le=d++,pe=d++,ce=d++,ue=d++,de=d++,he=d++,fe=0,me=fe++,ge=fe++,ye=fe++;i.prototype._stateText=function(e){"<"===e?(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._state=f,this._sectionStart=this._index):this._decodeEntities&&this._special===me&&"&"===e&&(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._baseState=h,this._state=pe,this._sectionStart=this._index)},i.prototype._stateBeforeTagName=function(e){"/"===e?this._state=y:"<"===e?(this._cbs.ontext(this._getSection()),this._sectionStart=this._index):">"===e||this._special!==me||s(e)?this._state=h:"!"===e?(this._state=T,this._sectionStart=this._index+1):"?"===e?(this._state=C,this._sectionStart=this._index+1):(this._state=this._xmlMode||"s"!==e&&"S"!==e?m:V,this._sectionStart=this._index)},i.prototype._stateInTagName=function(e){("/"===e||">"===e||s(e))&&(this._emitToken("onopentagname"),this._state=v,this._index--)},i.prototype._stateBeforeCloseingTagName=function(e){s(e)||(">"===e?this._state=h:this._special!==me?"s"===e||"S"===e?this._state=H:(this._state=h,this._index--):(this._state=b,this._sectionStart=this._index))},i.prototype._stateInCloseingTagName=function(e){(">"===e||s(e))&&(this._emitToken("onclosetag"),this._state=w,this._index--)},i.prototype._stateAfterCloseingTagName=function(e){">"===e&&(this._state=h,this._sectionStart=this._index+1)},i.prototype._stateBeforeAttributeName=function(e){">"===e?(this._cbs.onopentagend(),this._state=h,this._sectionStart=this._index+1):"/"===e?this._state=g:s(e)||(this._state=j,this._sectionStart=this._index)},i.prototype._stateInSelfClosingTag=function(e){">"===e?(this._cbs.onselfclosingtag(),this._state=h,this._sectionStart=this._index+1):s(e)||(this._state=v,this._index--)},i.prototype._stateInAttributeName=function(e){("="===e||"/"===e||">"===e||s(e))&&(this._cbs.onattribname(this._getSection()),this._sectionStart=-1,this._state=x,this._index--)},i.prototype._stateAfterAttributeName=function(e){"="===e?this._state=_:"/"===e||">"===e?(this._cbs.onattribend(),this._state=v,this._index--):s(e)||(this._cbs.onattribend(),this._state=j,this._sectionStart=this._index)},i.prototype._stateBeforeAttributeValue=function(e){'"'===e?(this._state=k,this._sectionStart=this._index+1):"'"===e?(this._state=E,this._sectionStart=this._index+1):s(e)||(this._state=A,this._sectionStart=this._index,this._index--)},i.prototype._stateInAttributeValueDoubleQuotes=function(e){'"'===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=v):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=pe,this._sectionStart=this._index)},i.prototype._stateInAttributeValueSingleQuotes=function(e){"'"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=v):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=pe,this._sectionStart=this._index)},i.prototype._stateInAttributeValueNoQuotes=function(e){s(e)||">"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=v,this._index--):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=pe,this._sectionStart=this._index)},i.prototype._stateBeforeDeclaration=function(e){this._state="["===e?M:"-"===e?P:S},i.prototype._stateInDeclaration=function(e){">"===e&&(this._cbs.ondeclaration(this._getSection()),this._state=h,this._sectionStart=this._index+1)},i.prototype._stateInProcessingInstruction=function(e){">"===e&&(this._cbs.onprocessinginstruction(this._getSection()),this._state=h,this._sectionStart=this._index+1)},i.prototype._stateBeforeComment=function(e){"-"===e?(this._state=O,this._sectionStart=this._index+1):this._state=S},i.prototype._stateInComment=function(e){"-"===e&&(this._state=R)},i.prototype._stateAfterComment1=function(e){"-"===e?this._state=N:this._state=O},i.prototype._stateAfterComment2=function(e){">"===e?(this._cbs.oncomment(this._buffer.substring(this._sectionStart,this._index-2)),this._state=h,this._sectionStart=this._index+1):"-"!==e&&(this._state=O)},i.prototype._stateBeforeCdata1=r("C",q,S),i.prototype._stateBeforeCdata2=r("D",L,S),i.prototype._stateBeforeCdata3=r("A",D,S),i.prototype._stateBeforeCdata4=r("T",I,S),i.prototype._stateBeforeCdata5=r("A",U,S),i.prototype._stateBeforeCdata6=function(e){"["===e?(this._state=F,this._sectionStart=this._index+1):(this._state=S,this._index--)},i.prototype._stateInCdata=function(e){"]"===e&&(this._state=B)},i.prototype._stateAfterCdata1=a("]",W),i.prototype._stateAfterCdata2=function(e){">"===e?(this._cbs.oncdata(this._buffer.substring(this._sectionStart,this._index-2)),this._state=h,this._sectionStart=this._index+1):"]"!==e&&(this._state=F)},i.prototype._stateBeforeSpecial=function(e){"c"===e||"C"===e?this._state=z:"t"===e||"T"===e?this._state=te:(this._state=m,
this._index--)},i.prototype._stateBeforeSpecialEnd=function(e){this._special!==ge||"c"!==e&&"C"!==e?this._special!==ye||"t"!==e&&"T"!==e?this._state=h:this._state=re:this._state=J},i.prototype._stateBeforeScript1=o("R",G),i.prototype._stateBeforeScript2=o("I",$),i.prototype._stateBeforeScript3=o("P",Y),i.prototype._stateBeforeScript4=o("T",K),i.prototype._stateBeforeScript5=function(e){("/"===e||">"===e||s(e))&&(this._special=ge),this._state=m,this._index--},i.prototype._stateAfterScript1=r("R",Q,h),i.prototype._stateAfterScript2=r("I",X,h),i.prototype._stateAfterScript3=r("P",Z,h),i.prototype._stateAfterScript4=r("T",ee,h),i.prototype._stateAfterScript5=function(e){">"===e||s(e)?(this._special=me,this._state=b,this._sectionStart=this._index-6,this._index--):this._state=h},i.prototype._stateBeforeStyle1=o("Y",ne),i.prototype._stateBeforeStyle2=o("L",se),i.prototype._stateBeforeStyle3=o("E",ae),i.prototype._stateBeforeStyle4=function(e){("/"===e||">"===e||s(e))&&(this._special=ye),this._state=m,this._index--},i.prototype._stateAfterStyle1=r("Y",oe,h),i.prototype._stateAfterStyle2=r("L",ie,h),i.prototype._stateAfterStyle3=r("E",le,h),i.prototype._stateAfterStyle4=function(e){">"===e||s(e)?(this._special=me,this._state=b,this._sectionStart=this._index-5,this._index--):this._state=h},i.prototype._stateBeforeEntity=r("#",ce,ue),i.prototype._stateBeforeNumericEntity=r("X",he,de),i.prototype._parseNamedEntityStrict=function(){if(this._sectionStart+1<this._index){var e=this._buffer.substring(this._sectionStart+1,this._index),t=this._xmlMode?u:p;t.hasOwnProperty(e)&&(this._emitPartial(t[e]),this._sectionStart=this._index+1)}},i.prototype._parseLegacyEntity=function(){var e=this._sectionStart+1,t=this._index-e;for(t>6&&(t=6);t>=2;){var n=this._buffer.substr(e,t);if(c.hasOwnProperty(n))return this._emitPartial(c[n]),void(this._sectionStart+=t+1);t--}},i.prototype._stateInNamedEntity=function(e){";"===e?(this._parseNamedEntityStrict(),this._sectionStart+1<this._index&&!this._xmlMode&&this._parseLegacyEntity(),this._state=this._baseState):(e<"a"||e>"z")&&(e<"A"||e>"Z")&&(e<"0"||e>"9")&&(this._xmlMode||this._sectionStart+1===this._index||(this._baseState!==h?"="!==e&&this._parseNamedEntityStrict():this._parseLegacyEntity()),this._state=this._baseState,this._index--)},i.prototype._decodeNumericEntity=function(e,t){var n=this._sectionStart+e;if(n!==this._index){var s=this._buffer.substring(n,this._index),a=parseInt(s,t);this._emitPartial(l(a)),this._sectionStart=this._index}else this._sectionStart--;this._state=this._baseState},i.prototype._stateInNumericEntity=function(e){";"===e?(this._decodeNumericEntity(2,10),this._sectionStart++):(e<"0"||e>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(2,10),this._index--)},i.prototype._stateInHexEntity=function(e){";"===e?(this._decodeNumericEntity(3,16),this._sectionStart++):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(3,16),this._index--)},i.prototype._cleanup=function(){this._sectionStart<0?(this._buffer="",this._bufferOffset+=this._index,this._index=0):this._running&&(this._state===h?(this._sectionStart!==this._index&&this._cbs.ontext(this._buffer.substr(this._sectionStart)),this._buffer="",this._bufferOffset+=this._index,this._index=0):this._sectionStart===this._index?(this._buffer="",this._bufferOffset+=this._index,this._index=0):(this._buffer=this._buffer.substr(this._sectionStart),this._index-=this._sectionStart,this._bufferOffset+=this._sectionStart),this._sectionStart=0)},i.prototype.write=function(e){this._ended&&this._cbs.onerror(Error(".write() after done!")),this._buffer+=e,this._parse()},i.prototype._parse=function(){for(;this._index<this._buffer.length&&this._running;){var e=this._buffer.charAt(this._index);this._state===h?this._stateText(e):this._state===f?this._stateBeforeTagName(e):this._state===m?this._stateInTagName(e):this._state===y?this._stateBeforeCloseingTagName(e):this._state===b?this._stateInCloseingTagName(e):this._state===w?this._stateAfterCloseingTagName(e):this._state===g?this._stateInSelfClosingTag(e):this._state===v?this._stateBeforeAttributeName(e):this._state===j?this._stateInAttributeName(e):this._state===x?this._stateAfterAttributeName(e):this._state===_?this._stateBeforeAttributeValue(e):this._state===k?this._stateInAttributeValueDoubleQuotes(e):this._state===E?this._stateInAttributeValueSingleQuotes(e):this._state===A?this._stateInAttributeValueNoQuotes(e):this._state===T?this._stateBeforeDeclaration(e):this._state===S?this._stateInDeclaration(e):this._state===C?this._stateInProcessingInstruction(e):this._state===P?this._stateBeforeComment(e):this._state===O?this._stateInComment(e):this._state===R?this._stateAfterComment1(e):this._state===N?this._stateAfterComment2(e):this._state===M?this._stateBeforeCdata1(e):this._state===q?this._stateBeforeCdata2(e):this._state===L?this._stateBeforeCdata3(e):this._state===D?this._stateBeforeCdata4(e):this._state===I?this._stateBeforeCdata5(e):this._state===U?this._stateBeforeCdata6(e):this._state===F?this._stateInCdata(e):this._state===B?this._stateAfterCdata1(e):this._state===W?this._stateAfterCdata2(e):this._state===V?this._stateBeforeSpecial(e):this._state===H?this._stateBeforeSpecialEnd(e):this._state===z?this._stateBeforeScript1(e):this._state===G?this._stateBeforeScript2(e):this._state===$?this._stateBeforeScript3(e):this._state===Y?this._stateBeforeScript4(e):this._state===K?this._stateBeforeScript5(e):this._state===J?this._stateAfterScript1(e):this._state===Q?this._stateAfterScript2(e):this._state===X?this._stateAfterScript3(e):this._state===Z?this._stateAfterScript4(e):this._state===ee?this._stateAfterScript5(e):this._state===te?this._stateBeforeStyle1(e):this._state===ne?this._stateBeforeStyle2(e):this._state===se?this._stateBeforeStyle3(e):this._state===ae?this._stateBeforeStyle4(e):this._state===re?this._stateAfterStyle1(e):this._state===oe?this._stateAfterStyle2(e):this._state===ie?this._stateAfterStyle3(e):this._state===le?this._stateAfterStyle4(e):this._state===pe?this._stateBeforeEntity(e):this._state===ce?this._stateBeforeNumericEntity(e):this._state===ue?this._stateInNamedEntity(e):this._state===de?this._stateInNumericEntity(e):this._state===he?this._stateInHexEntity(e):this._cbs.onerror(Error("unknown _state"),this._state),this._index++}this._cleanup()},i.prototype.pause=function(){this._running=!1},i.prototype.resume=function(){this._running=!0,this._index<this._buffer.length&&this._parse(),this._ended&&this._finish()},i.prototype.end=function(e){this._ended&&this._cbs.onerror(Error(".end() after done!")),e&&this.write(e),this._ended=!0,this._running&&this._finish()},i.prototype._finish=function(){this._sectionStart<this._index&&this._handleTrailingData(),this._cbs.onend()},i.prototype._handleTrailingData=function(){var e=this._buffer.substr(this._sectionStart);this._state===F||this._state===B||this._state===W?this._cbs.oncdata(e):this._state===O||this._state===R||this._state===N?this._cbs.oncomment(e):this._state!==ue||this._xmlMode?this._state!==de||this._xmlMode?this._state!==he||this._xmlMode?this._state!==m&&this._state!==v&&this._state!==_&&this._state!==x&&this._state!==j&&this._state!==E&&this._state!==k&&this._state!==A&&this._state!==b&&this._cbs.ontext(e):(this._decodeNumericEntity(3,16),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._decodeNumericEntity(2,10),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._parseLegacyEntity(),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData()))},i.prototype.reset=function(){i.call(this,{xmlMode:this._xmlMode,decodeEntities:this._decodeEntities},this._cbs)},i.prototype.getAbsoluteIndex=function(){return this._bufferOffset+this._index},i.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index)},i.prototype._emitToken=function(e){this._cbs[e](this._getSection()),this._sectionStart=-1},i.prototype._emitPartial=function(e){this._baseState!==h?this._cbs.onattribdata(e):this._cbs.ontext(e)}},function(e,t,n){function s(e){if(e>=55296&&e<=57343||e>1114111)return"";e in a&&(e=a[e]);var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)}var a=n(421);e.exports=s},function(e,t){e.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}},function(e,t){e.exports={Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",amp:"&",AMP:"&",andand:"",And:"",and:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angmsd:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",apacir:"",ap:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxHd:"",boxhD:"",boxHD:"",boxhu:"",boxHu:"",boxhU:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsolb:"",bsol:"\\",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",capand:"",capbrcup:"",capcap:"",cap:"",Cap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cir:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cupbrcap:"",cupcap:"",CupCap:"",cup:"",Cup:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",Darr:"",dArr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",ddagger:"",ddarr:"",DD:"",dd:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrowBar:"",downarrow:"",DownArrow:"",Downarrow:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVectorBar:"",DownLeftVector:"",DownRightTeeVector:"",DownRightVectorBar:"",DownRightVector:"",DownTeeArrow:"",DownTee:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",Ecirc:"",ecirc:"",ecir:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",edot:"",eDot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp13:"",emsp14:"",emsp:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",ge:"",gE:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",gescc:"",ges:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",gg:"",Gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gla:"",gl:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",gtcc:"",gtcir:"",gt:">",GT:">",Gt:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",harrcir:"",harr:"",hArr:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",ifr:"",Ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",Im:"",imof:"",imped:"",Implies:"",incare:"","in":"",infin:"",infintie:"",inodot:"",intcal:"","int":"",Int:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larrb:"",larrbfs:"",larr:"",Larr:"",lArr:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",latail:"",lAtail:"",lat:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",LeftArrowBar:"",leftarrow:"",LeftArrow:"",Leftarrow:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVectorBar:"",LeftDownVector:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTeeArrow:"",LeftTee:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangleBar:"",LeftTriangle:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVectorBar:"",LeftUpVector:"",LeftVectorBar:"",LeftVector:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",lescc:"",les:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",llarr:"",ll:"",Ll:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoustache:"",lmoust:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",LongLeftArrow:"",Longleftarrow:"",longleftrightarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longmapsto:"",longrightarrow:"",LongRightArrow:"",Longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",ltcc:"",ltcir:"",lt:"<",LT:"<",Lt:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",midast:"*",midcir:"",mid:"",middot:"",minusb:"",minus:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natural:"",naturals:"",natur:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",nearhk:"",nearr:"",neArr:"",nearrow:"",ne:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlarr:"",nlArr:"",nldr:"",nlE:"",nle:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangleBar:"",NotLeftTriangle:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangleBar:"",NotRightTriangle:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",nparallel:"",npar:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",nprec:"",npreceq:"",npre:"",nrarrc:"",nrarr:"",nrArr:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",Ocirc:"",ocirc:"",ocir:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",orarr:"",Or:"",or:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",otimesas:"",Otimes:"",otimes:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",para:"",parallel:"",par:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plusacir:"",plusb:"",pluscir:"",plus:"+",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",prap:"",Pr:"",pr:"",prcue:"",precapprox:"",prec:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",pre:"",prE:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportional:"",Proportion:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarr:"",Rarr:"",rArr:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",real:"",realine:"",realpart:"",reals:"",Re:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrowBar:"",rightarrow:"",RightArrow:"",Rightarrow:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVectorBar:"",RightDownVector:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTeeArrow:"",RightTee:"",RightTeeVector:"",rightthreetimes:"",RightTriangleBar:"",RightTriangle:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVectorBar:"",RightUpVector:"",RightVectorBar:"",RightVector:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoustache:"",rmoust:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",scap:"",Scaron:"",scaron:"",Sc:"",sc:"",sccue:"",sce:"",scE:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdotb:"",sdot:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",solbar:"",solb:"",sol:"/",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squ:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succapprox:"",succ:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup1:"",sup2:"",sup3:"",sup:"",Sup:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",therefore:"",Therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",ThinSpace:"",thinsp:"",thkap:"",thksim:"",THORN:"",thorn:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",timesbar:"",timesb:"",times:"",timesd:"",tint:"",toea:"",topbot:"",topcir:"",top:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",uarr:"",Uarr:"",uArr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrowBar:"",uparrow:"",UpArrow:"",Uparrow:"",UpArrowDownArrow:"",updownarrow:"",UpDownArrow:"",Updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTeeArrow:"",UpTee:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",
varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",Vcy:"",vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",veebar:"",vee:"",Vee:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xharr:"",xhArr:"",Xi:"",xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",yuml:"",Yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",zfr:"",Zfr:"",ZHcy:"",zhcy:"",zigrarr:"",zopf:"",Zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}},function(e,t){e.exports={Aacute:"",aacute:"",Acirc:"",acirc:"",acute:"",AElig:"",aelig:"",Agrave:"",agrave:"",amp:"&",AMP:"&",Aring:"",aring:"",Atilde:"",atilde:"",Auml:"",auml:"",brvbar:"",Ccedil:"",ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",Eacute:"",eacute:"",Ecirc:"",ecirc:"",Egrave:"",egrave:"",ETH:"",eth:"",Euml:"",euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",Iacute:"",iacute:"",Icirc:"",icirc:"",iexcl:"",Igrave:"",igrave:"",iquest:"",Iuml:"",iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",Ntilde:"",ntilde:"",Oacute:"",oacute:"",Ocirc:"",ocirc:"",Ograve:"",ograve:"",ordf:"",ordm:"",Oslash:"",oslash:"",Otilde:"",otilde:"",Ouml:"",ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",THORN:"",thorn:"",times:"",Uacute:"",uacute:"",Ucirc:"",ucirc:"",Ugrave:"",ugrave:"",uml:"",Uuml:"",uuml:"",Yacute:"",yacute:"",yen:"",yuml:""}},function(e,t){e.exports={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function a(e){return"number"==typeof e}function r(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,i,l,p;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],o(n))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(r(n))for(i=Array.prototype.slice.call(arguments,1),p=n.slice(),a=p.length,l=0;l<a;l++)p[l].apply(this,i);return!0},n.prototype.addListener=function(e,t){var a;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,a&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),a||(a=!0,t.apply(this,arguments))}if(!s(t))throw TypeError("listener must be a function");var a=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,a,o,i;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,a=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(i=o;i-- >0;)if(n[i]===t||n[i].listener&&n[i].listener===t){a=i;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],s(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){function s(e,t,n){"object"==typeof e?(n=t,t=e,e=null):"function"==typeof t&&(n=t,t=l),this._callback=e,this._options=t||l,this._elementCB=n,this.dom=[],this._done=!1,this._tagStack=[],this._parser=this._parser||null}var a=n(428),r=/\s+/g,o=n(429),i=n(430),l={normalizeWhitespace:!1,withStartIndices:!1};s.prototype.onparserinit=function(e){this._parser=e},s.prototype.onreset=function(){s.call(this,this._callback,this._options,this._elementCB)},s.prototype.onend=function(){this._done||(this._done=!0,this._parser=null,this._handleCallback(null))},s.prototype._handleCallback=s.prototype.onerror=function(e){if("function"==typeof this._callback)this._callback(e,this.dom);else if(e)throw e},s.prototype.onclosetag=function(){var e=this._tagStack.pop();this._elementCB&&this._elementCB(e)},s.prototype._addDomElement=function(e){var t=this._tagStack[this._tagStack.length-1],n=t?t.children:this.dom,s=n[n.length-1];e.next=null,this._options.withStartIndices&&(e.startIndex=this._parser.startIndex),this._options.withDomLvl1&&(e.__proto__="tag"===e.type?i:o),s?(e.prev=s,s.next=e):e.prev=null,n.push(e),e.parent=t||null},s.prototype.onopentag=function(e,t){var n={type:"script"===e?a.Script:"style"===e?a.Style:a.Tag,name:e,attribs:t,children:[]};this._addDomElement(n),this._tagStack.push(n)},s.prototype.ontext=function(e){var t,n=this._options.normalizeWhitespace||this._options.ignoreWhitespace;!this._tagStack.length&&this.dom.length&&(t=this.dom[this.dom.length-1]).type===a.Text?n?t.data=(t.data+e).replace(r," "):t.data+=e:this._tagStack.length&&(t=this._tagStack[this._tagStack.length-1])&&(t=t.children[t.children.length-1])&&t.type===a.Text?n?t.data=(t.data+e).replace(r," "):t.data+=e:(n&&(e=e.replace(r," ")),this._addDomElement({data:e,type:a.Text}))},s.prototype.oncomment=function(e){var t=this._tagStack[this._tagStack.length-1];if(t&&t.type===a.Comment)return void(t.data+=e);var n={data:e,type:a.Comment};this._addDomElement(n),this._tagStack.push(n)},s.prototype.oncdatastart=function(){var e={children:[{data:"",type:a.Text}],type:a.CDATA};this._addDomElement(e),this._tagStack.push(e)},s.prototype.oncommentend=s.prototype.oncdataend=function(){this._tagStack.pop()},s.prototype.onprocessinginstruction=function(e,t){this._addDomElement({name:e,data:t,type:a.Directive})},e.exports=s},function(e,t){e.exports={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag",CDATA:"cdata",Doctype:"doctype",isTag:function(e){return"tag"===e.type||"script"===e.type||"style"===e.type}}},function(e,t){var n=e.exports={get firstChild(){var e=this.children;return e&&e[0]||null},get lastChild(){var e=this.children;return e&&e[e.length-1]||null},get nodeType(){return a[this.type]||a.element}},s={tagName:"name",childNodes:"children",parentNode:"parent",previousSibling:"prev",nextSibling:"next",nodeValue:"data"},a={element:1,text:3,cdata:4,comment:8};Object.keys(s).forEach(function(e){var t=s[e];Object.defineProperty(n,e,{get:function(){return this[t]||null},set:function(e){return this[t]=e,e}})})},function(e,t,n){var s=n(429),a=e.exports=Object.create(s),r={tagName:"name"};Object.keys(r).forEach(function(e){var t=r[e];Object.defineProperty(a,e,{get:function(){return this[t]||null},set:function(e){return this[t]=e,e}})})},function(e,t,n){function s(e,t){this.init(e,t)}function a(e,t){return c.getElementsByTagName(e,t,!0)}function r(e,t){return c.getElementsByTagName(e,t,!0,1)[0]}function o(e,t,n){return c.getText(c.getElementsByTagName(e,t,n,1)).trim()}function i(e,t,n,s,a){var r=o(n,s,a);r&&(e[t]=r)}var l=n(417),p=l.DomHandler,c=l.DomUtils;n(425)(s,p),s.prototype.init=p;var u=function(e){return"rss"===e||"feed"===e||"rdf:RDF"===e};s.prototype.onend=function(){var e,t,n={},s=r(u,this.dom);s&&("feed"===s.name?(t=s.children,n.type="atom",i(n,"id","id",t),i(n,"title","title",t),(e=r("link",t))&&(e=e.attribs)&&(e=e.href)&&(n.link=e),i(n,"description","subtitle",t),(e=o("updated",t))&&(n.updated=new Date(e)),i(n,"author","email",t,!0),n.items=a("entry",t).map(function(e){var t,n={};return e=e.children,i(n,"id","id",e),i(n,"title","title",e),(t=r("link",e))&&(t=t.attribs)&&(t=t.href)&&(n.link=t),(t=o("summary",e)||o("content",e))&&(n.description=t),(t=o("updated",e))&&(n.pubDate=new Date(t)),n})):(t=r("channel",s.children).children,n.type=s.name.substr(0,3),n.id="",i(n,"title","title",t),i(n,"link","link",t),i(n,"description","description",t),(e=o("lastBuildDate",t))&&(n.updated=new Date(e)),i(n,"author","managingEditor",t,!0),n.items=a("item",s.children).map(function(e){var t,n={};return e=e.children,i(n,"id","guid",e),i(n,"title","title",e),i(n,"link","link",e),i(n,"description","description",e),(t=o("pubDate",e))&&(n.pubDate=new Date(t)),n}))),this.dom=n,p.prototype._handleCallback.call(this,s?null:Error("couldn't find root of feed"))},e.exports=s},function(e,t,n){function s(e){r.call(this,new a(this),e)}function a(e){this.scope=e}e.exports=s;var r=n(433);n(425)(s,r),s.prototype.readable=!0;var o=n(417).EVENTS;Object.keys(o).forEach(function(e){if(0===o[e])a.prototype["on"+e]=function(){this.scope.emit(e)};else if(1===o[e])a.prototype["on"+e]=function(t){this.scope.emit(e,t)};else{if(2!==o[e])throw Error("wrong number of arguments!");a.prototype["on"+e]=function(t,n){this.scope.emit(e,t,n)}}})},function(e,t,n){function s(e,t){var n=this._parser=new a(e,t),s=this._decoder=new o;r.call(this,{decodeStrings:!1}),this.once("finish",function(){n.end(s.end())})}e.exports=s;var a=n(418),r=n(434).Writable||n(455).Writable,o=n(448).StringDecoder,i=n(439).Buffer;n(425)(s,r),r.prototype._write=function(e,t,n){e instanceof i&&(e=this._decoder.write(e)),this._parser.write(e),n()}},function(e,t,n){function s(){a.call(this)}e.exports=s;var a=n(426).EventEmitter,r=n(435);r(s,a),s.Readable=n(436),s.Writable=n(451),s.Duplex=n(452),s.Transform=n(453),s.PassThrough=n(454),s.Stream=s,s.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&p.pause&&p.pause()}function s(){p.readable&&p.resume&&p.resume()}function r(){c||(c=!0,e.end())}function o(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function i(e){if(l(),0===a.listenerCount(this,"error"))throw e}function l(){p.removeListener("data",n),e.removeListener("drain",s),p.removeListener("end",r),p.removeListener("close",o),p.removeListener("error",i),e.removeListener("error",i),p.removeListener("end",l),p.removeListener("close",l),e.removeListener("close",l)}var p=this;p.on("data",n),e.on("drain",s),e._isStdio||t&&t.end===!1||(p.on("end",r),p.on("close",o));var c=!1;return p.on("error",i),e.on("error",i),p.on("end",l),p.on("close",l),e.on("close",l),e.emit("pipe",p),e}},425,function(e,t,n){(function(s){t=e.exports=n(437),t.Stream=n(434),t.Readable=t,t.Writable=n(447),t.Duplex=n(446),t.Transform=n(449),t.PassThrough=n(450),s.browser||"disable"!=={NODE_ENV:"production"}.READABLE_STREAM||(e.exports=n(434))}).call(t,n(112))},function(e,t,n){(function(t){function s(e,t){var s=n(446);e=e||{};var a=e.highWaterMark,r=e.objectMode?16:16384;this.highWaterMark=a||0===a?a:r,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof s&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(S||(S=n(448).StringDecoder),this.decoder=new S(e.encoding),this.encoding=e.encoding)}function a(e){n(446);return this instanceof a?(this._readableState=new s(e,this),this.readable=!0,void A.call(this)):new a(e)}function r(e,t,n,s,a){var r=p(t,n);if(r)e.emit("error",r);else if(T.isNullOrUndefined(n))t.reading=!1,t.ended||c(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!a){var i=new Error("stream.push() after EOF");e.emit("error",i)}else if(t.endEmitted&&a){var i=new Error("stream.unshift() after end event");e.emit("error",i)}else!t.decoder||a||s||(n=t.decoder.write(n)),a||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,a?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&u(e)),h(e,t);else a||(t.reading=!1);return o(t)}function o(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function i(e){if(e>=P)e=P;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function l(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||T.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=i(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function p(e,t){var n=null;return T.isBuffer(t)||T.isString(t)||T.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,u(e)}function u(e){var n=e._readableState;n.needReadable=!1,n.emittedReadable||(C("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?t.nextTick(function(){d(e)}):d(e))}function d(e){C("emit readable"),e.emit("readable"),b(e)}function h(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(function(){f(e,n)}))}function f(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(C("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function m(e){return function(){var t=e._readableState;C("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&E.listenerCount(e,"data")&&(t.flowing=!0,b(e))}}function g(e,n){n.resumeScheduled||(n.resumeScheduled=!0,t.nextTick(function(){y(e,n)}))}function y(e,t){t.resumeScheduled=!1,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}function b(e){var t=e._readableState;if(C("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function w(e,t){var n,s=t.buffer,a=t.length,r=!!t.decoder,o=!!t.objectMode;if(0===s.length)return null;if(0===a)n=null;else if(o)n=s.shift();else if(!e||e>=a)n=r?s.join(""):k.concat(s,a),s.length=0;else if(e<s[0].length){var i=s[0];n=i.slice(0,e),s[0]=i.slice(e)}else if(e===s[0].length)n=s.shift();else{n=r?"":new k(e);for(var l=0,p=0,c=s.length;p<c&&l<e;p++){var i=s[0],u=Math.min(e-l,i.length);r?n+=i.slice(0,u):i.copy(n,l,0,u),u<i.length?s[0]=i.slice(u):s.shift(),l+=u}}return n}function v(e){var n=e._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,t.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function j(e,t){for(var n=0,s=e.length;n<s;n++)t(e[n],n)}function x(e,t){for(var n=0,s=e.length;n<s;n++)if(e[n]===t)return n;return-1}e.exports=a;var _=n(438),k=n(439).Buffer;a.ReadableState=s;var E=n(426).EventEmitter;E.listenerCount||(E.listenerCount=function(e,t){return e.listeners(t).length});var A=n(434),T=n(443);T.inherits=n(444);var S,C=n(445);C=C&&C.debuglog?C.debuglog("stream"):function(){},T.inherits(a,A),a.prototype.push=function(e,t){var n=this._readableState;return T.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new k(e,t),t="")),r(this,n,e,t,!1)},a.prototype.unshift=function(e){var t=this._readableState;return r(this,t,e,"",!0)},a.prototype.setEncoding=function(e){return S||(S=n(448).StringDecoder),this._readableState.decoder=new S(e),this._readableState.encoding=e,this};var P=8388608;a.prototype.read=function(e){C("read",e);var t=this._readableState,n=e;if((!T.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return C("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?v(this):u(this),null;if(e=l(e,t),0===e&&t.ended)return 0===t.length&&v(this),null;var s=t.needReadable;C("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&(s=!0,C("length less than watermark",s)),(t.ended||t.reading)&&(s=!1,C("reading or ended",s)),s&&(C("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),s&&!t.reading&&(e=l(n,t));var a;return a=e>0?w(e,t):null,T.isNull(a)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&v(this),T.isNull(a)||this.emit("data",a),a},a.prototype._read=function(e){this.emit("error",new Error("not implemented"))},a.prototype.pipe=function(e,n){function s(e){C("onunpipe"),e===u&&r()}function a(){C("onend"),e.end()}function r(){C("cleanup"),e.removeListener("close",l),e.removeListener("finish",p),e.removeListener("drain",g),e.removeListener("error",i),e.removeListener("unpipe",s),u.removeListener("end",a),u.removeListener("end",r),u.removeListener("data",o),!d.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function o(t){C("ondata");var n=e.write(t);!1===n&&(C("false write response, pause",u._readableState.awaitDrain),u._readableState.awaitDrain++,u.pause())}function i(t){C("onerror",t),c(),e.removeListener("error",i),0===E.listenerCount(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",p),c()}function p(){C("onfinish"),e.removeListener("close",l),c()}function c(){C("unpipe"),u.unpipe(e)}var u=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,C("pipe count=%d opts=%j",d.pipesCount,n);var h=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,f=h?a:r;d.endEmitted?t.nextTick(f):u.once("end",f),e.on("unpipe",s);var g=m(u);return e.on("drain",g),u.on("data",o),e._events&&e._events.error?_(e._events.error)?e._events.error.unshift(i):e._events.error=[i,e._events.error]:e.on("error",i),e.once("close",l),e.once("finish",p),e.emit("pipe",u),d.flowing||(C("pipe resume"),u.resume()),e},a.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<s;a++)n[a].emit("unpipe",this);return this}var a=x(t.pipes,e);return a===-1?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},a.prototype.on=function(e,n){var s=A.prototype.on.call(this,e,n);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var a=this._readableState;if(!a.readableListening)if(a.readableListening=!0,a.emittedReadable=!1,a.needReadable=!0,a.reading)a.length&&u(this,a);else{var r=this;t.nextTick(function(){C("readable nexttick read 0"),r.read(0)})}}return s},a.prototype.addListener=a.prototype.on,a.prototype.resume=function(){var e=this._readableState;return e.flowing||(C("resume"),e.flowing=!0,e.reading||(C("resume read 0"),this.read(0)),g(this,e)),this},a.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this},a.prototype.wrap=function(e){var t=this._readableState,n=!1,s=this;e.on("end",function(){if(C("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&s.push(e)}s.push(null)}),e.on("data",function(a){if(C("wrapped data"),t.decoder&&(a=t.decoder.write(a)),a&&(t.objectMode||a.length)){var r=s.push(a);r||(n=!0,e.pause())}});for(var a in e)T.isFunction(e[a])&&T.isUndefined(this[a])&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));var r=["error","close","destroy","pause","resume"];return j(r,function(t){e.on(t,s.emit.bind(s,t))}),s._read=function(t){C("wrapped _read",t),n&&(n=!1,e.resume())},s},a._fromList=w}).call(t,n(112))},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){(function(e,s){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function a(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function r(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,n){if(r()<n)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=e.prototype):(null===t&&(t=new e(n)),t.length=n),t}function e(t,n,s){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,n,s);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return i(this,t,n,s)}function i(e,t,n,s){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,s):"string"==typeof t?u(e,t,n):f(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t,n,s){return l(t),t<=0?o(e,t):void 0!==n?"string"==typeof s?o(e,t).fill(n,s):o(e,t).fill(n):o(e,t)}function c(t,n){if(l(n),t=o(t,n<0?0:0|m(n)),!e.TYPED_ARRAY_SUPPORT)for(var s=0;s<n;++s)t[s]=0;return t}function u(t,n,s){if("string"==typeof s&&""!==s||(s="utf8"),!e.isEncoding(s))throw new TypeError('"encoding" must be a valid string encoding');var a=0|y(n,s);t=o(t,a);var r=t.write(n,s);return r!==a&&(t=t.slice(0,r)),t}function d(e,t){var n=t.length<0?0:0|m(t.length);e=o(e,n);for(var s=0;s<n;s+=1)e[s]=255&t[s];return e}function h(t,n,s,a){if(n.byteLength,s<0||n.byteLength<s)throw new RangeError("'offset' is out of bounds");if(n.byteLength<s+(a||0))throw new RangeError("'length' is out of bounds");return n=void 0===s&&void 0===a?new Uint8Array(n):void 0===a?new Uint8Array(n,s):new Uint8Array(n,s,a),e.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=e.prototype):t=d(t,n),t}function f(t,n){if(e.isBuffer(n)){var s=0|m(n.length);return t=o(t,s),0===t.length?t:(n.copy(t,0,0,s),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||J(n.length)?o(t,0):d(t,n);if("Buffer"===n.type&&Z(n.data))return d(t,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(t){return+t!=t&&(t=0),e.alloc(+t)}function y(t,n){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var s=t.length;if(0===s)return 0;for(var a=!1;;)switch(n){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return Y(t).length;default:if(a)return z(t).length;n=(""+n).toLowerCase(),a=!0}}function b(e,t,n){var s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function w(e,t,n){var s=e[t];e[t]=e[n],e[n]=s}function v(t,n,s,a,r){if(0===t.length)return-1;if("string"==typeof s?(a=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,isNaN(s)&&(s=r?0:t.length-1),s<0&&(s=t.length+s),s>=t.length){if(r)return-1;s=t.length-1}else if(s<0){if(!r)return-1;s=0}if("string"==typeof n&&(n=e.from(n,a)),e.isBuffer(n))return 0===n.length?-1:j(t,n,s,a,r);if("number"==typeof n)return n=255&n,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,n,s):Uint8Array.prototype.lastIndexOf.call(t,n,s):j(t,[n],s,a,r);throw new TypeError("val must be string, number or Buffer")}function j(e,t,n,s,a){function r(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,i=e.length,l=t.length;if(void 0!==s&&(s=String(s).toLowerCase(),"ucs2"===s||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return-1;o=2,i/=2,l/=2,n/=2}var p;if(a){var c=-1;for(p=n;p<i;p++)if(r(e,p)===r(t,c===-1?0:p-c)){if(c===-1&&(c=p),p-c+1===l)return c*o}else c!==-1&&(p-=p-c),c=-1}else for(n+l>i&&(n=i-l),p=n;p>=0;p--){for(var u=!0,d=0;d<l;d++)if(r(e,p+d)!==r(t,d)){u=!1;break}if(u)return p}return-1}function x(e,t,n,s){n=Number(n)||0;var a=e.length-n;s?(s=Number(s),s>a&&(s=a)):s=a;var r=t.length;if(r%2!==0)throw new TypeError("Invalid hex string");s>r/2&&(s=r/2);for(var o=0;o<s;++o){var i=parseInt(t.substr(2*o,2),16);if(isNaN(i))return o;e[n+o]=i}return o}function _(e,t,n,s){return K(z(t,e.length-n),e,n,s)}function k(e,t,n,s){return K(G(t),e,n,s)}function E(e,t,n,s){return k(e,t,n,s)}function A(e,t,n,s){return K(Y(t),e,n,s)}function T(e,t,n,s){return K($(t,e.length-n),e,n,s)}function S(e,t,n){return 0===t&&n===e.length?Q.fromByteArray(e):Q.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var s=[],a=t;a<n;){var r=e[a],o=null,i=r>239?4:r>223?3:r>191?2:1;if(a+i<=n){var l,p,c,u;switch(i){case 1:r<128&&(o=r);break;case 2:l=e[a+1],128===(192&l)&&(u=(31&r)<<6|63&l,u>127&&(o=u));break;case 3:l=e[a+1],p=e[a+2],128===(192&l)&&128===(192&p)&&(u=(15&r)<<12|(63&l)<<6|63&p,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:l=e[a+1],p=e[a+2],c=e[a+3],128===(192&l)&&128===(192&p)&&128===(192&c)&&(u=(15&r)<<18|(63&l)<<12|(63&p)<<6|63&c,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,i=1):o>65535&&(o-=65536,s.push(o>>>10&1023|55296),o=56320|1023&o),s.push(o),a+=i}return P(s)}function P(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",s=0;s<t;)n+=String.fromCharCode.apply(String,e.slice(s,s+=ee));return n}function O(e,t,n){var s="";n=Math.min(e.length,n);for(var a=t;a<n;++a)s+=String.fromCharCode(127&e[a]);return s}function R(e,t,n){var s="";n=Math.min(e.length,n);for(var a=t;a<n;++a)s+=String.fromCharCode(e[a]);return s}function N(e,t,n){var s=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>s)&&(n=s);for(var a="",r=t;r<n;++r)a+=H(e[r]);return a}function M(e,t,n){for(var s=e.slice(t,n),a="",r=0;r<s.length;r+=2)a+=String.fromCharCode(s[r]+256*s[r+1]);return a}function q(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,n,s,a,r,o){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>r||n<o)throw new RangeError('"value" argument is out of bounds');if(s+a>t.length)throw new RangeError("Index out of range")}function D(e,t,n,s){t<0&&(t=65535+t+1);for(var a=0,r=Math.min(e.length-n,2);a<r;++a)e[n+a]=(t&255<<8*(s?a:1-a))>>>8*(s?a:1-a)}function I(e,t,n,s){t<0&&(t=4294967295+t+1);for(var a=0,r=Math.min(e.length-n,4);a<r;++a)e[n+a]=t>>>8*(s?a:3-a)&255}function U(e,t,n,s,a,r){if(n+s>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,s,a){return a||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(e,t,n,s,23,4),n+4}function B(e,t,n,s,a){return a||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(e,t,n,s,52,8),n+8}function W(e){if(e=V(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var n,s=e.length,a=null,r=[],o=0;o<s;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(o+1===s){(t-=3)>-1&&r.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&r.push(239,191,189),a=n;continue}n=(a-55296<<10|n-56320)+65536}else a&&(t-=3)>-1&&r.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function G(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function $(e,t){for(var n,s,a,r=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),s=n>>8,a=n%256,r.push(a),r.push(s);return r}function Y(e){return Q.toByteArray(W(e))}function K(e,t,n,s){for(var a=0;a<s&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function J(e){return e!==e}var Q=n(440),X=n(441),Z=n(442);t.Buffer=e,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==s.TYPED_ARRAY_SUPPORT?s.TYPED_ARRAY_SUPPORT:a(),t.kMaxLength=r(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,n){return i(null,e,t,n)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,n){return p(null,e,t,n)},e.allocUnsafe=function(e){return c(null,e)},e.allocUnsafeSlow=function(e){return c(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var s=t.length,a=n.length,r=0,o=Math.min(s,a);r<o;++r)if(t[r]!==n[r]){s=t[r],a=n[r];break}return s<a?-1:a<s?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var s;if(void 0===n)for(n=0,s=0;s<t.length;++s)n+=t[s].length;var a=e.allocUnsafe(n),r=0;for(s=0;s<t.length;++s){var o=t[s];if(!e.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(a,r),r+=o.length}return a},e.byteLength=y,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):b.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,n,s,a,r){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===s&&(s=t?t.length:0),void 0===a&&(a=0),void 0===r&&(r=this.length),n<0||s>t.length||a<0||r>this.length)throw new RangeError("out of range index");if(a>=r&&n>=s)return 0;if(a>=r)return-1;if(n>=s)return 1;if(n>>>=0,s>>>=0,a>>>=0,r>>>=0,this===t)return 0;for(var o=r-a,i=s-n,l=Math.min(o,i),p=this.slice(a,r),c=t.slice(n,s),u=0;u<l;++u)if(p[u]!==c[u]){o=p[u],i=c[u];break}return o<i?-1:i<o?1:0},e.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},e.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},e.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},e.prototype.write=function(e,t,n,s){if(void 0===t)s="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)s=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(n)?(n=0|n,void 0===s&&(s="utf8")):(s=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var r=!1;;)switch(s){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return k(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return A(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(r)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),r=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;e.prototype.slice=function(t,n){var s=this.length;t=~~t,n=void 0===n?s:~~n,t<0?(t+=s,t<0&&(t=0)):t>s&&(t=s),n<0?(n+=s,n<0&&(n=0)):n>s&&(n=s),n<t&&(n=t);var a;if(e.TYPED_ARRAY_SUPPORT)a=this.subarray(t,n),a.__proto__=e.prototype;else{var r=n-t;a=new e(r,(void 0));for(var o=0;o<r;++o)a[o]=this[o+t]}return a},e.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||q(e,t,this.length);for(var s=this[e],a=1,r=0;++r<t&&(a*=256);)s+=this[e+r]*a;return s},e.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||q(e,t,this.length);for(var s=this[e+--t],a=1;t>0&&(a*=256);)s+=this[e+--t]*a;return s},e.prototype.readUInt8=function(e,t){return t||q(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||q(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||q(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||q(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||q(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||q(e,t,this.length);for(var s=this[e],a=1,r=0;++r<t&&(a*=256);)s+=this[e+r]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*t)),s},e.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||q(e,t,this.length);for(var s=t,a=1,r=this[e+--s];s>0&&(a*=256);)r+=this[e+--s]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},e.prototype.readInt8=function(e,t){return t||q(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){t||q(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||q(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||q(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||q(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||q(e,4,this.length),X.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||q(e,4,this.length),X.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||q(e,8,this.length),X.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||q(e,8,this.length),X.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,s){if(e=+e,t=0|t,n=0|n,!s){var a=Math.pow(2,8*n)-1;L(this,e,t,n,a,0)}var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,s){if(e=+e,t=0|t,n=0|n,!s){var a=Math.pow(2,8*n)-1;L(this,e,t,n,a,0)}var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},e.prototype.writeUInt8=function(t,n,s){return t=+t,n=0|n,s||L(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,s){return t=+t,n=0|n,s||L(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):D(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,s){return t=+t,n=0|n,s||L(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):D(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,s){return t=+t,n=0|n,s||L(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):I(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,s){return t=+t,n=0|n,s||L(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):I(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,s){if(e=+e,t=0|t,!s){var a=Math.pow(2,8*n-1);L(this,e,t,n,a-1,-a)}var r=0,o=1,i=0;for(this[t]=255&e;++r<n&&(o*=256);)e<0&&0===i&&0!==this[t+r-1]&&(i=1),this[t+r]=(e/o>>0)-i&255;return t+n},e.prototype.writeIntBE=function(e,t,n,s){if(e=+e,t=0|t,!s){var a=Math.pow(2,8*n-1);L(this,e,t,n,a-1,-a)}var r=n-1,o=1,i=0;for(this[t+r]=255&e;--r>=0&&(o*=256);)e<0&&0===i&&0!==this[t+r+1]&&(i=1),this[t+r]=(e/o>>0)-i&255;return t+n},e.prototype.writeInt8=function(t,n,s){return t=+t,n=0|n,s||L(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,s){return t=+t,n=0|n,s||L(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):D(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,s){return t=+t,n=0|n,s||L(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):D(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,s){return t=+t,n=0|n,s||L(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):I(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,s){return t=+t,n=0|n,s||L(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):I(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},e.prototype.copy=function(t,n,s,a){if(s||(s=0),a||0===a||(a=this.length),n>=t.length&&(n=t.length),n||(n=0),a>0&&a<s&&(a=s),a===s)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),t.length-n<a-s&&(a=t.length-n+s);var r,o=a-s;if(this===t&&s<n&&n<a)for(r=o-1;r>=0;--r)t[r+n]=this[r+s];else if(o<1e3||!e.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+n]=this[r+s];else Uint8Array.prototype.set.call(t,this.subarray(s,s+o),n);return o},e.prototype.fill=function(t,n,s,a){if("string"==typeof t){if("string"==typeof n?(a=n,n=0,s=this.length):"string"==typeof s&&(a=s,s=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!e.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"==typeof t&&(t=255&t);if(n<0||this.length<n||this.length<s)throw new RangeError("Out of range index");if(s<=n)return this;n>>>=0,s=void 0===s?this.length:s>>>0,t||(t=0);var o;if("number"==typeof t)for(o=n;o<s;++o)this[o]=t;else{var i=e.isBuffer(t)?t:z(new e(t,a).toString()),l=i.length;for(o=0;o<s-n;++o)this[o+n]=i[o%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(439).Buffer,function(){return this}())},function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function s(e){return 3*e.length/4-n(e)}function a(e){var t,s,a,r,o,i,l=e.length;o=n(e),i=new c(3*l/4-o),a=o>0?l-4:l;var u=0;for(t=0,s=0;t<a;t+=4,s+=3)r=p[e.charCodeAt(t)]<<18|p[e.charCodeAt(t+1)]<<12|p[e.charCodeAt(t+2)]<<6|p[e.charCodeAt(t+3)],i[u++]=r>>16&255,i[u++]=r>>8&255,i[u++]=255&r;return 2===o?(r=p[e.charCodeAt(t)]<<2|p[e.charCodeAt(t+1)]>>4,i[u++]=255&r):1===o&&(r=p[e.charCodeAt(t)]<<10|p[e.charCodeAt(t+1)]<<4|p[e.charCodeAt(t+2)]>>2,i[u++]=r>>8&255,i[u++]=255&r),i}function r(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function o(e,t,n){for(var s,a=[],o=t;o<n;o+=3)s=(e[o]<<16)+(e[o+1]<<8)+e[o+2],a.push(r(s));return a.join("")}function i(e){for(var t,n=e.length,s=n%3,a="",r=[],i=16383,p=0,c=n-s;p<c;p+=i)r.push(o(e,p,p+i>c?c:p+i));return 1===s?(t=e[n-1],a+=l[t>>2],a+=l[t<<4&63],a+="=="):2===s&&(t=(e[n-2]<<8)+e[n-1],a+=l[t>>10],a+=l[t>>4&63],a+=l[t<<2&63],a+="="),r.push(a),r.join("")}t.byteLength=s,t.toByteArray=a,t.fromByteArray=i;for(var l=[],p=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,h=u.length;d<h;++d)l[d]=u[d],p[u.charCodeAt(d)]=d;p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,s,a){var r,o,i=8*a-s-1,l=(1<<i)-1,p=l>>1,c=-7,u=n?a-1:0,d=n?-1:1,h=e[t+u];for(u+=d,r=h&(1<<-c)-1,h>>=-c,c+=i;c>0;r=256*r+e[t+u],u+=d,c-=8);for(o=r&(1<<-c)-1,r>>=-c,c+=s;c>0;o=256*o+e[t+u],u+=d,c-=8);if(0===r)r=1-p;else{if(r===l)return o?NaN:(h?-1:1)*(1/0);o+=Math.pow(2,s),r-=p}return(h?-1:1)*o*Math.pow(2,r-s)},t.write=function(e,t,n,s,a,r){var o,i,l,p=8*r-a-1,c=(1<<p)-1,u=c>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=s?0:r-1,f=s?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(i=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),t+=o+u>=1?d/l:d*Math.pow(2,1-u),t*l>=2&&(o++,l/=2),o+u>=c?(i=0,o=c):o+u>=1?(i=(t*l-1)*Math.pow(2,a),o+=u):(i=t*Math.pow(2,u-1)*Math.pow(2,a),o=0));a>=8;e[n+h]=255&i,h+=f,i/=256,a-=8);for(o=o<<a|i,p+=a;p>0;e[n+h]=255&o,h+=f,o/=256,p-=8);e[n+h-f]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function s(e){return"boolean"==typeof e}function a(e){return null===e}function r(e){return null==e}function o(e){return"number"==typeof e}function i(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function p(e){return void 0===e}function c(e){return"[object RegExp]"===g(e)}function u(e){return"object"==typeof e&&null!==e}function d(e){return"[object Date]"===g(e)}function h(e){return"[object Error]"===g(e)||e instanceof Error}function f(e){return"function"==typeof e}function m(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function g(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=s,t.isNull=a,t.isNullOrUndefined=r,t.isNumber=o,t.isString=i,t.isSymbol=l,t.isUndefined=p,t.isRegExp=c,t.isObject=u,t.isDate=d,t.isError=h,t.isFunction=f,t.isPrimitive=m,t.isBuffer=e.isBuffer}).call(t,n(439).Buffer)},425,function(e,t){},function(e,t,n){(function(t){function s(e){return this instanceof s?(l.call(this,e),p.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",a)):new s(e)}function a(){this.allowHalfOpen||this._writableState.ended||t.nextTick(this.end.bind(this))}function r(e,t){for(var n=0,s=e.length;n<s;n++)t(e[n],n)}e.exports=s;var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},i=n(443);i.inherits=n(444);var l=n(437),p=n(447);i.inherits(s,l),r(o(p.prototype),function(e){s.prototype[e]||(s.prototype[e]=p.prototype[e])})}).call(t,n(112))},function(e,t,n){(function(t){function s(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function a(e,t){var s=n(446);e=e||{};var a=e.highWaterMark,r=e.objectMode?16:16384;this.highWaterMark=a||0===a?a:r,this.objectMode=!!e.objectMode,t instanceof s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){h(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function r(e){var t=n(446);return this instanceof r||this instanceof t?(this._writableState=new a(e,this),this.writable=!0,void _.call(this)):new r(e)}function o(e,n,s){var a=new Error("write after end");e.emit("error",a),t.nextTick(function(){s(a)})}function i(e,n,s,a){var r=!0;if(!(x.isBuffer(s)||x.isString(s)||x.isNullOrUndefined(s)||n.objectMode)){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),t.nextTick(function(){a(o)}),r=!1}return r}function l(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&x.isString(t)&&(t=new j(t,n)),t}function p(e,t,n,a,r){n=l(t,n,a),x.isBuffer(n)&&(a="buffer");var o=t.objectMode?1:n.length;t.length+=o;var i=t.length<t.highWaterMark;return i||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new s(n,a,r)):c(e,t,!1,o,n,a,r),i}function c(e,t,n,s,a,r,o){t.writelen=s,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(a,t.onwrite):e._write(a,r,t.onwrite),t.sync=!1}function u(e,n,s,a,r){s?t.nextTick(function(){n.pendingcb--,r(a)}):(n.pendingcb--,r(a)),e._writableState.errorEmitted=!0,e.emit("error",a)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function h(e,n){var s=e._writableState,a=s.sync,r=s.writecb;if(d(s),n)u(e,s,a,n,r);else{var o=y(e,s);o||s.corked||s.bufferProcessing||!s.buffer.length||g(e,s),a?t.nextTick(function(){f(e,s,o,r)}):f(e,s,o,r)}}function f(e,t,n,s){n||m(e,t),t.pendingcb--,s(),w(e,t)}function m(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function g(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],s=0;s<t.buffer.length;s++)n.push(t.buffer[s].callback);t.pendingcb++,c(e,t,!0,t.length,t.buffer,"",function(e){for(var s=0;s<n.length;s++)t.pendingcb--,n[s](e)}),t.buffer=[]}else{for(var s=0;s<t.buffer.length;s++){var a=t.buffer[s],r=a.chunk,o=a.encoding,i=a.callback,l=t.objectMode?1:r.length;if(c(e,t,!1,l,r,o,i),t.writing){s++;break}}s<t.buffer.length?t.buffer=t.buffer.slice(s):t.buffer.length=0}t.bufferProcessing=!1}function y(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function w(e,t){var n=y(e,t);return n&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),n}function v(e,n,s){n.ending=!0,w(e,n),s&&(n.finished?t.nextTick(s):e.once("finish",s)),n.ended=!0}e.exports=r;var j=n(439).Buffer;r.WritableState=a;var x=n(443);x.inherits=n(444);var _=n(434);x.inherits(r,_),r.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},r.prototype.write=function(e,t,n){var s=this._writableState,a=!1;return x.isFunction(t)&&(n=t,t=null),x.isBuffer(e)?t="buffer":t||(t=s.defaultEncoding),x.isFunction(n)||(n=function(){}),s.ended?o(this,s,n):i(this,s,e,n)&&(s.pendingcb++,a=p(this,s,e,t,n)),a},r.prototype.cork=function(){var e=this._writableState;e.corked++},r.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||g(this,e))},r.prototype._write=function(e,t,n){n(new Error("not implemented"))},r.prototype._writev=null,r.prototype.end=function(e,t,n){var s=this._writableState;x.isFunction(e)?(n=e,e=null,t=null):x.isFunction(t)&&(n=t,t=null),x.isNullOrUndefined(e)||this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||s.finished||v(this,s,n)}}).call(t,n(112))},function(e,t,n){function s(e){if(e&&!l(e))throw new Error("Unknown encoding: "+e)}function a(e){return e.toString(this.encoding)}function r(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function o(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var i=n(439).Buffer,l=i.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},p=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),s(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=r;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void(this.write=a)}this.charBuffer=new i(6),this.charReceived=0,this.charLength=0};p.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var s=t.charCodeAt(t.length-1);if(!(s>=55296&&s<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var a=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,a),a-=this.charReceived),t+=e.toString(this.encoding,0,a);var a=t.length-1,s=t.charCodeAt(a);if(s>=55296&&s<=56319){var r=this.surrogateSize;return this.charLength+=r,this.charReceived+=r,this.charBuffer.copy(this.charBuffer,r,0,r),e.copy(this.charBuffer,0,0,r),t.substring(0,a)}return t},p.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},p.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,s=this.charBuffer,a=this.encoding;t+=s.slice(0,n).toString(a)}return t}},function(e,t,n){function s(e,t){this.afterTransform=function(e,n){return a(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function a(e,t,n){var s=e._transformState;s.transforming=!1;var a=s.writecb;if(!a)return e.emit("error",new Error("no writecb in Transform class"));s.writechunk=null,s.writecb=null,l.isNullOrUndefined(n)||e.push(n),a&&a(t);var r=e._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&e._read(r.highWaterMark)}function r(e){if(!(this instanceof r))return new r(e);i.call(this,e),this._transformState=new s(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){l.isFunction(this._flush)?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var n=e._writableState,s=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(s.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=r;var i=n(446),l=n(443);l.inherits=n(444),l.inherits(r,i),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){throw new Error("not implemented")},r.prototype._write=function(e,t,n){var s=this._transformState;if(s.writecb=n,s.writechunk=e,s.writeencoding=t,!s.transforming){var a=this._readableState;(s.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},r.prototype._read=function(e){var t=this._transformState;
l.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},function(e,t,n){function s(e){return this instanceof s?void a.call(this,e):new s(e)}e.exports=s;var a=n(449),r=n(443);r.inherits=n(444),r.inherits(s,a),s.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(447)},function(e,t,n){e.exports=n(446)},function(e,t,n){e.exports=n(449)},function(e,t,n){e.exports=n(450)},445,function(e,t,n){function s(e){this._cbs=e||{}}e.exports=s;var a=n(417).EVENTS;Object.keys(a).forEach(function(e){if(0===a[e])e="on"+e,s.prototype[e]=function(){this._cbs[e]&&this._cbs[e]()};else if(1===a[e])e="on"+e,s.prototype[e]=function(t){this._cbs[e]&&this._cbs[e](t)};else{if(2!==a[e])throw Error("wrong number of arguments");e="on"+e,s.prototype[e]=function(t,n){this._cbs[e]&&this._cbs[e](t,n)}}})},function(e,t,n){var s=e.exports;[n(458),n(464),n(465),n(466),n(467),n(468)].forEach(function(e){Object.keys(e).forEach(function(t){s[t]=e[t].bind(s)})})},function(e,t,n){function s(e,t){return e.children?e.children.map(function(e){return o(e,t)}).join(""):""}function a(e){return Array.isArray(e)?e.map(a).join(""):i(e)||e.type===r.CDATA?a(e.children):e.type===r.Text?e.data:""}var r=n(428),o=n(459),i=r.isTag;e.exports={getInnerHTML:s,getOuterHTML:o,getText:a}},function(e,t,n){function s(e,t){if(e){var n,s="";for(var a in e)n=e[a],s&&(s+=" "),s+=!n&&u[a]?a:a+'="'+(t.decodeEntities?c.encodeXML(n):n)+'"';return s}}function a(e,t){"svg"===e.name&&(t={decodeEntities:t.decodeEntities,xmlMode:!0});var n="<"+e.name,a=s(e.attribs,t);return a&&(n+=" "+a),!t.xmlMode||e.children&&0!==e.children.length?(n+=">",e.children&&(n+=f(e.children,t)),h[e.name]&&!t.xmlMode||(n+="</"+e.name+">")):n+="/>",n}function r(e){return"<"+e.data+">"}function o(e,t){var n=e.data||"";return!t.decodeEntities||e.parent&&e.parent.name in d||(n=c.encodeXML(n)),n}function i(e){return"<![CDATA["+e.children[0].data+"]]>"}function l(e){return"<!--"+e.data+"-->"}var p=n(460),c=n(461),u={__proto__:null,allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,"default":!0,defer:!0,disabled:!0,hidden:!0,ismap:!0,loop:!0,multiple:!0,muted:!0,open:!0,readonly:!0,required:!0,reversed:!0,scoped:!0,seamless:!0,selected:!0,typemustmatch:!0},d={__proto__:null,style:!0,script:!0,xmp:!0,iframe:!0,noembed:!0,noframes:!0,plaintext:!0,noscript:!0},h={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},f=e.exports=function(e,t){Array.isArray(e)||e.cheerio||(e=[e]),t=t||{};for(var n="",s=0;s<e.length;s++){var c=e[s];n+="root"===c.type?f(c.children,t):p.isTag(c)?a(c,t):c.type===p.Directive?r(c):c.type===p.Comment?l(c):c.type===p.CDATA?i(c):o(c,t)}return n}},function(e,t){e.exports={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag",CDATA:"cdata",isTag:function(e){return"tag"===e.type||"script"===e.type||"style"===e.type}}},function(e,t,n){var s=n(462),a=n(463);t.decode=function(e,t){return(!t||t<=0?a.XML:a.HTML)(e)},t.decodeStrict=function(e,t){return(!t||t<=0?a.XML:a.HTMLStrict)(e)},t.encode=function(e,t){return(!t||t<=0?s.XML:s.HTML)(e)},t.encodeXML=s.XML,t.encodeHTML4=t.encodeHTML5=t.encodeHTML=s.HTML,t.decodeXML=t.decodeXMLStrict=a.XML,t.decodeHTML4=t.decodeHTML5=t.decodeHTML=a.HTML,t.decodeHTML4Strict=t.decodeHTML5Strict=t.decodeHTMLStrict=a.HTMLStrict,t.escape=s.escape},function(e,t,n){function s(e){return Object.keys(e).sort().reduce(function(t,n){return t[e[n]]="&"+n+";",t},{})}function a(e){var t=[],n=[];return Object.keys(e).forEach(function(e){1===e.length?t.push("\\"+e):n.push(e)}),n.unshift("["+t.join("")+"]"),new RegExp(n.join("|"),"g")}function r(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"}function o(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),s=1024*(t-55296)+n-56320+65536;return"&#x"+s.toString(16).toUpperCase()+";"}function i(e,t){function n(t){return e[t]}return function(e){return e.replace(t,n).replace(f,o).replace(h,r)}}function l(e){return e.replace(m,r).replace(f,o).replace(h,r)}var p=s(n(424)),c=a(p);t.XML=i(p,c);var u=s(n(422)),d=a(u);t.HTML=i(u,d);var h=/[^\0-\x7F]/g,f=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m=a(p);t.escape=l},function(e,t,n){function s(e){var t=Object.keys(e).join("|"),n=r(e);t+="|#[xX][\\da-fA-F]+|#\\d+";var s=new RegExp("&(?:"+t+");","g");return function(e){return String(e).replace(s,n)}}function a(e,t){return e<t?1:-1}function r(e){return function(t){return"#"===t.charAt(1)?p("X"===t.charAt(2)||"x"===t.charAt(2)?parseInt(t.substr(3),16):parseInt(t.substr(2),10)):e[t.slice(1,-1)]}}var o=n(422),i=n(423),l=n(424),p=n(420),c=s(l),u=s(o),d=function(){function e(e){return";"!==e.substr(-1)&&(e+=";"),c(e)}for(var t=Object.keys(i).sort(a),n=Object.keys(o).sort(a),s=0,l=0;s<n.length;s++)t[l]===n[s]?(n[s]+=";?",l++):n[s]+=";";var p=new RegExp("&(?:"+n.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),c=r(o);return function(t){return String(t).replace(p,e)}}();e.exports={XML:c,HTML:d,HTMLStrict:u}},function(e,t){var n=t.getChildren=function(e){return e.children},s=t.getParent=function(e){return e.parent};t.getSiblings=function(e){var t=s(e);return t?n(t):[e]},t.getAttributeValue=function(e,t){return e.attribs&&e.attribs[t]},t.hasAttrib=function(e,t){return!!e.attribs&&hasOwnProperty.call(e.attribs,t)},t.getName=function(e){return e.name}},function(e,t){t.removeElement=function(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}},t.replaceElement=function(e,t){var n=t.prev=e.prev;n&&(n.next=t);var s=t.next=e.next;s&&(s.prev=t);var a=t.parent=e.parent;if(a){var r=a.children;r[r.lastIndexOf(e)]=t}},t.appendChild=function(e,t){if(t.parent=e,1!==e.children.push(t)){var n=e.children[e.children.length-2];n.next=t,t.prev=n,t.next=null}},t.append=function(e,t){var n=e.parent,s=e.next;if(t.next=s,t.prev=e,e.next=t,t.parent=n,s){if(s.prev=t,n){var a=n.children;a.splice(a.lastIndexOf(s),0,t)}}else n&&n.children.push(t)},t.prepend=function(e,t){var n=e.parent;if(n){var s=n.children;s.splice(s.lastIndexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t}},function(e,t,n){function s(e,t,n,s){return Array.isArray(t)||(t=[t]),"number"==typeof s&&isFinite(s)||(s=1/0),a(e,t,n!==!1,s)}function a(e,t,n,s){for(var r,o=[],i=0,l=t.length;i<l&&!(e(t[i])&&(o.push(t[i]),--s<=0))&&(r=t[i].children,!(n&&r&&r.length>0&&(r=a(e,r,n,s),o=o.concat(r),s-=r.length,s<=0)));i++);return o}function r(e,t){for(var n=0,s=t.length;n<s;n++)if(e(t[n]))return t[n];return null}function o(e,t){for(var n=null,s=0,a=t.length;s<a&&!n;s++)p(t[s])&&(e(t[s])?n=t[s]:t[s].children.length>0&&(n=o(e,t[s].children)));return n}function i(e,t){for(var n=0,s=t.length;n<s;n++)if(p(t[n])&&(e(t[n])||t[n].children.length>0&&i(e,t[n].children)))return!0;return!1}function l(e,t){for(var n=[],s=0,a=t.length;s<a;s++)p(t[s])&&(e(t[s])&&n.push(t[s]),t[s].children.length>0&&(n=n.concat(l(e,t[s].children))));return n}var p=n(428).isTag;e.exports={filter:s,find:a,findOneChild:r,findOne:o,existsOne:i,findAll:l}},function(e,t,n){function s(e,t){return"function"==typeof t?function(n){return n.attribs&&t(n.attribs[e])}:function(n){return n.attribs&&n.attribs[e]===t}}function a(e,t){return function(n){return e(n)||t(n)}}var r=n(428),o=t.isTag=r.isTag;t.testElement=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if("tag_name"===n){if(!o(t)||!e.tag_name(t.name))return!1}else if("tag_type"===n){if(!e.tag_type(t.type))return!1}else if("tag_contains"===n){if(o(t)||!e.tag_contains(t.data))return!1}else if(!t.attribs||!e[n](t.attribs[n]))return!1}else;return!0};var i={tag_name:function(e){return"function"==typeof e?function(t){return o(t)&&e(t.name)}:"*"===e?o:function(t){return o(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return!o(t)&&e(t.data)}:function(t){return!o(t)&&t.data===e}}};t.getElements=function(e,t,n,r){var o=Object.keys(e).map(function(t){var n=e[t];return t in i?i[t](n):s(t,n)});return 0===o.length?[]:this.filter(o.reduce(a),t,n,r)},t.getElementById=function(e,t,n){return Array.isArray(t)||(t=[t]),this.findOne(s("id",e),t,n!==!1)},t.getElementsByTagName=function(e,t,n,s){return this.filter(i.tag_name(e),t,n,s)},t.getElementsByTagType=function(e,t,n,s){return this.filter(i.tag_type(e),t,n,s)}},function(e,t){t.removeSubsets=function(e){for(var t,n,s,a=e.length;--a>-1;){for(t=n=e[a],e[a]=null,s=!0;n;){if(e.indexOf(n)>-1){s=!1,e.splice(a,1);break}n=n.parent}s&&(e[a]=t)}return e};var n={DISCONNECTED:1,PRECEDING:2,FOLLOWING:4,CONTAINS:8,CONTAINED_BY:16},s=t.compareDocumentPosition=function(e,t){var s,a,r,o,i,l,p=[],c=[];if(e===t)return 0;for(s=e;s;)p.unshift(s),s=s.parent;for(s=t;s;)c.unshift(s),s=s.parent;for(l=0;p[l]===c[l];)l++;return 0===l?n.DISCONNECTED:(a=p[l-1],r=a.children,o=p[l],i=c[l],r.indexOf(o)>r.indexOf(i)?a===t?n.FOLLOWING|n.CONTAINED_BY:n.FOLLOWING:a===e?n.PRECEDING|n.CONTAINS:n.PRECEDING)};t.uniqueSort=function(e){var t,a,r=e.length;for(e=e.slice();--r>-1;)t=e[r],a=e.indexOf(t),a>-1&&a<r&&e.splice(r,1);return e.sort(function(e,t){var a=s(e,t);return a&n.PRECEDING?-1:a&n.FOLLOWING?1:0}),e}},function(e,t,n){function s(e){this._cbs=e||{},this.events=[]}e.exports=s;var a=n(417).EVENTS;Object.keys(a).forEach(function(e){if(0===a[e])e="on"+e,s.prototype[e]=function(){this.events.push([e]),this._cbs[e]&&this._cbs[e]()};else if(1===a[e])e="on"+e,s.prototype[e]=function(t){this.events.push([e,t]),this._cbs[e]&&this._cbs[e](t)};else{if(2!==a[e])throw Error("wrong number of arguments");e="on"+e,s.prototype[e]=function(t,n){this.events.push([e,t,n]),this._cbs[e]&&this._cbs[e](t,n)}}}),s.prototype.onreset=function(){this.events=[],this._cbs.onreset&&this._cbs.onreset()},s.prototype.restart=function(){this._cbs.onreset&&this._cbs.onreset();for(var e=0,t=this.events.length;e<t;e++)if(this._cbs[this.events[e][0]]){var n=this.events[e].length;1===n?this._cbs[this.events[e][0]]():2===n?this._cbs[this.events[e][0]](this.events[e][1]):this._cbs[this.events[e][0]](this.events[e][1],this.events[e][2])}}},function(e,t,n){"use strict";function s(){var e=new r;return{defaultProcessingInstructions:[{shouldProcessNode:a.shouldProcessEveryNode,processNode:e.processDefaultNode}]}}var a=n(471),r=n(472);e.exports=s},function(e,t){"use strict";function n(e){return!0}e.exports={shouldProcessEveryNode:n}},function(e,t,n){"use strict";function s(){function e(e,t,n){return"text"===e.type?a.decode(e.data):"comment"!==e.type&&(o.indexOf(e.name)>-1?r.createElement(e,n):r.createElement(e,n,e.data,t))}return{processDefaultNode:e}}var a=n(473),r=n(479),o=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","menuitem","textarea"];e.exports=s},function(e,t,n){t.encode=n(474),t.decode=n(477)},function(e,t,n){function s(e,t){if("string"!=typeof e)throw new TypeError("Expected a String");t||(t={});var n=!0;t.named&&(n=!1),void 0!==t.numeric&&(n=t.numeric);for(var s=t.special||{'"':!0,"'":!0,"<":!0,">":!0,"&":!0},o=a.ucs2.decode(e),i=[],l=0;l<o.length;l++){var p=o[l],c=a.ucs2.encode([p]),u=r[p];u&&(p>=127||s[c])&&!n?i.push("&"+(/;$/.test(u)?u:u+";")):p<32||p>=127||s[c]?i.push("&#"+p+";"):i.push(c)}return i.join("")}var a=n(475),r=n(476);e.exports=s},function(e,t,n){var s;(function(e,a){!function(r){function o(e){throw new RangeError(R[e])}function i(e,t){for(var n=e.length,s=[];n--;)s[n]=t(e[n]);return s}function l(e,t){var n=e.split("@"),s="";n.length>1&&(s=n[0]+"@",e=n[1]),e=e.replace(O,".");var a=e.split("."),r=i(a,t).join(".");return s+r}function p(e){for(var t,n,s=[],a=0,r=e.length;a<r;)t=e.charCodeAt(a++),t>=55296&&t<=56319&&a<r?(n=e.charCodeAt(a++),56320==(64512&n)?s.push(((1023&t)<<10)+(1023&n)+65536):(s.push(t),a--)):s.push(t);return s}function c(e){return i(e,function(e){var t="";return e>65535&&(e-=65536,t+=q(e>>>10&1023|55296),e=56320|1023&e),t+=q(e)}).join("")}function u(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:j}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,n){var s=0;for(e=n?M(e/E):e>>1,e+=M(e/t);e>N*_>>1;s+=j)e=M(e/N);return M(s+(N+1)*e/(e+k))}function f(e){var t,n,s,a,r,i,l,p,d,f,m=[],g=e.length,y=0,b=T,w=A;for(n=e.lastIndexOf(S),n<0&&(n=0),s=0;s<n;++s)e.charCodeAt(s)>=128&&o("not-basic"),m.push(e.charCodeAt(s));for(a=n>0?n+1:0;a<g;){for(r=y,i=1,l=j;a>=g&&o("invalid-input"),p=u(e.charCodeAt(a++)),(p>=j||p>M((v-y)/i))&&o("overflow"),y+=p*i,d=l<=w?x:l>=w+_?_:l-w,!(p<d);l+=j)f=j-d,i>M(v/f)&&o("overflow"),i*=f;t=m.length+1,w=h(y-r,t,0==r),M(y/t)>v-b&&o("overflow"),b+=M(y/t),y%=t,m.splice(y++,0,b)}return c(m)}function m(e){var t,n,s,a,r,i,l,c,u,f,m,g,y,b,w,k=[];for(e=p(e),g=e.length,t=T,n=0,r=A,i=0;i<g;++i)m=e[i],m<128&&k.push(q(m));for(s=a=k.length,a&&k.push(S);s<g;){for(l=v,i=0;i<g;++i)m=e[i],m>=t&&m<l&&(l=m);for(y=s+1,l-t>M((v-n)/y)&&o("overflow"),n+=(l-t)*y,t=l,i=0;i<g;++i)if(m=e[i],m<t&&++n>v&&o("overflow"),m==t){for(c=n,u=j;f=u<=r?x:u>=r+_?_:u-r,!(c<f);u+=j)w=c-f,b=j-f,k.push(q(d(f+w%b,0))),c=M(w/b);k.push(q(d(c,0))),r=h(n,y,s==a),n=0,++s}++n,++t}return k.join("")}function g(e){return l(e,function(e){return C.test(e)?f(e.slice(4).toLowerCase()):e})}function y(e){return l(e,function(e){return P.test(e)?"xn--"+m(e):e})}var b=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof a&&a);b.global!==b&&b.window!==b&&b.self!==b||(r=b);var w,v=2147483647,j=36,x=1,_=26,k=38,E=700,A=72,T=128,S="-",C=/^xn--/,P=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=j-x,M=Math.floor,q=String.fromCharCode;w={version:"1.4.1",ucs2:{decode:p,encode:c},decode:f,encode:m,toASCII:y,toUnicode:g},s=function(){return w}.call(t,n,t,e),!(void 0!==s&&(e.exports=s))}(this)}).call(t,n(310)(e),function(){return this}())},function(e,t){e.exports={9:"Tab;",10:"NewLine;",33:"excl;",34:"quot;",35:"num;",36:"dollar;",37:"percnt;",38:"amp;",39:"apos;",40:"lpar;",41:"rpar;",42:"midast;",43:"plus;",44:"comma;",46:"period;",47:"sol;",58:"colon;",59:"semi;",60:"lt;",61:"equals;",62:"gt;",63:"quest;",64:"commat;",91:"lsqb;",92:"bsol;",93:"rsqb;",94:"Hat;",95:"UnderBar;",96:"grave;",123:"lcub;",124:"VerticalLine;",125:"rcub;",160:"NonBreakingSpace;",161:"iexcl;",162:"cent;",163:"pound;",164:"curren;",165:"yen;",166:"brvbar;",167:"sect;",168:"uml;",169:"copy;",170:"ordf;",171:"laquo;",172:"not;",173:"shy;",174:"reg;",175:"strns;",176:"deg;",177:"pm;",178:"sup2;",179:"sup3;",180:"DiacriticalAcute;",181:"micro;",182:"para;",183:"middot;",184:"Cedilla;",185:"sup1;",186:"ordm;",187:"raquo;",188:"frac14;",189:"half;",190:"frac34;",191:"iquest;",192:"Agrave;",193:"Aacute;",194:"Acirc;",195:"Atilde;",196:"Auml;",197:"Aring;",198:"AElig;",199:"Ccedil;",200:"Egrave;",201:"Eacute;",202:"Ecirc;",203:"Euml;",204:"Igrave;",205:"Iacute;",206:"Icirc;",207:"Iuml;",208:"ETH;",209:"Ntilde;",210:"Ograve;",211:"Oacute;",212:"Ocirc;",213:"Otilde;",214:"Ouml;",215:"times;",216:"Oslash;",217:"Ugrave;",218:"Uacute;",219:"Ucirc;",220:"Uuml;",221:"Yacute;",222:"THORN;",223:"szlig;",224:"agrave;",225:"aacute;",226:"acirc;",227:"atilde;",228:"auml;",229:"aring;",230:"aelig;",231:"ccedil;",232:"egrave;",233:"eacute;",234:"ecirc;",235:"euml;",236:"igrave;",237:"iacute;",238:"icirc;",239:"iuml;",240:"eth;",241:"ntilde;",242:"ograve;",243:"oacute;",244:"ocirc;",245:"otilde;",246:"ouml;",247:"divide;",248:"oslash;",249:"ugrave;",250:"uacute;",251:"ucirc;",252:"uuml;",253:"yacute;",254:"thorn;",255:"yuml;",256:"Amacr;",257:"amacr;",258:"Abreve;",259:"abreve;",260:"Aogon;",261:"aogon;",262:"Cacute;",263:"cacute;",264:"Ccirc;",265:"ccirc;",266:"Cdot;",267:"cdot;",268:"Ccaron;",269:"ccaron;",270:"Dcaron;",271:"dcaron;",272:"Dstrok;",273:"dstrok;",274:"Emacr;",275:"emacr;",278:"Edot;",279:"edot;",280:"Eogon;",281:"eogon;",282:"Ecaron;",283:"ecaron;",284:"Gcirc;",285:"gcirc;",286:"Gbreve;",287:"gbreve;",288:"Gdot;",289:"gdot;",290:"Gcedil;",292:"Hcirc;",293:"hcirc;",294:"Hstrok;",295:"hstrok;",296:"Itilde;",297:"itilde;",298:"Imacr;",299:"imacr;",302:"Iogon;",303:"iogon;",304:"Idot;",305:"inodot;",306:"IJlig;",307:"ijlig;",308:"Jcirc;",309:"jcirc;",310:"Kcedil;",311:"kcedil;",312:"kgreen;",313:"Lacute;",314:"lacute;",315:"Lcedil;",316:"lcedil;",317:"Lcaron;",318:"lcaron;",319:"Lmidot;",320:"lmidot;",321:"Lstrok;",322:"lstrok;",323:"Nacute;",324:"nacute;",325:"Ncedil;",326:"ncedil;",327:"Ncaron;",328:"ncaron;",329:"napos;",330:"ENG;",331:"eng;",332:"Omacr;",333:"omacr;",336:"Odblac;",337:"odblac;",338:"OElig;",339:"oelig;",340:"Racute;",341:"racute;",342:"Rcedil;",343:"rcedil;",344:"Rcaron;",345:"rcaron;",346:"Sacute;",347:"sacute;",348:"Scirc;",349:"scirc;",350:"Scedil;",351:"scedil;",352:"Scaron;",353:"scaron;",354:"Tcedil;",355:"tcedil;",356:"Tcaron;",357:"tcaron;",358:"Tstrok;",359:"tstrok;",360:"Utilde;",361:"utilde;",362:"Umacr;",363:"umacr;",364:"Ubreve;",365:"ubreve;",366:"Uring;",367:"uring;",368:"Udblac;",369:"udblac;",370:"Uogon;",371:"uogon;",372:"Wcirc;",373:"wcirc;",374:"Ycirc;",375:"ycirc;",376:"Yuml;",377:"Zacute;",378:"zacute;",379:"Zdot;",380:"zdot;",381:"Zcaron;",382:"zcaron;",402:"fnof;",437:"imped;",501:"gacute;",567:"jmath;",710:"circ;",711:"Hacek;",728:"breve;",729:"dot;",730:"ring;",731:"ogon;",732:"tilde;",733:"DiacriticalDoubleAcute;",785:"DownBreve;",913:"Alpha;",914:"Beta;",915:"Gamma;",916:"Delta;",917:"Epsilon;",918:"Zeta;",919:"Eta;",920:"Theta;",921:"Iota;",922:"Kappa;",923:"Lambda;",924:"Mu;",925:"Nu;",926:"Xi;",927:"Omicron;",928:"Pi;",929:"Rho;",931:"Sigma;",932:"Tau;",933:"Upsilon;",934:"Phi;",935:"Chi;",936:"Psi;",937:"Omega;",945:"alpha;",946:"beta;",947:"gamma;",948:"delta;",949:"epsilon;",950:"zeta;",951:"eta;",952:"theta;",953:"iota;",954:"kappa;",955:"lambda;",956:"mu;",957:"nu;",958:"xi;",959:"omicron;",960:"pi;",961:"rho;",962:"varsigma;",963:"sigma;",964:"tau;",965:"upsilon;",966:"phi;",967:"chi;",968:"psi;",969:"omega;",977:"vartheta;",978:"upsih;",981:"varphi;",982:"varpi;",988:"Gammad;",989:"gammad;",1008:"varkappa;",1009:"varrho;",1013:"varepsilon;",1014:"bepsi;",1025:"IOcy;",1026:"DJcy;",1027:"GJcy;",1028:"Jukcy;",1029:"DScy;",1030:"Iukcy;",1031:"YIcy;",1032:"Jsercy;",1033:"LJcy;",1034:"NJcy;",1035:"TSHcy;",1036:"KJcy;",1038:"Ubrcy;",1039:"DZcy;",1040:"Acy;",1041:"Bcy;",1042:"Vcy;",1043:"Gcy;",1044:"Dcy;",1045:"IEcy;",1046:"ZHcy;",1047:"Zcy;",1048:"Icy;",1049:"Jcy;",1050:"Kcy;",1051:"Lcy;",1052:"Mcy;",1053:"Ncy;",1054:"Ocy;",1055:"Pcy;",1056:"Rcy;",1057:"Scy;",1058:"Tcy;",1059:"Ucy;",1060:"Fcy;",1061:"KHcy;",1062:"TScy;",1063:"CHcy;",1064:"SHcy;",1065:"SHCHcy;",1066:"HARDcy;",1067:"Ycy;",1068:"SOFTcy;",1069:"Ecy;",1070:"YUcy;",1071:"YAcy;",1072:"acy;",1073:"bcy;",1074:"vcy;",1075:"gcy;",1076:"dcy;",1077:"iecy;",1078:"zhcy;",1079:"zcy;",1080:"icy;",1081:"jcy;",1082:"kcy;",1083:"lcy;",1084:"mcy;",1085:"ncy;",1086:"ocy;",1087:"pcy;",1088:"rcy;",1089:"scy;",1090:"tcy;",1091:"ucy;",1092:"fcy;",1093:"khcy;",1094:"tscy;",1095:"chcy;",1096:"shcy;",1097:"shchcy;",1098:"hardcy;",1099:"ycy;",1100:"softcy;",1101:"ecy;",1102:"yucy;",1103:"yacy;",1105:"iocy;",1106:"djcy;",1107:"gjcy;",1108:"jukcy;",1109:"dscy;",1110:"iukcy;",1111:"yicy;",1112:"jsercy;",1113:"ljcy;",1114:"njcy;",1115:"tshcy;",1116:"kjcy;",1118:"ubrcy;",1119:"dzcy;",8194:"ensp;",8195:"emsp;",8196:"emsp13;",8197:"emsp14;",8199:"numsp;",8200:"puncsp;",8201:"ThinSpace;",8202:"VeryThinSpace;",8203:"ZeroWidthSpace;",8204:"zwnj;",8205:"zwj;",8206:"lrm;",8207:"rlm;",8208:"hyphen;",8211:"ndash;",8212:"mdash;",8213:"horbar;",8214:"Vert;",8216:"OpenCurlyQuote;",8217:"rsquor;",8218:"sbquo;",8220:"OpenCurlyDoubleQuote;",8221:"rdquor;",8222:"ldquor;",8224:"dagger;",8225:"ddagger;",8226:"bullet;",8229:"nldr;",8230:"mldr;",8240:"permil;",8241:"pertenk;",8242:"prime;",8243:"Prime;",8244:"tprime;",8245:"bprime;",8249:"lsaquo;",8250:"rsaquo;",8254:"OverBar;",8257:"caret;",8259:"hybull;",8260:"frasl;",8271:"bsemi;",8279:"qprime;",8287:"MediumSpace;",8288:"NoBreak;",8289:"ApplyFunction;",8290:"it;",8291:"InvisibleComma;",8364:"euro;",8411:"TripleDot;",8412:"DotDot;",8450:"Copf;",8453:"incare;",8458:"gscr;",8459:"Hscr;",8460:"Poincareplane;",8461:"quaternions;",8462:"planckh;",8463:"plankv;",8464:"Iscr;",8465:"imagpart;",8466:"Lscr;",8467:"ell;",8469:"Nopf;",8470:"numero;",8471:"copysr;",8472:"wp;",8473:"primes;",8474:"rationals;",8475:"Rscr;",8476:"Rfr;",8477:"Ropf;",8478:"rx;",8482:"trade;",8484:"Zopf;",8487:"mho;",8488:"Zfr;",8489:"iiota;",8492:"Bscr;",8493:"Cfr;",8495:"escr;",8496:"expectation;",8497:"Fscr;",8499:"phmmat;",8500:"oscr;",8501:"aleph;",8502:"beth;",8503:"gimel;",8504:"daleth;",8517:"DD;",8518:"DifferentialD;",8519:"exponentiale;",8520:"ImaginaryI;",8531:"frac13;",8532:"frac23;",8533:"frac15;",8534:"frac25;",8535:"frac35;",8536:"frac45;",8537:"frac16;",8538:"frac56;",8539:"frac18;",8540:"frac38;",8541:"frac58;",8542:"frac78;",8592:"slarr;",8593:"uparrow;",8594:"srarr;",8595:"ShortDownArrow;",8596:"leftrightarrow;",8597:"varr;",8598:"UpperLeftArrow;",8599:"UpperRightArrow;",8600:"searrow;",8601:"swarrow;",8602:"nleftarrow;",8603:"nrightarrow;",8605:"rightsquigarrow;",8606:"twoheadleftarrow;",8607:"Uarr;",8608:"twoheadrightarrow;",8609:"Darr;",8610:"leftarrowtail;",8611:"rightarrowtail;",8612:"mapstoleft;",8613:"UpTeeArrow;",8614:"RightTeeArrow;",8615:"mapstodown;",8617:"larrhk;",8618:"rarrhk;",8619:"looparrowleft;",8620:"rarrlp;",8621:"leftrightsquigarrow;",8622:"nleftrightarrow;",8624:"lsh;",8625:"rsh;",8626:"ldsh;",8627:"rdsh;",8629:"crarr;",8630:"curvearrowleft;",8631:"curvearrowright;",8634:"olarr;",8635:"orarr;",8636:"lharu;",8637:"lhard;",8638:"upharpoonright;",8639:"upharpoonleft;",8640:"RightVector;",8641:"rightharpoondown;",8642:"RightDownVector;",8643:"LeftDownVector;",8644:"rlarr;",8645:"UpArrowDownArrow;",8646:"lrarr;",8647:"llarr;",8648:"uuarr;",8649:"rrarr;",8650:"downdownarrows;",8651:"ReverseEquilibrium;",8652:"rlhar;",8653:"nLeftarrow;",8654:"nLeftrightarrow;",8655:"nRightarrow;",8656:"Leftarrow;",8657:"Uparrow;",8658:"Rightarrow;",8659:"Downarrow;",8660:"Leftrightarrow;",8661:"vArr;",8662:"nwArr;",8663:"neArr;",8664:"seArr;",8665:"swArr;",8666:"Lleftarrow;",8667:"Rrightarrow;",8669:"zigrarr;",8676:"LeftArrowBar;",8677:"RightArrowBar;",8693:"duarr;",8701:"loarr;",8702:"roarr;",8703:"hoarr;",8704:"forall;",8705:"complement;",8706:"PartialD;",8707:"Exists;",8708:"NotExists;",8709:"varnothing;",8711:"nabla;",8712:"isinv;",8713:"notinva;",8715:"SuchThat;",8716:"NotReverseElement;",8719:"Product;",8720:"Coproduct;",8721:"sum;",8722:"minus;",8723:"mp;",8724:"plusdo;",8726:"ssetmn;",8727:"lowast;",8728:"SmallCircle;",8730:"Sqrt;",8733:"vprop;",8734:"infin;",8735:"angrt;",8736:"angle;",8737:"measuredangle;",8738:"angsph;",8739:"VerticalBar;",8740:"nsmid;",8741:"spar;",8742:"nspar;",8743:"wedge;",8744:"vee;",8745:"cap;",8746:"cup;",8747:"Integral;",8748:"Int;",8749:"tint;",8750:"oint;",8751:"DoubleContourIntegral;",8752:"Cconint;",8753:"cwint;",8754:"cwconint;",8755:"CounterClockwiseContourIntegral;",8756:"therefore;",8757:"because;",8758:"ratio;",8759:"Proportion;",8760:"minusd;",8762:"mDDot;",8763:"homtht;",8764:"Tilde;",8765:"bsim;",8766:"mstpos;",8767:"acd;",8768:"wreath;",8769:"nsim;",8770:"esim;",8771:"TildeEqual;",8772:"nsimeq;",8773:"TildeFullEqual;",8774:"simne;",8775:"NotTildeFullEqual;",8776:"TildeTilde;",8777:"NotTildeTilde;",8778:"approxeq;",8779:"apid;",8780:"bcong;",8781:"CupCap;",8782:"HumpDownHump;",8783:"HumpEqual;",8784:"esdot;",8785:"eDot;",8786:"fallingdotseq;",8787:"risingdotseq;",8788:"coloneq;",8789:"eqcolon;",8790:"eqcirc;",8791:"cire;",8793:"wedgeq;",8794:"veeeq;",8796:"trie;",8799:"questeq;",8800:"NotEqual;",8801:"equiv;",8802:"NotCongruent;",8804:"leq;",8805:"GreaterEqual;",8806:"LessFullEqual;",8807:"GreaterFullEqual;",8808:"lneqq;",8809:"gneqq;",8810:"NestedLessLess;",8811:"NestedGreaterGreater;",8812:"twixt;",8813:"NotCupCap;",8814:"NotLess;",8815:"NotGreater;",8816:"NotLessEqual;",8817:"NotGreaterEqual;",8818:"lsim;",8819:"gtrsim;",8820:"NotLessTilde;",8821:"NotGreaterTilde;",8822:"lg;",8823:"gtrless;",8824:"ntlg;",8825:"ntgl;",8826:"Precedes;",8827:"Succeeds;",8828:"PrecedesSlantEqual;",8829:"SucceedsSlantEqual;",8830:"prsim;",8831:"succsim;",8832:"nprec;",8833:"nsucc;",8834:"subset;",8835:"supset;",8836:"nsub;",8837:"nsup;",8838:"SubsetEqual;",8839:"supseteq;",8840:"nsubseteq;",8841:"nsupseteq;",8842:"subsetneq;",8843:"supsetneq;",8845:"cupdot;",8846:"uplus;",8847:"SquareSubset;",8848:"SquareSuperset;",8849:"SquareSubsetEqual;",8850:"SquareSupersetEqual;",8851:"SquareIntersection;",8852:"SquareUnion;",8853:"oplus;",8854:"ominus;",8855:"otimes;",8856:"osol;",8857:"odot;",8858:"ocir;",8859:"oast;",8861:"odash;",8862:"plusb;",8863:"minusb;",8864:"timesb;",8865:"sdotb;",8866:"vdash;",8867:"LeftTee;",8868:"top;",8869:"UpTee;",8871:"models;",8872:"vDash;",8873:"Vdash;",8874:"Vvdash;",8875:"VDash;",8876:"nvdash;",8877:"nvDash;",8878:"nVdash;",8879:"nVDash;",8880:"prurel;",8882:"vltri;",8883:"vrtri;",8884:"trianglelefteq;",8885:"trianglerighteq;",8886:"origof;",8887:"imof;",8888:"mumap;",8889:"hercon;",8890:"intercal;",8891:"veebar;",8893:"barvee;",8894:"angrtvb;",8895:"lrtri;",8896:"xwedge;",8897:"xvee;",8898:"xcap;",8899:"xcup;",8900:"diamond;",8901:"sdot;",8902:"Star;",8903:"divonx;",8904:"bowtie;",8905:"ltimes;",8906:"rtimes;",8907:"lthree;",8908:"rthree;",8909:"bsime;",8910:"cuvee;",8911:"cuwed;",8912:"Subset;",8913:"Supset;",8914:"Cap;",8915:"Cup;",8916:"pitchfork;",8917:"epar;",8918:"ltdot;",8919:"gtrdot;",8920:"Ll;",8921:"ggg;",8922:"LessEqualGreater;",8923:"gtreqless;",8926:"curlyeqprec;",8927:"curlyeqsucc;",8928:"nprcue;",8929:"nsccue;",8930:"nsqsube;",8931:"nsqsupe;",8934:"lnsim;",8935:"gnsim;",8936:"prnsim;",8937:"succnsim;",8938:"ntriangleleft;",8939:"ntriangleright;",8940:"ntrianglelefteq;",8941:"ntrianglerighteq;",8942:"vellip;",8943:"ctdot;",8944:"utdot;",8945:"dtdot;",8946:"disin;",8947:"isinsv;",8948:"isins;",8949:"isindot;",8950:"notinvc;",8951:"notinvb;",8953:"isinE;",8954:"nisd;",8955:"xnis;",8956:"nis;",8957:"notnivc;",8958:"notnivb;",8965:"barwedge;",8966:"doublebarwedge;",8968:"LeftCeiling;",8969:"RightCeiling;",8970:"lfloor;",8971:"RightFloor;",8972:"drcrop;",8973:"dlcrop;",8974:"urcrop;",8975:"ulcrop;",8976:"bnot;",8978:"profline;",8979:"profsurf;",8981:"telrec;",8982:"target;",8988:"ulcorner;",8989:"urcorner;",8990:"llcorner;",8991:"lrcorner;",8994:"sfrown;",8995:"ssmile;",9005:"cylcty;",9006:"profalar;",9014:"topbot;",9021:"ovbar;",9023:"solbar;",9084:"angzarr;",9136:"lmoustache;",9137:"rmoustache;",9140:"tbrk;",9141:"UnderBracket;",9142:"bbrktbrk;",9180:"OverParenthesis;",9181:"UnderParenthesis;",9182:"OverBrace;",9183:"UnderBrace;",9186:"trpezium;",9191:"elinters;",9251:"blank;",9416:"oS;",9472:"HorizontalLine;",9474:"boxv;",9484:"boxdr;",9488:"boxdl;",9492:"boxur;",9496:"boxul;",9500:"boxvr;",9508:"boxvl;",9516:"boxhd;",9524:"boxhu;",9532:"boxvh;",9552:"boxH;",9553:"boxV;",9554:"boxdR;",9555:"boxDr;",9556:"boxDR;",9557:"boxdL;",9558:"boxDl;",9559:"boxDL;",9560:"boxuR;",9561:"boxUr;",9562:"boxUR;",9563:"boxuL;",9564:"boxUl;",9565:"boxUL;",9566:"boxvR;",9567:"boxVr;",9568:"boxVR;",9569:"boxvL;",9570:"boxVl;",9571:"boxVL;",9572:"boxHd;",9573:"boxhD;",9574:"boxHD;",9575:"boxHu;",9576:"boxhU;",9577:"boxHU;",9578:"boxvH;",9579:"boxVh;",9580:"boxVH;",9600:"uhblk;",9604:"lhblk;",9608:"block;",9617:"blk14;",9618:"blk12;",9619:"blk34;",9633:"square;",9642:"squf;",9643:"EmptyVerySmallSquare;",9645:"rect;",9646:"marker;",9649:"fltns;",9651:"xutri;",9652:"utrif;",9653:"utri;",9656:"rtrif;",9657:"triangleright;",9661:"xdtri;",9662:"dtrif;",9663:"triangledown;",9666:"ltrif;",9667:"triangleleft;",9674:"lozenge;",9675:"cir;",9708:"tridot;",9711:"xcirc;",9720:"ultri;",9721:"urtri;",9722:"lltri;",9723:"EmptySmallSquare;",9724:"FilledSmallSquare;",9733:"starf;",9734:"star;",9742:"phone;",9792:"female;",9794:"male;",9824:"spadesuit;",9827:"clubsuit;",9829:"heartsuit;",9830:"diams;",9834:"sung;",9837:"flat;",9838:"natural;",9839:"sharp;",10003:"checkmark;",10007:"cross;",10016:"maltese;",10038:"sext;",10072:"VerticalSeparator;",10098:"lbbrk;",10099:"rbbrk;",10184:"bsolhsub;",10185:"suphsol;",10214:"lobrk;",10215:"robrk;",10216:"LeftAngleBracket;",10217:"RightAngleBracket;",10218:"Lang;",10219:"Rang;",10220:"loang;",10221:"roang;",10229:"xlarr;",10230:"xrarr;",10231:"xharr;",10232:"xlArr;",10233:"xrArr;",10234:"xhArr;",10236:"xmap;",10239:"dzigrarr;",10498:"nvlArr;",10499:"nvrArr;",10500:"nvHarr;",10501:"Map;",10508:"lbarr;",10509:"rbarr;",10510:"lBarr;",10511:"rBarr;",10512:"RBarr;",10513:"DDotrahd;",10514:"UpArrowBar;",10515:"DownArrowBar;",10518:"Rarrtl;",10521:"latail;",10522:"ratail;",10523:"lAtail;",10524:"rAtail;",10525:"larrfs;",10526:"rarrfs;",10527:"larrbfs;",10528:"rarrbfs;",10531:"nwarhk;",10532:"nearhk;",10533:"searhk;",10534:"swarhk;",10535:"nwnear;",10536:"toea;",10537:"tosa;",10538:"swnwar;",10547:"rarrc;",10549:"cudarrr;",10550:"ldca;",10551:"rdca;",10552:"cudarrl;",10553:"larrpl;",10556:"curarrm;",10557:"cularrp;",10565:"rarrpl;",10568:"harrcir;",10569:"Uarrocir;",10570:"lurdshar;",10571:"ldrushar;",10574:"LeftRightVector;",10575:"RightUpDownVector;",10576:"DownLeftRightVector;",10577:"LeftUpDownVector;",10578:"LeftVectorBar;",10579:"RightVectorBar;",10580:"RightUpVectorBar;",10581:"RightDownVectorBar;",10582:"DownLeftVectorBar;",10583:"DownRightVectorBar;",10584:"LeftUpVectorBar;",10585:"LeftDownVectorBar;",10586:"LeftTeeVector;",10587:"RightTeeVector;",10588:"RightUpTeeVector;",10589:"RightDownTeeVector;",10590:"DownLeftTeeVector;",10591:"DownRightTeeVector;",10592:"LeftUpTeeVector;",10593:"LeftDownTeeVector;",10594:"lHar;",10595:"uHar;",10596:"rHar;",10597:"dHar;",10598:"luruhar;",10599:"ldrdhar;",10600:"ruluhar;",10601:"rdldhar;",10602:"lharul;",10603:"llhard;",10604:"rharul;",10605:"lrhard;",10606:"UpEquilibrium;",10607:"ReverseUpEquilibrium;",10608:"RoundImplies;",10609:"erarr;",10610:"simrarr;",10611:"larrsim;",10612:"rarrsim;",10613:"rarrap;",10614:"ltlarr;",10616:"gtrarr;",10617:"subrarr;",10619:"suplarr;",10620:"lfisht;",10621:"rfisht;",10622:"ufisht;",10623:"dfisht;",10629:"lopar;",10630:"ropar;",10635:"lbrke;",10636:"rbrke;",10637:"lbrkslu;",10638:"rbrksld;",10639:"lbrksld;",10640:"rbrkslu;",10641:"langd;",10642:"rangd;",10643:"lparlt;",10644:"rpargt;",10645:"gtlPar;",10646:"ltrPar;",10650:"vzigzag;",10652:"vangrt;",10653:"angrtvbd;",10660:"ange;",10661:"range;",10662:"dwangle;",10663:"uwangle;",10664:"angmsdaa;",10665:"angmsdab;",10666:"angmsdac;",10667:"angmsdad;",10668:"angmsdae;",10669:"angmsdaf;",10670:"angmsdag;",10671:"angmsdah;",10672:"bemptyv;",10673:"demptyv;",10674:"cemptyv;",10675:"raemptyv;",10676:"laemptyv;",10677:"ohbar;",10678:"omid;",10679:"opar;",10681:"operp;",10683:"olcross;",10684:"odsold;",10686:"olcir;",10687:"ofcir;",10688:"olt;",10689:"ogt;",10690:"cirscir;",10691:"cirE;",10692:"solb;",10693:"bsolb;",10697:"boxbox;",10701:"trisb;",10702:"rtriltri;",10703:"LeftTriangleBar;",10704:"RightTriangleBar;",10716:"iinfin;",10717:"infintie;",10718:"nvinfin;",10723:"eparsl;",10724:"smeparsl;",10725:"eqvparsl;",10731:"lozf;",10740:"RuleDelayed;",10742:"dsol;",10752:"xodot;",10753:"xoplus;",10754:"xotime;",10756:"xuplus;",10758:"xsqcup;",10764:"qint;",10765:"fpartint;",10768:"cirfnint;",10769:"awint;",10770:"rppolint;",10771:"scpolint;",10772:"npolint;",10773:"pointint;",10774:"quatint;",10775:"intlarhk;",10786:"pluscir;",10787:"plusacir;",10788:"simplus;",10789:"plusdu;",10790:"plussim;",10791:"plustwo;",10793:"mcomma;",10794:"minusdu;",10797:"loplus;",10798:"roplus;",10799:"Cross;",10800:"timesd;",10801:"timesbar;",10803:"smashp;",10804:"lotimes;",10805:"rotimes;",10806:"otimesas;",10807:"Otimes;",10808:"odiv;",10809:"triplus;",10810:"triminus;",10811:"tritime;",10812:"iprod;",10815:"amalg;",10816:"capdot;",
10818:"ncup;",10819:"ncap;",10820:"capand;",10821:"cupor;",10822:"cupcap;",10823:"capcup;",10824:"cupbrcap;",10825:"capbrcup;",10826:"cupcup;",10827:"capcap;",10828:"ccups;",10829:"ccaps;",10832:"ccupssm;",10835:"And;",10836:"Or;",10837:"andand;",10838:"oror;",10839:"orslope;",10840:"andslope;",10842:"andv;",10843:"orv;",10844:"andd;",10845:"ord;",10847:"wedbar;",10854:"sdote;",10858:"simdot;",10861:"congdot;",10862:"easter;",10863:"apacir;",10864:"apE;",10865:"eplus;",10866:"pluse;",10867:"Esim;",10868:"Colone;",10869:"Equal;",10871:"eDDot;",10872:"equivDD;",10873:"ltcir;",10874:"gtcir;",10875:"ltquest;",10876:"gtquest;",10877:"LessSlantEqual;",10878:"GreaterSlantEqual;",10879:"lesdot;",10880:"gesdot;",10881:"lesdoto;",10882:"gesdoto;",10883:"lesdotor;",10884:"gesdotol;",10885:"lessapprox;",10886:"gtrapprox;",10887:"lneq;",10888:"gneq;",10889:"lnapprox;",10890:"gnapprox;",10891:"lesseqqgtr;",10892:"gtreqqless;",10893:"lsime;",10894:"gsime;",10895:"lsimg;",10896:"gsiml;",10897:"lgE;",10898:"glE;",10899:"lesges;",10900:"gesles;",10901:"eqslantless;",10902:"eqslantgtr;",10903:"elsdot;",10904:"egsdot;",10905:"el;",10906:"eg;",10909:"siml;",10910:"simg;",10911:"simlE;",10912:"simgE;",10913:"LessLess;",10914:"GreaterGreater;",10916:"glj;",10917:"gla;",10918:"ltcc;",10919:"gtcc;",10920:"lescc;",10921:"gescc;",10922:"smt;",10923:"lat;",10924:"smte;",10925:"late;",10926:"bumpE;",10927:"preceq;",10928:"succeq;",10931:"prE;",10932:"scE;",10933:"prnE;",10934:"succneqq;",10935:"precapprox;",10936:"succapprox;",10937:"prnap;",10938:"succnapprox;",10939:"Pr;",10940:"Sc;",10941:"subdot;",10942:"supdot;",10943:"subplus;",10944:"supplus;",10945:"submult;",10946:"supmult;",10947:"subedot;",10948:"supedot;",10949:"subseteqq;",10950:"supseteqq;",10951:"subsim;",10952:"supsim;",10955:"subsetneqq;",10956:"supsetneqq;",10959:"csub;",10960:"csup;",10961:"csube;",10962:"csupe;",10963:"subsup;",10964:"supsub;",10965:"subsub;",10966:"supsup;",10967:"suphsub;",10968:"supdsub;",10969:"forkv;",10970:"topfork;",10971:"mlcp;",10980:"DoubleLeftTee;",10982:"Vdashl;",10983:"Barv;",10984:"vBar;",10985:"vBarv;",10987:"Vbar;",10988:"Not;",10989:"bNot;",10990:"rnmid;",10991:"cirmid;",10992:"midcir;",10993:"topcir;",10994:"nhpar;",10995:"parsim;",11005:"parsl;",64256:"fflig;",64257:"filig;",64258:"fllig;",64259:"ffilig;",64260:"ffllig;"}},function(e,t,n){function s(e){if("string"!=typeof e)throw new TypeError("Expected a String");return e.replace(/&(#?[^;\W]+;?)/g,function(e,t){var n;if(n=/^#(\d+);?$/.exec(t))return a.ucs2.encode([parseInt(n[1],10)]);if(n=/^#[Xx]([A-Fa-f0-9]+);?/.exec(t))return a.ucs2.encode([parseInt(n[1],16)]);var s=/;$/.test(t),o=s?t.replace(/;$/,""):t,i=r[o]||s&&r[t];return"number"==typeof i?a.ucs2.encode([i]):"string"==typeof i?i:"&"+t})}var a=n(475),r=n(478);e.exports=s},function(e,t){e.exports={"Aacute;":"",Aacute:"","aacute;":"",aacute:"","Abreve;":"","abreve;":"","ac;":"","acd;":"","acE;":"","Acirc;":"",Acirc:"","acirc;":"",acirc:"","acute;":"",acute:"","Acy;":"","acy;":"","AElig;":"",AElig:"","aelig;":"",aelig:"","af;":"","Afr;":"","afr;":"","Agrave;":"",Agrave:"","agrave;":"",agrave:"","alefsym;":"","aleph;":"","Alpha;":"","alpha;":"","Amacr;":"","amacr;":"","amalg;":"","AMP;":"&",AMP:"&","amp;":"&",amp:"&","And;":"","and;":"","andand;":"","andd;":"","andslope;":"","andv;":"","ang;":"","ange;":"","angle;":"","angmsd;":"","angmsdaa;":"","angmsdab;":"","angmsdac;":"","angmsdad;":"","angmsdae;":"","angmsdaf;":"","angmsdag;":"","angmsdah;":"","angrt;":"","angrtvb;":"","angrtvbd;":"","angsph;":"","angst;":"","angzarr;":"","Aogon;":"","aogon;":"","Aopf;":"","aopf;":"","ap;":"","apacir;":"","apE;":"","ape;":"","apid;":"","apos;":"'","ApplyFunction;":"","approx;":"","approxeq;":"","Aring;":"",Aring:"","aring;":"",aring:"","Ascr;":"","ascr;":"","Assign;":"","ast;":"*","asymp;":"","asympeq;":"","Atilde;":"",Atilde:"","atilde;":"",atilde:"","Auml;":"",Auml:"","auml;":"",auml:"","awconint;":"","awint;":"","backcong;":"","backepsilon;":"","backprime;":"","backsim;":"","backsimeq;":"","Backslash;":"","Barv;":"","barvee;":"","Barwed;":"","barwed;":"","barwedge;":"","bbrk;":"","bbrktbrk;":"","bcong;":"","Bcy;":"","bcy;":"","bdquo;":"","becaus;":"","Because;":"","because;":"","bemptyv;":"","bepsi;":"","bernou;":"","Bernoullis;":"","Beta;":"","beta;":"","beth;":"","between;":"","Bfr;":"","bfr;":"","bigcap;":"","bigcirc;":"","bigcup;":"","bigodot;":"","bigoplus;":"","bigotimes;":"","bigsqcup;":"","bigstar;":"","bigtriangledown;":"","bigtriangleup;":"","biguplus;":"","bigvee;":"","bigwedge;":"","bkarow;":"","blacklozenge;":"","blacksquare;":"","blacktriangle;":"","blacktriangledown;":"","blacktriangleleft;":"","blacktriangleright;":"","blank;":"","blk12;":"","blk14;":"","blk34;":"","block;":"","bne;":"=","bnequiv;":"","bNot;":"","bnot;":"","Bopf;":"","bopf;":"","bot;":"","bottom;":"","bowtie;":"","boxbox;":"","boxDL;":"","boxDl;":"","boxdL;":"","boxdl;":"","boxDR;":"","boxDr;":"","boxdR;":"","boxdr;":"","boxH;":"","boxh;":"","boxHD;":"","boxHd;":"","boxhD;":"","boxhd;":"","boxHU;":"","boxHu;":"","boxhU;":"","boxhu;":"","boxminus;":"","boxplus;":"","boxtimes;":"","boxUL;":"","boxUl;":"","boxuL;":"","boxul;":"","boxUR;":"","boxUr;":"","boxuR;":"","boxur;":"","boxV;":"","boxv;":"","boxVH;":"","boxVh;":"","boxvH;":"","boxvh;":"","boxVL;":"","boxVl;":"","boxvL;":"","boxvl;":"","boxVR;":"","boxVr;":"","boxvR;":"","boxvr;":"","bprime;":"","Breve;":"","breve;":"","brvbar;":"",brvbar:"","Bscr;":"","bscr;":"","bsemi;":"","bsim;":"","bsime;":"","bsol;":"\\","bsolb;":"","bsolhsub;":"","bull;":"","bullet;":"","bump;":"","bumpE;":"","bumpe;":"","Bumpeq;":"","bumpeq;":"","Cacute;":"","cacute;":"","Cap;":"","cap;":"","capand;":"","capbrcup;":"","capcap;":"","capcup;":"","capdot;":"","CapitalDifferentialD;":"","caps;":"","caret;":"","caron;":"","Cayleys;":"","ccaps;":"","Ccaron;":"","ccaron;":"","Ccedil;":"",Ccedil:"","ccedil;":"",ccedil:"","Ccirc;":"","ccirc;":"","Cconint;":"","ccups;":"","ccupssm;":"","Cdot;":"","cdot;":"","cedil;":"",cedil:"","Cedilla;":"","cemptyv;":"","cent;":"",cent:"","CenterDot;":"","centerdot;":"","Cfr;":"","cfr;":"","CHcy;":"","chcy;":"","check;":"","checkmark;":"","Chi;":"","chi;":"","cir;":"","circ;":"","circeq;":"","circlearrowleft;":"","circlearrowright;":"","circledast;":"","circledcirc;":"","circleddash;":"","CircleDot;":"","circledR;":"","circledS;":"","CircleMinus;":"","CirclePlus;":"","CircleTimes;":"","cirE;":"","cire;":"","cirfnint;":"","cirmid;":"","cirscir;":"","ClockwiseContourIntegral;":"","CloseCurlyDoubleQuote;":"","CloseCurlyQuote;":"","clubs;":"","clubsuit;":"","Colon;":"","colon;":":","Colone;":"","colone;":"","coloneq;":"","comma;":",","commat;":"@","comp;":"","compfn;":"","complement;":"","complexes;":"","cong;":"","congdot;":"","Congruent;":"","Conint;":"","conint;":"","ContourIntegral;":"","Copf;":"","copf;":"","coprod;":"","Coproduct;":"","COPY;":"",COPY:"","copy;":"",copy:"","copysr;":"","CounterClockwiseContourIntegral;":"","crarr;":"","Cross;":"","cross;":"","Cscr;":"","cscr;":"","csub;":"","csube;":"","csup;":"","csupe;":"","ctdot;":"","cudarrl;":"","cudarrr;":"","cuepr;":"","cuesc;":"","cularr;":"","cularrp;":"","Cup;":"","cup;":"","cupbrcap;":"","CupCap;":"","cupcap;":"","cupcup;":"","cupdot;":"","cupor;":"","cups;":"","curarr;":"","curarrm;":"","curlyeqprec;":"","curlyeqsucc;":"","curlyvee;":"","curlywedge;":"","curren;":"",curren:"","curvearrowleft;":"","curvearrowright;":"","cuvee;":"","cuwed;":"","cwconint;":"","cwint;":"","cylcty;":"","Dagger;":"","dagger;":"","daleth;":"","Darr;":"","dArr;":"","darr;":"","dash;":"","Dashv;":"","dashv;":"","dbkarow;":"","dblac;":"","Dcaron;":"","dcaron;":"","Dcy;":"","dcy;":"","DD;":"","dd;":"","ddagger;":"","ddarr;":"","DDotrahd;":"","ddotseq;":"","deg;":"",deg:"","Del;":"","Delta;":"","delta;":"","demptyv;":"","dfisht;":"","Dfr;":"","dfr;":"","dHar;":"","dharl;":"","dharr;":"","DiacriticalAcute;":"","DiacriticalDot;":"","DiacriticalDoubleAcute;":"","DiacriticalGrave;":"`","DiacriticalTilde;":"","diam;":"","Diamond;":"","diamond;":"","diamondsuit;":"","diams;":"","die;":"","DifferentialD;":"","digamma;":"","disin;":"","div;":"","divide;":"",divide:"","divideontimes;":"","divonx;":"","DJcy;":"","djcy;":"","dlcorn;":"","dlcrop;":"","dollar;":"$","Dopf;":"","dopf;":"","Dot;":"","dot;":"","DotDot;":"","doteq;":"","doteqdot;":"","DotEqual;":"","dotminus;":"","dotplus;":"","dotsquare;":"","doublebarwedge;":"","DoubleContourIntegral;":"","DoubleDot;":"","DoubleDownArrow;":"","DoubleLeftArrow;":"","DoubleLeftRightArrow;":"","DoubleLeftTee;":"","DoubleLongLeftArrow;":"","DoubleLongLeftRightArrow;":"","DoubleLongRightArrow;":"","DoubleRightArrow;":"","DoubleRightTee;":"","DoubleUpArrow;":"","DoubleUpDownArrow;":"","DoubleVerticalBar;":"","DownArrow;":"","Downarrow;":"","downarrow;":"","DownArrowBar;":"","DownArrowUpArrow;":"","DownBreve;":"","downdownarrows;":"","downharpoonleft;":"","downharpoonright;":"","DownLeftRightVector;":"","DownLeftTeeVector;":"","DownLeftVector;":"","DownLeftVectorBar;":"","DownRightTeeVector;":"","DownRightVector;":"","DownRightVectorBar;":"","DownTee;":"","DownTeeArrow;":"","drbkarow;":"","drcorn;":"","drcrop;":"","Dscr;":"","dscr;":"","DScy;":"","dscy;":"","dsol;":"","Dstrok;":"","dstrok;":"","dtdot;":"","dtri;":"","dtrif;":"","duarr;":"","duhar;":"","dwangle;":"","DZcy;":"","dzcy;":"","dzigrarr;":"","Eacute;":"",Eacute:"","eacute;":"",eacute:"","easter;":"","Ecaron;":"","ecaron;":"","ecir;":"","Ecirc;":"",Ecirc:"","ecirc;":"",ecirc:"","ecolon;":"","Ecy;":"","ecy;":"","eDDot;":"","Edot;":"","eDot;":"","edot;":"","ee;":"","efDot;":"","Efr;":"","efr;":"","eg;":"","Egrave;":"",Egrave:"","egrave;":"",egrave:"","egs;":"","egsdot;":"","el;":"","Element;":"","elinters;":"","ell;":"","els;":"","elsdot;":"","Emacr;":"","emacr;":"","empty;":"","emptyset;":"","EmptySmallSquare;":"","emptyv;":"","EmptyVerySmallSquare;":"","emsp;":"","emsp13;":"","emsp14;":"","ENG;":"","eng;":"","ensp;":"","Eogon;":"","eogon;":"","Eopf;":"","eopf;":"","epar;":"","eparsl;":"","eplus;":"","epsi;":"","Epsilon;":"","epsilon;":"","epsiv;":"","eqcirc;":"","eqcolon;":"","eqsim;":"","eqslantgtr;":"","eqslantless;":"","Equal;":"","equals;":"=","EqualTilde;":"","equest;":"","Equilibrium;":"","equiv;":"","equivDD;":"","eqvparsl;":"","erarr;":"","erDot;":"","Escr;":"","escr;":"","esdot;":"","Esim;":"","esim;":"","Eta;":"","eta;":"","ETH;":"",ETH:"","eth;":"",eth:"","Euml;":"",Euml:"","euml;":"",euml:"","euro;":"","excl;":"!","exist;":"","Exists;":"","expectation;":"","ExponentialE;":"","exponentiale;":"","fallingdotseq;":"","Fcy;":"","fcy;":"","female;":"","ffilig;":"","fflig;":"","ffllig;":"","Ffr;":"","ffr;":"","filig;":"","FilledSmallSquare;":"","FilledVerySmallSquare;":"","fjlig;":"fj","flat;":"","fllig;":"","fltns;":"","fnof;":"","Fopf;":"","fopf;":"","ForAll;":"","forall;":"","fork;":"","forkv;":"","Fouriertrf;":"","fpartint;":"","frac12;":"",frac12:"","frac13;":"","frac14;":"",frac14:"","frac15;":"","frac16;":"","frac18;":"","frac23;":"","frac25;":"","frac34;":"",frac34:"","frac35;":"","frac38;":"","frac45;":"","frac56;":"","frac58;":"","frac78;":"","frasl;":"","frown;":"","Fscr;":"","fscr;":"","gacute;":"","Gamma;":"","gamma;":"","Gammad;":"","gammad;":"","gap;":"","Gbreve;":"","gbreve;":"","Gcedil;":"","Gcirc;":"","gcirc;":"","Gcy;":"","gcy;":"","Gdot;":"","gdot;":"","gE;":"","ge;":"","gEl;":"","gel;":"","geq;":"","geqq;":"","geqslant;":"","ges;":"","gescc;":"","gesdot;":"","gesdoto;":"","gesdotol;":"","gesl;":"","gesles;":"","Gfr;":"","gfr;":"","Gg;":"","gg;":"","ggg;":"","gimel;":"","GJcy;":"","gjcy;":"","gl;":"","gla;":"","glE;":"","glj;":"","gnap;":"","gnapprox;":"","gnE;":"","gne;":"","gneq;":"","gneqq;":"","gnsim;":"","Gopf;":"","gopf;":"","grave;":"`","GreaterEqual;":"","GreaterEqualLess;":"","GreaterFullEqual;":"","GreaterGreater;":"","GreaterLess;":"","GreaterSlantEqual;":"","GreaterTilde;":"","Gscr;":"","gscr;":"","gsim;":"","gsime;":"","gsiml;":"","GT;":">",GT:">","Gt;":"","gt;":">",gt:">","gtcc;":"","gtcir;":"","gtdot;":"","gtlPar;":"","gtquest;":"","gtrapprox;":"","gtrarr;":"","gtrdot;":"","gtreqless;":"","gtreqqless;":"","gtrless;":"","gtrsim;":"","gvertneqq;":"","gvnE;":"","Hacek;":"","hairsp;":"","half;":"","hamilt;":"","HARDcy;":"","hardcy;":"","hArr;":"","harr;":"","harrcir;":"","harrw;":"","Hat;":"^","hbar;":"","Hcirc;":"","hcirc;":"","hearts;":"","heartsuit;":"","hellip;":"","hercon;":"","Hfr;":"","hfr;":"","HilbertSpace;":"","hksearow;":"","hkswarow;":"","hoarr;":"","homtht;":"","hookleftarrow;":"","hookrightarrow;":"","Hopf;":"","hopf;":"","horbar;":"","HorizontalLine;":"","Hscr;":"","hscr;":"","hslash;":"","Hstrok;":"","hstrok;":"","HumpDownHump;":"","HumpEqual;":"","hybull;":"","hyphen;":"","Iacute;":"",Iacute:"","iacute;":"",iacute:"","ic;":"","Icirc;":"",Icirc:"","icirc;":"",icirc:"","Icy;":"","icy;":"","Idot;":"","IEcy;":"","iecy;":"","iexcl;":"",iexcl:"","iff;":"","Ifr;":"","ifr;":"","Igrave;":"",Igrave:"","igrave;":"",igrave:"","ii;":"","iiiint;":"","iiint;":"","iinfin;":"","iiota;":"","IJlig;":"","ijlig;":"","Im;":"","Imacr;":"","imacr;":"","image;":"","ImaginaryI;":"","imagline;":"","imagpart;":"","imath;":"","imof;":"","imped;":"","Implies;":"","in;":"","incare;":"","infin;":"","infintie;":"","inodot;":"","Int;":"","int;":"","intcal;":"","integers;":"","Integral;":"","intercal;":"","Intersection;":"","intlarhk;":"","intprod;":"","InvisibleComma;":"","InvisibleTimes;":"","IOcy;":"","iocy;":"","Iogon;":"","iogon;":"","Iopf;":"","iopf;":"","Iota;":"","iota;":"","iprod;":"","iquest;":"",iquest:"","Iscr;":"","iscr;":"","isin;":"","isindot;":"","isinE;":"","isins;":"","isinsv;":"","isinv;":"","it;":"","Itilde;":"","itilde;":"","Iukcy;":"","iukcy;":"","Iuml;":"",Iuml:"","iuml;":"",iuml:"","Jcirc;":"","jcirc;":"","Jcy;":"","jcy;":"","Jfr;":"","jfr;":"","jmath;":"","Jopf;":"","jopf;":"","Jscr;":"","jscr;":"","Jsercy;":"","jsercy;":"","Jukcy;":"","jukcy;":"","Kappa;":"","kappa;":"","kappav;":"","Kcedil;":"","kcedil;":"","Kcy;":"","kcy;":"","Kfr;":"","kfr;":"","kgreen;":"","KHcy;":"","khcy;":"","KJcy;":"","kjcy;":"","Kopf;":"","kopf;":"","Kscr;":"","kscr;":"","lAarr;":"","Lacute;":"","lacute;":"","laemptyv;":"","lagran;":"","Lambda;":"","lambda;":"","Lang;":"","lang;":"","langd;":"","langle;":"","lap;":"","Laplacetrf;":"","laquo;":"",laquo:"","Larr;":"","lArr;":"","larr;":"","larrb;":"","larrbfs;":"","larrfs;":"","larrhk;":"","larrlp;":"","larrpl;":"","larrsim;":"","larrtl;":"","lat;":"","lAtail;":"","latail;":"","late;":"","lates;":"","lBarr;":"","lbarr;":"","lbbrk;":"","lbrace;":"{","lbrack;":"[","lbrke;":"","lbrksld;":"","lbrkslu;":"","Lcaron;":"","lcaron;":"","Lcedil;":"","lcedil;":"","lceil;":"","lcub;":"{","Lcy;":"","lcy;":"","ldca;":"","ldquo;":"","ldquor;":"","ldrdhar;":"","ldrushar;":"","ldsh;":"","lE;":"","le;":"","LeftAngleBracket;":"","LeftArrow;":"","Leftarrow;":"","leftarrow;":"","LeftArrowBar;":"","LeftArrowRightArrow;":"","leftarrowtail;":"","LeftCeiling;":"","LeftDoubleBracket;":"","LeftDownTeeVector;":"","LeftDownVector;":"","LeftDownVectorBar;":"","LeftFloor;":"","leftharpoondown;":"","leftharpoonup;":"","leftleftarrows;":"","LeftRightArrow;":"","Leftrightarrow;":"","leftrightarrow;":"","leftrightarrows;":"","leftrightharpoons;":"","leftrightsquigarrow;":"","LeftRightVector;":"","LeftTee;":"","LeftTeeArrow;":"","LeftTeeVector;":"","leftthreetimes;":"","LeftTriangle;":"","LeftTriangleBar;":"","LeftTriangleEqual;":"","LeftUpDownVector;":"","LeftUpTeeVector;":"","LeftUpVector;":"","LeftUpVectorBar;":"","LeftVector;":"","LeftVectorBar;":"","lEg;":"","leg;":"","leq;":"","leqq;":"","leqslant;":"","les;":"","lescc;":"","lesdot;":"","lesdoto;":"","lesdotor;":"","lesg;":"","lesges;":"","lessapprox;":"","lessdot;":"","lesseqgtr;":"","lesseqqgtr;":"","LessEqualGreater;":"","LessFullEqual;":"","LessGreater;":"","lessgtr;":"","LessLess;":"","lesssim;":"","LessSlantEqual;":"","LessTilde;":"","lfisht;":"","lfloor;":"","Lfr;":"","lfr;":"","lg;":"","lgE;":"","lHar;":"","lhard;":"","lharu;":"","lharul;":"","lhblk;":"","LJcy;":"","ljcy;":"","Ll;":"","ll;":"","llarr;":"","llcorner;":"","Lleftarrow;":"","llhard;":"","lltri;":"","Lmidot;":"","lmidot;":"","lmoust;":"","lmoustache;":"","lnap;":"","lnapprox;":"","lnE;":"","lne;":"","lneq;":"","lneqq;":"","lnsim;":"","loang;":"","loarr;":"","lobrk;":"","LongLeftArrow;":"","Longleftarrow;":"","longleftarrow;":"","LongLeftRightArrow;":"","Longleftrightarrow;":"","longleftrightarrow;":"","longmapsto;":"","LongRightArrow;":"","Longrightarrow;":"","longrightarrow;":"","looparrowleft;":"","looparrowright;":"","lopar;":"","Lopf;":"","lopf;":"","loplus;":"","lotimes;":"","lowast;":"","lowbar;":"_","LowerLeftArrow;":"","LowerRightArrow;":"","loz;":"","lozenge;":"","lozf;":"","lpar;":"(","lparlt;":"","lrarr;":"","lrcorner;":"","lrhar;":"","lrhard;":"","lrm;":"","lrtri;":"","lsaquo;":"","Lscr;":"","lscr;":"","Lsh;":"","lsh;":"","lsim;":"","lsime;":"","lsimg;":"","lsqb;":"[","lsquo;":"","lsquor;":"","Lstrok;":"","lstrok;":"","LT;":"<",LT:"<","Lt;":"","lt;":"<",lt:"<","ltcc;":"","ltcir;":"","ltdot;":"","lthree;":"","ltimes;":"","ltlarr;":"","ltquest;":"","ltri;":"","ltrie;":"","ltrif;":"","ltrPar;":"","lurdshar;":"","luruhar;":"","lvertneqq;":"","lvnE;":"","macr;":"",macr:"","male;":"","malt;":"","maltese;":"","Map;":"","map;":"","mapsto;":"","mapstodown;":"","mapstoleft;":"","mapstoup;":"","marker;":"","mcomma;":"","Mcy;":"","mcy;":"","mdash;":"","mDDot;":"","measuredangle;":"","MediumSpace;":"","Mellintrf;":"","Mfr;":"","mfr;":"","mho;":"","micro;":"",micro:"","mid;":"","midast;":"*","midcir;":"","middot;":"",middot:"","minus;":"","minusb;":"","minusd;":"","minusdu;":"","MinusPlus;":"","mlcp;":"","mldr;":"","mnplus;":"","models;":"","Mopf;":"","mopf;":"","mp;":"","Mscr;":"","mscr;":"","mstpos;":"","Mu;":"","mu;":"","multimap;":"","mumap;":"","nabla;":"","Nacute;":"","nacute;":"","nang;":"","nap;":"","napE;":"","napid;":"","napos;":"","napprox;":"","natur;":"","natural;":"","naturals;":"","nbsp;":"",nbsp:"","nbump;":"","nbumpe;":"","ncap;":"","Ncaron;":"","ncaron;":"","Ncedil;":"","ncedil;":"","ncong;":"","ncongdot;":"","ncup;":"","Ncy;":"","ncy;":"","ndash;":"","ne;":"","nearhk;":"","neArr;":"","nearr;":"","nearrow;":"","nedot;":"","NegativeMediumSpace;":"","NegativeThickSpace;":"","NegativeThinSpace;":"","NegativeVeryThinSpace;":"","nequiv;":"","nesear;":"","nesim;":"","NestedGreaterGreater;":"","NestedLessLess;":"","NewLine;":"\n","nexist;":"","nexists;":"","Nfr;":"","nfr;":"","ngE;":"","nge;":"","ngeq;":"","ngeqq;":"","ngeqslant;":"","nges;":"","nGg;":"","ngsim;":"","nGt;":"","ngt;":"","ngtr;":"","nGtv;":"","nhArr;":"","nharr;":"","nhpar;":"","ni;":"","nis;":"","nisd;":"","niv;":"","NJcy;":"","njcy;":"","nlArr;":"","nlarr;":"","nldr;":"","nlE;":"","nle;":"","nLeftarrow;":"","nleftarrow;":"","nLeftrightarrow;":"","nleftrightarrow;":"","nleq;":"","nleqq;":"","nleqslant;":"","nles;":"","nless;":"","nLl;":"","nlsim;":"","nLt;":"","nlt;":"","nltri;":"","nltrie;":"","nLtv;":"","nmid;":"","NoBreak;":"","NonBreakingSpace;":"","Nopf;":"","nopf;":"","Not;":"","not;":"",not:"","NotCongruent;":"","NotCupCap;":"","NotDoubleVerticalBar;":"","NotElement;":"","NotEqual;":"","NotEqualTilde;":"","NotExists;":"","NotGreater;":"","NotGreaterEqual;":"","NotGreaterFullEqual;":"","NotGreaterGreater;":"","NotGreaterLess;":"","NotGreaterSlantEqual;":"","NotGreaterTilde;":"","NotHumpDownHump;":"","NotHumpEqual;":"","notin;":"","notindot;":"","notinE;":"","notinva;":"","notinvb;":"","notinvc;":"","NotLeftTriangle;":"","NotLeftTriangleBar;":"","NotLeftTriangleEqual;":"","NotLess;":"","NotLessEqual;":"","NotLessGreater;":"","NotLessLess;":"","NotLessSlantEqual;":"","NotLessTilde;":"","NotNestedGreaterGreater;":"","NotNestedLessLess;":"","notni;":"","notniva;":"","notnivb;":"","notnivc;":"","NotPrecedes;":"","NotPrecedesEqual;":"","NotPrecedesSlantEqual;":"","NotReverseElement;":"","NotRightTriangle;":"","NotRightTriangleBar;":"","NotRightTriangleEqual;":"","NotSquareSubset;":"","NotSquareSubsetEqual;":"","NotSquareSuperset;":"","NotSquareSupersetEqual;":"","NotSubset;":"","NotSubsetEqual;":"","NotSucceeds;":"","NotSucceedsEqual;":"","NotSucceedsSlantEqual;":"","NotSucceedsTilde;":"","NotSuperset;":"","NotSupersetEqual;":"","NotTilde;":"","NotTildeEqual;":"","NotTildeFullEqual;":"","NotTildeTilde;":"","NotVerticalBar;":"","npar;":"","nparallel;":"","nparsl;":"","npart;":"","npolint;":"","npr;":"","nprcue;":"","npre;":"","nprec;":"","npreceq;":"","nrArr;":"","nrarr;":"","nrarrc;":"","nrarrw;":"","nRightarrow;":"","nrightarrow;":"","nrtri;":"","nrtrie;":"","nsc;":"","nsccue;":"","nsce;":"","Nscr;":"","nscr;":"","nshortmid;":"","nshortparallel;":"","nsim;":"","nsime;":"","nsimeq;":"","nsmid;":"","nspar;":"","nsqsube;":"","nsqsupe;":"","nsub;":"","nsubE;":"","nsube;":"","nsubset;":"","nsubseteq;":"","nsubseteqq;":"","nsucc;":"","nsucceq;":"","nsup;":"","nsupE;":"","nsupe;":"","nsupset;":"","nsupseteq;":"","nsupseteqq;":"","ntgl;":"","Ntilde;":"",Ntilde:"","ntilde;":"",ntilde:"","ntlg;":"","ntriangleleft;":"","ntrianglelefteq;":"","ntriangleright;":"","ntrianglerighteq;":"","Nu;":"","nu;":"","num;":"#","numero;":"","numsp;":"","nvap;":"","nVDash;":"","nVdash;":"","nvDash;":"","nvdash;":"","nvge;":"","nvgt;":">","nvHarr;":"","nvinfin;":"","nvlArr;":"","nvle;":"","nvlt;":"<","nvltrie;":"","nvrArr;":"","nvrtrie;":"","nvsim;":"","nwarhk;":"","nwArr;":"","nwarr;":"","nwarrow;":"","nwnear;":"","Oacute;":"",Oacute:"","oacute;":"",oacute:"","oast;":"","ocir;":"","Ocirc;":"",Ocirc:"","ocirc;":"",ocirc:"","Ocy;":"","ocy;":"","odash;":"","Odblac;":"","odblac;":"","odiv;":"","odot;":"","odsold;":"","OElig;":"","oelig;":"","ofcir;":"","Ofr;":"","ofr;":"","ogon;":"","Ograve;":"",Ograve:"","ograve;":"",ograve:"","ogt;":"","ohbar;":"","ohm;":"","oint;":"","olarr;":"","olcir;":"","olcross;":"","oline;":"","olt;":"","Omacr;":"","omacr;":"","Omega;":"","omega;":"","Omicron;":"","omicron;":"","omid;":"","ominus;":"","Oopf;":"","oopf;":"","opar;":"","OpenCurlyDoubleQuote;":"","OpenCurlyQuote;":"","operp;":"","oplus;":"","Or;":"","or;":"","orarr;":"","ord;":"","order;":"","orderof;":"","ordf;":"",ordf:"","ordm;":"",ordm:"","origof;":"","oror;":"","orslope;":"","orv;":"","oS;":"","Oscr;":"","oscr;":"","Oslash;":"",Oslash:"","oslash;":"",oslash:"","osol;":"","Otilde;":"",Otilde:"","otilde;":"",otilde:"","Otimes;":"","otimes;":"","otimesas;":"","Ouml;":"",Ouml:"","ouml;":"",ouml:"","ovbar;":"","OverBar;":"","OverBrace;":"","OverBracket;":"","OverParenthesis;":"","par;":"","para;":"",para:"","parallel;":"","parsim;":"","parsl;":"","part;":"","PartialD;":"","Pcy;":"","pcy;":"","percnt;":"%","period;":".","permil;":"","perp;":"","pertenk;":"","Pfr;":"","pfr;":"","Phi;":"","phi;":"","phiv;":"","phmmat;":"","phone;":"","Pi;":"","pi;":"","pitchfork;":"","piv;":"","planck;":"","planckh;":"","plankv;":"","plus;":"+","plusacir;":"","plusb;":"","pluscir;":"","plusdo;":"","plusdu;":"","pluse;":"","PlusMinus;":"","plusmn;":"",plusmn:"","plussim;":"","plustwo;":"","pm;":"","Poincareplane;":"","pointint;":"","Popf;":"","popf;":"","pound;":"",pound:"","Pr;":"","pr;":"","prap;":"","prcue;":"","prE;":"","pre;":"","prec;":"","precapprox;":"","preccurlyeq;":"","Precedes;":"","PrecedesEqual;":"","PrecedesSlantEqual;":"","PrecedesTilde;":"","preceq;":"","precnapprox;":"","precneqq;":"","precnsim;":"","precsim;":"","Prime;":"","prime;":"","primes;":"","prnap;":"","prnE;":"","prnsim;":"","prod;":"","Product;":"","profalar;":"","profline;":"","profsurf;":"","prop;":"","Proportion;":"","Proportional;":"","propto;":"","prsim;":"","prurel;":"","Pscr;":"","pscr;":"","Psi;":"","psi;":"","puncsp;":"","Qfr;":"","qfr;":"","qint;":"","Qopf;":"","qopf;":"","qprime;":"","Qscr;":"","qscr;":"","quaternions;":"","quatint;":"","quest;":"?","questeq;":"","QUOT;":'"',QUOT:'"',"quot;":'"',quot:'"',"rAarr;":"","race;":"","Racute;":"","racute;":"","radic;":"","raemptyv;":"","Rang;":"","rang;":"","rangd;":"","range;":"","rangle;":"","raquo;":"",raquo:"","Rarr;":"","rArr;":"","rarr;":"","rarrap;":"","rarrb;":"","rarrbfs;":"","rarrc;":"","rarrfs;":"","rarrhk;":"","rarrlp;":"","rarrpl;":"","rarrsim;":"","Rarrtl;":"","rarrtl;":"","rarrw;":"","rAtail;":"","ratail;":"","ratio;":"","rationals;":"","RBarr;":"","rBarr;":"","rbarr;":"","rbbrk;":"","rbrace;":"}","rbrack;":"]","rbrke;":"","rbrksld;":"","rbrkslu;":"","Rcaron;":"","rcaron;":"","Rcedil;":"","rcedil;":"","rceil;":"","rcub;":"}","Rcy;":"","rcy;":"","rdca;":"","rdldhar;":"","rdquo;":"","rdquor;":"","rdsh;":"","Re;":"","real;":"","realine;":"","realpart;":"","reals;":"","rect;":"","REG;":"",REG:"","reg;":"",reg:"","ReverseElement;":"","ReverseEquilibrium;":"","ReverseUpEquilibrium;":"","rfisht;":"","rfloor;":"","Rfr;":"","rfr;":"","rHar;":"","rhard;":"","rharu;":"","rharul;":"","Rho;":"","rho;":"","rhov;":"","RightAngleBracket;":"","RightArrow;":"","Rightarrow;":"","rightarrow;":"","RightArrowBar;":"","RightArrowLeftArrow;":"","rightarrowtail;":"","RightCeiling;":"","RightDoubleBracket;":"","RightDownTeeVector;":"","RightDownVector;":"","RightDownVectorBar;":"","RightFloor;":"","rightharpoondown;":"","rightharpoonup;":"","rightleftarrows;":"","rightleftharpoons;":"","rightrightarrows;":"","rightsquigarrow;":"","RightTee;":"","RightTeeArrow;":"","RightTeeVector;":"","rightthreetimes;":"","RightTriangle;":"","RightTriangleBar;":"","RightTriangleEqual;":"","RightUpDownVector;":"","RightUpTeeVector;":"","RightUpVector;":"","RightUpVectorBar;":"","RightVector;":"","RightVectorBar;":"","ring;":"","risingdotseq;":"","rlarr;":"","rlhar;":"","rlm;":"","rmoust;":"","rmoustache;":"","rnmid;":"","roang;":"","roarr;":"","robrk;":"","ropar;":"","Ropf;":"","ropf;":"","roplus;":"","rotimes;":"","RoundImplies;":"","rpar;":")","rpargt;":"","rppolint;":"","rrarr;":"","Rrightarrow;":"","rsaquo;":"","Rscr;":"","rscr;":"","Rsh;":"","rsh;":"","rsqb;":"]","rsquo;":"","rsquor;":"","rthree;":"","rtimes;":"","rtri;":"","rtrie;":"","rtrif;":"","rtriltri;":"","RuleDelayed;":"","ruluhar;":"","rx;":"","Sacute;":"","sacute;":"","sbquo;":"","Sc;":"","sc;":"","scap;":"","Scaron;":"","scaron;":"","sccue;":"","scE;":"","sce;":"","Scedil;":"","scedil;":"","Scirc;":"","scirc;":"","scnap;":"","scnE;":"","scnsim;":"","scpolint;":"","scsim;":"","Scy;":"","scy;":"","sdot;":"","sdotb;":"","sdote;":"","searhk;":"","seArr;":"","searr;":"","searrow;":"","sect;":"",sect:"","semi;":";","seswar;":"","setminus;":"","setmn;":"","sext;":"","Sfr;":"","sfr;":"","sfrown;":"","sharp;":"","SHCHcy;":"","shchcy;":"","SHcy;":"","shcy;":"","ShortDownArrow;":"","ShortLeftArrow;":"","shortmid;":"","shortparallel;":"","ShortRightArrow;":"","ShortUpArrow;":"","shy;":"",shy:"","Sigma;":"","sigma;":"","sigmaf;":"","sigmav;":"","sim;":"","simdot;":"","sime;":"","simeq;":"","simg;":"","simgE;":"","siml;":"","simlE;":"","simne;":"","simplus;":"","simrarr;":"","slarr;":"","SmallCircle;":"","smallsetminus;":"","smashp;":"","smeparsl;":"","smid;":"","smile;":"","smt;":"","smte;":"","smtes;":"","SOFTcy;":"","softcy;":"","sol;":"/","solb;":"","solbar;":"","Sopf;":"","sopf;":"","spades;":"","spadesuit;":"","spar;":"","sqcap;":"","sqcaps;":"","sqcup;":"","sqcups;":"","Sqrt;":"","sqsub;":"","sqsube;":"","sqsubset;":"","sqsubseteq;":"","sqsup;":"","sqsupe;":"","sqsupset;":"","sqsupseteq;":"","squ;":"","Square;":"","square;":"","SquareIntersection;":"","SquareSubset;":"","SquareSubsetEqual;":"","SquareSuperset;":"","SquareSupersetEqual;":"","SquareUnion;":"","squarf;":"","squf;":"","srarr;":"","Sscr;":"","sscr;":"","ssetmn;":"","ssmile;":"","sstarf;":"","Star;":"","star;":"","starf;":"","straightepsilon;":"","straightphi;":"","strns;":"","Sub;":"","sub;":"","subdot;":"","subE;":"","sube;":"","subedot;":"","submult;":"","subnE;":"","subne;":"","subplus;":"","subrarr;":"","Subset;":"","subset;":"","subseteq;":"","subseteqq;":"","SubsetEqual;":"","subsetneq;":"","subsetneqq;":"","subsim;":"","subsub;":"","subsup;":"","succ;":"","succapprox;":"","succcurlyeq;":"","Succeeds;":"","SucceedsEqual;":"","SucceedsSlantEqual;":"","SucceedsTilde;":"","succeq;":"","succnapprox;":"","succneqq;":"","succnsim;":"","succsim;":"","SuchThat;":"","Sum;":"","sum;":"","sung;":"","Sup;":"","sup;":"","sup1;":"",sup1:"","sup2;":"",sup2:"","sup3;":"",sup3:"","supdot;":"","supdsub;":"","supE;":"","supe;":"","supedot;":"","Superset;":"","SupersetEqual;":"","suphsol;":"","suphsub;":"","suplarr;":"","supmult;":"","supnE;":"","supne;":"","supplus;":"","Supset;":"","supset;":"","supseteq;":"","supseteqq;":"","supsetneq;":"","supsetneqq;":"","supsim;":"","supsub;":"","supsup;":"","swarhk;":"","swArr;":"","swarr;":"","swarrow;":"","swnwar;":"","szlig;":"",szlig:"","Tab;":"\t","target;":"","Tau;":"","tau;":"","tbrk;":"","Tcaron;":"","tcaron;":"","Tcedil;":"","tcedil;":"","Tcy;":"","tcy;":"","tdot;":"","telrec;":"","Tfr;":"","tfr;":"","there4;":"","Therefore;":"","therefore;":"","Theta;":"","theta;":"","thetasym;":"","thetav;":"","thickapprox;":"","thicksim;":"","ThickSpace;":"","thinsp;":"","ThinSpace;":"","thkap;":"","thksim;":"","THORN;":"",THORN:"","thorn;":"",thorn:"","Tilde;":"","tilde;":"","TildeEqual;":"","TildeFullEqual;":"","TildeTilde;":"","times;":"",times:"","timesb;":"","timesbar;":"","timesd;":"","tint;":"","toea;":"","top;":"","topbot;":"","topcir;":"","Topf;":"","topf;":"","topfork;":"","tosa;":"","tprime;":"","TRADE;":"","trade;":"","triangle;":"","triangledown;":"","triangleleft;":"","trianglelefteq;":"","triangleq;":"","triangleright;":"","trianglerighteq;":"","tridot;":"","trie;":"","triminus;":"","TripleDot;":"","triplus;":"","trisb;":"","tritime;":"","trpezium;":"","Tscr;":"","tscr;":"","TScy;":"","tscy;":"","TSHcy;":"","tshcy;":"","Tstrok;":"","tstrok;":"","twixt;":"","twoheadleftarrow;":"","twoheadrightarrow;":"","Uacute;":"",Uacute:"","uacute;":"",uacute:"","Uarr;":"","uArr;":"","uarr;":"","Uarrocir;":"","Ubrcy;":"","ubrcy;":"","Ubreve;":"","ubreve;":"","Ucirc;":"",Ucirc:"","ucirc;":"",ucirc:"","Ucy;":"","ucy;":"","udarr;":"","Udblac;":"",
"udblac;":"","udhar;":"","ufisht;":"","Ufr;":"","ufr;":"","Ugrave;":"",Ugrave:"","ugrave;":"",ugrave:"","uHar;":"","uharl;":"","uharr;":"","uhblk;":"","ulcorn;":"","ulcorner;":"","ulcrop;":"","ultri;":"","Umacr;":"","umacr;":"","uml;":"",uml:"","UnderBar;":"_","UnderBrace;":"","UnderBracket;":"","UnderParenthesis;":"","Union;":"","UnionPlus;":"","Uogon;":"","uogon;":"","Uopf;":"","uopf;":"","UpArrow;":"","Uparrow;":"","uparrow;":"","UpArrowBar;":"","UpArrowDownArrow;":"","UpDownArrow;":"","Updownarrow;":"","updownarrow;":"","UpEquilibrium;":"","upharpoonleft;":"","upharpoonright;":"","uplus;":"","UpperLeftArrow;":"","UpperRightArrow;":"","Upsi;":"","upsi;":"","upsih;":"","Upsilon;":"","upsilon;":"","UpTee;":"","UpTeeArrow;":"","upuparrows;":"","urcorn;":"","urcorner;":"","urcrop;":"","Uring;":"","uring;":"","urtri;":"","Uscr;":"","uscr;":"","utdot;":"","Utilde;":"","utilde;":"","utri;":"","utrif;":"","uuarr;":"","Uuml;":"",Uuml:"","uuml;":"",uuml:"","uwangle;":"","vangrt;":"","varepsilon;":"","varkappa;":"","varnothing;":"","varphi;":"","varpi;":"","varpropto;":"","vArr;":"","varr;":"","varrho;":"","varsigma;":"","varsubsetneq;":"","varsubsetneqq;":"","varsupsetneq;":"","varsupsetneqq;":"","vartheta;":"","vartriangleleft;":"","vartriangleright;":"","Vbar;":"","vBar;":"","vBarv;":"","Vcy;":"","vcy;":"","VDash;":"","Vdash;":"","vDash;":"","vdash;":"","Vdashl;":"","Vee;":"","vee;":"","veebar;":"","veeeq;":"","vellip;":"","Verbar;":"","verbar;":"|","Vert;":"","vert;":"|","VerticalBar;":"","VerticalLine;":"|","VerticalSeparator;":"","VerticalTilde;":"","VeryThinSpace;":"","Vfr;":"","vfr;":"","vltri;":"","vnsub;":"","vnsup;":"","Vopf;":"","vopf;":"","vprop;":"","vrtri;":"","Vscr;":"","vscr;":"","vsubnE;":"","vsubne;":"","vsupnE;":"","vsupne;":"","Vvdash;":"","vzigzag;":"","Wcirc;":"","wcirc;":"","wedbar;":"","Wedge;":"","wedge;":"","wedgeq;":"","weierp;":"","Wfr;":"","wfr;":"","Wopf;":"","wopf;":"","wp;":"","wr;":"","wreath;":"","Wscr;":"","wscr;":"","xcap;":"","xcirc;":"","xcup;":"","xdtri;":"","Xfr;":"","xfr;":"","xhArr;":"","xharr;":"","Xi;":"","xi;":"","xlArr;":"","xlarr;":"","xmap;":"","xnis;":"","xodot;":"","Xopf;":"","xopf;":"","xoplus;":"","xotime;":"","xrArr;":"","xrarr;":"","Xscr;":"","xscr;":"","xsqcup;":"","xuplus;":"","xutri;":"","xvee;":"","xwedge;":"","Yacute;":"",Yacute:"","yacute;":"",yacute:"","YAcy;":"","yacy;":"","Ycirc;":"","ycirc;":"","Ycy;":"","ycy;":"","yen;":"",yen:"","Yfr;":"","yfr;":"","YIcy;":"","yicy;":"","Yopf;":"","yopf;":"","Yscr;":"","yscr;":"","YUcy;":"","yucy;":"","Yuml;":"","yuml;":"",yuml:"","Zacute;":"","zacute;":"","Zcaron;":"","zcaron;":"","Zcy;":"","zcy;":"","Zdot;":"","zdot;":"","zeetrf;":"","ZeroWidthSpace;":"","Zeta;":"","zeta;":"","Zfr;":"","zfr;":"","ZHcy;":"","zhcy;":"","zigrarr;":"","Zopf;":"","zopf;":"","Zscr;":"","zscr;":"","zwj;":"","zwnj;":""}},function(e,t,n){"use strict";function s(e){if(!e)return{};for(var t,n,s,a=e.split(";"),o={},i=0;i<a.length;i++)t=a[i].split(":"),n=r(t[0]),s=t[1],n.length>0&&s.length>0&&(o[n]=s);return o}function a(e,t,n,a){var r={key:t};e.attribs&&(r=i(function(e,t){var n=t[0],a=t[1];return n=p[n.replace(/-/,"")]||n,"style"===n?a=s(a):"class"===n&&(n="className"),e[n]=a||n,e},r,o(e.attribs))),a=a||[];var c=null!=n?[n].concat(a):a;return l.createElement.apply(null,[e.name,r].concat(c))}var r=n(480),o=n(492),i=n(493),l=n(2),p=n(495);e.exports={createElement:a}},function(e,t,n){var s=n(481),a=n(487);e.exports=a(function(e){return s(e,!0)})},function(e,t,n){var s=n(482),a=n(486);e.exports=function(e,t){return e=s(e).replace(/[-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),t===!0?a(e):e}},function(e,t,n){var s=n(483),a=n(484),r=String.prototype.trim;e.exports=function(e,t){return e=s(e),!t&&r?r.call(e):(t=a(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))}},function(e,t){e.exports=function(e){return null==e?"":""+e}},function(e,t,n){var s=n(485);e.exports=function(e){return null==e?"\\s":e.source?e.source:"["+s(e)+"]"}},function(e,t,n){var s=n(483);e.exports=function(e){return s(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},function(e,t,n){var s=n(483);e.exports=function(e){return e=s(e),e.charAt(0).toLowerCase()+e.slice(1)}},function(e,t,n){function s(e,t,n){return function(){var a=i.call(arguments),l=n.concat(a),p=[];return t<=o(l)?(p=r(a,n),e.apply(null,p)):t>=l.length?s(e,t,l):s(e,t,r(a,n))}}var a,r=n(488),o=n(491),i=Array.prototype.slice;e.exports=function(e){var t=i.call(arguments,1);return s(e,e.length,t)},e.exports.n=function(e,t){var n=i.call(arguments,2);return s(e,t,n)},e.exports.__=a},function(e,t,n){var s=n(489);e.exports=function(e,t){var n=[];return n=s(t,function(t,n){return"undefined"==typeof n?e.shift():n}),n.concat(e)}},function(e,t,n){var s=n(490);e.exports=function(e,t){var n=[];return s(e,function(e,s){n.push(t(e,s))}),n}},function(e,t){e.exports=function(e,t){for(var n=0;n<e.length;n++)t(n,e[n])}},function(e,t,n){var s=n(490);e.exports=function(e){var t=0;return s(e,function(e,n){"undefined"!=typeof n&&(t+=1)}),t}},function(e,t,n){var s=n(386),a=n(408);e.exports=s(function(e){var t=[];for(var n in e)a(n,e)&&(t[t.length]=[n,e[n]]);return t})},function(e,t,n){var s=n(494),a=n(400);e.exports=s(a)},function(e,t,n){var s=n(386),a=n(385),r=n(387);e.exports=function(e){return function t(n,o,i){switch(arguments.length){case 0:return t;case 1:return r(n)?t:a(function(t,s){return e(n,t,s)});case 2:return r(n)&&r(o)?t:r(n)?a(function(t,n){return e(t,o,n)}):r(o)?a(function(t,s){return e(n,t,s)}):s(function(t){return e(n,o,t)});default:return r(n)&&r(o)&&r(i)?t:r(n)&&r(o)?a(function(t,n){return e(t,n,i)}):r(n)&&r(i)?a(function(t,n){return e(t,o,n)}):r(o)&&r(i)?a(function(t,s){return e(n,t,s)}):r(n)?s(function(t){return e(t,o,i)}):r(o)?s(function(t){return e(n,t,i)}):r(i)?s(function(t){return e(n,o,t)}):e(n,o,i)}}}},function(e,t){"use strict";var n=["accept","acceptCharset","accessKey","action","allowFullScreen","allowTransparency","alt","async","autoComplete","autoFocus","autoPlay","capture","cellPadding","cellSpacing","challenge","charSet","checked","cite","classID","className","colSpan","cols","content","contentEditable","contextMenu","controls","coords","crossOrigin","data","dateTime","default","defer","dir","disabled","download","draggable","encType","form","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","headers","height","hidden","high","href","hrefLang","htmlFor","httpEquiv","icon","id","inputMode","integrity","is","keyParams","keyType","kind","label","lang","list","loop","low","manifest","marginHeight","marginWidth","max","maxLength","media","mediaGroup","method","min","minLength","multiple","muted","name","noValidate","nonce","open","optimum","pattern","placeholder","poster","preload","profile","radioGroup","readOnly","rel","required","reversed","role","rowSpan","rows","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","spellCheck","src","srcDoc","srcLang","srcSet","start","step","style","summary","tabIndex","target","title","type","useMap","value","width","wmode","wrap"],s=["autoCapitalize","autoCorrect","color","itemProp","itemScope","itemType","itemRef","itemID","security","unselectable","results","autoSave"],a=["accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baseProfile","baselineShift","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","ideographic","imageRendering","in","in2","intercept","k","k1","k2","k3","k4","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","scale","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","vHanging","vIdeographic","vMathematical","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","viewBox","viewTarget","visibility","widths","wordSpacing","writingMode","x","x1","x2","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlSpace","y","y1","y2","yChannelSelector","z","zoomAndPan"],r=n.concat(s).concat(a).reduce(function(e,t){var n=t.toLowerCase();return n!==t&&(e[n]=t),e},{});e.exports=r},function(e,t){"use strict";function n(){return!0}e.exports={alwaysValid:n}},function(e,t,n){"use strict";function s(e){var t=e[e.length-1];if(t)return t.title}function a(e){var t=e||"";t!==document.title&&(document.title=t)}var r=n(2),o=n(498),i=r.createClass({displayName:"DocumentTitle",propTypes:{title:r.PropTypes.string.isRequired},render:function(){return this.props.children?r.Children.only(this.props.children):null}});e.exports=o(s,a)(i)},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=n(2),l=s(i),p=n(499),c=s(p),u=n(500),d=s(u);e.exports=function(e,t,n){function s(e){return e.displayName||e.name||"Component"}if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!=typeof n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(p){function u(){f=e(h.map(function(e){return e.props})),m.canUseDOM?t(f):n&&(f=n(f))}if("function"!=typeof p)throw new Error("Expected WrappedComponent to be a React component.");var h=[],f=void 0,m=function(e){function t(){a(this,t),e.apply(this,arguments)}return r(t,e),t.peek=function(){return f},t.rewind=function(){if(t.canUseDOM)throw new Error("You may ony call rewind() on the server. Call peek() to read the current state.");var e=f;return f=void 0,h=[],e},t.prototype.shouldComponentUpdate=function(e){return!d["default"](e,this.props)},t.prototype.componentWillMount=function(){h.push(this),u()},t.prototype.componentDidUpdate=function(){u()},t.prototype.componentWillUnmount=function(){var e=h.indexOf(this);h.splice(e,1),u()},t.prototype.render=function(){return l["default"].createElement(p,this.props)},o(t,null,[{key:"displayName",value:"SideEffect("+s(p)+")",enumerable:!0},{key:"canUseDOM",value:c["default"].canUseDOM,enumerable:!0}]),t}(i.Component);return m}}},function(e,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),s={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=s},function(e,t){"use strict";function n(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var r=s.bind(t),o=0;o<n.length;o++)if(!r(n[o])||e[n[o]]!==t[n[o]])return!1;return!0}var s=Object.prototype.hasOwnProperty;e.exports=n},function(e,t,n){var s,a;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var a=typeof s;if("string"===a||"number"===a)e.push(s);else if(Array.isArray(s))e.push(n.apply(null,s));else if("object"===a)for(var o in s)r.call(s,o)&&s[o]&&e.push(o)}}return e.join(" ")}var r={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(s=[],a=function(){return n}.apply(t,s),!(void 0!==a&&(e.exports=a)))}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={trailingSlashIt:function(e){return"/"!==e.charAt(e.length-1)&&(e+="/"),e}},e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),l=n(2),p=s(l),c=n(164),u=n(372),d=n(504),h=s(d),f=n(374),m=n(501),g=s(m),y=[{label:"Guide",title:"Documentation guide",link:(0,u.prefixLink)(f.config.docsLink),tag:"guide"},{label:"API",title:"API docs",link:(0,u.prefixLink)(f.config.apiLink),tag:"api"},{label:p["default"].createElement("i",{className:"twitter"}),title:"Twitter",link:f.config.twitterUrl,tag:"twitter",type:"social",external:!0},{label:p["default"].createElement("i",{className:"github"}),title:"Github",link:f.config.githubUrl,tag:"github",type:"social",external:!0},{label:p["default"].createElement("i",{className:"discuss"}),title:"Discuss",link:f.config.discussUrl,tag:"discuss",type:"social",external:!0}],b=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={mobileActive:null},_.bindAll(n,"_toggleMobileMenu"),n}return o(t,e),i(t,[{key:"render",value:function(){var e=this.props.activeNav,t=null;if(this.props.show){var n=y.map(function(t){var n=void 0;return n=t.external?p["default"].createElement("a",{title:t.title,href:t.link,className:(0,g["default"])({active:e===t.tag})},t.label):p["default"].createElement(c.Link,{title:t.title,to:t.link,className:(0,g["default"])({active:e===t.tag})},t.label),p["default"].createElement("li",{key:t.tag,className:(0,g["default"])(t.type)},n)});t=p["default"].createElement("header",null,p["default"].createElement("section",{className:"brand"},p["default"].createElement(c.Link,{to:(0,u.prefixLink)("/")},"Waigo.js")),p["default"].createElement("button",{className:"mobile-toggle",onClick:this._toggleMobileMenu},p["default"].createElement("i",{className:(0,g["default"])("menu",{open:this.state.mobileActive})})),p["default"].createElement("ul",{className:(0,g["default"])("nav",{active:this.state.mobileActive})},n))}return p["default"].createElement(h["default"],null,t)}},{key:"_toggleMobileMenu",value:function(e){e.preventDefault(),this.setState({mobileActive:!this.state.mobileActive})}}]),t}(p["default"].Component);t["default"]=b,b.propTypes={activeNav:p["default"].PropTypes.string,show:p["default"].PropTypes.bool},b.defaultProps={activeNav:null,show:!0},e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),c=n(2),u=s(c),d=n(505),h=s(d),f=n(510),m=s(f),g=n(512),y=s(g),b=function(){},w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setHeightOffset=function(){n.setState({height:n.refs.inner.offsetHeight})},n.getScrollY=function(){return void 0!==n.props.parent().pageYOffset?n.props.parent().pageYOffset:void 0!==n.props.parent().scrollTop?n.props.parent().scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},n.getViewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},n.getDocumentHeight=function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,t.scrollHeight,e.offsetHeight,t.offsetHeight,e.clientHeight,t.clientHeight)},n.getElementPhysicalHeight=function(e){return Math.max(e.offsetHeight,e.clientHeight)},n.getElementHeight=function(e){return Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight)},n.getScrollerPhysicalHeight=function(){var e=n.props.parent();return e===window||e===document.body?n.getViewportHeight():n.getElementPhysicalHeight(e)},n.getScrollerHeight=function(){var e=n.props.parent();return e===window||e===document.body?n.getDocumentHeight():n.getElementHeight(e)},n.isOutOfBound=function(e){var t=e<0,s=n.getScrollerPhysicalHeight(),a=n.getScrollerHeight(),r=e+s>a;return t||r},n.handleScroll=function(){n.ticking||(n.ticking=!0,(0,m["default"])(n.update))},n.unpin=function(){n.props.onUnpin(),n.setState({translateY:"-100%",className:"headroom headroom--unpinned"},function(){setTimeout(function(){n.setState({state:"unpinned"})},0)})},n.pin=function(){n.props.onPin(),n.setState({translateY:0,className:"headroom headroom--pinned",state:"pinned"})},n.unfix=function(){n.props.onUnfix(),n.setState({translateY:0,className:"headroom headroom--unfixed",state:"unfixed"})},n.update=function(){if(n.currentScrollY=n.getScrollY(),!n.isOutOfBound(n.currentScrollY)){var e=(0,y["default"])(n.lastKnownScrollY,n.currentScrollY,n.props,n.state),t=e.action;"pin"===t?n.pin():"unpin"===t?n.unpin():"unfix"===t&&n.unfix()}n.lastKnownScrollY=n.currentScrollY,n.ticking=!1},n.currentScrollY=0,n.lastKnownScrollY=0,n.ticking=!1,n.state={state:"unfixed",translateY:0,className:"headroom headroom--unfixed"},n}return i(t,e),p(t,[{key:"componentDidMount",value:function(){this.setHeightOffset(),this.props.disable||this.props.parent().addEventListener("scroll",this.handleScroll)}},{key:"componentWillReceiveProps",value:function(e){e.disable&&!this.props.disable?(this.unfix(),this.props.parent().removeEventListener("scroll",this.handleScroll)):!e.disable&&this.props.disable&&this.props.parent().addEventListener("scroll",this.handleScroll)}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,h["default"])(this.props,e)||!(0,h["default"])(this.state,t)}},{key:"componentDidUpdate",value:function(e){e.children!==this.props.children&&this.setHeightOffset()}},{key:"componentWillUnmount",value:function(){this.props.parent().removeEventListener("scroll",this.handleScroll),window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=a(this.props,[]);delete e.onUnpin,delete e.onPin,delete e.onUnfix,delete e.disableInlineStyles,delete e.disable,delete e.parent,delete e.children,delete e.upTolerance,delete e.downTolerance,delete e.pinStart;var t=e.style,n=e.wrapperStyle,s=a(e,["style","wrapperStyle"]),r={position:this.props.disable||"unfixed"===this.state.state?"relative":"fixed",top:0,left:0,right:0,zIndex:1,WebkitTransform:"translateY("+this.state.translateY+")",MsTransform:"translateY("+this.state.translateY+")",transform:"translateY("+this.state.translateY+")"},o=this.state.className;"unfixed"!==this.state.state&&(r=l({},r,{WebkitTransition:"all .2s ease-in-out",MozTransition:"all .2s ease-in-out",OTransition:"all .2s ease-in-out",transition:"all .2s ease-in-out"}),o+=" headroom--scrolled"),r=this.props.disableInlineStyles?t:l({},r,t);var i=l({},n,{height:this.state.height?this.state.height:null});return u["default"].createElement("div",{style:i,className:"headroom-wrapper"},u["default"].createElement("div",l({ref:"inner"},s,{style:r,className:o}),this.props.children))}}]),t}(c.Component);w.propTypes={parent:c.PropTypes.func,children:c.PropTypes.any.isRequired,disableInlineStyles:c.PropTypes.bool,disable:c.PropTypes.bool,upTolerance:c.PropTypes.number,downTolerance:c.PropTypes.number,onPin:c.PropTypes.func,onUnpin:c.PropTypes.func,onUnfix:c.PropTypes.func,wrapperStyle:c.PropTypes.object,pinStart:c.PropTypes.number,style:c.PropTypes.object},w.defaultProps={parent:function(){return window},disableInlineStyles:!1,disable:!1,upTolerance:5,downTolerance:0,onPin:b,onUnpin:b,onUnfix:b,wrapperStyle:{},pinStart:0},t["default"]=w},function(e,t,n){"use strict";var s=n(506);e.exports=function(e,t,n,a){var r=n?n.call(a,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var o=s(e),i=s(t),l=o.length;if(l!==i.length)return!1;a=a||null;for(var p=Object.prototype.hasOwnProperty.bind(t),c=0;c<l;c++){var u=o[c];if(!p(u))return!1;var d=e[u],h=t[u],f=n?n.call(a,d,h,u):void 0;if(f===!1||void 0===f&&d!==h)return!1}return!0}},function(e,t,n){function s(e){return function(t){return null==t?void 0:t[e]}}function a(e){return null!=e&&o(b(e))}function r(e,t){return e="number"==typeof e||h.test(e)?+e:-1,t=null==t?y:t,e>-1&&e%1==0&&e<t}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=y}function i(e){for(var t=p(e),n=t.length,s=n&&e.length,a=!!s&&o(s)&&(d(e)||u(e)),i=-1,l=[];++i<n;){var c=t[i];(a&&r(c,s)||m.call(e,c))&&l.push(c)}return l}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function p(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&o(t)&&(d(e)||u(e))&&t||0;for(var n=e.constructor,s=-1,a="function"==typeof n&&n.prototype===e,i=Array(t),p=t>0;++s<t;)i[s]=s+"";for(var c in e)p&&r(c,t)||"constructor"==c&&(a||!m.call(e,c))||i.push(c);return i}var c=n(507),u=n(508),d=n(509),h=/^\d+$/,f=Object.prototype,m=f.hasOwnProperty,g=c(Object,"keys"),y=9007199254740991,b=s("length"),w=g?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&a(e)?i(e):l(e)?g(e):[]}:i;e.exports=w},function(e,t){function n(e){return!!e&&"object"==typeof e}function s(e,t){var n=null==e?void 0:e[t];return o(n)?n:void 0}function a(e){return r(e)&&d.call(e)==i}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function o(e){return null!=e&&(a(e)?h.test(c.call(e)):n(e)&&l.test(e))}var i="[object Function]",l=/^\[object .+?Constructor\]$/,p=Object.prototype,c=Function.prototype.toString,u=p.hasOwnProperty,d=p.toString,h=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=s},function(e,t){function n(e){return a(e)&&f.call(e,"callee")&&(!g.call(e,"callee")||m.call(e)==c)}function s(e){return null!=e&&o(e.length)&&!r(e)}function a(e){return l(e)&&s(e)}function r(e){var t=i(e)?m.call(e):"";return t==u||t==d}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return!!e&&"object"==typeof e}var p=9007199254740991,c="[object Arguments]",u="[object Function]",d="[object GeneratorFunction]",h=Object.prototype,f=h.hasOwnProperty,m=h.toString,g=h.propertyIsEnumerable;e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}function s(e,t){var n=null==e?void 0:e[t];return i(n)?n:void 0}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=y}function r(e){return o(e)&&f.call(e)==p}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return null!=e&&(r(e)?m.test(d.call(e)):n(e)&&c.test(e))}var l="[object Array]",p="[object Function]",c=/^\[object .+?Constructor\]$/,u=Object.prototype,d=Function.prototype.toString,h=u.hasOwnProperty,f=u.toString,m=RegExp("^"+d.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=s(Array,"isArray"),y=9007199254740991,b=g||function(e){return n(e)&&a(e.length)&&f.call(e)==l};e.exports=b},function(e,t,n){(function(t){for(var s=n(511),a="undefined"==typeof window?t:window,r=["moz","webkit"],o="AnimationFrame",i=a["request"+o],l=a["cancel"+o]||a["cancelRequest"+o],p=0;!i&&p<r.length;p++)i=a[r[p]+"Request"+o],l=a[r[p]+"Cancel"+o]||a[r[p]+"CancelRequest"+o];if(!i||!l){var c=0,u=0,d=[],h=1e3/60;i=function(e){if(0===d.length){var t=s(),n=Math.max(0,h-(t-c));c=n+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return d.push({handle:++u,callback:e,cancelled:!1}),u},l=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return i.call(a,e)},e.exports.cancel=function(){l.apply(a,arguments)},e.exports.polyfill=function(){a.requestAnimationFrame=i,a.cancelAnimationFrame=l}}).call(t,function(){return this}())},function(e,t,n){(function(t){(function(){var n,s,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-a)/1e6},s=t.hrtime,n=function(){var e;return e=s(),1e9*e[0]+e[1]},a=n()):Date.now?(e.exports=function(){return Date.now()-a},a=Date.now()):(e.exports=function(){return(new Date).getTime()-a},a=(new Date).getTime())}).call(this)}).call(t,n(112))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t>=e?"down":"up",r=Math.abs(t-e);return t<=n.pinStart&&"unfixed"!==s.state?{action:"unfix",scrollDirection:a,distanceScrolled:r}:t<=s.height&&"down"===a&&"unfixed"===s.state?{action:"none",scrollDirection:a,distanceScrolled:r}:"down"===a&&["pinned","unfixed"].indexOf(s.state)>=0&&t>s.height+n.pinStart&&r>n.downTolerance?{action:"unpin",scrollDirection:a,distanceScrolled:r}:"up"===a&&r>n.upTolerance&&["pinned","unfixed"].indexOf(s.state)<0?{action:"pin",scrollDirection:a,distanceScrolled:r}:"up"===a&&t<=s.height&&["pinned","unfixed"].indexOf(s.state)<0?{action:"pin",scrollDirection:a,distanceScrolled:r}:{action:"none",scrollDirection:a,distanceScrolled:r}}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),l=n(2),p=s(l),c=n(374),u=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return p["default"].createElement("footer",null,p["default"].createElement("p",{className:"tagline quoted"},c.config.tagLine),p["default"].createElement("div",{className:"credits"},"Icons made by ",p["default"].createElement("a",{href:"http://www.freepik.com",title:"Freepik"},"Freepik")," from ",p["default"].createElement("a",{href:"http://www.flaticon.com",title:"Flaticon"},"www.flaticon.com")," is licensed by ",p["default"].createElement("a",{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank"},"CC 3.0 BY")),p["default"].createElement("div",{className:"social"},p["default"].createElement("a",{title:"Github",href:c.config.githubUrl},p["default"].createElement("i",{className:"github"})),p["default"].createElement("a",{title:"Twitter",href:c.config.twitterUrl},p["default"].createElement("i",{className:"twitter"})),p["default"].createElement("a",{title:"discuss",href:c.config.discussUrl},p["default"].createElement("i",{className:"discuss"}))))}}]),t}(p["default"].Component);t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),l=n(380),p=s(l),c=n(381),u=(s(c),n(2)),d=s(u),h=n(164),f=n(382),m=(s(f),n(501)),g=s(m),y=(n(374),n(502)),b=s(y),w=n(515),v=s(w),j=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={mobileVisible:!1},p["default"].bindAll(n,"_toggleMobileNav"),n}return o(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){e.page.path!==this.props.page.path&&this.setState({mobileVisible:!1})}},{key:"render",value:function(){var e=this.props.page,t=this._buildNavMenu(this.props.nav,e.path),n=this._calculatePrevAndNextNavLinks(v["default"].flatten(this.props.nav),e.path),s=n.prev?d["default"].createElement(h.Link,{to:b["default"].trailingSlashIt(n.prev.url),className:"prev"}," ",n.prev.label):null,a=n.next?d["default"].createElement(h.Link,{to:b["default"].trailingSlashIt(n.next.url),className:"next"},n.next.label," "):null;return d["default"].createElement("main",{className:"side-nav-layout"},d["default"].createElement("button",{className:"nav mobile",title:"Toggle nav menu",onClick:this._toggleMobileNav},d["default"].createElement("i",{className:(0,g["default"])("arrow",this.state.mobileVisible?"left":"right")})),d["default"].createElement("aside",{className:(0,g["default"])({"mobile visible":this.state.mobileVisible})},t),d["default"].createElement("section",{className:"content"},this.props.children,d["default"].createElement("div",{className:"prev-next"},s,a)))}},{key:"_toggleMobileNav",value:function(e){e.preventDefault(),this.setState({mobileVisible:!this.state.mobileVisible})}},{key:"_buildNavMenu",value:function(e,t,n){n=n||0;var s=[],a=null;for(var r in e.children){var o=e.children[r],i=p["default"].isEmpty(o.children)?null:this._buildNavMenu(o,t,n+1),l=d["default"].createElement(h.Link,{to:o.url+"/"},o.label),c={link:l,sublist:i,classes:{}};0<=t.indexOf(o.url)&&(a=c),s.push(c)}return s=s.map(function(e,t){return e===a&&(e.classes.active=!0),d["default"].createElement("li",{key:t++,className:(0,g["default"])(e.classes)},e.link,e.sublist)}),d["default"].createElement("ul",null,s)}},{key:"_calculatePrevAndNextNavLinks",value:function(e,t){var n=void 0,s={};for(var a in e){var r=e[a];0<=t.indexOf(r.url)?s={prev:n,current:r}:n===s.current&&(s.next=r),n=r}return s}}]),t}(d["default"].Component);t["default"]=j,j.propTypes={nav:d["default"].PropTypes.object,page:d["default"].PropTypes.object},e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(380);t["default"]={flatten:function(e){return s.flatMap(e.children,function(e,t){return[{label:e.label,url:e.url,repoPath:e.repoPath}].concat(s.map(e.children||[],function(t){return{label:e.label+": "+t.label,url:t.url,repoPath:t.repoPath}}))})}},e.exports=t["default"]},function(e,t){e.exports=["application","cli/init","cli/init-gulp","config/base","config/index","controllers/index","controllers/oauth","controllers/user","forms/forgotPassword","forms/login","forms/register","forms/resetPassword","frontend/js/app","models/acl","models/activity","models/cron","models/user","routes/index","routes/oauth","support/acl","support/actionTokens","support/cliCommand","support/cronTasks/notifyAdminsAboutUserStats","support/db/rethinkdb","support/errors","support/forms/field","support/forms/fields/checkbox","support/forms/fields/csrf","support/forms/fields/email","support/forms/fields/hidden","support/forms/fields/number","support/forms/fields/password","support/forms/fields/select","support/forms/fields/text","support/forms/form","support/forms/sanitizers/lib","support/forms/sanitizers/trim","support/forms/validators/compareToField","support/forms/validators/emailAddressNotInUse","support/forms/validators/isEmailAddress","support/forms/validators/isLength","support/forms/validators/lib","support/forms/validators/notEmpty","support/forms/validators/numberInRange","support/lodashMixins","support/logger","support/mailer/base","support/mailer/console","support/mailer/engines/nodeMailer","support/middleware/assertUser","support/middleware/bodyParser","support/middleware/contextHelpers","support/middleware/csrf","support/middleware/currentUser","support/middleware/errorHandler","support/middleware/outputFormats","support/middleware/sessions","support/middleware/staticResources","support/notifications/log","support/notifications/slack","support/oauth/error","support/oauth/index","support/oauth/providers/generic","support/outputFormats/html","support/outputFormats/json","support/promise","support/routeMapper","support/session/store/cookie","support/shutdown/acl","support/shutdown/cron","support/shutdown/db","support/shutdown/listener","support/startup/acl","support/startup/actionTokens","support/startup/activityRecorder","support/startup/appTemplateVars","support/startup/cron","support/startup/db","support/startup/forms","support/startup/listener","support/startup/mailer","support/startup/middleware","support/startup/models","support/startup/notifications","support/startup/routes","support/startup/staticResources","support/viewObjects"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),l=n(2),p=s(l),c=n(518),u=s(c),d=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return p["default"].createElement(u["default"],{page:this.props.route.page})}}]),t}(p["default"].Component);t["default"]=d,d.propTypes={route:p["default"].PropTypes.object},e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),l=n(380),p=s(l),c=n(381),u=s(c),d=n(2),h=s(d),f=n(164),m=n(382),g=s(m),y=n(497),b=s(y),w=n(501),v=(s(w),n(374)),j=n(502),x=s(j),_=n(515),k=s(_),E=n(503),A=s(E),T=n(513),S=s(T),C=n(514),P=s(C),O=n(519),R=k["default"].flatten(O),N=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){var e=this.props.page,t=this._buildContent(e.data.body,e);return h["default"].createElement(b["default"],{title:e.data.title+" | "+v.config.siteTitle},h["default"].createElement("div",{className:"page guide"},h["default"].createElement(A["default"],{activeNav:"guide"}),h["default"].createElement(P["default"],{nav:O,page:e},t),h["default"].createElement(S["default"],null)))}},{key:"_buildContent",value:function(e,t){var n=this,s=t.path,a="index.md"!==t.file.basename,r=new g["default"].ProcessNodeDefinitions(h["default"]),o=[{shouldProcessNode:function(e){return"a"===p["default"].get(e,"name","")&&0>p["default"].get(e,"attribs.href","://").indexOf("://")},processNode:function(e,t){var n=e.attribs.href;n=(a?"../":"./")+n;var r=x["default"].trailingSlashIt(u["default"].resolve(s,n));return h["default"].createElement(f.Link,{to:r},p["default"].get(e,"children.0.data"))}},{shouldProcessNode:function(e){return"code"===p["default"].get(e,"name","")&&"pre"===p["default"].get(e,"parent.name")},processNode:function(e,t){return e.attribs["class"]+=" hljs",r.processDefaultNode.call(n,e,t)}},{shouldProcessNode:function(e){return!0},processNode:r.processDefaultNode}],i=new g["default"].Parser(h["default"]),l=i.parseWithInstructions("<div>"+e+"</div>",function(){return!0},o),c=this._calculateGithubPageUrl(R,s),d=c?h["default"].createElement("a",{className:"github-edit-link",href:c},"Edit page"):null;return h["default"].createElement("div",null,d,l)}},{key:"_calculateGithubPageUrl",value:function(e,t){var n=null,s=!0,a=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(s=(o=i.next()).done);s=!0){var l=o.value;0<=t.indexOf(l.url)&&(n=v.config.githubDocsBaseUrl+"/"+l.repoPath)}}catch(p){a=!0,r=p}finally{try{!s&&i["return"]&&i["return"]()}finally{if(a)throw r}}return n}}]),t}(h["default"].Component);t["default"]=N,N.propTypes={page:h["default"].PropTypes.object},e.exports=t["default"]},function(e,t){e.exports={url:"/docs",children:{introduction:{label:"Introduction",url:"/docs/introduction",children:{motivation:{label:"Motivation",url:"/docs/introduction/motivation",children:{},images:[],repoPath:"Introduction/Motivation.md"},middlewareprimer:{label:"Middleware primer",url:"/docs/introduction/middlewareprimer",children:{},images:[],repoPath:"Introduction/MiddlewarePrimer.md"},folderstructure:{label:"Folder structure",url:"/docs/introduction/folderstructure",children:{},images:[],repoPath:"Introduction/FolderStructure.md"},codingstandard:{label:"Coding standard",url:"/docs/introduction/codingstandard",children:{},images:[],repoPath:"Introduction/CodingStandard.md"}},repoPath:"Introduction/README.md"},gettingstarted:{label:"Getting Started",url:"/docs/gettingstarted",children:{requirements:{label:"Requirements",url:"/docs/gettingstarted/requirements",children:{},images:[],repoPath:"GettingStarted/Requirements.md"},installation:{label:"Installation",url:"/docs/gettingstarted/installation",children:{},images:[],repoPath:"GettingStarted/Installation.md"},runninghelloworld:{label:'Running "Hello World"',url:"/docs/gettingstarted/runninghelloworld",children:{},images:["helloworld.png"],repoPath:"GettingStarted/RunningHelloWorld.md"},buildworkflowlivereload:{label:"Build workflow and Live reload",url:"/docs/gettingstarted/buildworkflowlivereload",children:{},images:[],repoPath:"GettingStarted/BuildWorkflowLiveReload.md"}},repoPath:"GettingStarted/README.md"},extendandoverride:{label:"Extend and Override",url:"/docs/extendandoverride",children:{moduleloader:{label:"Module Loader",url:"/docs/extendandoverride/moduleloader",children:{},images:[],repoPath:"ExtendAndOverride/ModuleLoader.md"},usingplugins:{label:"Using Plugins",url:"/docs/extendandoverride/usingplugins",children:{},images:[],repoPath:"ExtendAndOverride/UsingPlugins.md"},creatingplugins:{label:"Creating Plugins",url:"/docs/extendandoverride/creatingplugins",children:{},images:[],repoPath:"ExtendAndOverride/CreatingPlugins.md"}},repoPath:"ExtendAndOverride/README.md"},commandline:{label:"Command-Line (CLI)",url:"/docs/commandline",children:{usingthecli:{label:"Using the CLI",url:"/docs/commandline/usingthecli",children:{},images:[],repoPath:"CommandLine/UsingTheCLI.md"},creatingcustomcommands:{label:"Creating custom commands",url:"/docs/commandline/creatingcustomcommands",children:{},images:[],repoPath:"CommandLine/CreatingCustomCommands.md"}},repoPath:"CommandLine/README.md"},appconfiguration:{label:"App configuration",url:"/docs/appconfiguration",children:{appobject:{label:"App object",url:"/docs/appconfiguration/appobject",children:{},images:[],repoPath:"AppConfiguration/AppObject.md"},configuration:{label:"Configuration",url:"/docs/appconfiguration/configuration",children:{},images:[],repoPath:"AppConfiguration/Configuration.md"},startupsteps:{label:"Startup steps",url:"/docs/appconfiguration/startupsteps",children:{},images:[],repoPath:"AppConfiguration/StartupSteps.md"},shutdownsteps:{label:"Shutdown steps",url:"/docs/appconfiguration/shutdownsteps",children:{},images:[],repoPath:"AppConfiguration/ShutdownSteps.md"}},repoPath:"AppConfiguration/README.md"},logging:{label:"Logging",url:"/docs/logging",children:{howtouse:{label:"How to use",url:"/docs/logging/howtouse",children:{},images:[],repoPath:"Logging/HowToUse.md"},subcategories:{label:"Sub-categories",url:"/docs/logging/subcategories",children:{},images:[],repoPath:"Logging/SubCategories.md"}},repoPath:"Logging/README.md"
},events:{label:"Events",url:"/docs/events",children:{},repoPath:"Events/README.md"},errorhandling:{label:"Error handling",url:"/docs/errorhandling",children:{builtinerrorclasses:{label:"Built-in Error classes",url:"/docs/errorhandling/builtinerrorclasses",children:{},images:[],repoPath:"ErrorHandling/BuiltInErrorClasses.md"},creatingyourown:{label:"Creating your own",url:"/docs/errorhandling/creatingyourown",children:{},images:[],repoPath:"ErrorHandling/CreatingYourOwn.md"},errormiddleware:{label:"Error middleware",url:"/docs/errorhandling/errormiddleware",children:{},images:[],repoPath:"ErrorHandling/ErrorMiddleware.md"}},repoPath:"ErrorHandling/README.md"},middleware:{label:"Middleware",url:"/docs/middleware",children:{defining:{label:"Defining",url:"/docs/middleware/defining",children:{},images:[],repoPath:"Middleware/Defining.md"},configuring:{label:"Configuring",url:"/docs/middleware/configuring",children:{},images:[],repoPath:"Middleware/Configuring.md"},commonmiddleware:{label:"Common middleware",url:"/docs/middleware/commonmiddleware",children:{},images:[],repoPath:"Middleware/CommonMiddleware.md"}},repoPath:"Middleware/README.md"},controllers:{label:"Controllers",url:"/docs/controllers",children:{},repoPath:"Controllers/README.md"},databaseandmodels:{label:"Database and Models",url:"/docs/databaseandmodels",children:{databaseconnections:{label:"Database connections",url:"/docs/databaseandmodels/databaseconnections",children:{},images:[],repoPath:"DatabaseAndModels/DatabaseConnections.md"},overviewofmodels:{label:"Overview of models",url:"/docs/databaseandmodels/overviewofmodels",children:{},images:[],repoPath:"DatabaseAndModels/OverviewOfModels.md"},definingandusingmodels:{label:"Defining and using models",url:"/docs/databaseandmodels/definingandusingmodels",children:{},images:[],repoPath:"DatabaseAndModels/DefiningAndUsingModels.md"},builtinmodels:{label:"Built-in models",url:"/docs/databaseandmodels/builtinmodels",children:{},images:[],repoPath:"DatabaseAndModels/BuiltInModels.md"},reactiveupdates:{label:"Reactive updates",url:"/docs/databaseandmodels/reactiveupdates",children:{},images:[],repoPath:"DatabaseAndModels/ReactiveUpdates.md"}},repoPath:"DatabaseAndModels/README.md"},routing:{label:"Routing",url:"/docs/routing",children:{howtouse:{label:"How to use",url:"/docs/routing/howtouse",children:{},images:[],repoPath:"Routing/HowToUse.md"},generatingurls:{label:"Generating URLs",url:"/docs/routing/generatingurls",children:{},images:[],repoPath:"Routing/GeneratingUrls.md"},singlepageapps:{label:"Single-page apps",url:"/docs/routing/singlepageapps",children:{},images:[],repoPath:"Routing/SinglePageApps.md"}},repoPath:"Routing/README.md"},renderingoutput:{label:"Rendering output",url:"/docs/renderingoutput",children:{enabling:{label:"Enabling",url:"/docs/renderingoutput/enabling",children:{},images:[],repoPath:"RenderingOutput/Enabling.md"},renderingmethods:{label:"Rendering methods",url:"/docs/renderingoutput/renderingmethods",children:{},images:[],repoPath:"RenderingOutput/RenderingMethods.md"},jsonoutput:{label:"JSON output",url:"/docs/renderingoutput/jsonoutput",children:{},images:[],repoPath:"RenderingOutput/JsonOutput.md"},settingoutputformat:{label:"Setting the output format",url:"/docs/renderingoutput/settingoutputformat",children:{},images:[],repoPath:"RenderingOutput/SettingOutputFormat.md"},customformats:{label:"Custom formats",url:"/docs/renderingoutput/customformats",children:{},images:[],repoPath:"RenderingOutput/CustomFormats.md"}},repoPath:"RenderingOutput/README.md"},viewtemplates:{label:"View templates",url:"/docs/viewtemplates",children:{templatedata:{label:"Template data",url:"/docs/viewtemplates/templatedata",children:{},images:[],repoPath:"ViewTemplates/TemplateData.md"},contextlevelandappleveldata:{label:"Context-level and app-level data",url:"/docs/viewtemplates/contextlevelandappleveldata",children:{},images:[],repoPath:"ViewTemplates/ContextLevelAndAppLevelData.md"}},repoPath:"ViewTemplates/README.md"},staticresources:{label:"Static resources",url:"/docs/staticresources",children:{collationofstaticresources:{label:"Collation of static resources",url:"/docs/staticresources/collationofstaticresources",children:{},images:[],repoPath:"StaticResources/CollationOfStaticResources.md"},requestmiddleware:{label:"Request middleware",url:"/docs/staticresources/requestmiddleware",children:{},images:[],repoPath:"StaticResources/RequestMiddleware.md"},generatingurlpaths:{label:"Generating URL paths",url:"/docs/staticresources/generatingurlpaths",children:{},images:[],repoPath:"StaticResources/GeneratingUrlPaths.md"}},repoPath:"StaticResources/README.md"},sessions:{label:"Sessions",url:"/docs/sessions",children:{},repoPath:"Sessions/README.md"},forms:{label:"Forms",url:"/docs/forms",children:{definingandusing:{label:"Defining and using",url:"/docs/forms/definingandusing",children:{},images:[],repoPath:"Forms/DefiningAndUsing.md"},stateanddirtychecking:{label:"State and dirty-checking",url:"/docs/forms/stateanddirtychecking",children:{},images:[],repoPath:"Forms/StateAndDirtyChecking.md"},sanitizers:{label:"Sanitizers",url:"/docs/forms/sanitizers",children:{},images:[],repoPath:"Forms/Sanitizers.md"},validators:{label:"Validators",url:"/docs/forms/validators",children:{},images:[],repoPath:"Forms/Validators.md"},postvalidationhooks:{label:"Post-validation hooks",url:"/docs/forms/postvalidationhooks",children:{},images:[],repoPath:"Forms/PostValidationHooks.md"},builtinfieldtypes:{label:"Built-in field types",url:"/docs/forms/builtinfieldtypes",children:{},images:[],repoPath:"Forms/BuiltInFieldTypes.md"},customfieldtypes:{label:"Custom field types",url:"/docs/forms/customfieldtypes",children:{},images:[],repoPath:"Forms/CustomFieldTypes.md"}},repoPath:"Forms/README.md"},scaling:{label:"Scaling",url:"/docs/scaling",children:{multiprocessclustering:{label:"Multi-process clustering",url:"/docs/scaling/multiprocessclustering",children:{},images:[],repoPath:"Scaling/MultiProcessClustering.md"}},repoPath:"Scaling/README.md"},bestpractices:{label:"Best practices",url:"/docs/bestpractices",children:{},repoPath:"BestPractices/README.md"}}}},function(e,t){"use strict"},function(e,t,n){"use strict";e.exports=function(e){var t=n(522);return e(t)}},function(e,t,n){function s(e){return n(a(e))}function a(e){return r[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var r={"./404.md":523,"./_template.jsx":375,"./api/application.json":524,"./api/cli/init-gulp.json":525,"./api/cli/init.json":526,"./api/config/base.json":527,"./api/config/index/index.json":528,"./api/controllers/index/index.json":529,"./api/controllers/oauth.json":530,"./api/controllers/user.json":531,"./api/forms/forgotPassword.json":532,"./api/forms/login.json":533,"./api/forms/register.json":534,"./api/forms/resetPassword.json":535,"./api/frontend/js/app.json":536,"./api/index.json":537,"./api/index/index.json":538,"./api/loader.json":539,"./api/models/acl.json":540,"./api/models/activity.json":541,"./api/models/cron.json":542,"./api/models/user.json":543,"./api/routes/index/index.json":544,"./api/routes/oauth.json":545,"./api/support/acl.json":546,"./api/support/actionTokens.json":547,"./api/support/cliCommand.json":548,"./api/support/cronTasks/notifyAdminsAboutUserStats.json":549,"./api/support/db/rethinkdb.json":550,"./api/support/errors.json":551,"./api/support/forms/field.json":552,"./api/support/forms/fields/checkbox.json":553,"./api/support/forms/fields/csrf.json":554,"./api/support/forms/fields/email.json":555,"./api/support/forms/fields/hidden.json":556,"./api/support/forms/fields/number.json":557,"./api/support/forms/fields/password.json":558,"./api/support/forms/fields/select.json":559,"./api/support/forms/fields/text.json":560,"./api/support/forms/form.json":561,"./api/support/forms/sanitizers/lib.json":562,"./api/support/forms/sanitizers/trim.json":563,"./api/support/forms/validators/compareToField.json":564,"./api/support/forms/validators/emailAddressNotInUse.json":565,"./api/support/forms/validators/isEmailAddress.json":566,"./api/support/forms/validators/isLength.json":567,"./api/support/forms/validators/lib.json":568,"./api/support/forms/validators/notEmpty.json":569,"./api/support/forms/validators/numberInRange.json":570,"./api/support/lodashMixins.json":571,"./api/support/logger.json":572,"./api/support/mailer/base.json":573,"./api/support/mailer/console.json":574,"./api/support/mailer/engines/nodeMailer.json":575,"./api/support/middleware/assertUser.json":576,"./api/support/middleware/bodyParser.json":577,"./api/support/middleware/contextHelpers.json":578,"./api/support/middleware/csrf.json":579,"./api/support/middleware/currentUser.json":580,"./api/support/middleware/errorHandler.json":581,"./api/support/middleware/outputFormats.json":582,"./api/support/middleware/sessions.json":583,"./api/support/middleware/staticResources.json":584,"./api/support/notifications/log.json":585,"./api/support/notifications/slack.json":586,"./api/support/oauth/error.json":587,"./api/support/oauth/index/index.json":588,"./api/support/oauth/providers/generic.json":589,"./api/support/outputFormats/html":590,"./api/support/outputFormats/html.json":590,"./api/support/outputFormats/json":591,"./api/support/outputFormats/json.json":591,"./api/support/promise.json":592,"./api/support/routeMapper.json":593,"./api/support/session/store/cookie.json":594,"./api/support/shutdown/acl.json":595,"./api/support/shutdown/cron.json":596,"./api/support/shutdown/db.json":597,"./api/support/shutdown/listener.json":598,"./api/support/startup/acl.json":599,"./api/support/startup/actionTokens.json":600,"./api/support/startup/activityRecorder.json":601,"./api/support/startup/appTemplateVars.json":602,"./api/support/startup/cron.json":603,"./api/support/startup/db.json":604,"./api/support/startup/forms.json":605,"./api/support/startup/listener.json":606,"./api/support/startup/mailer.json":607,"./api/support/startup/middleware.json":608,"./api/support/startup/models.json":609,"./api/support/startup/notifications.json":610,"./api/support/startup/routes.json":611,"./api/support/startup/staticResources.json":612,"./api/support/viewObjects.json":613,"./docs/appconfiguration/appobject.md":614,"./docs/appconfiguration/configuration.md":615,"./docs/appconfiguration/index.md":616,"./docs/appconfiguration/shutdownsteps.md":617,"./docs/appconfiguration/startupsteps.md":618,"./docs/bestpractices/index.md":619,"./docs/commandline/creatingcustomcommands.md":620,"./docs/commandline/index.md":621,"./docs/commandline/usingthecli.md":622,"./docs/controllers/index.md":623,"./docs/databaseandmodels/builtinmodels.md":624,"./docs/databaseandmodels/databaseconnections.md":625,"./docs/databaseandmodels/definingandusingmodels.md":626,"./docs/databaseandmodels/index.md":627,"./docs/databaseandmodels/overviewofmodels.md":628,"./docs/databaseandmodels/reactiveupdates.md":629,"./docs/errorhandling/builtinerrorclasses.md":630,"./docs/errorhandling/creatingyourown.md":631,"./docs/errorhandling/errormiddleware.md":632,"./docs/errorhandling/index.md":633,"./docs/events/index.md":634,"./docs/extendandoverride/creatingplugins.md":635,"./docs/extendandoverride/index.md":636,"./docs/extendandoverride/moduleloader.md":637,"./docs/extendandoverride/usingplugins.md":638,"./docs/forms/builtinfieldtypes.md":639,"./docs/forms/customfieldtypes.md":640,"./docs/forms/definingandusing.md":641,"./docs/forms/index.md":642,"./docs/forms/postvalidationhooks.md":643,"./docs/forms/sanitizers.md":644,"./docs/forms/stateanddirtychecking.md":645,"./docs/forms/validators.md":646,"./docs/gettingstarted/buildworkflowlivereload.md":647,"./docs/gettingstarted/index.md":648,"./docs/gettingstarted/installation.md":649,"./docs/gettingstarted/requirements.md":650,"./docs/gettingstarted/runninghelloworld.md":651,"./docs/guide.md":652,"./docs/index.md":653,"./docs/introduction/codingstandard.md":654,"./docs/introduction/folderstructure.md":655,"./docs/introduction/index.md":656,"./docs/introduction/middlewareprimer.md":657,"./docs/introduction/motivation.md":658,"./docs/logging/howtouse.md":659,"./docs/logging/index.md":660,"./docs/logging/subcategories.md":661,"./docs/middleware/commonmiddleware.md":662,"./docs/middleware/configuring.md":663,"./docs/middleware/defining.md":664,"./docs/middleware/index.md":665,"./docs/renderingoutput/customformats.md":666,"./docs/renderingoutput/enabling.md":667,"./docs/renderingoutput/index.md":668,"./docs/renderingoutput/jsonoutput.md":669,"./docs/renderingoutput/renderingmethods.md":670,"./docs/renderingoutput/settingoutputformat.md":671,"./docs/routing/generatingurls.md":672,"./docs/routing/howtouse.md":673,"./docs/routing/index.md":674,"./docs/routing/singlepageapps.md":675,"./docs/scaling/index.md":676,"./docs/scaling/multiprocessclustering.md":677,"./docs/sessions/index.md":678,"./docs/staticresources/collationofstaticresources.md":679,"./docs/staticresources/generatingurlpaths.md":680,"./docs/staticresources/index.md":681,"./docs/staticresources/requestmiddleware.md":682,"./docs/viewobjects/index.md":683,"./docs/viewtemplates/contextlevelandappleveldata.md":684,"./docs/viewtemplates/index.md":685,"./docs/viewtemplates/templatedata.md":686,"./index.js":687};s.keys=function(){return Object.keys(r)},s.resolve=a,e.exports=s,s.id=522},function(e,t){e.exports={path:"/404.html",body:"<h1>NOT FOUND</h1>\n<p>You just hit a route that doesnt exist the sadness.</p>\n"}},function(e,t){e.exports={file:{description:["The Waigo application object."]},classes:[{name:"Application",tags:{},description:["The application object.","This is the main entry point for all Waigo applications. It is responsible \nfor constructing the Koa `app` object, loading in the app \nconfiguration, initialising logging and running all startup steps."],parents:[{name:"EventEmitter"}],instance:{methods:{_initKoa:{name:"_initKoa",tags:{"protected":[{description:null}]},description:["Initialize koa."],params:[],returns:[],"throws":[],code:["  _initKoa () {","    var self = this;","","    this.koa = koa();","","    /**","     * Default middleware!","     */","    this.koa.use(function*(next) {","      this.App = self;","","      yield next;","    });","  }"]},_loadConfig:{name:"_loadConfig",tags:{param:[{description:"Additional options.",type:{optional:!0,name:"Object"},name:"options"},{description:"Function to pass configuration object to once loaded.\nShould have signature `function (config: Object)`.",type:{optional:!0,name:"Function"},name:"options.postConfig"}],"protected":[{description:null}]},description:["Load in the application configuration.","This gets called automatically during startup."],params:[{name:"options",description:["Additional options."],type:{optional:!0,name:"Object"}}],returns:[],"throws":[],code:["  * _loadConfig (options) {","    options = options || {};","","    debug('Loading configuration');","","    this.config = waigo.load('config/index')();","","    if (options.postConfig) {","      debug('Executing dynamic configuration');","","      options.postConfig.call(null, this.config);","    }","  }"]},_onError:{name:"_onError",tags:{param:[{description:"The error.",type:{name:"Error"},name:"err"}],"protected":[{description:null}]},description:["Handle an error."],params:[{name:"err",description:["The error."],type:{name:"Error"}}],returns:[],"throws":[],code:["  _onError (err) {","    this.logger.error(err.stack ? err.stack : err);","  }"]},_setupLogger:{name:"_setupLogger",tags:{param:[{description:"Logger configuration.",type:{name:"Object"},name:"cfg"}],see:[{description:"support/logger.js"}],"protected":[{description:null}]},description:["Setup application logger.","Upon completion `this.logger` will be set."],params:[{name:"cfg",description:["Logger configuration."],type:{name:"Object"}}],returns:[],"throws":[],code:["  * _setupLogger (cfg) {","    debug('Setup logging');","","    this.logger = logger.init(cfg);","","    process.on('uncaughtException', this._onError);","    this.koa.on('error', this._onError);","    this.on('error', this._onError);","  }"]},start:{name:"start",tags:{param:[{description:"Additional options.",type:{optional:!0,name:"Object"},name:"options"},{description:"Function to pass configuration object to once loaded.\nShould have signature `function (config: Object)`.",type:{optional:!0,name:"Function"},name:"options.postConfig"}]},description:["Start the application."],params:[{name:"options",description:["Additional options."],type:{optional:!0,name:"Object"}}],returns:[],"throws":[],code:["  * start (options) {","    if (this.config) {","      throw new AppError('Application already started');","    }","","    // load config","    yield this._loadConfig(options);","","    // logging","    yield this._setupLogger(this.config.logging);","","    for (let stepName of this.config.startupSteps) {","      this.logger.debug(`Running startup step: ${stepName}`);","      ","      /*jshint -W030 */","      yield waigo.load(`support/startup/${stepName}`)(this);","    }","","    this.logger.info('Startup complete');","  }"]},shutdown:{name:"shutdown",tags:{},description:["Stop the application.","This will reset the internal Koa `app` object."],params:[],returns:[],"throws":[],code:["  * shutdown () {","    if (!this.config) {","      throw new AppError('Application not started');","    }","","    // remove uncaught exception handler","    process.removeListener('uncaughtException', this._onError);","","    // run shutdown steps","    for (let stepName of this.config.shutdownSteps) {","      this.logger.debug(`Running shutdown step: ${stepName}`);","","      /*jshint -W030 */","      yield waigo.load(`support/shutdown/${stepName}`)(this);","    }","","    this.logger.info('Shutdown complete');","","    delete this.config;","","    // reset koa","    this._initKoa();","  }"]}}},"static":null,code:["class Application extends EventEmitter {","  constructor () {","    super();","","    this._initKoa();","","    this._onError = this._onError.bind(this);","  }","","","  /**","   * Initialize koa.","   *","   * @protected","   */","  _initKoa () {","    var self = this;","","    this.koa = koa();","","    /**","     * Default middleware!","     */","    this.koa.use(function*(next) {","      this.App = self;","","      yield next;","    });","  }","","","","  /**","   * Load in the application configuration.","   *","   * This gets called automatically during startup.","   *","   * @param {Object} [options] Additional options.","   * @param {Function} [options.postConfig] Function to pass configuration object to once loaded.","   * Should have signature `function (config: Object)`.","   * ","   * @protected","   */","  * _loadConfig (options) {","    options = options || {};","","    debug('Loading configuration');","","    this.config = waigo.load('config/index')();","","    if (options.postConfig) {","      debug('Executing dynamic configuration');","","      options.postConfig.call(null, this.config);","    }","  }","","","  /**","   * Handle an error.","   *","   * @param {Error} err The error.","   * ","   * @protected","   */","  _onError (err) {","    this.logger.error(err.stack ? err.stack : err);","  };","","","","  /**","   * Setup application logger.","   *","   * Upon completion `this.logger` will be set.","   *","   * @param {Object} cfg Logger configuration.","   *","   * @see support/logger.js","   * @protected","   */","  * _setupLogger (cfg) {","    debug('Setup logging');","","    this.logger = logger.init(cfg);","","    process.on('uncaughtException', this._onError);","    this.koa.on('error', this._onError);","    this.on('error', this._onError);","  }","","","","  /**","   * Start the application.","   *","   * @param {Object} [options] Additional options.","   * @param {Function} [options.postConfig] Function to pass configuration object to once loaded.","   * Should have signature `function (config: Object)`.","   */","  * start (options) {","    if (this.config) {","      throw new AppError('Application already started');","    }","","    // load config","    yield this._loadConfig(options);","","    // logging","    yield this._setupLogger(this.config.logging);","","    for (let stepName of this.config.startupSteps) {","      this.logger.debug(`Running startup step: ${stepName}`);","      ","      /*jshint -W030 */","      yield waigo.load(`support/startup/${stepName}`)(this);","    }","","    this.logger.info('Startup complete');","  }","","","","  /**","   * Stop the application.","   *","   * This will reset the internal Koa `app` object.","   */","  * shutdown () {","    if (!this.config) {","      throw new AppError('Application not started');","    }","","    // remove uncaught exception handler","    process.removeListener('uncaughtException', this._onError);","","    // run shutdown steps","    for (let stepName of this.config.shutdownSteps) {","      this.logger.debug(`Running shutdown step: ${stepName}`);","","      /*jshint -W030 */","      yield waigo.load(`support/shutdown/${stepName}`)(this);","    }","","    this.logger.info('Shutdown complete');","","    delete this.config;","","    // reset koa","    this._initKoa();","  };","","","}"]}],variables:[{name:"use",tags:{},description:["Default middleware!"],code:["    this.koa.use(function*(next) {","      this.App = self;","","      yield next;","    });"]},{name:"application",tags:{type:[{description:null,type:{name:"Class"}}]},description:[],type:{description:null,type:{name:"Class"}},code:["module.exports = Application;"]}]}},function(e,t){e.exports={classes:[{name:"Command",tags:{},description:["This command initialises a skeleton Gulpfile with associated tasks."],parents:[{name:"AbstractCommand"}],instance:{methods:{run:{name:"run",tags:{},description:["Run this command."],params:[],returns:[],"throws":[],code:["  * run () {","    if (!this.fileExists('package.json')) {","      return this.log('Please run \"npm init\" first');","    }","","    yield this.installPkgs([","      'lodash',","      'coffee-script',","      'gulp@3.9.x',","      'gulp-server-livereload',","      'gulp-if@1.2.x',","      'gulp-autoprefixer@2.1.x',","      'gulp-minify-css@0.4.x',","      'gulp-concat@2.4.x',","      'gulp-stylus@2.0.x',","      'nib',","      'rupture',","      'gulp-uglify@1.1.x',","      'gulp-util@3.0.x',","      'gulp-nodemon@1.0.x',","      'run-sequence',","      'watchify',","      'browserify',","      'vinyl-source-stream2',","      'yargs',","    ], {","      dev: true,","    });","    ","    yield this.copyFile(path.join(FRAMEWORK_FOLDER, 'gulpfile.coffee'), 'gulpfile.coffee');","    yield this.copyFolder(path.join(FRAMEWORK_FOLDER, 'gulp', 'utils'), 'gulp/utils');","    yield _.map([","      'dev-frontend',","      'dev-server',","      'dev',","      'frontend-css',","      'frontend-img',","      'frontend-js',","      'frontend',","    ], (n) => {","      return this.copyFile(path.join(FRAMEWORK_FOLDER, 'gulp', `${n}.coffee`), `gulp/${n}.coffee`);","    });","  }"]}}},"static":null,code:["class Command extends AbstractCommand {","  constructor() {","    super('Initialise and create a Gulpfile and associated tasks for development purposes', []);","  }","","  /**","   * Run this command.","   */","  * run () {","    if (!this.fileExists('package.json')) {","      return this.log('Please run \"npm init\" first');","    }","","    yield this.installPkgs([","      'lodash',","      'coffee-script',","      'gulp@3.9.x',","      'gulp-server-livereload',","      'gulp-if@1.2.x',","      'gulp-autoprefixer@2.1.x',","      'gulp-minify-css@0.4.x',","      'gulp-concat@2.4.x',","      'gulp-stylus@2.0.x',","      'nib',","      'rupture',","      'gulp-uglify@1.1.x',","      'gulp-util@3.0.x',","      'gulp-nodemon@1.0.x',","      'run-sequence',","      'watchify',","      'browserify',","      'vinyl-source-stream2',","      'yargs',","    ], {","      dev: true,","    });","    ","    yield this.copyFile(path.join(FRAMEWORK_FOLDER, 'gulpfile.coffee'), 'gulpfile.coffee');","    yield this.copyFolder(path.join(FRAMEWORK_FOLDER, 'gulp', 'utils'), 'gulp/utils');","    yield _.map([","      'dev-frontend',","      'dev-server',","      'dev',","      'frontend-css',","      'frontend-img',","      'frontend-js',","      'frontend',","    ], (n) => {","      return this.copyFile(path.join(FRAMEWORK_FOLDER, 'gulp', `${n}.coffee`), `gulp/${n}.coffee`);","    });","  }","}"]}]}},function(e,t){e.exports={classes:[{name:"Command",tags:{},description:["The init CLI command.","This command initialises a skeleton Waigo application with a basic view template."],parents:[{name:"AbstractCommand"}],instance:{methods:{run:{name:"run",tags:{},description:["Run this command."],params:[],returns:[],"throws":[],code:["  * run () {","    if (!this.fileExists('package.json')) {","      return this.log('Please run \"npm init\" first');","    }","","    yield this.installPkgs([","      'waigo',","      'semver',","    ]);","","    yield this.copyFile(path.join(DATA_FOLDER, 'README.md'), 'src/README.md');","    yield this.copyFile(path.join(DATA_FOLDER, '_gitignore'), '.gitignore');","    yield this.copyFile(path.join(FRAMEWORK_FOLDER, 'start-app.js'), 'start-app.js');","    yield this.copyFile(path.join(WAIGO_FOLDER, 'config', 'base.js'), 'src/config/base.js');","  }"]}}},"static":null,code:["class Command extends AbstractCommand {","  constructor() {","    super('Initialise and create a skeleton Waigo app', []);","  }","","  /**","   * Run this command.","   */","  * run () {","    if (!this.fileExists('package.json')) {","      return this.log('Please run \"npm init\" first');","    }","","    yield this.installPkgs([","      'waigo',","      'semver',","    ]);","","    yield this.copyFile(path.join(DATA_FOLDER, 'README.md'), 'src/README.md');","    yield this.copyFile(path.join(DATA_FOLDER, '_gitignore'), '.gitignore');","    yield this.copyFile(path.join(FRAMEWORK_FOLDER, 'start-app.js'), 'start-app.js');","    yield this.copyFile(path.join(WAIGO_FOLDER, 'config', 'base.js'), 'src/config/base.js');","  }","}"]}]}},function(e,t){e.exports={methods:[{name:"base",tags:{param:[{description:"config Initial configuration object.",type:{name:"Object"},name:"config"}]},description:["Base configuration","This is the base configuration for Waigo applications and is always loaded \nbefore any environment-specific configuration files.","This configuration module file is designed for running an app in a \ndevelopment environment and contains all the default available config \noptions in Waigo.","For production-quality deployments it is recommended you create a \n`production.js` config file and set the `NODE_ENV` environment variable to \nequal `production`."],params:[{name:"config",description:["config Initial configuration object."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function(config) {","  /**","   * Server listening port.","   */","  config.port = (process.env.PORT || 3000);","","","  /**","   * Base web URL without the trailing slash","   */","  config.baseURL = 'http://localhost:' + config.port;","","","","  /**","   * Logging config (log4js-node).","   *","   * See [https://github.com/nomiddlename/log4js-node/wiki/Appenders](log4j docs) for config options.","   */","  config.logging = {","    // default logging category","    category: 'app',","    // minimum logging level","    minLevel: 'DEBUG',","    // where logging output should go","    appenders: [","      {","        type: 'console',","        layout: {","          type: 'pattern',","          pattern: '(%h-%z) %[[%d] [%p] [%c]%] - %m',","          tokens: {","            workerId: _.get(cluster, 'worker.id', 0)","          }","        }","      }","    ],","  };","","","  /**","   * Static resources folder (relative to app folder)","   */","  config.staticResources = {","    folder: '../public'","  };","","","  /**","   * The steps to execute as part of the application startup process.","   *","   * Each of these corresponds to a module file under the `support/startup` path.","   */","  config.startupSteps = [","    'db',","    'models',","    'forms',","    'activityRecorder',","    'notifications',","    'acl',","    'middleware',","    'routes',","    'staticResources',","    'actionTokens',","    'mailer',","    'cron',","    'appTemplateVars',","    'listener',","  ];","","","","  /**","   * The steps to execute as part of the application shutdown process.","   *","   * Each of these corresponds to a module file under the `support/shutdown` path.","   */","  config.shutdownSteps = [","    'listener',","    'cron',","    'acl',","    'db',","  ];","","","  /** ","   * Error handling config.","   */","  config.errors = {","    /** ","     * Whether stack traces should be included when rendering errors.","     * @type {Boolean}","     */","    showStack: true,","  };","","","","  /**","   * Database connection.","   *","   * You can specify multiple database connections as long as `main` connection","   * is also always specified. The built-in model classes will store their data ","   * in this connection.","   */","  config.db = {","    // connection id","    main: {","      // currently supported: rethinkdb","      type: 'rethinkdb',","      serverConfig: {","        // name of db","        db: 'waigo',","        // servers to connect to","        servers: [","          {","            host: '127.0.0.1',","            port: 28015,","          }","        ],","      }","    }","  };","  ","   ","   ","","","  /**","   * Common middleware for requests. ","   */","","  config.middleware = {};","","  config.middleware.ALL = {","    _order: [","      'errorHandler',","      'staticResources',","      'sessions',","      'outputFormats',","      'currentUser',","      'contextHelpers',","      'csrf',","    ],","    errorHandler: {},","    staticResources: {","      // relative to app folder","      folder: config.staticResources.folder,","      // see support/middleware/staticResources for options","      options: {}","    },","    sessions: {","      // cookie signing keys","      keys: [","        _.uuid.v4(),","        _.uuid.v4(),","        _.uuid.v4(),","      ],","      // session cookie name","      name: 'waigo',","      // session storage","      store: {","        // session store type (name of module file in `support/session/store`)","        type: 'cookie',","        // session store config","        config: {","          // nothing needed for cookie storage","        }","      },","      // session cookie options","      cookie: {","        // cookie expires in...","        validForDays: 7,","        // cookie valid for url path...","        path: '/'","      }","    },","    outputFormats: {","      // List of enabled formats along with options to pass to each formatter. */","      formats: {","        html: {","          // Default view template filename extension when not explicitly provided. */","          ext: 'pug',","          // Whether compiled templates should be cached in memory (not all template engines honour this)","          cache: false,","          // Map file extension to rendering engine","          engine: {","            'pug': 'pug',","          }","        },","        json: {}","      },","      // Use this URL query parameter to determine output format. */","      paramName: 'format',","      // Default format, in case URL query parameter which determines output format isn't provided. */","      default: 'html'","    }","  };","","  // POST/PUT routes should get parsed request bodies","  config.middleware.POST = config.middleware.PUT = {","    _order: [","      'bodyParser',","      'csrf',","    ],","    bodyParser: {","      limit: '16mb',","    },","  };","","","","","  /**","   * Mailer config.","   */","  config.mailer = {","    // default 'from' address","    from: 'System <waigo@localhost>',","    type: 'console',","","    // type: 'smtp',","    // smtp: {","    //   host: '127.0.0.1',","    //   port: 25,","    //   secure: false,","    //   ignoreTLS: true,","    //   tls: {","    //     rejectUnauthorized: false","    //   },","    //   maxConnections: 1,","    //   maxMessages: 100,","    //   connectionTimeout: 3000,","    //   greetingTimeout: 3000,","    //   socketTimeout: 3000,","    //   debug: false,","    // }","  };","","","  /**","   * Action tokens are enrypted one-time strings sent to users (usually in a ","   * link by email) which represent a particular action to be taken at a future","   * point in time. ","   * ","   * The next time the server recieves the token it can decode it to find out ","   * what action should be taken for the associated user. ","   * ","   * Resetting a user's password is done using action tokens.","   */","  config.actionTokens = {","    // encryption key to prevent tampering ","    encryptionKey: _.uuid.v4(),","    // default token validity duration from when it was created","    validForSeconds: 60 * 60 * 2, /* 2 hours */","  };","","","","  /**","   * Notificatiers are mechanisms through which notifications can be sent.","   */","  config.notifications = {","    // the key is the name of the notifier","    admins: {","      // one more notification transports","      transports: [","        {","          type: 'log',","        },","        /*","        {","          // Slack","          type: 'slack',","          // Notification config","          config: {","            url: slack url,","            channel: channel name,","            username: username to show in slack,","            icon_emoji: URL to image to use as notifications icon,","          },","        },","        */","      ]","    },","  };","","","};"]
}],variables:[{name:"port",tags:{},description:["Server listening port."],code:["  config.port = (process.env.PORT || 3000);"]},{name:"baseURL",tags:{},description:["Base web URL without the trailing slash"],code:["  config.baseURL = 'http://localhost:' + config.port;"]},{name:"logging",tags:{},description:["Logging config (log4js-node).","undefined for config options."],code:["  config.logging = {","    // default logging category","    category: 'app',","    // minimum logging level","    minLevel: 'DEBUG',","    // where logging output should go","    appenders: [","      {","        type: 'console',","        layout: {","          type: 'pattern',","          pattern: '(%h-%z) %[[%d] [%p] [%c]%] - %m',","          tokens: {","            workerId: _.get(cluster, 'worker.id', 0)","          }","        }","      }","    ],","  };"]},{name:"staticResources",tags:{},description:["Static resources folder (relative to app folder)"],code:["  config.staticResources = {","    folder: '../public'","  };"]},{name:"startupSteps",tags:{},description:["The steps to execute as part of the application startup process.","Each of these corresponds to a module file under the `support/startup` path."],code:["  config.startupSteps = [","    'db',","    'models',","    'forms',","    'activityRecorder',","    'notifications',","    'acl',","    'middleware',","    'routes',","    'staticResources',","    'actionTokens',","    'mailer',","    'cron',","    'appTemplateVars',","    'listener',","  ];"]},{name:"shutdownSteps",tags:{},description:["The steps to execute as part of the application shutdown process.","Each of these corresponds to a module file under the `support/shutdown` path."],code:["  config.shutdownSteps = [","    'listener',","    'cron',","    'acl',","    'db',","  ];"]},{name:"errors",tags:{},description:["Error handling config."],"static":{variables:[{name:"showStack",tags:{type:[{description:null,type:{name:"Boolean"}}]},description:["Whether stack traces should be included when rendering errors."],type:{description:null,type:{name:"Boolean"}},code:["    showStack: true"]}]},code:["  config.errors = {","    /** ","     * Whether stack traces should be included when rendering errors.","     * @type {Boolean}","     */","    showStack: true,","  };"]},{name:"db",tags:{},description:["Database connection.","You can specify multiple database connections as long as `main` connection\nis also always specified. The built-in model classes will store their data \nin this connection."],code:["  config.db = {","    // connection id","    main: {","      // currently supported: rethinkdb","      type: 'rethinkdb',","      serverConfig: {","        // name of db","        db: 'waigo',","        // servers to connect to","        servers: [","          {","            host: '127.0.0.1',","            port: 28015,","          }","        ],","      }","    }","  };"]},{name:"middleware",tags:{},description:["Common middleware for requests."],code:["  config.middleware = {};"]},{name:"mailer",tags:{},description:["Mailer config."],code:["  config.mailer = {","    // default 'from' address","    from: 'System <waigo@localhost>',","    type: 'console',","","    // type: 'smtp',","    // smtp: {","    //   host: '127.0.0.1',","    //   port: 25,","    //   secure: false,","    //   ignoreTLS: true,","    //   tls: {","    //     rejectUnauthorized: false","    //   },","    //   maxConnections: 1,","    //   maxMessages: 100,","    //   connectionTimeout: 3000,","    //   greetingTimeout: 3000,","    //   socketTimeout: 3000,","    //   debug: false,","    // }","  };"]},{name:"actionTokens",tags:{},description:["Action tokens are enrypted one-time strings sent to users (usually in a \nlink by email) which represent a particular action to be taken at a future\npoint in time. ","The next time the server recieves the token it can decode it to find out \nwhat action should be taken for the associated user. ","Resetting a user's password is done using action tokens."],code:["  config.actionTokens = {","    // encryption key to prevent tampering ","    encryptionKey: _.uuid.v4(),","    // default token validity duration from when it was created","    validForSeconds: 60 * 60 * 2, /* 2 hours */","  };"]},{name:"notifications",tags:{},description:["Notificatiers are mechanisms through which notifications can be sent."],code:["  config.notifications = {","    // the key is the name of the notifier","    admins: {","      // one more notification transports","      transports: [","        {","          type: 'log',","        },","        /*","        {","          // Slack","          type: 'slack',","          // Notification config","          config: {","            url: slack url,","            channel: channel name,","            username: username to show in slack,","            icon_emoji: URL to image to use as notifications icon,","          },","        },","        */","      ]","    },","  };"]}]}},function(e,t){e.exports={methods:[{name:"loadConfigModule",tags:{param:[{description:"Config module name.",type:{name:"String"},name:"name"}],"return":[{description:"`null` if module not found.",type:{name:"Function"}}]},description:["Load config module."],params:[{name:"name",description:["Config module name."],type:{name:"String"}}],returns:[{description:["`null` if module not found."],type:{name:"Function"}}],"throws":[],code:["var loadConfigModule = function(name) {","  try {","    debug(`Loading ${name} configuration`);","","    return waigo.load(`config/${name}`);","  } catch (e) {","    debug(`Error loading config: ${name}`);","    debug(e);","","    return null;","  }","};"]},{name:"index",tags:{"return":[{description:null,type:{name:"Object"}}]},description:["Configuration loader","This loads the application configuration.","undefined module gets loaded first. Additional\nconfiguration modules then get loaded using the following logic:",null,"Thus if node is running in `test` mode and the user id of the process is\n`www-data` then this looks for the following module files and loads them if\npresent, in the following order:",null,"The current configuration object gets passed to each subsequently loaded\nconfiguration module file."],params:[],returns:[{description:[],type:{name:"Object"}}],"throws":[],code:["module.exports = function() {","  let config = {","    mode: process.env.NODE_ENV || 'development',","    user: process.env.USER","  };","","  debug('Config mode, user', config.mode, config.user);","","  // base","  let fn = loadConfigModule('base');","  if (!fn) {","    throw new Error('Base configuration file not found');","  }","  fn(config);","","","  // mode","  fn = loadConfigModule(config.mode);","  if (fn) {","    fn(config);","  }","","  // mode.userId","  fn = loadConfigModule(config.mode + '.' + config.user);","  if (fn) {","    fn(config);","  }","","  return config;","};"]}]}},function(e,t){e.exports={methods:[{name:"main",tags:{fileOverview:[{description:"Main controller"}]},description:[],params:[],returns:[],"throws":[],code:["exports.main = function*() {","  yield this.render('index');","};"]}]}},function(e,t){e.exports={}},function(e,t){e.exports={methods:[{name:"logout",tags:{fileOverview:[{description:"User controller"}]},description:[],params:[],returns:[],"throws":[],code:["exports.logout = function*() {","  delete this.session.user;","","  yield this.redirect('/');","};"]}]}},530,530,530,530,530,function(e,t){e.exports={file:{description:["Welcome to the Waigo API docs.","Use the menu on the left to navigate to different files."]}}},function(e,t){e.exports={file:{description:["The default entry point for Waigo."]},methods:[{name:"_bootstrap",tags:{"return":[{description:"Function to start the app and which returns a `Promise`.",type:{name:"Function"}}]},description:["Bootstrap the application."],params:[],returns:[{description:["Function to start the app and which returns a `Promise`."],type:{name:"Function"}}],"throws":[],code:["waigo._bootstrap = function() {","  return co(function*() {","    /*","    Initialise the framework.","","    If you need to override the application source folder and/or plugins to ","    be loaded then this is the place to do it.","","     */","    yield waigo.init();","","    /*","    Start the application.","","    This loads in application configuration, runs all startup steps, sets up ","    the middleware and kicks off the HTTP listener.","     */","    waigo.App = new (waigo.load('application'))","","    yield waigo.App.start();","  });","};"]}]}},function(e,t){e.exports={file:{description:["The Waigo module loader."]},constants:[{name:"loader",tags:{global:[{description:null}],type:[{description:null,type:{name:"Object"}}]},description:["Global reference to the loader."],"static":{variables:[{name:"_",tags:{type:[{description:null,type:{name:"Object"}}]},description:["Reference to Lodash instance."],type:{description:null,type:{name:"Object"}},code:["loader._ = _;"]}],methods:[{name:"reset",tags:{},description:["Reset the internal configuration.","Note: `init()` must be called after this to re-initialize the loader."],params:[],returns:[],"throws":[],code:["loader.reset = function() {","  debug('Reset loader config');","","  appFolder = null;","  loader[$FILE] = null;","  loader[$SOURCE_PATHS] = null;","};"]},{name:"init",tags:{param:[{description:"Loading configuration.",type:{optional:!0,name:"Object"},name:"options"},{description:"Absolute path to folder containing app files. Overrides the default calculated folder.",type:{optional:!0,name:"String"},name:"options.appFolder"},{description:"Plugin loading configuration.",type:{optional:!0,name:"Object"},name:"options.plugins"},{description:"Names of plugins to load. If omitted then other options are used to load plugins.",type:{optional:!0,name:"Array"},name:"options.plugins.names"},{description:"Regexes specifying plugin naming conventions. Default is `waigo-plugin-*`.",type:{optional:!0,name:"Array"},name:"options.plugins.glob"},{description:"JSON config containing names of plugins to load. If a string is given then it assumed to be the path of a script which exports the configuration. Default is to load `package.json`.",type:{optional:!0},name:"options.plugins.config"},{description:"Names of keys in JSON config whose child keys contain names of plugins. Default is `[dependencies, devDependencies, peerDependencies]`.",type:{optional:!0,name:"Array"},name:"options.plugins.configKey"}],"return":[{description:"Final augmented options, in case you wish to check the loading config.",type:{name:"Object"}}]},description:["Initialise the loader.","This scans the folder trees of the core framework, plugins and your\napplication to map out what's available and to ensure that there are no\ninstances of any given file or view being provided by two or more \nplugins.","If `options.plugins` is provided then those named plugins get loaded. If\nnot then the remaining options are used to first work out which plugins to\nload and then those plugins get loaded. By default the plugins to load are\nfiltered from the dependencies listed within the `package.json` file."],params:[{name:"options",description:["Loading configuration."],type:{optional:!0,name:"Object"}}],returns:[{description:["Final augmented options, in case you wish to check the loading config."],type:{name:"Object"}}],"throws":[],code:["loader.init = function*(options) {","  if (loader[$FILE]) {","    debug('Waigo was already initialised. Re-initialising...');","","    loader.reset();","  }","","  options = JSON.parse(JSON.stringify(options || {}));","  options.plugins = options.plugins || {};","","  appFolder = options.appFolder || DEFAULT_APP_FOLDER;","  debug('App folder ' + appFolder);","","  // get loadable plugin","  if (!options.plugins.names) {","    debug('Getting plugin names...');","    ","    // based on code from https://github.com/sindresorhus/load-grunt-tasks/blob/master/load-grunt-tasks.js","    let pattern = options.plugins.glob || ['waigo-plugin-*'];","    let config = options.plugins.config || null;","    let scope = options.plugins.configKey || ['dependencies', 'devDependencies', 'peerDependencies'];","    ","    if (null === config || typeof config === 'string') {","      let pathToConfig = config;","","      if (!pathToConfig || 'package.json' === pathToConfig) {","        pathToConfig = findup('package.json', {","          cwd: appFolder","        });","","        if (!pathToConfig) {","          throw new Error(`Unable to find package.json`);","        }","      }","","      try {","        config = loader.__require(path.resolve(pathToConfig));","      } catch (err) {","        throw new Error(`Unable to load config file: ${pathToConfig}`);","      }","    }","","    let names = scope.reduce(function (result, prop) {","      return result.concat(Object.keys(config[prop] || {}));","    }, []);","","    options.plugins.names = _.uniq(globule.match(pattern, names));","  }","  ","  debug(`Plugins to load: ${options.plugins.names.join(', ')}`);","","  // what paths will we search?","  let sourcePaths = loader[$SOURCE_PATHS] = {","    waigo: WAIGO_FOLDER,","    app: appFolder","  };","","  _.each(options.plugins.names, function(name) {","    let fullPath;","","    try {","      fullPath = path.dirname(require.resolve(name));","    } catch (err) {","      if (process.env.PLUGIN_SEARCH_FOLDER) {","        fullPath = path.join(process.env.PLUGIN_SEARCH_FOLDER, name);","","        let stat = fs.statSync(fullPath);","","        if (!stat.isDirectory()) {","          throw err;","        }","      } else {","        throw err;","      }","    }","","    sourcePaths[name] = path.join(fullPath, 'src');","  });","","  let scanOrder = ['waigo'].concat(options.plugins.names, 'app');","","  // reset cache","  loader[$FILE] = {};","","  // start scanning","  for (let sourceName of scanOrder) {","    let moduleMap = {};","","    debug(`Scanning for files in: ${sourceName}`);","","    _.extend(moduleMap, yield _walk(sourcePaths[sourceName], {","        // only want .js files, but not any from frontend/ views/ or cli/data","        matchFiles: /^(?!(frontend|views|cli\\/data)\\/)(.+?\\.js)$/i,","      })","    );","","    _.extend(moduleMap, yield _walk(sourcePaths[sourceName], {","        // only want files from views/ and emails/, but not ones which are prefixed with an underscore","        matchFiles: /^(views|emails)\\/(.*\\/)?(((?!_)[A-Za-z0-9_]+)\\.?\\w+)$/i,","        // may have many view templates with same names but different extensions","        keepExtensions: true,","      })","    );","","    /*jshint -W083 */","    _.each(moduleMap, function(modulePath, moduleName) {","      loader[$FILE] = loader[$FILE] || {};","      loader[$FILE][moduleName] = _.get(loader[$FILE], moduleName, { ","        sources: {} ","      });","      loader[$FILE][moduleName].sources[sourceName] = modulePath;","    });","  }","","  // now go through the list of available modules and ensure that there are no ambiguities","  _.each(loader[$FILE], function(moduleConfig, moduleName) {","    let sourceNames = Object.keys(moduleConfig.sources);","","    // if there is an app implementation then that's the one to use","    if (moduleConfig.sources.app) {","      moduleConfig._load = 'app';","    } ","    // if there is only one source then use that one","    else if (1 === sourceNames.length) {","      moduleConfig._load = sourceNames[0];","    }","    // else","    else {","      // get plugin source names","      let pluginSources = _.filter(sourceNames, function(srcName) {","        return 'waigo' !== srcName;","      });","","      // if more than one plugin then we have a problem","      if (1 < pluginSources.length) {","        throw new Error(`Path \"${moduleName}\" has more than one plugin implementation to choose from: ${pluginSources.join(', ')}`);","      } ","      // else the one available plugin is the source","      else {","        moduleConfig._load = pluginSources[0];","      }","    }","",'    debug(`File "${moduleName}" will be loaded from source "${moduleConfig._load}"`);',"  });","","  return options;","};"]},{name:"load",tags:{param:[{description:"File path (see `getPath()` docs for supported format).",type:{name:"string"},name:"filePath"}],"return":[{description:"contents of loaded file.",type:{name:"Object"}}],"throws":[{description:"Error if there was an error loading the file."}],see:[{description:"#getPath"}]},description:["Load a file."],params:[{name:"filePath",description:["File path (see `getPath()` docs for supported format)."],type:{name:"string"}}],returns:[{description:["contents of loaded file."],type:{name:"Object"}}],"throws":[{description:["Error if there was an error loading the file."],type:{}}],code:["loader.load = function(filePath) {","  let resolvedPath = loader.getPath(filePath);","","  debug(`Load ${filePath} -> ${resolvedPath}`);","","  return loader.__require(resolvedPath);","};"]},{name:"getPath",tags:{param:[{description:"File path in the supported format.",type:{name:"String"},name:"filePath"}],"return":[{description:"Full path to file.",type:{name:"String"}}],"throws":[{description:"If the file or the requested source could not be found.",type:{name:"Error"}}],see:[{description:"getSources"},{description:"load"}]},description:["Get full path to a file.","Names to load are specified in the form: `[npm_module_name:]<module_file_path>`","undefined.","For example, when a call to load the `support/errors` module is made Waigo\nchecks the following paths in order until a match is found:",null,"In the above example, if the caller wishes to explicitly load the version\nprovided by the `waigo-doc` plugin then the parameter should be\n`waigo-doc:support/errors`. If on the other hand they wish to load the\nversion provided the core Waigo framework then `waigo:support/errors`\nshould be used."],params:[{name:"filePath",description:["File path in the supported format."],type:{name:"String"}}],returns:[{description:["Full path to file."],type:{name:"String"}}],"throws":[{description:["If the file or the requested source could not be found."],type:{name:"Error"}}],code:["loader.getPath = function(filePath) {","  if (!loader[$FILE]) {","    throw new Error('Please initialise Waigo first');","  }","","  // get source to load from","  let sanitizedFileName = filePath,","    source = null;","","  let sepPos = filePath.indexOf(':')","  if (-1 < sepPos) {","    source = filePath.substr(0, sepPos);","    sanitizedFileName = filePath.substr(sepPos + 1);","  }","","  if (!loader[$FILE][sanitizedFileName]) {","    throw new Error(`File not found: ${sanitizedFileName}`);","  }","","  // if no source then use default","  if (!source) {","    source = loader[$FILE][sanitizedFileName]._load;","  }","","  if (!loader[$FILE][sanitizedFileName].sources[source]) {","    throw new Error(`File source not found: ${source}`);","  }","",'  debug(`File "${filePath}" points to "${sanitizedFileName}" from source "${source}"`);',"","  return loader[$FILE][sanitizedFileName].sources[source];","};"]},{name:"getSources",tags:{"return":[{description:null,type:{name:"Object"}}],see:[{description:"#getPath"},{description:"#load"}]},description:["Get file sources.","This will return key-value pairs, where the key is the name of the source and \nthe value is the path to the `src` folder for that source."],params:[],returns:[{description:[],type:{name:"Object"}}],"throws":[],code:["loader.getSources = function() {","  return loader[$SOURCE_PATHS];","};"]},{name:"getItemsInFolder",tags:{param:[{description:"Folder to check under, relative to app folder.",type:{name:"String"},name:"folder"}],"return":[{description:"List of file paths.",type:{name:"Array"}}],"throws":[{description:"Error If the loader hasn't been initialised yet."}]},description:["Get all files in given folder path.","This will look for all files\nwhich reside under the given folder (and subfolders) and then return their relative paths. \nFiles provided by both plugins and the app itself will also be included.","This is useful in situations where a particular folder holds a number of \nrelated files/folders and you wish to see which ones are available."],params:[{name:"folder",description:["Folder to check under, relative to app folder."],type:{name:"String"}}],returns:[{description:["List of file paths."],type:{name:"Array"}}],"throws":[{description:["Error If the loader hasn't been initialised yet."],type:{}}],code:["loader.getItemsInFolder = function(folder) {","  if (!loader[$FILE]) {","    throw new Error('Please initialise Waigo first');","  }","","  var ret = _.chain(loader[$FILE])","    .keys()","    .filter(function(filePath) {","      return (0 === filePath.indexOf(folder));","    })","    .value();","","  return ret;","};"]},{name:"getWaigoFolder",tags:{"return":[{description:null,type:{name:"String"}}]},description:["Get absolute path to folder containing the Waigo framework."],params:[],returns:[{description:[],type:{name:"String"}}],"throws":[],code:["loader.getWaigoFolder = function() {","  return WAIGO_FOLDER;","};"]},{name:"getAppFolder",tags:{"return":[{description:null,type:{name:"String"}}]},description:["Get absolute path to folder containing the application code."],params:[],returns:[{description:[],type:{name:"String"}}],"throws":[],code:["loader.getAppFolder = function() {","  return appFolder;","};"]}]},type:{description:null,type:{name:"Object"}},global:{description:null},code:["const loader = module.exports = global.waigo = {};"]}]}},530,function(e,t){e.exports={methods:[{name:"record",tags:{param:[{description:"activity name",type:{name:"String"},name:"verb"},{description:"`User` who did it. Or name of system process.",type:{},name:"actor"},{description:"Additional details.",type:{optional:!0,name:"Object"},name:"details"}],"return":[{description:"the created activity object",type:{name:"Activity"}}]},description:["Record an activity."],params:[{name:"verb",description:["activity name"],type:{name:"String"}},{name:"actor",description:["`User` who did it. Or name of system process."],type:{}},{name:"details",description:["Additional details."],type:{optional:!0,name:"Object"}}],returns:[{description:["the created activity object"],type:{name:"Activity"}}],"throws":[],code:["  record: function*(verb, actor, details) {","    this._logger().debug('Recording activity', verb, actor.id || actor, details);","","    if (!actor || !actor.id) {","      actor = {","        displayName: (typeof actor === 'string' ? actor : 'system')","      }","    } else {","      actor = {","        id: '' + actor.id,","        displayName: actor.username,","      }","    }","","    let qry = {","     verb: verb,","     actor: actor,","     published: new Date(), ","    }","","    if (details) {","      qry.details = details;","    }","","    return yield this.insert(qry);","  }"]}]}},function(e,t){e.exports={methods:[{name:"create",tags:{param:[{description:"Unique id for job.",type:{name:"String"},name:"id"},{description:"Crontab spec.",type:{name:"String"},name:"crontab"},{description:"The job handler.",type:{name:"Function"},name:"handler"}],"return":[{description:"new cron task instance.",type:{name:"Cron"}}]},description:["Create a cron task.","This will create a new `Cron` and save it to the db (if it isn't \nalready saved)."],params:[{name:"id",description:["Unique id for job."],type:{name:"String"}},{name:"crontab",description:["Crontab spec."],type:{name:"String"}},{name:"handler",description:["The job handler."],type:{name:"Function"}}],returns:[{description:["new cron task instance."],type:{name:"Cron"}}],"throws":[],code:["  create: function*(id, crontab, handler) {","    let cron = yield this.get(id);","","    if (!cron) {","      cron = yield this.insert({","        id: id,","        disabled: false,","      });","    }","","    cron[$EXTRA] = {","      logger: this._logger().create(id),","      handler: handler,","    };","","    // start the cron job","    cron.startScheduler(crontab);","","    // override view object method","    cron[viewObjects.METHOD_NAME] = function*(ctx) {","      let json = {","        id: this.id,","        disabled: this.disabled,","        lastRun: this.lastRun? this.lastRun.when : 'never',","      };","","      json.schedule = crontab;","      json.nextRun = cron[$EXTRA].job.nextDate().toDate();","","      return json;","    };","","    return cron;","  }"]},{name:"startScheduler",tags:{},description:["Start the cron scheduler for this job."],params:[],returns:[],"throws":[],code:["  startScheduler: function(crontab) {","    let _config = this[$EXTRA];","    ","    _config.logger.info(`Setting up cron schedule ${crontab}`);","","    _config.job = new CronJob({","      cronTime: crontab,","      onTick: _.bind(co.wrap(this._cronCallback), this),","      start: true,","    });","","    /* calculate and save time between runs */","    ","    // we add 1 second to next date otherwise, _getNextDateFrom() returns ","    // the same date back","    let nextRunDate = _config.job.nextDate().add(1, 'seconds');","","    _config.timeBetweenRunsMs = ","      _config.job.cronTime._getNextDateFrom(nextRunDate).valueOf() - nextRunDate.valueOf();","  }"]},{name:"stopScheduler",tags:{},description:["Stop the cron scheduler for this job."],params:[],returns:[],"throws":[],code:["  stopScheduler: function() {","    let _config = this[$EXTRA];","","    _config.logger.info(`Stopping cron scheduler`);","","    if (_config.job) {","      _config.job.stop();","    }","  }"]},{name:"_cronCallback",tags:{"return":[{description:"[description]",type:{}}]},description:["Callback for cron job when task needs to run."],params:[],returns:[{description:[null],type:{}}],"throws":[],code:["  _cronCallback: function*() {","    let _config = this[$EXTRA];","","    _config.logger.info('Starting scheduled run');","","    try {","      // always reload data at the start in case other app instances have ","      // executed the task recently","      let dbData = yield this.__model.get(this.id);","","      // if disabled then don't run","      if (dbData.disabled) {","        return _config.logger.info('Task inactive, skipping run');","      }","","      /*","      If another worker process beats us to the punch then we don't want to ","      repeat their work.","       */","      ","      // first we check to see that it wasn't run recently","      let timeSinceLastRunMs = Date.now() - ","        (dbData.lastRun ? dbData.lastRun.when.getTime() : 0);","","      if (timeSinceLastRunMs < _config.timeBetweenRunsMs) {","        return _config.logger.info('Task already ran recently, skipping');","      }","","      this.lastRun = {","        when: new Date(),","        by: `worker ${process.pid}`,","      };","","      yield this.save();","","      yield this.runNow();","","    } catch (err) {","      _config.logger.error('Scheduled run error', err.stack);","    }","  }"]},{name:"runNow",tags:{param:[{description:"Request context (if available).",type:{optional:!0,name:"Object"},name:"ctx"}]},description:["Run this task.","This will run this task even if it's not active."],params:[{name:"ctx",description:["Request context (if available)."],type:{optional:!0,name:"Object"}}],returns:[],"throws":[],code:["  runNow: function*(ctx) {","    let _config = this[$EXTRA];","","    let runByUser = _.get(ctx, 'currentUser.id', '');","","    _config.logger.debug(`Running task (user: ${runByUser})`);","","    try {","      let start = Date.now();","","      yield _config.handler(this._App());","","      let duration = Date.now() - start;","","      _config.logger.info(`Run complete: ${duration}ms`);","","      this._App().emit('record', 'run_pass', 'cron', {","        task: this.id,","        duration: duration,","        by: runByUser","      });","","    } catch (err) {","      this._App().emit('record', 'run_fail', 'cron', {","        task: this.id,","        err: err.stack,","        by: runByUser","      });","","      throw err;","    }","  }"]},{name:"setActive",tags:{},description:["Set schedule status of this task."],params:[],returns:[],"throws":[],code:["  setActive: function*(active) {","    let _config = this[$EXTRA];","","    _config.logger.debug(`Set active: ${active}`);","","    this.disabled = !active;","","    yield this.save();","  }"]}]}},function(e,t){e.exports={methods:[{name:"isOneOf",tags:{},description:["Get whether user hasany of  given roles"],params:[],returns:[],"throws":[],code:["  isOneOf: function() {","    let roles = _.toArray(arguments);","    ","    return !! (_.intersection(this.roles || [], roles).length);","  }"]},{name:"isPasswordCorrect",tags:{param:[{description:null,type:{name:"String"},name:"password"},{description:null,type:{name:"String"},name:"storedHash"}],"return":[{description:"true if password matches, false otherwise",type:{name:"Boolean"}}]},description:["Check password against hash."],params:[{name:"password",description:[],type:{name:"String"}},{name:"storedHash",description:[],type:{name:"String"}}],returns:[{description:["true if password matches, false otherwise"],type:{name:"Boolean"}}],"throws":[],code:["  isPasswordCorrect: function*(password) {","    let passAuth = _.find(this.auth, function(a) {","      return 'password' === a.type;","    });","","    if (!passAuth) {","      return false;","    }","","    let sepPos = passAuth.token.indexOf('-'),","      salt = passAuth.token.substr(0, sepPos),","      hash = passAuth.token.substr(sepPos + 1);","    ","    let generatedHash = yield this.__model.generatePasswordHash(","      password, salt","    );","","    return generatedHash === passAuth.token;","  }"]},{name:"login",tags:{param:[{description:"waigo client request context.",type:{name:"Object"},name:"context"}]},description:["Log the user into given context."],params:[{name:"context",description:["waigo client request context."],type:{name:"Object"}}],returns:[],"throws":[],code:["  login: function*(context) {","    this._logger().debug(`Logging in user: ${this.id} = ${this.username}`);","","    context.session.user = {","      id: this.id,","      username: this.username,","    };","","    // update last-login timestamp","    this.lastLogin = new Date();","    yield this.save();","  }"]},{name:"verifyEmail",tags:{param:[{description:"Email address to verify.",type:{name:"String"},name:"email"}]},description:["Verify an email address."],params:[{name:"email",description:["Email address to verify."],type:{name:"String"}}],returns:[],"throws":[],code:["  verifyEmail: function*(email) {","    let theEmail = _.find(this.emails, function(e) {","      return email === e.email;","    });","","    if (!theEmail) {","      return false;","    }","","    theEmail.verified = true;","","    // save","    this.markChanged('emails');","    yield this.save();","","    // record","    this._App().emit('record', 'verify_email', this, {","      email: email","    });","  }"]},{name:"hasEmail",tags:{param:[{description:"Email address to check.",type:{name:"String"},name:"email"}],"return":[{description:null,type:{name:"Boolean"}}]},description:["Check whether user has given email address."],params:[{name:"email",description:["Email address to check."],type:{name:"String"}}],returns:[{description:[],type:{name:"Boolean"}}],"throws":[],code:["  hasEmail: function*(email) {","    return 0 <= _.findIndex(this.emails || [], function(e) {","      return email === e.email;","    });","  }"]},{name:"isEmailVerified",tags:{param:[{description:"Email address to check.",type:{name:"String"},name:"email"}],"return":[{description:null,type:{name:"Boolean"}}]},description:["Check whether user has verified given email address."],params:[{name:"email",description:["Email address to check."],type:{name:"String"}}],returns:[{description:[],type:{name:"Boolean"}}],"throws":[],code:["  isEmailVerified: function*(email) {","    let item = _.find(this.emails || [], function(e) {","      return email === e.email;","    });","","    return item && item.verified;","  }"]
},{name:"addEmail",tags:{param:[{description:"Email address to verify.",type:{name:"String"},name:"email"},{description:"Whether address is verified.",type:{name:"Boolea"},name:"verified"}]},description:["Add an email address."],params:[{name:"email",description:["Email address to verify."],type:{name:"String"}},{name:"verified",description:["Whether address is verified."],type:{name:"Boolea"}}],returns:[],"throws":[],code:["  addEmail: function*(email, verified) {","    let theEmail = _.find(this.emails, function(e) {","      return email === e.email;","    });","","    if (!theEmail) {","      theEmail = {","        email: email,","      };","","      this.emails.push(theEmail);","    }","","    theEmail.verified = true;","","    // save","    this.markChanged('emails');","    yield this.save();","","    // record","    this._App().emit('record', 'add_email', this, {","      email: email","    });","  }"]},{name:"updatePassword",tags:{param:[{description:"New password.",type:{name:"String"},name:"newPassword"}]},description:["Update this user's password."],params:[{name:"newPassword",description:["New password."],type:{name:"String"}}],returns:[],"throws":[],code:["  updatePassword: function*(newPassword) {","    this._logger().debug('Update user password', this.username);","","    let passAuth = _.find(this.auth, function(a) {","      return 'password' === a.type;","    });","","    if (!passAuth) {","      return false;","    }","","    // update password","    passAuth.token = yield this.__model.generatePasswordHash(newPassword);","","    // save","    this.markChanged('auth');","    yield this.save();","","    // record","    this._App().emit('record', 'update_password', this);","  }"]},{name:"getOauth",tags:{param:[{description:"Auth provider.",type:{name:"String"},name:"provider"}],"return":[{description:"null if not found.",type:{name:"Object"}}]},description:["Get OAuth data."],params:[{name:"provider",description:["Auth provider."],type:{name:"String"}}],returns:[{description:["null if not found."],type:{name:"Object"}}],"throws":[],code:["  getOauth: function*(provider)  {","    provider = 'oauth:' + provider;","    ","    provider = _.find(this.auth, function(a) {","      return provider === a.type;","    });","","    return _.get(provider, 'data', null);","  }"]},{name:"saveOAuth",tags:{param:[{description:"Auth provider.",type:{name:"String"},name:"provider"},{description:"Data.",type:{name:"Object"},name:"data"}]},description:["Save OAuth data."],params:[{name:"provider",description:["Auth provider."],type:{name:"String"}},{name:"data",description:["Data."],type:{name:"Object"}}],returns:[],"throws":[],code:["  saveOAuth: function*(provider, data) {","    yield this.saveAuth('oauth:' + provider, data);","  }"]},{name:"saveAuth",tags:{param:[{description:"Auth type.",type:{name:"String"},name:"type"},{description:"Data.",type:{name:"Object"},name:"data"}]},description:["Save Auth data."],params:[{name:"type",description:["Auth type."],type:{name:"String"}},{name:"data",description:["Data."],type:{name:"Object"}}],returns:[],"throws":[],code:["  saveAuth: function*(type, data) {","    this._logger().debug('Save user auth', this.id, type, data);","","    let existing = _.find(this.auth, function(a) {","      return type === a.type;","    });","","    if (!existing) {","      existing = {","        type: type","      };","","      this.auth.push(existing);","    }","","    existing.data = data;","","    // save","    this.markChanged('auth');","    yield this.save();","","    // record","    this._App().emit('record', 'save_oauth', this, _.pick(existing, 'type', 'access_token'));","  }"]},{name:"canAccess",tags:{param:[{description:"The resource the user wishes to access.",type:{name:"String"},name:"resource"}],"return":[{description:"true if access is possible, false if not.",type:{name:"Boolean"}}]},description:["Get whether user can access given resource."],params:[{name:"resource",description:["The resource the user wishes to access."],type:{name:"String"}}],returns:[{description:["true if access is possible, false if not."],type:{name:"Boolean"}}],"throws":[],code:["  canAccess: function*(resource) {","    return this._App().acl.can(resource, this);","  }"]},{name:"assertAccess",tags:{param:[{description:"The resource the user wishes to access.",type:{name:"String"},name:"resource"}],"throws":[{description:"If not allowed to access.",type:{name:"Error"}}]},description:["Assert that user can access given resource."],params:[{name:"resource",description:["The resource the user wishes to access."],type:{name:"String"}}],returns:[],"throws":[{description:["If not allowed to access."],type:{name:"Error"}}],code:["  assertAccess: function*(resource) {","    return this._App().acl.assert(resource, this);","  }"]},{name:"getByUsername",tags:{"return":[{description:null,type:{name:"User"}}]},description:["Get user by username."],params:[],returns:[{description:[],type:{name:"User"}}],"throws":[],code:["  getByUsername: function*(username) {","    let ret = yield this.rawQry().filter(function(user) {","      return user('username').eq(username);","    }).run();","","    return this.wrapRaw(_.get(ret, '0'));","  }"]},{name:"getByEmail",tags:{"return":[{description:null,type:{name:"User"}}]},description:["Get user by email address."],params:[],returns:[{description:[],type:{name:"User"}}],"throws":[],code:["  getByEmail: function*(email) {","    const r = this.db;","","    let ret = yield this.rawQry().filter(","      r.row('emails').contains(function(e) {","        return e('email').eq(email);","      })","    ).run();","","    return this.wrapRaw(_.get(ret, '0'));","  }"]},{name:"getByEmailOrUsername",tags:{"return":[{description:null,type:{name:"User"}}]},description:["Get user by email address or username."],params:[],returns:[{description:[],type:{name:"User"}}],"throws":[],code:["  getByEmailOrUsername: function*(str) {","    let ret = yield this.rawQry().filter(function(user) {","      return user('emails')('email')(0).eq(str).or(user('username').eq(str));","    }).run();","","    return this.wrapRaw(_.get(ret, '0'));","  }"]},{name:"findWithIds",tags:{"return":[{description:null,type:{name:"User"}}]},description:["Get user by email address or username."],params:[],returns:[{description:[],type:{name:"User"}}],"throws":[],code:["  findWithIds: function*(ids) {","    let qry = this.rawQry();","","    qry = qry.getAll.apply(qry, ids.concat([{index: 'id'}]));","","    return this.wrapRaw(yield qry.run());","  }"]},{name:"findAdminUsers",tags:{"return":[{description:null,type:{name:"Array"}}]},description:["Find all admin users."],params:[],returns:[{description:[],type:{name:"Array"}}],"throws":[],code:["  findAdminUsers: function*() {","    let ret = yield this.rawQry().filter(function(user) {","      return user('roles').contains('admin')","    }).run();","","    return this.wrapRaw(ret);","  }"]},{name:"haveAdminUsers",tags:{"return":[{description:null,type:{name:"Number"}}]},description:["Get whether any admin users exist."],params:[],returns:[{description:[],type:{name:"Number"}}],"throws":[],code:["  haveAdminUsers: function*() {","    let count = yield this.rawQry().count(function(user) {","      return user('roles').contains('admin')","    }).run();","","    return count > 0;","  }"]},{name:"generatePasswordHash",tags:{param:[{description:"The password.",type:{name:"String"},name:"password"},{description:"Salt to use.",type:{optional:!0,name:"String"},name:"salt"}],"return":[{description:"hash to store",type:{name:"String"}}]},description:["Generate a secure SHA256 representing given password."],params:[{name:"password",description:["The password."],type:{name:"String"}},{name:"salt",description:["Salt to use."],type:{optional:!0,name:"String"}}],returns:[{description:["hash to store"],type:{name:"String"}}],"throws":[],code:["  generatePasswordHash: function*(password, salt) {","    let hash = crypto.createHash('sha256');","","    salt = salt || (yield randomBytesQ(64)).toString('hex');","    hash.update(salt);","    hash.update(password);","","    return salt + '-' + hash.digest('hex');","  }"]},{name:"register",tags:{param:[{description:"User props.",type:{name:"Object"},name:"properties"},{description:"Username.",type:{name:"String"},name:"properties.username"},{description:"Roles",type:{optional:!0,name:"Object"},name:"properties.roles"},{description:"Email address.",type:{optional:!0,name:"String"},name:"properties.email"},{description:"Whether email address is verified.",type:{optional:!0,name:"Boolean"},name:"properties.emailVerified"},{description:"User's password.",type:{optional:!0,name:"String"},name:"properties.password"}],"return":[{description:"The registered user.",type:{name:"User"}}]},description:["Register a new user"],params:[{name:"properties",description:["User props."],type:{name:"Object"}}],returns:[{description:["The registered user."],type:{name:"User"}}],"throws":[],code:["  register: function*(properties) {","    // create user","    let attrs = {","      username: properties.username,","      emails: [],","      auth: [],","      profile: _.extend({","        displayName: properties.username,","      }, properties.profile),","      roles: properties.roles || [],","    };","","    if (properties.email) {","      attrs.emails.push(","        {","          email: properties.email,","          verified: !!properties.emailVerified,","        }","      );","    }","","    if (properties.password) {","      attrs.auth.push(","        {","          type: 'password',","          token: yield this.generatePasswordHash(properties.password),","        }","      );","    }","","    attrs.created = new Date();","","    let user = yield this.insert(attrs);","","    if (!user) {","      throw new Error('Error creating new user: ' + properties.username);","    }","","    // log activity","    this._App().emit('record', 'register', user);","","    // notify admins","    this._App().emit('notify', 'admins', `New user: ${user.id} - ${user.username}`);","","    return user;","  }"]}]}},function(e,t){e.exports={variables:[{name:"index",tags:{},description:["Route map","This maps URL routes to handler methods.",null,"You can specify one or more middleware which should get run before running\nthe controller method:","","undefined module file.","The order in which they're specified determines the order in which they get \nexecuted at runtime.","An example...","","For the above example, Waigo will process the request in the following\norder:",null,"If you wish to initialise a particular middleware with options then you can\nspecify it as an object. For example:","","For the above configuration an instance of the `bodyParser` middleware will \nget initialized for this route with the request body size limit set to `1KB`."],code:["module.exports = { ","  '/': {","    GET: 'index.main'","  },","  '/user': {","    '/register': {","      GET: 'user.register',","      POST: 'user.register_submit'","    },","    '/login': {","      name: 'user_login',","      GET: 'user.login',","      POST: 'user.login_submit',","    },","    '/forgot_password': {","      GET: 'user.forgot_password',","      POST: 'user.forgot_password_submit',","    },","    '/reset_password': {","      name: 'reset_password',","      GET: 'user.reset_password',","      POST: 'user.reset_password_submit',","    },","    '/verify_email': {","      name: 'verify_email',","      GET: 'user.verify_email',","    },","    '/logout': {","      GET: 'user.logout'","    },","  },","};"]}]}},530,function(e,t){e.exports={methods:[{name:"startup",tags:{},description:["Initialise ACL"],params:[],returns:[],"throws":[],code:["  * startup () {","    this.logger.info('Initialising');","","    yield this.reload();","","    // access to admin content must be protected","    if (!this.res.admin) {","      this.logger.info('Admin resources rules not found, so creating them now');","","      yield this.App.models.Acl.insert({","        resource: 'admin',","        entityType: 'role',","        entity: 'admin'","      });","","      yield this.reload();","    }","","    // get notified of ACL updates","    this._changeFeedCursor = yield this.App.models.Acl.onChange();","    if (this._changeFeedCursor) {","      this._changeFeedCursor.each(_.bind(this._onAclUpdated, this));","    }","  }"]},{name:"reload",tags:{},description:["Reload ACL rules from DB."],params:[],returns:[],"throws":[],code:["  * reload () {","    this.logger.debug('Reloading rules from db');","","    let data = yield this.App.models.Acl.getAll();","","    let res = this.res = {},","      users = this.users = {},","      roles = this.roles = {};","","    data.forEach(function(doc){","      // resource perspective","      res[doc.resource] = ","        res[doc.resource] || {};","","      res[doc.resource][doc.entityType] = ","        res[doc.resource][doc.entityType] || {};","","      res[doc.resource][doc.entityType][doc.entity] = true;","","      // entity perspsective","      let entity = ('user' === doc.entityType ? users : roles);","","      entity[doc.entity] = entity[doc.entity] || {};","      entity[doc.entity][doc.resource] = true;","    });","  }"]},{name:"_onAclUpdated",tags:{},description:["Callback for collection watcher."],params:[],returns:[],"throws":[],code:["  _onAclUpdated () {","    this.logger.info('Detected ACL rules change...reloading');","","    co(this.reload())","      .catch((err) => {","        this.logger.error('Error reloading ACL', err.stack);","      });","  }"]},{name:"can",tags:{param:[{description:"Resource name.",type:{name:"String"},name:"resource"},{description:"User object.",type:{name:"Object"},name:"user"}],"return":[{description:"true if allowed; false otherwise.",type:{name:"Boolean"}}]},description:["Get whether given user can access given resource."],params:[{name:"resource",description:["Resource name."],type:{name:"String"}},{name:"user",description:["User object."],type:{name:"Object"}}],returns:[{description:["true if allowed; false otherwise."],type:{name:"Boolean"}}],"throws":[],code:["  can (resource, user) {","    this.logger.debug('can', resource, user.id);","",'    // if resource name is "public" then everyone has access',"    if ('public' === resource) {","      return true;","    }","","    // if user is admin it's ok","    if (user.isOneOf('admin')) {","      return true;","    }","","    // if no entry for resource then everyone has access","    if (!_.get(this.res, resource)) {","      return false;","    }","","    // if user has access it's ok","    if (_.get(this.users, user.id + '.' + resource)) {","      return true;","    }","","    // if one of user's roles has access it's ok ","    let roles = user.roles || [];","","    for (let role of roles) {","      if (_.get(this.roles, role + '.' + resource)) {","        return true;","      }","    }","","    return false;","  }"]},{name:"assert",tags:{param:[{description:"Resource name.",type:{name:"String"},name:"resource"},{description:"User object.",type:{name:"Object"},name:"user"}],"throws":[{description:"AclError if access disallowed."}]},description:["Assert that given user can access given resource."],params:[{name:"resource",description:["Resource name."],type:{name:"String"}},{name:"user",description:["User object."],type:{name:"Object"}}],returns:[],"throws":[{description:["AclError if access disallowed."],type:{}}],code:["  assert (resource, user) {","    this.logger.debug('assert', resource, user.id);","","    if (!this.can(resource, user)) {","      throw new AclError(`User ${user.id} does not have permission to access: ${resource}`, 403);","    }","  }"]},{name:"init",tags:{param:[{description:"The App instance.",type:{name:"App"},name:"App"}]},description:["Initialise ACL"],params:[{name:"App",description:["The App instance."],type:{name:"App"}}],returns:[],"throws":[],code:["exports.init = function*(App) {","  var a = new ACL(App);","","  yield a.startup();","","  return a;","};"]}]}},function(e,t){e.exports={methods:[{name:"create",tags:{param:[{description:"email action type.",type:{name:"String"},name:"type"},{description:"User this action is for.",type:{name:"User"},name:"user"},{description:"Additional data to associate with this action (must be JSON-stringify-able)",type:{optional:!0,name:"Object"},name:"data"},{description:"Additional options.",type:{optional:!0,name:"Object"},name:"options"},{description:"Override default `validForSeconds` settings with this.",type:{optional:!0,name:"Number"},name:"options.validForSeconds"}],"return":[{description:"the action token.",type:{name:"String"}}]},description:["Create a token representing the given action."],params:[{name:"type",description:["email action type."],type:{name:"String"}},{name:"user",description:["User this action is for."],type:{name:"User"}},{name:"data",description:["Additional data to associate with this action (must be JSON-stringify-able)"],type:{optional:!0,name:"Object"}},{name:"options",description:["Additional options."],type:{optional:!0,name:"Object"}}],returns:[{description:["the action token."],type:{name:"String"}}],"throws":[],code:["  * create (type, user, data, options) {","    data = data || '';","","    options = _.extend({","      validForSeconds: this.config.validForSeconds","    }, options);","","    this.logger.debug(`Creating action token: ${type} for user ${user.id}`, data);","","    // every token is uniquely identied by a salt (this is also doubles up as  ","    // a factor for more secure encryption)","    let salt = _.uuid.v4();","","    let plaintext = JSON.stringify([ ","      Date.now() + (options.validForSeconds * 1000), ","      salt, ","      type, ","      user.id, ","      data ","    ]);","","    this.logger.trace('Encrypt: ' + plaintext);","","    let cipher = crypto.createCipher(","      'aes256', this.config.encryptionKey","    );","","    return cipher.update(plaintext, 'utf8', 'hex') + cipher.final('hex');","  }"]},{name:"process",tags:{param:[{description:"the token to process.",type:{name:"String"},name:"token"},{description:"Additional options.",type:{optional:!0,name:"Object"},name:"options"},{description:"Expected token type.",type:{optional:!0,name:"String"},name:"options.type"},{description:"`type`, `user` and `data`.",type:{name:"Object"},name:"token"}]},description:["Process the given action token.","Note: A given token can only be processed once."],params:[{name:"token",description:["the token to process."],type:{name:"String"}},{name:"options",description:["Additional options."],type:{optional:!0,name:"Object"}},{name:"token",description:["`type`, `user` and `data`."],type:{name:"Object"}}],returns:[],"throws":[],code:["  * process (token, options) {","    options = options || {};","    ","    this.logger.debug(`Processing action token: ${token}`);","","    let json = null;","","    try {","      let decipher = crypto.createDecipher(","        'aes256', this.config.encryptionKey","      );","","      let plaintext = decipher.update(token, 'hex', 'utf8') ","        + decipher.final('utf8');","","      this.logger.trace(`Decrypted: ${plaintext}`);","","      json = JSON.parse(plaintext);","    } catch (err) {","      _throw('Error parsing action token', 400, {","        error: err.stack","      });","    }","","    let ts = json[0],","      salt = json[1],","      type = json[2],","      userId = json[3],","      data = json[4];","","    if (!_.isEmpty(options.type) && type !== options.type) {","      _throw(`Action token type mismatch: ${type}`, 400);","    }","","    // check if action still valid","    if (Date.now() > ts) {","      _throw('This action token has expired.', 403);","    }","","    var user = yield this.App.models.User.get(userId);","","    if (!user) {","      _throw('Unable to find user information related to action token', 404);","    }","","    // check if we've already executed this request before","    var activity = yield this.App.models.Activity.getByFilter({","      verb: 'action_token_processed',","      details: {","        type: type,","        salt: salt,","      },","    });","","    if (activity.length) {","      _throw('This action token has already been processed and is no longer valid.', 403);","    }","","    // record activity","    yield this.App.models.Activity.record('action_token_processed', user, {","      type: type,","      salt: salt,","    });","","    this.logger.debug(`Action token processed: ${token}`);","","    return {","      type: type,","      user: user,","      data: data,","    };","  }"]},{name:"init",tags:{param:[{description:"The App.",type:{name:"App"},name:"App"},{description:"Config.",type:{name:"Object"},name:"actionTokensConfig"}],"return":[{description:null,type:{name:"ActionTokens"}}]},description:["Initialise action tokens manager."],params:[{name:"App",description:["The App."],type:{name:"App"}},{name:"actionTokensConfig",description:["Config."],type:{name:"Object"}}],returns:[{description:[],type:{name:"ActionTokens"}}],"throws":[],code:["exports.init = function*(App, actionTokensConfig) {","  return new ActionTokens(App, actionTokensConfig);","};"]}]}},function(e,t){e.exports={classes:[{name:"AbstractCommand",tags:{},description:["Abstract base class for command-line tool commands.","This gets used the command-line executable and is not really meant for \nuse within your web application."],parents:[],instance:{constructor:{name:"constructor",tags:{param:[{description:"Description of what it does.",type:{name:"String"},name:"description"},{description:"Command options.",type:{name:"Array"},name:"options"}],_constructor:[{description:null}]},description:[],params:[{name:"description",description:["Description of what it does."],type:{name:"String"}},{name:"options",description:["Command options."],type:{name:"Array"}}],returns:[],"throws":[],code:["  constructor (description, options) {","    this.description = description;","    this.options = options || [];","  }"]},methods:{run:{name:"run",tags:{},description:["Run this command.","undefined as the command handler."],params:[],returns:[],"throws":[],code:["  * run () {","    throw new Error('Not yet implemented');","  }"]},log:{name:"log",tags:{param:[{description:"The log message to write.",type:{name:"String"},name:"msg"}]},description:["Show the user a message."],params:[{name:"msg",description:["The log message to write."],type:{name:"String"}}],returns:[],"throws":[],code:["  log (msg) {","    console.log(`[waigo-cli] ${msg}`);","  }"]},copyFolder:{name:"copyFolder",tags:{param:[{description:"Source folder path.",type:{name:"String"},name:"src"},{description:"Destination folder path.",type:{name:"String"},name:"dst"}]},description:["Copy a folder to given destination if it doesn't already exist at that destination.","This checks to see if a folder with the same name exists at the \ndestination. It doesn't check that it contains the same content as the \nsource folder."],params:[{name:"src",description:["Source folder path."],type:{name:"String"}},{name:"dst",description:["Destination folder path."],type:{name:"String"}}],returns:[],"throws":[],code:["  * copyFolder (src, dst) {","    let fullDstPath = path.join(this._getProjectFolder(), dst);","","    if (! (shell.test('-f', fullDstPath)) ) {","      this.log('Creating: ' + dst);","","      // create intermediate folders","      debug('Creating intermediate folders for: ' + dst);","      shell.mkdir('-p', path.dirname(fullDstPath));","","      debug('Copying ' + src + ' -> ' + dst);","","      shell.cp('-R', src, fullDstPath);","","    } else {","      this.log('Found: ' + dst);","    }  ","  }"]},copyFile:{name:"copyFile",tags:{param:[{description:"Source file path.",type:{name:"String"},name:"src"},{description:"Destination file path.",type:{name:"String"},name:"dst"},{description:"Whether to overwrite if already exists. Default is `false`.",type:{optional:!0,name:"Boolean"},name:"overwrite"}]},description:["Copy a file to given destination if it doesn't already exist at that destination.","This checks to see if a file with the same name exists at the \ndestination. It doesn't check that it contains the same content as the \nsource file."],params:[{name:"src",description:["Source file path."],type:{name:"String"}},{name:"dst",description:["Destination file path."],type:{name:"String"}},{name:"overwrite",description:["Whether to overwrite if already exists. Default is `false`."],type:{optional:!0,name:"Boolean"}}],returns:[],"throws":[],code:["  * copyFile (src, dst, overwrite) {","    let fullDstPath = path.join(this._getProjectFolder(), dst);","","    let fileExistsAlready = !!shell.test('-f', fullDstPath);","","    if ( !fileExistsAlready || overwrite ) {","      if (fileExistsAlready) {","        this.log('Overwriting: ' + dst);","      } else {","        this.log('Creating: ' + dst);      ","      }","","      // create intermediate folders","      debug('Creating intermediate folders for: ' + dst);","      shell.mkdir('-p', path.dirname(fullDstPath));","","      debug('Copying ' + src + ' -> ' + dst);","      shell.cp(src, fullDstPath);","    } else {","      this.log('Found: ' + dst);","    }  ","  }"]},deleteFile:{name:"deleteFile",tags:{param:[{description:"Destination file path.",type:{name:"String"},name:"dst"}]},description:["Delete file at given destination if it exists."],params:[{name:"dst",description:["Destination file path."],type:{name:"String"}}],returns:[],"throws":[],code:["  * deleteFile (dst) {","    let fullDstPath = path.join(this._getProjectFolder(), dst);","","    this.log('Deleting: ' + dst);","    ","    shell.rm(fullDstPath);","  }"]},installPkgs:{name:"installPkgs",tags:{param:[{description:"NPM package names.",type:{name:"Array"},name:"pkgs"},{description:"Options.",type:{optional:!0,name:"Object"},name:"options"},{description:"Whether to save as dev-dependency.",type:{optional:!0,name:"Boolean"},name:"options.dev"}]},description:["Install one or more NPM packages into the local NPM modules folder.","If a package is already present then it does not get installed again.",null],params:[{name:"pkgs",description:["NPM package names."],type:{name:"Array"}},{name:"options",description:["Options."],type:{optional:!0,name:"Object"}}],returns:[],"throws":[],code:["  * installPkgs (pkgs, options) {","    options = _.extend({","      dev: false,","    }, options);","","    let str = pkgs.join(' ');","","    if (options.dev) {","      str = '--save-dev ' + str;","    } else {","      str = '--save ' + str;","    }","","    this.log('npm install ' + str);","","    yield shell.execAsync('npm install ' + str, {","      cwd: this._getProjectFolder()","    });    ","  }"]},fileExists:{name:"fileExists",tags:{"return":[{description:"true if found, false otherwise.",type:{name:"Boolean"}}]},description:["Check whether given file exists in project folder."],params:[{name:"filePath",description:[],type:{}}],returns:[{description:["true if found, false otherwise."],type:{name:"Boolean"}}],"throws":[],code:["  fileExists (filePath) {","    let fullPath = path.join(this._getProjectFolder(), filePath);","","    return !!(shell.test('-e', fullPath));","  }"]},_getProjectFolder:{name:"_getProjectFolder",tags:{"return":[{description:"folder for current app we're working on.",type:{name:"String"}}],"protected":[{description:null}]},description:["Get project folder."],params:[],returns:[{description:["folder for current app we're working on."],type:{name:"String"}}],"throws":[],code:["  _getProjectFolder () {","    return path.join(waigo.getAppFolder(), '..');","  }"]}}},"static":null,constructor:{name:"constructor",tags:{param:[{description:"Description of what it does.",type:{name:"String"},name:"description"},{description:"Command options.",type:{name:"Array"},name:"options"}],_constructor:[{description:null}]},description:[],params:[{name:"description",description:["Description of what it does."],type:{name:"String"}},{name:"options",description:["Command options."],type:{name:"Array"}}],returns:[],"throws":[],code:["  constructor (description, options) {","    this.description = description;","    this.options = options || [];","  }"]},code:["class AbstractCommand {","  /**","   * @param  {String} description Description of what it does.","   * @param  {Array} options Command options.","   * @constructor","   */","  constructor (description, options) {","    this.description = description;","    this.options = options || [];","  }","","  /** ","   * Run this command.","   *","   * This function gets passed to [Commander.action](http://visionmedia.github.io/commander.js/#Command.prototype.action) as the command handler.","   */","  * run () {","    throw new Error('Not yet implemented');","  }","","  /** ","   * Show the user a message.","   *","   * @param {String} msg The log message to write.","   */","  log (msg) {","    console.log(`[waigo-cli] ${msg}`);","  }","","","","  /** ","   * Copy a folder to given destination if it doesn't already exist at that destination.","   *","   * This checks to see if a folder with the same name exists at the ","   * destination. It doesn't check that it contains the same content as the ","   * source folder.","   *","   * @param {String} src Source folder path.","   * @param {String} dst Destination folder path.","   */","  * copyFolder (src, dst) {","    let fullDstPath = path.join(this._getProjectFolder(), dst);","","    if (! (shell.test('-f', fullDstPath)) ) {","      this.log('Creating: ' + dst);","","      // create intermediate folders","      debug('Creating intermediate folders for: ' + dst);","      shell.mkdir('-p', path.dirname(fullDstPath));","","      debug('Copying ' + src + ' -> ' + dst);","","      shell.cp('-R', src, fullDstPath);","","    } else {","      this.log('Found: ' + dst);","    }  ","  }  ","","","","  /** ","   * Copy a file to given destination if it doesn't already exist at that destination.","   *","   * This checks to see if a file with the same name exists at the ","   * destination. It doesn't check that it contains the same content as the ","   * source file.","   *","   * @param {String} src Source file path.","   * @param {String} dst Destination file path.","   * @param {Boolean} [overwrite] Whether to overwrite if already exists. Default is `false`.","   */","  * copyFile (src, dst, overwrite) {","    let fullDstPath = path.join(this._getProjectFolder(), dst);","","    let fileExistsAlready = !!shell.test('-f', fullDstPath);","","    if ( !fileExistsAlready || overwrite ) {","      if (fileExistsAlready) {","        this.log('Overwriting: ' + dst);","      } else {","        this.log('Creating: ' + dst);      ","      }","","      // create intermediate folders","      debug('Creating intermediate folders for: ' + dst);","      shell.mkdir('-p', path.dirname(fullDstPath));","","      debug('Copying ' + src + ' -> ' + dst);","      shell.cp(src, fullDstPath);","    } else {","      this.log('Found: ' + dst);","    }  ","  }  ","","","","  /** ","   * Delete file at given destination if it exists.","   *","   * @param {String} dst Destination file path.","   */","  * deleteFile (dst) {","    let fullDstPath = path.join(this._getProjectFolder(), dst);","","    this.log('Deleting: ' + dst);","    ","    shell.rm(fullDstPath);","  }  ","","","","  /** ","   * Install one or more NPM packages into the local NPM modules folder.","   *","   * If a package is already present then it does not get installed again.","   * ","   * _Note: This does not modify the local package.json (if it exists)._","   *","   * @param {Array} pkgs NPM package names.","   * @param {Object} [options] Options.","   * @param {Boolean} [options.dev] Whether to save as dev-dependency.","   */","  * installPkgs (pkgs, options) {","    options = _.extend({","      dev: false,","    }, options);","","    let str = pkgs.join(' ');","","    if (options.dev) {","      str = '--save-dev ' + str;","    } else {","      str = '--save ' + str;","    }","","    this.log('npm install ' + str);","","    yield shell.execAsync('npm install ' + str, {","      cwd: this._getProjectFolder()","    });    ","  }  ","","","","  /** ","   * Check whether given file exists in project folder.","   *","   * @return {Boolean} true if found, false otherwise.","   */","  fileExists (filePath) {","    let fullPath = path.join(this._getProjectFolder(), filePath);","","    return !!(shell.test('-e', fullPath));","  }  ","","","","","  /** ","   * Find location of NPM node modules folder.","   *","   * @return {String} location if found, null otherwise.","   *","   * @private","   */","  _getNpmFolderLocation () {","    // we're going to assume that the CLI is always run in the root folder","    // of the project, where node_moduels also resides","","    let npmFolder = path.join(this._getProjectFolder(), 'node_modules');","","    if (shell.test('-d', npmFolder)) {","      return npmFolder;","    } else {","      return null;","    }","  }  ","","","  /** ","   * Get project folder.","   * ","   * @return {String} folder for current app we're working on.","   * ","   * @protected","   */","  _getProjectFolder () {","    return path.join(waigo.getAppFolder(), '..');","  }","","","}"]
}]}},function(e,t){e.exports={variables:[{name:"moment",tags:{fileOverview:[{description:"Notify admins about user stats:\n- users signed up in past 7 days"}]},description:[],code:["let  moment = require('moment');"]}]}},function(e,t){e.exports={methods:[{name:"create",tags:{param:[{description:"Database id.",type:{name:"Object"},name:"id"},{description:"The app logger",type:{name:"Object"},name:"logger"},{description:"configuration",type:{name:"Object"},name:"dbConfig"},{description:"connection pool config",type:{name:"String"},name:"dbConfig.poolConfig"},{description:"db name",type:{name:"String"},name:"dbConfig.name"}],"return":[{description:"db connection.",type:{name:"Object"}}]},description:["Create a database connection."],params:[{name:"id",description:["Database id."],type:{name:"Object"}},{name:"logger",description:["The app logger"],type:{name:"Object"}},{name:"dbConfig",description:["configuration"],type:{name:"Object"}}],returns:[{description:["db connection."],type:{name:"Object"}}],"throws":[],code:["exports.create = function*(id, logger, dbConfig) {","  logger.info('Connecting to RethinkDB', id);","","  let db = yield Thinodium.connect('rethinkdb', dbConfig.serverConfig);","","  _connections[id] = db;","","  return db;","};"]},{name:"closeAll",tags:{param:[{description:"The app logger",type:{name:"Object"},name:"logger"}]},description:["Shutdown all database connections."],params:[{name:"logger",description:["The app logger"],type:{name:"Object"}}],returns:[],"throws":[],code:["exports.closeAll = function*(logger) {","  logger.info('Close all connections');","","  yield _.map(_connections, (db) => {","    return Q.try(() => {","      if (db.isConnected) {","        return db.disconnect()","      }      ","    });","  });","};"]}]}},function(e,t){e.exports={methods:[{name:"ctx",tags:{"return":[{description:"Plain object.",type:{name:"Object"}}]},description:["Get renderable representation of this `Error`.","Is is better to use `RuntimeError`-derived error classes instead of `Error` \nas they provide other useful features. However unexpected errors may occur \nwhich is why it is important to be able to process them for output."],params:[{name:"ctx",description:[],type:{}}],returns:[{description:["Plain object."],type:{name:"Object"}}],"throws":[],code:["Error.prototype[viewObjects.METHOD_NAME] = function*(ctx) {","  let ret = {","    type: this.name || 'Error',","    msg: this.message,","  };","","  if (this.details) {","    ret.details = yield viewObjects.toViewObjectYieldable(this.details, ctx);","  }","","  if (this.stack && _.get(ctx, 'App.config.errors.showStack')) {","    ret.stack = this.stack;","  }","","  return ret;","};"]},{name:"ctx",tags:{"return":[{description:"Plain object.",type:{name:"Object"}}]},description:["Get renderable representation of this error."],params:[{name:"ctx",description:[],type:{}}],returns:[{description:["Plain object."],type:{name:"Object"}}],"throws":[],code:["RuntimeError.prototype[viewObjects.METHOD_NAME] = function*(ctx) {","  let ret = {","    type: this.name,","    msg: this.message,","  };","","  if (this.details) {","    ret.details = yield viewObjects.toViewObjectYieldable(this.details, ctx);","  }","","  if (this.stack && _.get(ctx, 'App.config.errors.showStack')) {","    ret.stack = this.stack;","  }","","  return ret;","};"]},{name:"ctx",tags:{"return":[{description:"Plain object.",type:{name:"Object"}}]},description:["Get renderable representation of this error.","This collects view object representations of all the sub-errors and into a \nsingle object."],params:[{name:"ctx",description:[],type:{}}],returns:[{description:["Plain object."],type:{name:"Object"}}],"throws":[],code:["MultipleError.prototype[viewObjects.METHOD_NAME] = function*(ctx) {","  let ret = {","    type: this.name,","    msg: this.message,","    details: {},","  };","","  for (let subErrorKey in this.details) {","    let subError = this.details[subErrorKey],","      fn = subError[viewObjects.METHOD_NAME];","","    ret.details[subErrorKey] = (fn ? yield fn.call(subError, ctx) : subError);","  }","","  if (this.stack && _.get(ctx, 'App.config.errors.showStack')) {","    ret.stack = this.stack;","  }","","  return ret;","};"]},{name:"define",tags:{param:[{description:"Name of this new error type.",type:{name:"String"},name:"newClassName"},{description:"Base class to derive the new class from. Default is `RuntimeError`.",type:{optional:!0,name:"Class"},name:"baseClass"}],"return":[{description:"The new error class.",type:{name:"Class"}}]},description:["Define a new error class.","This is a convenience method for quickly creating custom error classes which \ninherit from existing classes."],params:[{name:"newClassName",description:["Name of this new error type."],type:{name:"String"}},{name:"baseClass",description:["Base class to derive the new class from. Default is `RuntimeError`."],type:{optional:!0,name:"Class"}}],returns:[{description:["The new error class."],type:{name:"Class"}}],"throws":[],code:["exports.define = function(newClassName, baseClass) {","  baseClass = baseClass || RuntimeError;","","  let newErrorClass = (class Class extends baseClass {","    constructor (msg, status, details) {","      super(msg, status, details);","      this.name = newClassName;","      Error.captureStackTrace(this, newErrorClass);","    }","  });","","  return newErrorClass;","};"]}],classes:[{name:"RuntimeError",tags:{},description:["A runtime error.","Use this in preference to `Error` where possible as it provides for more \ndescriptive output."],parents:[{name:"Error"}],instance:{constructor:{name:"constructor",tags:{param:[{description:"Error message.",type:{optional:!0,name:"String"},name:"msg"},{description:"HTTP return status code to set. Default is 500.",type:{optional:!0,name:"Number"},name:"status"},{description:"Additional details pertaining to this error.",type:{optional:!0,name:"Object"},name:"details"}]},description:["Constructor."],params:[{name:"msg",description:["Error message."],type:{optional:!0,name:"String"}},{name:"status",description:["HTTP return status code to set. Default is 500."],type:{optional:!0,name:"Number"}},{name:"details",description:["Additional details pertaining to this error."],type:{optional:!0,name:"Object"}}],returns:[],"throws":[],code:["  constructor (msg, status, details) {","    msg = msg || 'An error occurred';","    super(msg);","    this.name = this.constructor.name;","    this.message = msg;","    this.status = status || 500;","    this.details = details || null;","    Error.captureStackTrace(this, this.constructor);","  }"]}},"static":null,constructor:{name:"constructor",tags:{param:[{description:"Error message.",type:{optional:!0,name:"String"},name:"msg"},{description:"HTTP return status code to set. Default is 500.",type:{optional:!0,name:"Number"},name:"status"},{description:"Additional details pertaining to this error.",type:{optional:!0,name:"Object"},name:"details"}]},description:["Constructor."],params:[{name:"msg",description:["Error message."],type:{optional:!0,name:"String"}},{name:"status",description:["HTTP return status code to set. Default is 500."],type:{optional:!0,name:"Number"}},{name:"details",description:["Additional details pertaining to this error."],type:{optional:!0,name:"Object"}}],returns:[],"throws":[],code:["  constructor (msg, status, details) {","    msg = msg || 'An error occurred';","    super(msg);","    this.name = this.constructor.name;","    this.message = msg;","    this.status = status || 500;","    this.details = details || null;","    Error.captureStackTrace(this, this.constructor);","  }"]},code:["class RuntimeError extends Error {","  /**","   * Constructor.","   *","   * @param {String} [msg] Error message.","   * @param {Number} [status] HTTP return status code to set. Default is 500.","   * @param {Object} [details] Additional details pertaining to this error.","   */","  constructor (msg, status, details) {","    msg = msg || 'An error occurred';","    super(msg);","    this.name = this.constructor.name;","    this.message = msg;","    this.status = status || 500;","    this.details = details || null;","    Error.captureStackTrace(this, this.constructor);","  }","}"]},{name:"MultipleError",tags:{},description:["Represents multiple errors grouped together.","Sometimes we may wish to report multiple related errors (e.g. form field \nvalidation failures). This error class makes it easy to do so."],parents:[{name:"RuntimeError"}],instance:{constructor:{name:"constructor",tags:{param:[{description:"Error message.",type:{optional:!0,name:"String"},name:"msg"},{description:"HTTP return status code to set. Default is 500.",type:{optional:!0,name:"Number"},name:"status"},{description:"Map of errors, where each value is itself an `Error` instance.",type:{optional:!0,name:"Object"},name:"subErrors"}]},description:["Constructor."],params:[{name:"msg",description:["Error message."],type:{optional:!0,name:"String"}},{name:"status",description:["HTTP return status code to set. Default is 500."],type:{optional:!0,name:"Number"}},{name:"subErrors",description:["Map of errors, where each value is itself an `Error` instance."],type:{optional:!0,name:"Object"}}],returns:[],"throws":[],code:["  constructor (msg, status, subErrors) {","    super(msg || 'Some errors occurred', status, subErrors || {});","  }"]}},"static":null,constructor:{name:"constructor",tags:{param:[{description:"Error message.",type:{optional:!0,name:"String"},name:"msg"},{description:"HTTP return status code to set. Default is 500.",type:{optional:!0,name:"Number"},name:"status"},{description:"Map of errors, where each value is itself an `Error` instance.",type:{optional:!0,name:"Object"},name:"subErrors"}]},description:["Constructor."],params:[{name:"msg",description:["Error message."],type:{optional:!0,name:"String"}},{name:"status",description:["HTTP return status code to set. Default is 500."],type:{optional:!0,name:"Number"}},{name:"subErrors",description:["Map of errors, where each value is itself an `Error` instance."],type:{optional:!0,name:"Object"}}],returns:[],"throws":[],code:["  constructor (msg, status, subErrors) {","    super(msg || 'Some errors occurred', status, subErrors || {});","  }"]},code:["class MultipleError extends RuntimeError {","  /**","   * Constructor.","   *","   * @param {String} [msg] Error message.","   * @param {Number} [status] HTTP return status code to set. Default is 500.","   * @param {Object} [subErrors] Map of errors, where each value is itself an `Error` instance.","   */","  constructor (msg, status, subErrors) {","    super(msg || 'Some errors occurred', status, subErrors || {});","  }","}"]}]}},function(e,t){e.exports={constants:[{name:"FieldValidationError",tags:{},description:["Form fields","This module provides a base `Field` class for use with the `Form` class.\nConcrete instances of this class are never created - instead one of its\nsubtypes will be instantiated depending on the type of field required.","A field is provided a reference to its parent form upon constructions - it\nuses this primarily to fetch a reference to the form's internal state\nobject, as this is where fields also store their data (rather than within\nthe `Field` instance).","The `Field.new()` static method makes it easy to initialise a field of any\ngiven type and is the recommended method for creating new field instances."],code:["const FieldValidationError = exports.FieldValidationError = ","  errors.define('FieldValidationError', errors.MultipleError);"]},{name:"FieldValidationError",tags:{},description:["A field validation error."],code:["const FieldValidationError = exports.FieldValidationError = ","  errors.define('FieldValidationError', errors.MultipleError);"]},{name:"FieldSanitizationError",tags:{},description:["A field sanitization error."],code:["const FieldSanitizationError = exports.FieldSanitizationError = ","  errors.define('FieldSanitizationError');"]}],classes:[{name:"constructor",tags:{param:[{description:"Parent form",type:{name:"Form"},name:"form"},{description:"Configuration options",type:{name:"Object"},name:"config"}],_constructor:[{description:null}]},description:["A form field."],parents:[],instance:null,"static":null,code:["  constructor (form, config) {","    this.form = form;","    this.config = config;","","    this.sanitizers = [];","    this.validators = [];","","    _.each(config.sanitizers || [], (def) => {","      this._addSanitizer(def);","    });","","    _.each(config.validators || [], (def) => {","      this._addValidator(def);","    });","  }"]}],methods:[{name:"_addValidator",tags:{param:[{description:null,type:{},name:"def"}]},description:["Add a validator"],params:[{name:"def",description:[],type:{}}],returns:[],"throws":[],code:["  _addValidator (def) {","    if (_.isGenFn(def)) {","      return this.validators.push({","        fn: def","      });","    }","","    var options = {};","","    if (def.id) {","      options = _.omit(def, 'id');","      def = def.id;","    }","","    this.validators.push({","      fn: waigo.load(`support/forms/validators/${def}`)(options),","      msg: options.msg,","    });","  }"]},{name:"_addSanitizer",tags:{param:[{description:null,type:{},name:"def"}]},description:["Add a sanitizer"],params:[{name:"def",description:[],type:{}}],returns:[],"throws":[],code:["  _addSanitizer (def) {","    if (_.isGenFn(def)) {","      return this.sanitizers.push({","        fn: def","      });","    }","","    var options = {}","","    if (def.id) {","      options = _.omit(def, 'id');","      def = def.id;","    }","","    this.sanitizers.push({","      fn: waigo.load(`support/forms/sanitizers/${def}`)(options),","      msg: options.msg,","    });","  }"]},{name:"setSanitizedValue",tags:{param:[{description:"The value.",type:{},name:"val"}],"throws":[{description:"FieldSanitizationError If any errors occur."}]},description:["Set the value of this field.","This will run the given value through all available sanitizers prior to\nactually setting it. Subclasses should override this method if they wish to\nperform any additional processing of the value."],params:[{name:"val",description:["The value."],type:{}}],returns:[],"throws":[{description:["FieldSanitizationError If any errors occur."],type:{}}],code:["  * setSanitizedValue (val) {","    for (let sanitizer of this.sanitizers) {","      let fn = sanitizer.fn,","        msg = sanitizer.msg;","","      try {","        val = yield fn(this, val);","      } catch (e) {","        throw new FieldSanitizationError(msg || e.message);","      }","    }","","    this.value = val;","  }"]},{name:"isDirty",tags:{"return":[{description:null,type:{name:"Boolean"}}]},description:["Get whether this field is dirty.","It is dirty if its current value is different from its original value."],params:[],returns:[{description:[],type:{name:"Boolean"}}],"throws":[],code:["  isDirty () {","    return this.value !== this.originalValue;","  }"]},{name:"validate",tags:{param:[{description:"Client koa request context.",type:{optional:!0,name:"Object"},name:"context"}],"throws":[{description:"FieldValidationError If validation fails."}]},description:["Validate this field's value."],params:[{name:"context",description:["Client koa request context."],type:{optional:!0,name:"Object"}}],returns:[],"throws":[{description:["FieldValidationError If validation fails."],type:{}}],code:["  * validate (context) {","    let errors = [];","","    // if value is undefined and field is not required then nothing to do","    if (undefined === this.value || null === this.value || '' === this.value) {","      if (!this.config.required) {","        return;","      } else {","        errors.push('Must be set');","      }","    } else {","      for (let validator of this.validators) {","        let fn = validator.fn,","          msg = validator.msg;","","        try {","          yield fn(context, this, this.value);","        } catch (err) {","          errors.push(msg || err.message);","        }","      }    ","    }","","    if (0 < errors.length) {","      throw new FieldValidationError('Field validation failed', 400, errors);","    }","  }"]},{name:"ctx",tags:{param:[{description:"Current request context.",type:{name:"Object"},name:"ctx"}],"return":[{description:null,type:{name:"Object"}}]},description:["Get renderable representation of this field."],params:[{name:"ctx",description:["Current request context."],type:{name:"Object"}}],returns:[{description:[],type:{name:"Object"}}],"throws":[],code:["Field.prototype[viewObjects.METHOD_NAME] = function*(ctx) {","  return _.extend({}, this.config, {","    value: this.value,","    originalValue: this.originalValue,","  });","}"]},{name:"new",tags:{param:[{description:"The parent form which holds this field's internal state.",type:{name:"Form"},name:"form"},{description:"The field configuration.",type:{name:"Object"},name:"config"}],"return":[{description:null,type:{name:"Field"}}]},description:["Create a `Field` instance.","This will load and intialise an instance of the correct `Field` subtype\naccording to the given field definition."],params:[{name:"form",description:["The parent form which holds this field's internal state."],type:{name:"Form"}},{name:"config",description:["The field configuration."],type:{name:"Object"}}],returns:[{description:[],type:{name:"Field"}}],"throws":[],code:["Field.new = function(form, config) {","  let type = config.type,","    FieldClass = waigo.load(`support/forms/fields/${type}`);","","  return new FieldClass(form, config);","}"]}],variables:[{name:"originalValue",tags:{},description:["Field original value.","This is useful if we wish to check whether the field value has changed \nfrom its previous value."],code:["  get originalValue () {","    return _.get(this.form.state, `${this.name}.originalValue`);","  }"]}]}},function(e,t){e.exports={classes:[{name:"Checkbox",tags:{},description:["A select field."],parents:[{name:"Field"}],instance:{constructor:{name:"constructor",tags:{param:[{description:"Parent form",type:{name:"Form"},name:"form"},{description:"Configuration options",type:{name:"Object"},name:"config"}],_constructor:[{description:null}]},description:["Construct."],params:[{name:"form",description:["Parent form"],type:{name:"Form"}},{name:"config",description:["Configuration options"],type:{name:"Object"}}],returns:[],"throws":[],code:["  constructor(form, config) {","    super(form, config);","","    this._addSanitizer(","      function*(field, value) {","        return value ? validator.toBoolean('' + value) : false;","      }","    )","  }"]}},"static":null,constructor:{name:"constructor",tags:{param:[{description:"Parent form",type:{name:"Form"},name:"form"},{description:"Configuration options",type:{name:"Object"},name:"config"}],_constructor:[{description:null}]},description:["Construct."],params:[{name:"form",description:["Parent form"],type:{name:"Form"}},{name:"config",description:["Configuration options"],type:{name:"Object"}}],returns:[],"throws":[],code:["  constructor(form, config) {","    super(form, config);","","    this._addSanitizer(","      function*(field, value) {","        return value ? validator.toBoolean('' + value) : false;","      }","    )","  }"]},code:["class Checkbox extends Field {","  /**","   * Construct.","   * @param  {Form} form   Parent form","   * @param  {Object} config Configuration options","   * @constructor","   */","  constructor(form, config) {","    super(form, config);","","    this._addSanitizer(","      function*(field, value) {","        return value ? validator.toBoolean('' + value) : false;","      }","    )","  }","}"]}]}},function(e,t){e.exports={methods:[{name:"ctx",tags:{override:[{description:null}]},description:[],params:[{name:"ctx",description:[],type:{}}],returns:[],"throws":[],code:["Csrf.prototype[viewObjects.METHOD_NAME] = function*(ctx) {","  let ret = yield HiddenField.prototype[viewObjects.METHOD_NAME].call(this, ctx);","","  ret.value = ctx.csrf;","","  return ret;","};"]}],classes:[{name:"Csrf",tags:{},description:["A Cross-site request forgery prevention field."],parents:[{name:"HiddenField"}],instance:{constructor:{name:"constructor",tags:{param:[{description:"Parent form",type:{name:"Form"},name:"form"},{description:"Configuration options",type:{name:"Object"},name:"config"}],_constructor:[{description:null}]},description:["Construct."],params:[{name:"form",description:["Parent form"],type:{name:"Form"}},{name:"config",description:["Configuration options"],type:{name:"Object"}}],returns:[],"throws":[],code:["  constructor (form, config) {","    super(form, config);","","    this._addValidator(checkCSRF);","  }"]}},"static":null,constructor:{name:"constructor",tags:{param:[{description:"Parent form",type:{name:"Form"},name:"form"},{description:"Configuration options",type:{name:"Object"},name:"config"}],_constructor:[{description:null}]},description:["Construct."],params:[{name:"form",description:["Parent form"],type:{name:"Form"}},{name:"config",description:["Configuration options"],type:{name:"Object"}}],returns:[],"throws":[],code:["  constructor (form, config) {","    super(form, config);","","    this._addValidator(checkCSRF);","  }"]},code:["class Csrf extends HiddenField {","  /**","   * Construct.","   * ","   * @param  {Form} form   Parent form","   * @param  {Object} config Configuration options","   * @constructor","   */","  constructor (form, config) {","    super(form, config);","","    this._addValidator(checkCSRF);","  }","}"]}]}},function(e,t){e.exports={classes:[{name:"Email",tags:{},description:["A select field."],parents:[{name:"TextField"}],instance:{constructor:{name:"constructor",tags:{param:[{description:"Parent form",type:{name:"Form"},name:"form"},{description:"Configuration options",type:{name:"Object"},name:"config"}],_constructor:[{description:null}]},description:["Construct."],params:[{name:"form",description:["Parent form"],type:{name:"Form"}},{name:"config",description:["Configuration options"],type:{name:"Object"}}],returns:[],"throws":[],code:["  constructor(form, config) {","    super(form, config);","","    this._addValidator('isEmailAddress');","  }"]}},"static":null,constructor:{name:"constructor",tags:{param:[{description:"Parent form",type:{name:"Form"},name:"form"},{description:"Configuration options",type:{name:"Object"},name:"config"}],_constructor:[{description:null}]},description:["Construct."],params:[{name:"form",description:["Parent form"],type:{name:"Form"}},{name:"config",description:["Configuration options"],type:{name:"Object"}}],returns:[],"throws":[],code:["  constructor(form, config) {","    super(form, config);","","    this._addValidator('isEmailAddress');","  }"]},code:["class Email extends TextField {","  /**","   * Construct.","   * @param  {Form} form   Parent form","   * @param  {Object} config Configuration options","   * @constructor","   */","  constructor(form, config) {","    super(form, config);","","    this._addValidator('isEmailAddress');","  }","","}"]}]}},function(e,t){e.exports={methods:[{name:"ctx",tags:{override:[{description:null}]},description:[],params:[{name:"ctx",description:[],type:{}}],returns:[],"throws":[],code:["HiddenField.prototype[viewObjects.METHOD_NAME] = function*(ctx) {","  let ret = yield TextField.prototype[viewObjects.METHOD_NAME].call(this, ctx);","","  ret.type = 'hidden';","","  return ret;","};"]}]}},function(e,t){e.exports={classes:[{name:"NumberField",tags:{},description:["A select field."],parents:[{name:"TextField"}],instance:{constructor:{name:"constructor",tags:{param:[{description:"Parent form",type:{name:"Form"},name:"form"},{description:"Configuration options",type:{name:"Object"},name:"config"}],_constructor:[{description:null}]},description:["Construct."],params:[{name:"form",description:["Parent form"],type:{name:"Form"}},{name:"config",description:["Configuration options"],type:{name:"Object"}}],returns:[],"throws":[],code:["  constructor(form, config) {","    super(form, config);","","    this._addSanitizer(","      function*(field, value) {","        return Number(value);","      }","    )","  }"]}},"static":null,constructor:{name:"constructor",tags:{param:[{description:"Parent form",type:{name:"Form"},name:"form"},{description:"Configuration options",type:{name:"Object"},name:"config"}],_constructor:[{description:null}]},description:["Construct."],params:[{name:"form",description:["Parent form"],type:{name:"Form"}},{name:"config",description:["Configuration options"],type:{name:"Object"}}],returns:[],"throws":[],code:["  constructor(form, config) {","    super(form, config);","","    this._addSanitizer(","      function*(field, value) {","        return Number(value);","      }","    )","  }"]},code:["class NumberField extends TextField {","  /**","   * Construct.","   * @param  {Form} form   Parent form","   * @param  {Object} config Configuration options","   * @constructor","   */","  constructor(form, config) {","    super(form, config);","","    this._addSanitizer(","      function*(field, value) {","        return Number(value);","      }","    )","  }","}"]}]}},530,function(e,t){e.exports={methods:[{name:"ctx",tags:{override:[{description:null}]},description:[],params:[{name:"ctx",description:[],type:{}}],returns:[],"throws":[],code:["Select.prototype[viewObjects.METHOD_NAME] = function*(ctx) {","  let ret = yield Field.prototype.toViewObject.call(this, ctx);","","  ret.options = yield this.getOptions();","","  return ret;","};"]}],classes:[{name:"Select",tags:{},description:["A select field."],parents:[{name:"Field"}],instance:{constructor:{name:"constructor",tags:{param:[{description:"Parent form",type:{name:"Form"},name:"form"},{description:"Configuration options",type:{name:"Object"},name:"config"}],_constructor:[{description:null}]},description:["Construct."],params:[{name:"form",description:["Parent form"],type:{name:"Form"}},{name:"config",description:["Configuration options"],type:{name:"Object"}}],returns:[],"throws":[],code:["  constructor(form, config) {","    super(form, config);","","    // default validator","    this._addValidator(","      function*(context, field, val) {","        let options = yield field.getOptions();","","        if (!_.isArray(val)) {","          val = [val];","        }","","        val = _arrayToStr(val);","        let expected = _arrayToStr(_.keys(options));","","        let diff = _.difference(val, expected);","        ","        // if unknown option given OR if more than one given for a non-multiple select","        if (diff.length || (1 < val.length && !field.config.multiple)) {","          let str = field.config.multiple ? 'one or more of' : 'one of';","","          throw new FieldValidationError(`Must be ${str}: ${_.values(options).join(', ')}`);","        }","      }","    );","  }"]},methods:{getOptions:{name:"getOptions",tags:{"return":[{description:"key-value pairs representing options.",type:{name:"Object"}}]},description:["Get selectable options to show to user."],params:[],returns:[{description:["key-value pairs representing options."],type:{name:"Object"}}],"throws":[],code:["  * getOptions () {","    if (this.config.options instanceof Function) {","      return yield this.config.options();","    } else {","      return this.config.options;","    }","  }"]}}},"static":null,constructor:{name:"constructor",tags:{param:[{description:"Parent form",type:{name:"Form"},name:"form"},{description:"Configuration options",type:{name:"Object"},name:"config"}],_constructor:[{description:null}]},description:["Construct."],params:[{name:"form",description:["Parent form"],type:{name:"Form"}},{name:"config",description:["Configuration options"],type:{name:"Object"}}],returns:[],"throws":[],code:["  constructor(form, config) {","    super(form, config);","","    // default validator","    this._addValidator(","      function*(context, field, val) {","        let options = yield field.getOptions();","","        if (!_.isArray(val)) {","          val = [val];","        }","","        val = _arrayToStr(val);","        let expected = _arrayToStr(_.keys(options));","","        let diff = _.difference(val, expected);","        ","        // if unknown option given OR if more than one given for a non-multiple select","        if (diff.length || (1 < val.length && !field.config.multiple)) {","          let str = field.config.multiple ? 'one or more of' : 'one of';","","          throw new FieldValidationError(`Must be ${str}: ${_.values(options).join(', ')}`);","        }","      }","    );","  }"]},code:["class Select extends Field {","  /**","   * Construct.","   * @param  {Form} form   Parent form","   * @param  {Object} config Configuration options","   * @constructor","   */","  constructor(form, config) {","    super(form, config);","","    // default validator","    this._addValidator(","      function*(context, field, val) {","        let options = yield field.getOptions();","","        if (!_.isArray(val)) {","          val = [val];","        }","","        val = _arrayToStr(val);","        let expected = _arrayToStr(_.keys(options));","","        let diff = _.difference(val, expected);","        ","        // if unknown option given OR if more than one given for a non-multiple select","        if (diff.length || (1 < val.length && !field.config.multiple)) {","          let str = field.config.multiple ? 'one or more of' : 'one of';","","          throw new FieldValidationError(`Must be ${str}: ${_.values(options).join(', ')}`);","        }","      }","    );","  }","","  /**","   * Get selectable options to show to user.","   *","   * @return {Object} key-value pairs representing options.","   */","  * getOptions () {","    if (this.config.options instanceof Function) {","      return yield this.config.options();","    } else {","      return this.config.options;","    }","  }","}"]}]}},530,function(e,t){e.exports={constants:[{name:"FormValidationError",tags:{},description:["Form validation error."],code:["const FormValidationError = exports.FormValidationError = ","  errors.define('FormValidationError', errors.MultipleError);"]}],methods:[{name:"create",tags:{param:[{description:"form configuration,  name of a form, or an existing `Form`.",type:{},name:"config"},{description:"Additional options.",type:{optional:!0,name:"Object"},name:"options"},{description:"The current request context.",type:{optional:!0,name:"Object"},name:"options.context"},{description:"The internal state to set for this form.",type:{optional:!0,name:"Object"},name:"options.state"}]},description:["Construct a form.","Form field values get stored in an internal state object which can be retrieved \nand set at any time, thus allowing you to share state between `Form` instances \nas well as quickly restore a `Form` to a previously set state.","Constructing a form using this function rather than the `Form` constructor will \nalso ensure that the `postCreation` hooks get run."],params:[{name:"config",description:["form configuration,  name of a form, or an existing `Form`."],type:{}},{name:"options",description:["Additional options."],type:{optional:!0,name:"Object"}}],returns:[],"throws":[],code:["exports.create = function*(config, options) {","  if (_.isString(config)) {","    let cachedSpec = cache[config];","","    if (!cachedSpec) {","      cache[config]  = cachedSpec = waigo.load('forms/' + config);","      cachedSpec.id = config;","    }","","    config = cachedSpec;    ","  }","","  let f = new Form(config, options);","","  yield f.runHook('postCreation');","","  return f;","}"]},{name:"setValues",tags:{param:[{description:"Mapping from field name to field value.",type:{name:"Object"},name:"values"}]},description:["Set values.","This will sanitize each value prior to setting it."],params:[{name:"values",description:["Mapping from field name to field value."],type:{name:"Object"}}],returns:[],"throws":[],code:["  * setValues (values) {","    for (let fieldName in this.fields) {","      yield this.fields[fieldName].setSanitizedValue(values[fieldName]);","    }","  }"]
},{name:"setOriginalValues",tags:{param:[{description:"Mapping from field name to field original value.",type:{name:"Object"},name:"values"}]},description:["Set original values.",null],params:[{name:"values",description:["Mapping from field name to field original value."],type:{name:"Object"}}],returns:[],"throws":[],code:["  * setOriginalValues (values) {","    for (let fieldName in this.fields) {","      this.fields[fieldName].originalValue = values[fieldName];","    }","  }"]},{name:"isDirty",tags:{"return":[{description:"True if any fields are dirty; false otherwise.",type:{name:"Boolean"}}]},description:["Get whether this form is dirty."],params:[],returns:[{description:["True if any fields are dirty; false otherwise."],type:{name:"Boolean"}}],"throws":[],code:["  isDirty () {","    for (let fieldName in this.fields) {","      if (this.fields[fieldName].isDirty()) {","        return true;","      }","    }","","    return false;","  }"]},{name:"validate",tags:{"throws":[{description:"FormValidationError If validation fails."}]},description:["Validate the contents of this form."],params:[],returns:[],"throws":[{description:["FormValidationError If validation fails."],type:{}}],code:["  * validate () {","    let fields = this.fields,","      errors = null;","","    for (let fieldName in fields) {","      let field = fields[fieldName];","","      try {","        yield field.validate(this.context);","      } catch (err) {","        if (!errors) {","          errors = {};","        }","","        errors[fieldName] = err.details;","      }","    }","","    if (errors) {","      throw new FormValidationError('Please correct the errors in the form.', 400, errors);","    }","  }"]},{name:"process",tags:{},description:["Process this submitted form.","This will insert values from the current context request body and run \nall sanitization and validation. If validation succeeds then post-validation\nhooks will be run."],params:[],returns:[],"throws":[],code:["  * process () {","    let body = _.get(this.context, 'request.body');","","    if (!body) {","      throw new FormValidationError('No request body available to process');","    }","","    yield this.setValues(body);","    yield this.validate();","    yield this.runHook('postValidation');","  }"]},{name:"runHook",tags:{param:[{description:"Hooks to run.",type:{name:"String"},name:"hookName"}]},description:["Run hooks."],params:[{name:"hookName",description:["Hooks to run."],type:{name:"String"}}],returns:[],"throws":[],code:["  * runHook (hookName) {","    yield compose(this.config[hookName] || []).call(this);","  }"]},{name:"ctx",tags:{"return":[{description:"Renderable plain object representation.",type:{name:"Object"}}]},description:["Get renderable representation of this form."],params:[{name:"ctx",description:[],type:{}}],returns:[{description:["Renderable plain object representation."],type:{name:"Object"}}],"throws":[],code:["Form.prototype[viewObjects.METHOD_NAME] = function*(ctx) {","  let ret = _.omit(this.config, 'fields', 'postValidation');","","  let fields = this.fields,","    fieldViewObjects = {},","    fieldOrder = [];","","  for (let fieldName in fields) {","    let field = fields[fieldName];","      ","    fieldViewObjects[fieldName] = yield field[viewObjects.METHOD_NAME](ctx);","    fieldOrder.push(fieldName);","  }","","  ret.fields = fieldViewObjects;","  ret.order = fieldOrder;","","  return ret;","}"]}],classes:[{name:"constructor",tags:{param:[{description:"form configuration,  name of a form, or an existing `Form`.",type:{},name:"config"},{description:"Additional options.",type:{optional:!0,name:"Object"},name:"options"},{description:"The current request context.",type:{optional:!0,name:"Object"},name:"options.context"},{description:"The internal state to set for this form.",type:{optional:!0,name:"Object"},name:"options.state"}],_constructor:[{description:null}]},description:["Construct a form.","Form field values get stored in an internal state object which can be retrieved \nand set at any time, thus allowing you to share state between `Form` instances \nas well as quickly restore a `Form` to a previously set state."],parents:[],instance:null,"static":null,code:["  constructor (config, options) {","    options = _.extend({","      context: null,","      state: null,","    }, options);","","    if (config instanceof Form) {","      // passed-in state overrides existing form's state","      options.state = options.state || config.state;  ","      config = config.config;","    }","","    this.config = _.extend({}, config);","","    this.context = options.context;","    this.logger = logger.create('Form[' + this.config.id + ']');","","    // setup fields","    this._fields = {}","    for (let idx in this.config.fields) {","      let def = this.config.fields[idx];","      this._fields[def.name] = Field.new(this, def);","    }","","    // CSRF enabled (set by koa-csrf package)?","    if (!!_.get(this.context, 'assertCSRF')) {","      this.logger.debug('Adding CSRF field');","","      this._fields.__csrf = Field.new(this, {","        name: '__csrf',","        label: 'CSRF',","        type: 'csrf',","        required: true,","      });","    }","","    // initial state","    this.state = _.extend({}, options.state);    ","  }"]}],variables:[{name:"state",tags:{param:[{description:"New state.",type:{name:"Object"},name:"newState"}]},description:["Set new state."],code:["  set state (newState) {","    this._state = newState;","","    for (let fieldName in this.fields) {","      this._state[fieldName] = this._state[fieldName] || {","        value: undefined","      }","    }","  }"]}]}},function(e,t){e.exports={methods:[{name:"lib",tags:{},description:["Sanitizer which excutes a function from valiator lib"],params:[{name:"options",description:[],type:{}}],returns:[],"throws":[],code:["module.exports = function(options) {","  let method = options.method,","    args = options.args;","","  args = args || [];","","  if (!validator[method]) {","    throw new FieldValidationError(`Invalid method: ${method}`);","  }","","  return function*(field, value) {","    return validator[method].apply(validator, [value].concat(args));","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"trim",tags:{"return":[{description:"Sanitizaton function.",type:{name:"Function"}}]},description:["Sanitizer to trim whitespace from the end of strings."],params:[],returns:[{description:["Sanitizaton function."],type:{name:"Function"}}],"throws":[],code:["module.exports = function() {","  return function*(field, value) {","    return (typeof value === 'string' ? _.trim(value) : value);","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"compareToField",tags:{param:[{description:"Options.",type:{name:"Object"},name:"options"},{description:"Field to compare to.",type:{name:"String"},name:"options.field"},{description:"`gt`, `gte`, `lt`, `lte`, `neq` or `eq`.",type:{name:"String"},name:"options.comparison"}],"throws":[{description:"Error If not an email address."}]},description:["Validator to ensure given field compared with another field in a certain way."],params:[{name:"options",description:["Options."],type:{name:"Object"}}],returns:[],"throws":[{description:["Error If not an email address."],type:{}}],code:["module.exports = function(options) {","  return function*(context, field, value) {","    let fields = field.form.fields,","      otherField = fields[options.field]","","    if (!otherField) {","      throw new FieldValidationError('Comparison field not found: ' + options.field);","    }","","    switch (options.comparison) {","      case 'gte':","        if (value < otherField.value) {","          throw new FieldValidationError('Must be greater than or equal to ' + otherField.label);","        }","        break;","      case 'gt':","        if (value <= otherField.value) {","          throw new FieldValidationError('Must be greater than ' + otherField.label);","        }","        break;","      case 'lte':","        if (value > otherField.value) {","          throw new FieldValidationError('Must be less than or equal to ' + otherField.label);","        }","        break;","      case 'lt':","        if (value >= otherField.value) {","          throw new FieldValidationError('Must be less than ' + otherField.label);","        }","        break;","      case 'neq':","        if (value === otherField.value) {","          throw new FieldValidationError('Must not be equal to ' + otherField.label);","        }","        break;","      default:","        if (value !== otherField.value) {","          throw new FieldValidationError('Must be equal to ' + otherField.label);","        }","        break;","    }","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"emailAddressNotInUse",tags:{"throws":[{description:"Error If not an email address."}]},description:["Validator to check whether given email address is already in use."],params:[],returns:[],"throws":[{description:["Error If not an email address."],type:{}}],code:["module.exports = function() {","  return function*(context, field, value) {","    let existingUser = yield context.App.models.User.getByEmail(value);","","    if (existingUser) {","      throw new FieldValidationError('Email already in use');","    }","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"isEmailAddress",tags:{"throws":[{description:"Error If not an email address."}]},description:["Validator to check whether given string represents an email address."],params:[],returns:[],"throws":[{description:["Error If not an email address."],type:{}}],code:["module.exports = function() {","  return function*(context, field, value) {","    if (!validator.isEmail('' + value)) {","      throw new FieldValidationError('Must be an email address');","    }","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"isLength",tags:{param:[{description:"{Object} Options.",name:"options"},{description:"{Object} Minimum length.",name:"options.min"},{description:"{Object} Maximum length.",name:"options.max"}],"throws":[{description:"Error If not an email address."}]},description:["Validator to check whether given string is at least of given length."],params:[{name:"options",description:["{Object} Options."],type:{}}],returns:[],"throws":[{description:["Error If not an email address."],type:{}}],code:["module.exports = function(options) {","  options = _.extend({","    min: 0,","    max: 10000000,","  }, options);","","  return function*(context, field, value) {","    let len = _.get(value, 'length', 0);","    let min = options.min;","    let max = options.max;","","    if (min > len || max < len) {","      throw new FieldValidationError('Must be between ' ","        + options.min + ' and ' ","        + options.max + ' characters in length'","      );","    }","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"lib",tags:{"throws":[{description:"Error If not an email address."}]},description:["Validator which excutes a function from validator lib"],params:[{name:"options",description:[],type:{}}],returns:[],"throws":[{description:["Error If not an email address."],type:{}}],code:["module.exports = function(options) {","  let method = options.method,","    args = options.args;","","  args = args || [];","","  if (!validator[method]) {","    throw new FieldValidationError(`Invalid method: ${method}`);","  }","","  return function*(context, field, value) {","    if (!validator[method].apply(validator, [value].concat(args))) {","      throw new FieldValidationError(`Validation failed: ${method}`);","    }","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"notEmpty",tags:{"return":[{description:"Validation function.",type:{name:"Function"}}]},description:["Validator to check whether given value is non-empty."],params:[],returns:[{description:["Validation function."],type:{name:"Function"}}],"throws":[],code:["module.exports = function() {","  return function*(context, field, value) {","    if (null === value ","        || undefined === value ","        || (typeof value === 'string' && !value.length)","    ) {","      throw new FieldValidationError('Must not be empty');","    }","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"numberInRange",tags:{param:[{description:"{Object} Options.",name:"options"},{description:"{Object} Minimum length.",name:"options.min"},{description:"{Object} Maximum length.",name:"options.max"}],"throws":[{description:"Error If not an email address."}]},description:["Validator to check whether number is within given range. ","Expect atleast one of `min` or `max`."],params:[{name:"options",description:["{Object} Options."],type:{}}],returns:[],"throws":[{description:["Error If not an email address."],type:{}}],code:["module.exports = function(options) {","  options = (options || {});","  ","  let min = options.min,","    max = options.max;","","  return function*(context, field, value) {","    value = Number(value);","    ","    if ( (undefined !== min && value < min) ","          || (undefined !== max && value > max) ) {","      if (undefined !== min) {","        if (undefined !== max) {","          throw new FieldValidationError(`Must be between ${min} and ${max} inclusive`);","        } else {","          throw new FieldValidationError(`Must be greater than or equal to ${min}`);          ","        }","      } else {","        throw new FieldValidationError(`Must be less than or equal to ${max}`);          ","      }","    }","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"emailFormat",tags:{param:[{description:"How to format.",type:{name:"String"},name:"type"},{description:"The user object or username string.",type:{},name:"obj"}],"return":[{description:null,type:{}}]},description:["Format user name for display."],params:[{name:"type",description:["How to format."],type:{name:"String"}},{name:"obj",description:["The user object or username string."],type:{}}],returns:[{description:[],type:{}}],"throws":[],code:["    emailFormat: function(type, obj) {","     switch (type) {","       case 'greet':","         var name = _.get(obj, 'profile.displayName') || _.get(obj, 'username', '') || obj;","","         return _.get(name, 'length') ? name : 'Hey';","         break;","     }","","     return obj; ","    }"]}]}},530,function(e,t){e.exports={constants:[{name:"marked",tags:{fileOverview:[{description:"Base class for mailer types."}]},description:[],code:["const co = require('co'),","  path = require('path'),","  marked = require('marked');"]}],classes:[{name:"Mailer",tags:{},description:["Base mailer class."],parents:[],instance:null,"static":null,code:["class Mailer {","  constructor (App, config, typeString) {","    this.App = App;","    this.logger = logger.create(`Mailer-${typeString}`);","    this.config = config;","  }","","","  * _init (transport) {","    this._nodeMailer = new NodeMailer(","      this.logger.create('NodeMailer'), ","      this.config, transport","    );","  }","","","","  _renderEmailTemplate (templateName, templateVars) {","    this.logger.debug('Rendering template ' + templateName);","","    let templatePath = ","      path.dirname( waigo.getPath(`emails/${templateName}/html.pug`) );","","    let emailTemplate = new EmailTemplate(templatePath);","","    return new Q((resolve, reject) => {","      emailTemplate.render(templateVars, function(err, result) {","        if (err) {","          reject(err);","        } else {","          resolve(result);","        }","      });","    });","  }","","","","  * _renderBodyMarkdown (template, templateVars) {","    var compiled = _.template(template, {","      interpolate: /{{([\\s\\S]+?)}}/img","    });","","    return marked(compiled(templateVars || {}));","  }","","","  * _renderBodyTemplate (templateName, templateVars) {","    var body = yield this._renderEmailTemplate(templateName, templateVars);","","    return body.html;","  }","","","","  * _renderBody (mailOptions, templateVars) {","    let content;","","    if (mailOptions.bodyTemplate) {","      content = yield this._renderBodyTemplate(mailOptions.bodyTemplate, templateVars);","    } else {","      content = yield this._renderBodyMarkdown(mailOptions.body, templateVars);","    }","","    var templateVars = _.extend({}, this.App.templateVars, templateVars, {","      content: content","    });","","    var body = yield this._renderEmailTemplate('_layout', templateVars);","","    return body.html;","  }","","","","  * _renderSubject (mailOptions, templateVars) {","    var compiled = _.template(mailOptions.subject, {","      interpolate: /{{([\\s\\S]+?)}}/img","    });","","    return compiled(templateVars || {});","  }","","","","  * _prepareMailOptions (mailOptions) {","    mailOptions = _.extend({","      from: this.config.from,","      subject: null,","      body: null,","      bodyTemplate: null,","      templateVars: {},","      ctx: {},","      allowEmpty: false","    }, mailOptions);","","","    if (_.isEmpty(mailOptions.to)) {","      throw new MailerError('Recipients must be set');","    }","","    // it not allowed to send empty email","    if (!mailOptions.allowEmpty) {","      if (_.isEmpty(mailOptions.subject) || ","          (_.isEmpty(mailOptions.body) && _.isEmpty(mailOptions.bodyTemplate)) ) {","        throw new MailerError('Subject and body/template must be set');","      }    ","    }","","    if (!_.isArray(mailOptions.to)) {","      mailOptions.to = [mailOptions.to];","    }","","    // templateVars common to all recipients","    mailOptions.templateVars = _.extend({}, this.App.templateVars, mailOptions.ctx.templateVars, ","      yield viewObjects.toViewObjectYieldable(mailOptions.templateVars, mailOptions.ctx)","    );","","    return mailOptions;","  }","","","","  * _send (mailOptions) {","    let self = this;","","    mailOptions = yield self._prepareMailOptions(mailOptions);","","    return yield _.map(mailOptions.to, (recipient) => {","      return co.wrap(function*() {","        // email address","        var email = _.get(recipient, 'emailAddress', recipient);","","        self.logger.debug('Email ' + email + ': ' + mailOptions.subject);","","        // user-specific templateVars","        var userLocals = _.extend({}, mailOptions.templateVars, ","          yield viewObjects.toViewObjectYieldable({","            recipient: recipient","          }, mailOptions.ctx)","        );","","        // render body","        var body = yield self._renderBody(mailOptions, userLocals);","        var subject = yield self._renderSubject(mailOptions, userLocals);","","        // setup actual options","        var sendOptions = _.extend({","          from: mailOptions.from,","        }, {","          to: email,","          subject: subject,","          html: body","        });","","        self.logger.debug('Content', sendOptions.html);","","        // send","        var ret = yield self._nodeMailer.send(sendOptions);","","        // record","        self.App.emit('record', 'email', recipient, {","          subject: sendOptions.subject","        });","","        return ret;","      })();    ","    });","  }","","","","","  * render (mailOptions) {","    mailOptions = yield this._prepareMailOptions(mailOptions);","","    var recipient = mailOptions.to.pop();","","    var email = _.get(recipient, 'emails.0.email', recipient);","","    this.logger.debug('Render email ' + email + ': ' + mailOptions.subject);","","    // user-specific templateVars","    var userLocals = _.extend({}, mailOptions.templateVars, ","      yield viewObjects.toViewObjectYieldable({","        recipient: recipient","      }, mailOptions.ctx)","    );","","    return {","      body: yield this._renderBody(mailOptions, userLocals),","      subject: yield this._renderSubject(mailOptions, userLocals),","    }","  }","","}"]}]}},function(e,t){e.exports={constants:[{name:"nodemailerStubTransport",tags:{fileOverview:[{description:"Console mailer - prints emails to console."}]},description:[],code:["const nodemailerStubTransport = require('nodemailer-stub-transport');"]}]}},function(e,t){e.exports={constants:[{name:"htmlToText",tags:{fileOverview:[{description:"Nodemailer engine."}]},description:[],code:["const nodemailer = require('nodemailer'),","  htmlToText = require('nodemailer-html-to-text').htmlToText;"]}],methods:[{name:"send",tags:{},description:["Send an email."],params:[{name:"params",description:[],type:{}}],returns:[],"throws":[],code:["  * send (params) {","    if (!params.replyTo) {","      params.replyTo = params.from;","    }","","    this.logger.debug('send', params);","","    var noBody = _.isEmpty(params.html) && _.isEmpty(params.text);","","    if (noBody || _.isEmpty(params.from) || _.isEmpty(params.to)) {","      throw new NodeMailerError('Need from, to and html/text');","    }","","    return yield this._send(params);","  }"]}]}},function(e,t){e.exports={methods:[{name:"assertUser",tags:{param:[{description:"Configuration options.",type:{optional:!0,name:"Object"},name:"options"},{description:"User must be allowed to access this resource.",type:{optional:!0,name:"Array"},name:"options.canAccess"}],"return":[{description:null,type:{name:"Function"}}]},description:["Build middleware to assert properties regarding the current user.","Should be preceded by middleware: `session`, `outputFormats`, `contextHelpers`.","By default it checks that the user is logged in. Note that admin users will \nbypass checks and always have access to everything."],params:[{name:"options",description:["Configuration options."],type:{optional:!0,name:"Object"}},{name:"App",description:[],type:{}}],returns:[{description:[],type:{name:"Function"}}],"throws":[],code:["module.exports = function(App, options) {","  return function*(next) {","    this.App.logger.debug('assertUser is logged in');","","    try {","      if (!this.currentUser) {","        throw new RuntimeError('You must be logged in to access this content.', 403);","      } else {","        // need specific access?","        if (options.canAccess) {","          this.App.logger.debug('assertUser can access ' + options.canAccess);","","          yield this.currentUser.assertAccess(options.canAccess);","        }","      }","    } catch (err) {","      // should we ask user to login?","      if (options.redirectToLogin) {","        this.App.logger.debug('redirect to login');","","        return yield this.redirect(","          this.App.routes.url('user_login', null, {","            r: err.message,","            u: this.request.url,            ","          })","        );","      }","      // else show error","      else {","        throw err;","      }","    }","","    yield next;","  };","};"]}]}},function(e,t){e.exports={variables:[{name:"fn",tags:{param:[{description:"Configuration options for `co-body`.",type:{name:"Object"},name:"options"},{description:"The maximum allowed size of a request body.",type:{optional:!0,name:"String"},name:"options.limit"}],"return":[{description:"middleware",type:{name:"Function"}}]},description:["Build middleware for parsing request bodies.","undefined to \nparse request POST bodies. Once parsed the request body parameters are \navailable in `this.request.body`.","If `csrf` middleware is enabled is set then this validates the csrf."],code:["var fn = module.exports = function(App, options) {","  return function*(next) {","    this.request.body = yield fn._bodyParser(this, options);","","    yield next;","  };","};"]}]}},function(e,t){e.exports={constants:[{name:"_",tags:{fileOverview:[{description:"Setup context-level convenient accessors and template helpers"}]},description:[],code:["const waigo = global.waigo,","  _ = waigo._;"]}],methods:[{name:"contextHelpers",tags:{"return":[{description:"middleware",type:{name:"Function"}}]},description:["Build middleware for setting up context-level helpers and template vars.","This should be the last middleware which gets run prior to route-specific \nmiddleware."],params:[],returns:[{description:["middleware"],type:{name:"Function"}}],"throws":[],code:["module.exports = function() {","  return function*(next) {","    // request template vars","    this.templateVars = this.templateVars || {};","    this.templateVars.currentUser = this.currentUser;","    this.templateVars.currentUrl = this.request.url;","","    // convenient accessors","    this.logger = this.App.logger;","    this.acl = this.App.acl;","    this.models = this.App.models;","    this.form = this.App.form;","","    yield next;","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"csrf",tags:{"return":[{description:"middleware",type:{name:"Function"}}]},description:["Build middleware for CSRF protection.","This should be preceded by middleware: `sessions`.","Once this runs calling `this.csrf` for the first time on the koa request \ncontext will cause a new CSRF token to be generated.","The `this.assertCSRF()` method will also be available."],params:[],returns:[{description:["middleware"],type:{name:"Function"}}],"throws":[],code:["module.exports = function() {","  return csrf({","    // nullify middleware option","    middleware: function*(next) {","      yield next;","    }","  });","};"]}]}},function(e,t){e.exports={constants:[{name:"_",tags:{fileOverview:[{description:"Setup current user on request context."}]},description:[],code:["const waigo = global.waigo,","  _ = waigo._;"]}],methods:[{name:"currentUser",tags:{"return":[{description:"middleware",type:{name:"Function"}}]},description:["Build middleware for setting up `currentUser` on context."],params:[],returns:[{description:["middleware"],type:{name:"Function"}}],"throws":[],code:["module.exports = function() {","  return function*(next) {","    if (this.session.user) {","      this.App.logger.debug('Current user', this.session.user);","","      this.currentUser =  ","        yield this.App.models.User.get(this.session.user.id);","    }","","    yield next;","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"errorHandler",tags:{"return":[{description:"middleware",type:{name:"Function"}}]},description:["Build error handler middleware.","This will catch any errors thrown from downstream middleware or controller \nhandler functions."],params:[],returns:[{description:["middleware"],type:{name:"Function"}}],"throws":[],code:["module.exports = function() {","  return function*(next) {","    // convenient throw method","    this.throw = _throw;","","    try {","      yield next;","    } catch (err) {","      this.App.emit('error', err.stack);","","      // render error page","      yield render.call(this, {","        showStack: !!_.get(this.App, 'config.errors.showStack'),","      }, err);","    }","  }","};"]},{name:"_throw",tags:{param:[{description:"Error class. Default is `RuntimeError`.",type:{optional:!0,name:"Class"},name:"errorClass"},{description:"...       Additional arguments get passed to error class constructor.",name:"Any"}],"throws":[{description:"Error"}]},description:["Throw an error"],params:[{name:"errorClass",description:["Error class. Default is `RuntimeError`."],type:{optional:!0,name:"Class"}},{name:"Any",description:["...       Additional arguments get passed to error class constructor."],type:{}}],returns:[],"throws":[{description:["Error"],type:{}}],code:["var _throw = function() {","  let args = Array.prototype.slice.call(arguments),","    ErrorClass = args[0];","","  if (_.isObject(ErrorClass)) {","    args.shift();","  } else {","    ErrorClass = errors.RuntimeError;","  }","","  args.unshift(null);   // the this arg for the .bind() call","","  throw new (Function.prototype.bind.apply(ErrorClass, args));","};"]}]}},function(e,t){e.exports={methods:[{name:"outputFormats",tags:{param:[{description:"Configuration options.",type:{name:"Object"},name:"options"},{description:"The supported formats.",type:{optional:!0,name:"Object"},name:"options.formats"},{description:"Default format when none is specified.",type:{optional:!0,name:"String"},name:"options.default"},{description:"Name of format query parameter.",type:{optional:!0,name:"String"},name:"options.paramName"}],"return":[{description:"Express middleware.",type:{name:"Function"}}]},description:["Build output formats middleware.","undefined for more details."],params:[{name:"options",description:["Configuration options."],type:{name:"Object"}},{name:"App",description:[],type:{}}],returns:[{description:["Express middleware."],type:{name:"Function"}}],"throws":[],code:["module.exports = function(App, options) {","  let enabledFormats = {};","","  let formatNames = Object.keys(options.formats);","","  for (let format of formatNames) {","    enabledFormats[format] = ","      waigo.load(`support/outputFormats/${format}`).create(","        logger.create(format), ","        options.formats[format]","      );","  }","","  return function* setOutputFormat(next) {","    let ctx = this;","    ","    let requestedFormat = ","      _.get(this.query, options.paramName, options.default).toLowerCase();","","    // check format is valid","    if (requestedFormat && !enabledFormats[requestedFormat]) {","      throw new OutputFormatError(`Invalid output format requested: ${requestedFormat}`, 400);","    }","","    this.request.outputFormat = requestedFormat;","","    logger.debug('Output format', requestedFormat);","","    // attach renderer","    this.render = function*(view, locals, options) {","      locals = locals || {};","      options = options || {};","      ","      logger.debug('Render', view);","","      // set status code","      if (options.status) {","        this.status = options.status;","      }","","      // get yieldables","      let localsViewObjects = yield viewObjects.toViewObjectYieldable(locals, ctx);","","      // call actual rendering method","      yield enabledFormats[this.request.outputFormat].render.call(ctx, view, localsViewObjects);","    };","","    // redirect method","    this.redirect = function*(url) {","      logger.debug('Redirect', url);","","      // call actual rendering method","      yield enabledFormats[this.request.outputFormat].redirect.call(ctx, url);","    };","","","    yield next;","  };","};"]}]}},function(e,t){e.exports={methods:[{name:"sessions",tags:{param:[{description:"Configuration options.",type:{name:"Object"},name:"options"},{description:"Cookie signing keys for keygrip.",type:{name:"Array"},name:"options.keys"},{description:"Session cookie name.",type:{name:"String"},name:"options.name"},{description:"Session store configuration.",type:{name:"Object"},name:"options.store"},{description:"Session store type.",type:{name:"String"},name:"options.store.type"},{description:"Session store instance configuration.",type:{name:"String"},name:"options.store.config"},{description:"Session cookie options.",type:{name:"Object"},name:"options.cookie"},{description:"No. of days cookie remains valid for.",type:{name:"Integer"},name:"options.cookie.validForDays"},{description:"Cookie path.",type:{name:"String"},name:"options.cookie.path"},{description:"active application instance.",type:{name:"Application"},name:"The"}]},description:["Build session middleware.","undefined \nto enable session data storage."],params:[{name:"options",description:["Configuration options."],type:{name:"Object"}},{name:"The",description:["active application instance."],type:{name:"Application"}},{name:"App",description:[],type:{}}],returns:[],"throws":[],code:["module.exports = function(App, options) {","  if (!options.keys) {","    throw new Error('Please specify cookie signing keys in the config file.');","  }","  ","  App.koa.keys = options.keys;","","  return koaSessionStore({","    name: options.name,","    store: waigo.load(`support/session/store/${options.store.type}`)","                  .create(App, options.store.config),","    cookie: {","      expires: moment().add('days', options.cookie.validForDays).toDate(),","      path: options.cookie.path,","      signed: false,","    }","  });","};"]}]}},function(e,t){e.exports={methods:[{name:"staticResources",
tags:{param:[{description:"Configuration options.",type:{name:"Object"},name:"options"},{description:"The filesystem path (relative to the Waigo app folder) from which to serve resources.",type:{name:"String"},name:"options.folder"},{description:"Browser cache max-age in milliseconds (default is `0`).",type:{optional:!0,name:"Integer"},name:"options.maxage"},{description:"Whether to serve hidden resources too (default is `false`).",type:{optional:!0,name:"Boolean"},name:"options.hidden"},{description:"The index file (default is `index.html`).",type:{optional:!0,name:"String"},name:"options.index"},{description:"if `true` then will serve after `yield next`, allowing downstream middleware to respond first (default is `true`).",type:{optional:!0,name:"Boolean"},name:"options.defer"}],"return":[{description:"middleware",type:{name:"Function"}}]},description:["Build middleware for serving static resources.","undefined."],params:[{name:"options",description:["Configuration options."],type:{name:"Object"}},{name:"App",description:[],type:{}}],returns:[{description:["middleware"],type:{name:"Function"}}],"throws":[],code:["module.exports = function(App, options) {","  let moreOptions = _.extend({","    maxage: 0,","    hidden: false,","    index: 'index.html',","    defer: false","  }, options.options);","","  return require('koa-static')(path.join(waigo.getAppFolder(), options.folder), moreOptions);","};"]}]}},530,530,530,530,function(e,t){e.exports={classes:[{name:"GenericOauth",tags:{},description:["Base class for OAuth providers."],parents:[],instance:{constructor:{name:"constructor",tags:{_constructor:[{description:null}],param:[{description:"Current request context.",type:{name:"Object"},name:"context"},{description:"Id of provider.",type:{name:"String"},name:"provider"},{description:"Access tokens previously obtained.",type:{optional:!0,name:"Object"},name:"tokens"}]},description:[],params:[{name:"context",description:["Current request context."],type:{name:"Object"}},{name:"provider",description:["Id of provider."],type:{name:"String"}},{name:"tokens",description:["Access tokens previously obtained."],type:{optional:!0,name:"Object"}}],returns:[],"throws":[],code:["  constructor (context, provider, tokens) {","    this.context = context;","    this.provider = provider;","    this.App = this.context.App;","    this.logger = logger.create(`Oauth-${provider}`);","","    this.config = _.get(this.App.config.oauth, this.provider, {});","    this.callbackURL = this.App.routes.url('oauth_callback', {","      provider: provider,","    }, null, {","      absolute: true","    });","","    this.oauth2 = new OAuth2(","      this.config.clientId,","      this.config.clientSecret, ","      this.config.baseURL,","      this.config.authorizePath,","      this.config.accessTokenPath,","      this.config.customHeaders","    );","","    if (tokens) {","      this._setTokens(tokens);","    }","  }"]},methods:{getAuthorizeUrl:{name:"getAuthorizeUrl",tags:{"return":[{description:null,type:{name:"String"}}]},description:["Get OAuth authorization URL."],params:[],returns:[{description:[],type:{name:"String"}}],"throws":[],code:["  getAuthorizeUrl () {","    let params = this._buildAuthorizeParams();","","    let url = this.oauth2.getAuthorizeUrl(params);","","    this.logger.debug('authorize url', url);","","    return url;","  }"]},getAccessToken:{name:"getAccessToken",tags:{param:[{description:"Code returned by OAuth provider.",type:{name:"String"},name:"code"}]},description:["Get OAuth access token."],params:[{name:"code",description:["Code returned by OAuth provider."],type:{name:"String"}}],returns:[],"throws":[],code:["  * getAccessToken (code) {","    let user = this._user();","","    this.logger.info(`Get access token: user=${user ? user.id : 'anon'} code=${code}`);","","    try {","      return yield new Q((resolve, reject) => {","        let params = this._buildAccessTokenParams();","","        this.oauth2.getOAuthAccessToken(code, params, (err, access_token, refresh_token, result) => {","          if (err) {","            return reject(new OauthError('Get access token error', err.statusCode || 400, err));","          }","","          if (_.get(result, 'error')) {","            return reject(","              new OauthError(`Get access token error: ${result.error}`, 400, {","                error: result.error","              })","            );","          }","","          this.logger.debug(`Get access token result: ${access_token}, ${refresh_token}, ${JSON.stringify(result)}`);","","          this._setTokens({","            access_token: access_token,","            refresh_token: refresh_token,             ","          });","","          resolve({","            access_token: access_token,","            refresh_token: refresh_token, ","            result: result,","          });","        });","      });","","    } catch (err) {","      yield this._handleError(err, {","        method: 'getOAuthAccessToken',","      });","    }","  }"]}}},"static":null,constructor:{name:"constructor",tags:{_constructor:[{description:null}],param:[{description:"Current request context.",type:{name:"Object"},name:"context"},{description:"Id of provider.",type:{name:"String"},name:"provider"},{description:"Access tokens previously obtained.",type:{optional:!0,name:"Object"},name:"tokens"}]},description:[],params:[{name:"context",description:["Current request context."],type:{name:"Object"}},{name:"provider",description:["Id of provider."],type:{name:"String"}},{name:"tokens",description:["Access tokens previously obtained."],type:{optional:!0,name:"Object"}}],returns:[],"throws":[],code:["  constructor (context, provider, tokens) {","    this.context = context;","    this.provider = provider;","    this.App = this.context.App;","    this.logger = logger.create(`Oauth-${provider}`);","","    this.config = _.get(this.App.config.oauth, this.provider, {});","    this.callbackURL = this.App.routes.url('oauth_callback', {","      provider: provider,","    }, null, {","      absolute: true","    });","","    this.oauth2 = new OAuth2(","      this.config.clientId,","      this.config.clientSecret, ","      this.config.baseURL,","      this.config.authorizePath,","      this.config.accessTokenPath,","      this.config.customHeaders","    );","","    if (tokens) {","      this._setTokens(tokens);","    }","  }"]},code:["class GenericOauth {","  /**","   * @constructor","   * @param  {Object} context  Current request context.","   * @param  {String} provider Id of provider.","   * @param  {Object} [tokens]   Access tokens previously obtained.","   */","  constructor (context, provider, tokens) {","    this.context = context;","    this.provider = provider;","    this.App = this.context.App;","    this.logger = logger.create(`Oauth-${provider}`);","","    this.config = _.get(this.App.config.oauth, this.provider, {});","    this.callbackURL = this.App.routes.url('oauth_callback', {","      provider: provider,","    }, null, {","      absolute: true","    });","","    this.oauth2 = new OAuth2(","      this.config.clientId,","      this.config.clientSecret, ","      this.config.baseURL,","      this.config.authorizePath,","      this.config.accessTokenPath,","      this.config.customHeaders","    );","","    if (tokens) {","      this._setTokens(tokens);","    }","  }","","","  /**","   * Get OAuth authorization URL.","   * @return {String}","   */","  getAuthorizeUrl () {","    let params = this._buildAuthorizeParams();","","    let url = this.oauth2.getAuthorizeUrl(params);","","    this.logger.debug('authorize url', url);","","    return url;","  }","","","  * handleAuthorizationCallback() {","    let user = this._user();","","    this.App.emit('record', 'oauth_callback', user || 'anon', {","      provider: this.provider,","      query: this.context.request.query,","    });","","    try {","      let errorMsg = this.context.request.query.error,","        errorDesc = this.context.request.query.error_description;","","      if (errorMsg) {","        throw new OauthError(errorMsg, 400, errorDesc);","      }","      ","      // we got the code!","      let code = this.context.request.query.code;","","      if (!code) {","        throw new OauthError('Failed to obtain OAuth code', 400);","      }","","      let response = yield this.getAccessToken(code);","","      yield this._handlePostAuthorizationSuccess(response);","    } catch (err) {","      yield this._handleError(err);","    }","  }","","","  /**","   * Get OAuth access token.","   * @param {String} code Code returned by OAuth provider.","   */","  * getAccessToken (code) {","    let user = this._user();","","    this.logger.info(`Get access token: user=${user ? user.id : 'anon'} code=${code}`);","","    try {","      return yield new Q((resolve, reject) => {","        let params = this._buildAccessTokenParams();","","        this.oauth2.getOAuthAccessToken(code, params, (err, access_token, refresh_token, result) => {","          if (err) {","            return reject(new OauthError('Get access token error', err.statusCode || 400, err));","          }","","          if (_.get(result, 'error')) {","            return reject(","              new OauthError(`Get access token error: ${result.error}`, 400, {","                error: result.error","              })","            );","          }","","          this.logger.debug(`Get access token result: ${access_token}, ${refresh_token}, ${JSON.stringify(result)}`);","","          this._setTokens({","            access_token: access_token,","            refresh_token: refresh_token,             ","          });","","          resolve({","            access_token: access_token,","            refresh_token: refresh_token, ","            result: result,","          });","        });","      });","","    } catch (err) {","      yield this._handleError(err, {","        method: 'getOAuthAccessToken',","      });","    }","  }","","","","  _setTokens (tokens) {","    this.tokens = tokens;","","    if (this.tokens) {","      this.authHeader = {","        'Authorization': `Bearer ${this.tokens.access_token}`,","      };","    }","  }","","","  * _get (url, queryParams) {","    return yield this._request('GET', url, queryParams);","  }","","","  * _post (url, queryParams, body) {","    return yield this._request('POST', url, queryParams, body);","  }","","","  _buildRequestUrl (url, queryParams) {","    let apiBaseUrl = this.config.apiBaseUrl;","","    if (!_.get(apiBaseUrl, 'length')) {","      throw new OauthError(`${this.provider}: apiBaseUrl must be provided`);","    }","","    url = apiBaseUrl + url;","","    queryParams = qs.stringify(queryParams || {});","","    if (queryParams.length) {","      url += '?' + queryParams;","    }","","    return url;","  }","","","","  * _request (method, url, queryParams, body) {","    url = this._buildRequestUrl(url, queryParams);","","    this.logger.debug(method, url);","","    if (body) {","      body = JSON.stringify(body);","    }","","    try {","      return yield new Q((resolve, reject) => {","        this.oauth2._request(method, url, this.authHeader, body, this.accessToken, (err, result) => {","          if (err) {","            return reject(new OauthError(method + ' error', err.statusCode || 400, err));","          }","","          try {","            result = JSON.parse(result);","          } catch (e) {","            // nothing to do here","          }","","          resolve(result);","        });","      });","","    } catch (err) {","      yield this._handleError(err, {","        method: method,","        url: url,","        body: body,","      });","    }","  }","","","  _buildAuthorizeParams () {","    let params = _.extend({}, _.get(this.config, 'authorizeParams'));","","    let callbackParamName = _.get(this.config, 'callbackParam', 'redirect_uri');","","    params[callbackParamName] = this.callbackURL;","","    return params;","  }","","","  _buildAccessTokenParams () {","    let params = _.extend({}, _.get(this.config, 'accessTokenParams'));","","    let callbackParamName = _.get(this.config, 'callbackParam', 'redirect_uri');","","    params[callbackParamName] = this.callbackURL;","","    return params;","  }","","","  _user () {","    return this.context.currentUser;","  }","","","  * _handlePostAuthorizationSuccess (accessTokenResponse) {",'    yield this.context.redirect("/");',"  }","","","  * _handleError (err, attrs) {","    this.logger.error(err);","","    this.App.emit('record', 'oauth_request', this._user() || 'anon', _.extend({}, attrs, {","      type: 'error',","      provider: this.provider,","      message: err.message,","      details: err.details,","    }));","","    throw err;","  }","","}"]}]}},function(e,t){e.exports={methods:[{name:"create",tags:{param:[{description:"Logger to use.",type:{name:"Object"},name:"logger"},{description:"configuration for this output format.",type:{name:"Object"},name:"config"},{description:"View templates folder, relative to application root folder.",type:{name:"String"},name:"config.folder"},{description:"Default template file extension.",type:{name:"String"},name:"config.ext"},{description:"Default template rendering engine.",type:{name:"String"},name:"config.engine"}],"return":[{description:"Object with `render` and `redirect` methods.",type:{name:"Object"}}]},description:["HTML output format."],params:[{name:"logger",description:["Logger to use."],type:{name:"Object"}},{name:"config",description:["configuration for this output format."],type:{name:"Object"}}],returns:[{description:["Object with `render` and `redirect` methods."],type:{name:"Object"}}],"throws":[],code:["exports.create = function(logger, config) {","  return {","    render: function*(view, templateVars) {","      // what type of template is this?","      var ext = path.extname(view).slice(1);  // slice(1) to remove '.' prefix","      if (!ext.length) {","        ext = config.ext;","      }","","      logger.debug('Template type', ext);","","      // get templateVars","      templateVars = _.extend({}, this.App.templateVars, this.templateVars, templateVars, {","        cache: !!config.cache,","        engine: config.engine[ext],","      });","","      // get full path to view file","      view = waigo.getPath('views/' + view + '.' + ext);","","      logger.debug('Template path', view);","","      this.body = yield render(view, templateVars);","      this.type = 'html';","    },","","    redirect: function*(url) {","      logger.debug('Redirect', url);","","      this.response.redirect(url);","    },","  };","};"]}]}},function(e,t){e.exports={methods:[{name:"create",tags:{param:[{description:"Logger to use.",type:{name:"Object"},name:"logger"}],"return":[{description:"Object with render method.",type:{name:"Object"}}]},description:["JSON output format."],params:[{name:"logger",description:["Logger to use."],type:{name:"Object"}}],returns:[{description:["Object with render method."],type:{name:"Object"}}],"throws":[],code:["exports.create = function(logger) {","  return {","    render: function*(view, templateVars) {","      logger.debug('View', view);","","      templateVars = templateVars || {};","","      if (!_.isObject(templateVars)) {","        throw new JsonRenderError('Object required for JSON output format');","      }","","      this.body = templateVars;","      this.type = 'json';","    },","","","    redirect: function*(url) {","      logger.debug('Redirect', url);","      ","      this.type = 'json';","      this.status = 200;","      this.body = {","        redirectTo: url,","      };","    },","  };","};"]}]}},530,function(e,t){e.exports={classes:[{name:"RouteMapper",tags:{},description:["The route mapper."],parents:[],instance:{constructor:{name:"constructor",tags:{param:[{description:"Koa App.",type:{name:"Object"},name:"App"}],_constructor:[{description:null}]},description:["Constructor."],params:[{name:"App",description:["Koa App."],type:{name:"Object"}}],returns:[],"throws":[],code:["  constructor (App) {","    this.App = App;","  }"]},methods:{setup:{name:"setup",tags:{param:[{description:"Middleware config.",type:{name:"Object"},name:"middlewareConfig"},{description:"Route config.",type:{name:"Object"},name:"routeConfig"}]},description:["Setup routes and middleware."],params:[{name:"middlewareConfig",description:["Middleware config."],type:{name:"Object"}},{name:"routeConfig",description:["Route config."],type:{name:"Object"}}],returns:[],"throws":[],code:["  * setup (middlewareConfig, routeConfig) {","    logger.info('Initialise...');","","    require('koa-trie-router')(this.App.koa);","","    let possibleMappings = [];","","    // resolve middleware for different HTTP methods","    let commonMiddleware = {};","    _.each(METHODS, (method) => {","      logger.debug('Setting up HTTP method middleware', method);","","      commonMiddleware[method] = ","        this._loadCfgMiddleware(middlewareConfig[method]);","    });","","    // build mappings","    logger.debug('Setting up route mappings');","","    _.each(routeConfig, (node, urlPath) => {","      possibleMappings = possibleMappings.concat(","        this._buildRoutes(commonMiddleware, urlPath, node, {","          urlPath: '',","          preMiddleware: [],","        })","      );","    });","","    // now order by path (specific to general)","    // put the routes into order (specific to general)","    let orderedMappings = possibleMappings.sort(function(a, b) {","      return a.url < b.url;","    });","","    this._routes = {","      all: orderedMappings,","      byName: {}","    };","","    // add the handlers to routing","    logger.debug('Building reverse lookup table');","","    _.each(orderedMappings, (mapping) => {","      let route = this.App.koa.route(mapping.url);","","      route[mapping.method.toLowerCase()].apply(route, mapping.resolvedMiddleware);","","      // save to app","      this._routes.byName[mapping.name] = mapping;","    });","","","    logger.debug('Finalize...');","","    this.App.koa.use(this.App.koa.router);","  }"]},_loadMiddleware:{name:"_loadMiddleware",tags:{param:[{description:"Name of middleware module file or object representing combined name and options: `{ id: <middleware mame>, ...}`.",type:{},name:"middlewareName"},{description:"Middleware options.",type:{optional:!0,name:"Object"},name:"middlewareOptions"}],"return":[{description:null,type:{name:"Function"}}]},description:["Load and initialise given middleware module."],params:[{name:"middlewareName",description:["Name of middleware module file or object representing combined name and options: `{ id: <middleware mame>, ...}`."],type:{}},{name:"middlewareOptions",description:["Middleware options."],type:{optional:!0,name:"Object"}}],returns:[{description:[],type:{name:"Function"}}],"throws":[],code:["  _loadMiddleware (middlewareName, middlewareOptions) {","    logger.debug('Load middleware', middlewareName, middlewareOptions);","","    if (_.isPlainObject(middlewareName)) {","      middlewareOptions = _.omit(middlewareName, 'id');","      middlewareName = middlewareName.id;","    } else {","      // if reference is of form 'moduleName.xx.yy' then it's a controller reference","      if (0 < middlewareName.indexOf('.')) {","        return this._loadController(middlewareName);","      }","","      middlewareOptions = middlewareOptions || {};","    }","","    return waigo.load(`support/middleware/${middlewareName}`)(this.App, middlewareOptions);","  }"]},_loadController:{name:"_loadController",tags:{param:[{description:"String of form `<controller path>.<method name>`.",type:{name:"String"},name:"controller"}],"return":[{description:null,type:{name:"Function"}}]},description:["Load given controller method."],params:[{name:"controller",description:["String of form `<controller path>.<method name>`."],type:{name:"String"}}],returns:[{description:[],type:{name:"Function"}}],"throws":[],code:["  _loadController (controller) {","    logger.debug('Load controller', controller);","","    let tokens = controller.split('.'),","      controllerPath = tokens,","      methodName = tokens.pop(),","      controllerName = controllerPath.join('.');","","    let mod = waigo.load(`controllers/${controllerPath.join('/')}`);","","    if (!_.isFunction(mod[methodName])) {",'      throw new RouteError(`Unable to find method "${methodName}" on controller "${controllerName}"`);',"    }","","    return mod[methodName];","  }"]},_loadCfgMiddleware:{name:"_loadCfgMiddleware",tags:{"return":[{description:null,type:{name:"Array"}}]},description:["Load middleware specified ingiven config object."],params:[{name:"cfg",description:[],type:{}}],returns:[{description:[],type:{name:"Array"}}],"throws":[],code:["  _loadCfgMiddleware (cfg) {","    logger.debug('Load middleware specified in config');","","    cfg = cfg || {};","","    return _.map(cfg._order, (m) => {","      return this._loadMiddleware(m, cfg[m]);","    });","  }"]},url:{name:"url",tags:{param:[{description:"Name of route.",type:{name:"String"},name:"routeName"},{description:"URL params for route.",type:{optional:!0,name:"Object"},name:"urlParams"},{description:"URL query params.",type:{optional:!0,name:"Object"},name:"queryParams"},{description:"Options.",type:{optional:!0,name:"Object"},name:"options"},{description:"If `true` then return absolute URL including site base URL.",type:{optional:!0,name:"Boolean"},name:"options.absolute"}],"return":[{description:"Route URL",type:{name:"String"}}]},description:["Build URL to given route."],params:[{name:"routeName",description:["Name of route."],type:{name:"String"}},{name:"urlParams",description:["URL params for route."],type:{optional:!0,name:"Object"}},{name:"queryParams",description:["URL query params."],type:{optional:!0,name:"Object"}},{name:"options",description:["Options."],type:{optional:!0,name:"Object"}}],returns:[{description:["Route URL"],type:{name:"String"}}],"throws":[],code:["  url (routeName, urlParams, queryParams, options) {","    options = _.extend({","      absolute: false","    }, options);","","    logger.debug('Generate URL for route ' + routeName);","","    var route = this._routes.byName[routeName];","","    if (!route) {","      throw new Error('No route named: ' + routeName);","    }","","    var str = options.absolute ? this.App.config.baseURL : '';","","    str += route.url;","","    // route params","    _.each(urlParams, function(value, key) {","      str = str.replace(`:${key}`, value);","    });","","    // query params","    if (!_.isEmpty(queryParams)) {","      str += '?' + queryString.stringify(queryParams);","    }","","    return str;","  }"]},_buildRoutes:{name:"_buildRoutes",tags:{param:[{description:"Common middleware to use for every route.",type:{name:"Object"},name:"commonMiddleware"},{description:"URL path of this node (relative to parent URL path).",type:{name:"Object"},name:"urlPath"},{description:"Config node.",type:{name:"Object"},name:"node"},{description:"parent node config.",type:{name:"Object"},name:"parentConfig"},{description:"URL path of parent node.",type:{name:"Object"},name:"parentConfig.urlPath"},{description:"Resolved pre-middleware for all routes in this node.",type:{name:"Object"},name:"parentConfig.preMiddleware"}],"return":[{description:"List of route mappings.",type:{name:"Array"}}]},description:["Build routes from given configuration config node."],params:[{name:"commonMiddleware",description:["Common middleware to use for every route."],type:{name:"Object"}},{name:"urlPath",description:["URL path of this node (relative to parent URL path)."],type:{name:"Object"}},{name:"node",description:["Config node."],type:{name:"Object"}},{name:"parentConfig",description:["parent node config."],type:{name:"Object"}}],returns:[{description:["List of route mappings."],type:{name:"Array"}}],"throws":[],code:["  _buildRoutes (commonMiddleware, urlPath, node, parentConfig) {","    urlPath = parentConfig.urlPath + urlPath;","","    logger.debug('Build route', urlPath);","","    // make a shallow copy (so that we can delete keys from it)","    node = _.extend({}, node);","","    // load parent middleware","    let resolvedPreMiddleware = parentConfig.preMiddleware.concat(","      _.map(node.pre || [], _.bind(this._loadMiddleware, this))","    );","    delete node.pre;","","    let mappings = [];","","    // iterate through each possible method","    _.each(METHODS , (method) => {","      if (node[method]) {","        let routeMiddleware = _.isArray(node[method]) ? node[method] : [node[method]];","","        mappings.push({","          method: method,","          name: node.name || urlPath,","          url: urlPath,","          resolvedMiddleware: commonMiddleware[method].concat(","            resolvedPreMiddleware, ","            _.map(routeMiddleware, (rm) => {","              return this._loadMiddleware(rm);","            })","          )","        });","      }","","      delete node[method];","    });","","    // delete name","    delete node.name;","","    // go through children","    _.each(node || {}, (subNode, subUrlPath) => {","      mappings = mappings.concat(","        this._buildRoutes(commonMiddleware, subUrlPath, subNode, {","          urlPath: urlPath,","          preMiddleware: resolvedPreMiddleware,","        })","      );","    });","","    return mappings;","  }"]}}},"static":null,constructor:{name:"constructor",tags:{param:[{description:"Koa App.",type:{name:"Object"},name:"App"}],_constructor:[{description:null}]},description:["Constructor."],params:[{name:"App",description:["Koa App."],type:{name:"Object"}}],returns:[],"throws":[],code:["  constructor (App) {","    this.App = App;","  }"]},code:["class RouteMapper {","  /**","   * Constructor.","   * @param {Object} App Koa App.","   * @constructor","   */","  constructor (App) {","    this.App = App;","  }","","","  /**","   * Setup routes and middleware.","   * ","   * @param {Object} middlewareConfig Middleware config.","   * @param {Object} routeConfig Route config.","   */","  * setup (middlewareConfig, routeConfig) {","    logger.info('Initialise...');","","    require('koa-trie-router')(this.App.koa);","","    let possibleMappings = [];","","    // resolve middleware for different HTTP methods","    let commonMiddleware = {};","    _.each(METHODS, (method) => {","      logger.debug('Setting up HTTP method middleware', method);","","      commonMiddleware[method] = ","        this._loadCfgMiddleware(middlewareConfig[method]);","    });","","    // build mappings","    logger.debug('Setting up route mappings');","","    _.each(routeConfig, (node, urlPath) => {","      possibleMappings = possibleMappings.concat(","        this._buildRoutes(commonMiddleware, urlPath, node, {","          urlPath: '',","          preMiddleware: [],","        })","      );","    });","","    // now order by path (specific to general)","    // put the routes into order (specific to general)","    let orderedMappings = possibleMappings.sort(function(a, b) {","      return a.url < b.url;","    });","","    this._routes = {","      all: orderedMappings,","      byName: {}","    };","","    // add the handlers to routing","    logger.debug('Building reverse lookup table');","","    _.each(orderedMappings, (mapping) => {","      let route = this.App.koa.route(mapping.url);","","      route[mapping.method.toLowerCase()].apply(route, mapping.resolvedMiddleware);","","      // save to app","      this._routes.byName[mapping.name] = mapping;","    });","","","    logger.debug('Finalize...');","","    this.App.koa.use(this.App.koa.router);","  }","","","  /**","   * Load and initialise given middleware module.","   * ","   * @param  {Object|String} middlewareName Name of middleware module file or object representing combined name and options: `{ id: <middleware mame>, ...}`.","   * @param  {Object} [middlewareOptions] Middleware options.","   * ","   * @return {Function}","   */","  _loadMiddleware (middlewareName, middlewareOptions) {","    logger.debug('Load middleware', middlewareName, middlewareOptions);","","    if (_.isPlainObject(middlewareName)) {","      middlewareOptions = _.omit(middlewareName, 'id');","      middlewareName = middlewareName.id;","    } else {","      // if reference is of form 'moduleName.xx.yy' then it's a controller reference","      if (0 < middlewareName.indexOf('.')) {","        return this._loadController(middlewareName);","      }","","      middlewareOptions = middlewareOptions || {};","    }","","    return waigo.load(`support/middleware/${middlewareName}`)(this.App, middlewareOptions);","  }","","","","  /**","   * Load given controller method.","   * ","   * @param  {String} controller String of form `<controller path>.<method name>`.","   * ","   * @return {Function}","   */","  _loadController (controller) {","    logger.debug('Load controller', controller);","","    let tokens = controller.split('.'),","      controllerPath = tokens,","      methodName = tokens.pop(),","      controllerName = controllerPath.join('.');","","    let mod = waigo.load(`controllers/${controllerPath.join('/')}`);","","    if (!_.isFunction(mod[methodName])) {",'      throw new RouteError(`Unable to find method "${methodName}" on controller "${controllerName}"`);',"    }","","    return mod[methodName];","  }","","","","  /**","   * Load middleware specified ingiven config object.","   * ","   * @return {Array}","   */","  _loadCfgMiddleware (cfg) {","    logger.debug('Load middleware specified in config');","","    cfg = cfg || {};","","    return _.map(cfg._order, (m) => {","      return this._loadMiddleware(m, cfg[m]);","    });","  }","","","","","  /** ","   * Build URL to given route.","   * ","   * @param  {String} routeName   Name of route.","   * @param  {Object} [urlParams]   URL params for route.","   * @param  {Object} [queryParams] URL query params.","   * @param {Object} [options] Options.","   * @param {Boolean} [options.absolute] If `true` then return absolute URL including site base URL.","   * @return {String}             Route URL","   */","  url (routeName, urlParams, queryParams, options) {","    options = _.extend({","      absolute: false","    }, options);","","    logger.debug('Generate URL for route ' + routeName);","","    var route = this._routes.byName[routeName];","","    if (!route) {","      throw new Error('No route named: ' + routeName);","    }","","    var str = options.absolute ? this.App.config.baseURL : '';","","    str += route.url;","","    // route params","    _.each(urlParams, function(value, key) {","      str = str.replace(`:${key}`, value);","    });","","    // query params","    if (!_.isEmpty(queryParams)) {","      str += '?' + queryString.stringify(queryParams);","    }","","    return str;","  }","","","  /**","   * Build routes from given configuration config node.","   * ","   * @param  {Object} commonMiddleware Common middleware to use for every route.","   * @param  {Object} urlPath URL path of this node (relative to parent URL path).","   * @param  {Object} node Config node.","   * @param  {Object} parentConfig parent node config. ","   * @param  {Object} parentConfig.urlPath URL path of parent node.","   * @param  {Object} parentConfig.preMiddleware Resolved pre-middleware for all routes in this node.","   * ","   * @return {Array} List of route mappings.","   */","  _buildRoutes (commonMiddleware, urlPath, node, parentConfig) {","    urlPath = parentConfig.urlPath + urlPath;","","    logger.debug('Build route', urlPath);","","    // make a shallow copy (so that we can delete keys from it)","    node = _.extend({}, node);","","    // load parent middleware","    let resolvedPreMiddleware = parentConfig.preMiddleware.concat(","      _.map(node.pre || [], _.bind(this._loadMiddleware, this))","    );","    delete node.pre;","","    let mappings = [];","","    // iterate through each possible method","    _.each(METHODS , (method) => {","      if (node[method]) {","        let routeMiddleware = _.isArray(node[method]) ? node[method] : [node[method]];","","        mappings.push({","          method: method,","          name: node.name || urlPath,","          url: urlPath,","          resolvedMiddleware: commonMiddleware[method].concat(","            resolvedPreMiddleware, ","            _.map(routeMiddleware, (rm) => {","              return this._loadMiddleware(rm);","            })","          )","        });","      }","","      delete node[method];","    });","","    // delete name","    delete node.name;","","    // go through children","    _.each(node || {}, (subNode, subUrlPath) => {","      mappings = mappings.concat(","        this._buildRoutes(commonMiddleware, subUrlPath, subNode, {","          urlPath: urlPath,","          preMiddleware: resolvedPreMiddleware,","        })","      );","    });","","    return mappings;","  }","","}"]
}],methods:[{name:"setup",tags:{param:[{description:"Koa app.",type:{name:"Object"},name:"app"},{description:"Middleware configuration.",type:{name:"Object"},name:"middlewareConfig"},{description:"Route configuration.",type:{name:"Object"},name:"routeConfig"}],"return":[{description:null,type:{name:"RouteMapper"}}]},description:["Setup routes."],params:[{name:"app",description:["Koa app."],type:{name:"Object"}},{name:"middlewareConfig",description:["Middleware configuration."],type:{name:"Object"}},{name:"routeConfig",description:["Route configuration."],type:{name:"Object"}}],returns:[{description:[],type:{name:"RouteMapper"}}],"throws":[],code:["exports.setup = function*(app, middlewareConfig, routeConfig) {","  let mapper = new RouteMapper(app);","","  yield mapper.setup(middlewareConfig, routeConfig);","","  return mapper;","};"]}]}},function(e,t){e.exports={methods:[{name:"create",tags:{param:[{description:"{Object} App.",name:"App"},{description:"{Object} config.",name:"storeConfig"}],"return":[{description:"Storage object.",type:{name:"Object"}}]},description:["Create a cookie session store."],params:[{name:"App",description:["{Object} App."],type:{}},{name:"storeConfig",description:["{Object} config."],type:{}}],returns:[{description:["Storage object."],type:{name:"Object"}}],"throws":[],code:["exports.create = function(App, storeConfig) {","  // koa-session-store automatically falls back to using the session cookie itself if no store object is given","  return null;","};"]}]}},function(e,t){e.exports={methods:[{name:"acl",tags:{param:[{description:"The application.",type:{name:"Object"},name:"app"}]},description:["Shutdown database connection."],params:[{name:"app",description:["The application."],type:{name:"Object"}},{name:"App",description:[],type:{}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.debug('Shutting down ACL');","","  if (App.acl) {","    yield App.acl.shutdown();","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"cron",tags:{param:[{description:"The application.",type:{name:"Object"},name:"App"}]},description:["Stop cron jobs."],params:[{name:"App",description:["The application."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.debug('Stopping cron jobs');","","  _.map(App.cron, function(job) {","    job.stopScheduler();","  });","};"]}]}},function(e,t){e.exports={methods:[{name:"db",tags:{param:[{description:"The application.",type:{name:"Object"},name:"App"}]},description:["Shutdown database connections."],params:[{name:"App",description:["The application."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.debug('Shutting down database connections');","","  let dbAdapters = waigo.getItemsInFolder('support/db');","","  yield _.map(dbAdapters, function(adapter) {","    return waigo.load(adapter).closeAll(App.logger);","  });","};"]}]}},function(e,t){e.exports={methods:[{name:"listener",tags:{param:[{description:"The application.",type:{name:"Object"},name:"App"}]},description:["Shutdown the HTTP server."],params:[{name:"App",description:["The application."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  if (App.server) {","    App.logger.debug('Shutting down HTTP server');","","    yield Q.promisify(App.server.close, { ","      context: App.server","    })();","  } ","};"]}]}},function(e,t){e.exports={methods:[{name:"acl",tags:{param:[{description:"The application.",type:{name:"Object"},name:"app"}]},description:["Setup ACL.","This should be preceded by startup: `models`."],params:[{name:"app",description:["The application."],type:{name:"Object"}},{name:"App",description:[],type:{}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.debug('Setting up ACL');","","  App.acl = yield (waigo.load('support/acl')).init(App);","};"]}]}},function(e,t){e.exports={methods:[{name:"actionTokens",tags:{param:[{description:"The application.",type:{name:"Object"},name:"App"}]},description:["Setup action tokens interface and request processor."],params:[{name:"App",description:["The application."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.debug('Setting up action tokens system');","","  let mod = waigo.load('support/actionTokens');","","  App.actionTokens = yield mod.init(","    App, App.config.actionTokens","  );","};"]}]}},function(e,t){e.exports={methods:[{name:"activityRecorder",tags:{param:[{description:"The application.",type:{name:"Object"},name:"App"}]},description:["Setup activity recorder for the app.","This allows you to record activities to the `Activities` model.","This should be preceded by startup: `models`."],params:[{name:"App",description:["The application."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.debug('Setting up Activity recording');","","  App.on('record', co.wrap(function*() {","    yield App.models.Activity.record.apply(App.models.Activity, arguments);","  }));","};"]}]}},function(e,t){e.exports={methods:[{name:"appTemplateVars",tags:{param:[{description:"The application.",type:{name:"Object"},name:"App"}]},description:["Setup app-level template variables.","This startup step should run after all others."],params:[{name:"App",description:["The application."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.templateVars = {","    _: _,","    config: App.config,","  };","  ","  if (_.get(App.routes, 'url')) {","    App.templateVars.routeUrl = App.routes.url.bind(App.routes);","  }","  ","  if (App.staticUrl) {","    App.templateVars.staticUrl = App.staticUrl;","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"cron",tags:{param:[{description:"The application.",type:{name:"Object"},name:"app"}]},description:["Setup cron system."],params:[{name:"app",description:["The application."],type:{name:"Object"}},{name:"App",description:[],type:{}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.cron = {};","","  let cronTasks = waigo.getItemsInFolder('support/cronTasks');","","  logger.info(`${cronTasks.length} cron tasks found`);","","  for (let taskFilePath of cronTasks) {","    let name = path.basename(taskFilePath, path.extname(taskFilePath));","","    logger.debug(`Adding cron task: ${name}`);","","    let job = waigo.load(taskFilePath);","","    App.cron[name] = ","      yield App.models.Cron.create(name, job.schedule, job.handler);","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"db",tags:{param:[{description:"The application.",type:{name:"Object"},name:"App"}]},description:["Setup database connections.","Upon completion:",null],params:[{name:"App",description:["The application."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.info(`Setting up database connections`);","","  App.dbs = {};","","  let ids = _.keys(App.config.db || {});","","  for (let id of ids) {","    App.logger.debug(`Setting up db: ${id}`);","","    let cfg = _.get(App.config.db, id);","","    if (!cfg) {","      throw new Error(`Unable to find configuration for database: ${id}`);","    }","    ","    let builder = waigo.load(`support/db/${cfg.type}`);","","    App.dbs[id] = yield builder.create(id, App.logger.create(id), cfg);","  }","","  // for convenience","  App.db = _.get(App.dbs, 'main');","};"]}]}},function(e,t){e.exports={methods:[{name:"forms",tags:{param:[{description:"The application.",type:{name:"App"},name:"App"}]},description:["Setup forms."],params:[{name:"App",description:["The application."],type:{name:"App"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.debug('Setting up forms');","","  App.form = waigo.load('support/forms/form');","};"]}]}},function(e,t){e.exports={methods:[{name:"listener",tags:{param:[{description:"The application.",type:{name:"Object"},name:"App"}]},description:["Start the server HTTP listener.","If successful `App.server` will point to the HTTP server object."],params:[{name:"App",description:["The application."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.debug('Starting HTTP server');","","  App.server = App.koa.listen(App.config.port);","","  let workerInfo = (cluster.worker) ? ` worker: ${cluster.worker.id}` : '';","","  let msg = `Server (process:${process.pid} ${workerInfo}) started - listening in ${App.config.mode} mode on port ${App.config.port} (baseURL: ${App.config.baseURL})`;","","  App.logger.info(msg);","","  App.emit('notify', 'admins', msg);","};"]}]}},function(e,t){e.exports={methods:[{name:"mailer",tags:{param:[{description:"The application.",type:{name:"Object"},name:"App"}]},description:["Setup emailer system.","Upon completion:",null],params:[{name:"App",description:["The application."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  let mailerConfig = _.get(App.config, 'mailer', {});","","  if (!_.get(mailerConfig, 'type')) {","    throw new Error('Mailer type not set');","  }","","  App.logger.debug(`Initializing mailer: ${mailerConfig.type}`);","","  let mailer = waigo.load(`support/mailer/${mailerConfig.type}`);","","  App.mailer = yield mailer.create(App, mailerConfig);","};"]}]}},function(e,t){e.exports={methods:[{name:"middleware",tags:{param:[{description:"The application.",type:{name:"Object"},name:"App"}]},description:["Setup middleware common to all requests."],params:[{name:"App",description:["The application."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.debug('Setting up common middleware');","","  for (let m of App.config.middleware.ALL._order) {","    App.logger.debug(`Loading middleware: ${m}`);","","    App.koa.use(waigo.load(`support/middleware/${m}`)(","      App,","      _.get(App.config.middleware.ALL, m, {})","    ));","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"models",tags:{param:[{description:"The application.",type:{name:"Object"},name:"App"}]},description:["Load models."],params:[{name:"App",description:["The application."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.debug('Loading models');","","  let modelModuleFiles = waigo.getItemsInFolder('models');","","  App.models = {};","","  for (let modulePath of modelModuleFiles) {","    let modelName = _.capitalize(path.basename(modulePath));","","    App.logger.debug(`Loading ${modelName}`);","","    let modelConfig = waigo.load(modulePath);","","    let modelLogger = logger.create(modelName);","","    // add logger and app getter methods","    let helperMethods = {","      _logger: () => modelLogger,","      _App: () => App,      ","    };","","    modelConfig.docMethods = _.extend({}, modelConfig.docMethods, helperMethods);","    modelConfig.docMethods[viewObjects.METHOD_NAME] = function*() {","      return this.toJSON();","    };","    ","    modelConfig.modelMethods = _.extend({}, modelConfig.modelMethods, helperMethods);","","    App.models[modelName] = yield App.db.model(modelName, modelConfig);","","    App.logger.debug('Added model', modelName);","  }","};"]}]}},function(e,t){e.exports={methods:[{name:"notifications",tags:{param:[{description:"The application.",type:{name:"Object"},name:"App"}]},description:["Setup notification mechanisms.","Upon completion:","`App.emit('notify')` will trigger a notification."],params:[{name:"App",description:["The application."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.info(`Setting up notifications`);","","  let ids = _.keys(App.config.notifications || {});","","  App.notifiers = {};","","  for (let id of ids) {","    App.logger.debug(`Setting up notifier: ${id}`);","","    let cfg = App.config.notifications[id];","","    let transports = yield _.map(cfg.transports || [], function*(transport) {","      App.logger.debug(`Setting up transport: ${transport.type}`);","","      let builder = waigo.load(`support/notifications/${transport.type}`);","","      return yield builder(App, id, transport.config);","    });","","    App.notifiers[id] = {","      transports: transports,","    };","  }","","  App.on('notify', co.wrap(function*(id, messageOrObject) {","    if (!App.notifiers[id]) {","      return App.logger.warn(`Skipping invalid notifier target: ${id}`);","    }","","    App.logger.debug(`Notify ${id}`);","","    yield _.map(App.notifiers[id].transports, (t) => {","      return t(messageOrObject);","    });","  }));","};"]}]}},function(e,t){e.exports={methods:[{name:"routes",tags:{param:[{description:"The application.",type:{name:"Object"},name:"App"}]},description:["Setup route mappings.","undefined."],params:[{name:"App",description:["The application."],type:{name:"Object"}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.debug('Setting up routes');","","  var routeFiles = waigo.getItemsInFolder('routes');","","  let routes = {};","","  _.each(routeFiles, function(routeFile) {","    App.logger.debug('Loading ' + routeFile);","","    _.merge(routes, waigo.load(routeFile));","  });","","  App.routes = yield waigo.load('support/routeMapper')","    .setup(App, App.config.middleware, routes);","};"]}]}},function(e,t){e.exports={methods:[{name:"staticResources",tags:{param:[{description:"The application.",type:{name:"Object"},name:"app"}]},description:["Copy all built static resources from plugin and core framework folders into \napp's folder. And also setup static resource URL helper."],params:[{name:"app",description:["The application."],type:{name:"Object"}},{name:"App",description:[],type:{}}],returns:[],"throws":[],code:["module.exports = function*(App) {","  App.logger.debug('Copying static resources into public folder');","  ","  let tmpFolder = path.join(shell.tempdir(), 'waigo-app');","","  // clean old stuff from tmp folder","  shell.rm('-rf', tmpFolder);","","  logger.debug('Copy static resources into', tmpFolder);","","  let sources = waigo.getSources();","","  for (let key in sources) {","    // skip app's own","    if ('app' === key) {","      continue;","    }","","    let src = path.join(sources[key], '..', 'public', '*'),","      dst = path.join(tmpFolder, key);","","    logger.debug('Copying ' + src + ' -> ' + tmpFolder);","","    shell.mkdir('-p', dst);","    shell.cp('-Rf', src, dst);","","    // delete _gen folder in dst (if present)","    shell.rm('-rf', path.join(dst, '_gen'));","  }","","  var destFolder = ","    path.join(waigo.getAppFolder(), App.config.staticResources.folder, '_gen');","","  logger.debug('Copy ' + tmpFolder + ' -> ' + destFolder);","  shell.mkdir('-p', destFolder);","  shell.cp('-Rf', path.join(tmpFolder, '*'), destFolder);","","  // done with tmp folder","  shell.rm('-rf', tmpFolder);","","  // Static URL helper","  App.staticUrl = _.curry(_staticUrl, 2)(logger);","};"]},{name:"_staticUrl",tags:{param:[{description:"Path to static resource.",type:{name:"String"},name:"resourcePath"}],"return":[{description:null,type:{name:"String"}}]},description:["Helper to generate static URL (relative to base site URL).","The given `resourcePath` may be prefixed with `<module name>:`. This is extracted \n(if present) and used to generate the correct path. If not present then it \nis assumed that the static resource belongs to the app."],params:[{name:"resourcePath",description:["Path to static resource."],type:{name:"String"}},{name:"logger",description:[],type:{}}],returns:[{description:[],type:{name:"String"}}],"throws":[],code:["function _staticUrl(logger, resourcePath) {","  let pos = resourcePath.indexOf(':'),","    owner =  (0 <= pos) ? resourcePath.substr(0, pos) : '',","    theUrl = (0 <= pos) ? resourcePath.substr(pos+1) : resourcePath;","","  logger.trace('Static resource: ' + resourcePath + ' -> owner:' + owner + ', url:' + theUrl);","","  if (","    /* app */ ","    !owner.length ||","    /* if want 'waigo' resource and the current app is the waigo framework itself */","      ('waigo' === owner && 0 === waigo.getAppFolder().indexOf(waigo.getWaigoFolder())) ","  ) {","    return path.join('/', theUrl);","  } else {","    return path.join('/_gen', owner, theUrl);","  }","}"]}]}},function(e,t){e.exports={constants:[{name:"METHOD_NAME",tags:{type:[{description:null,type:{name:"String"}}]},description:["The name of the method which when called will return a view object representation of the callee."],type:{description:null,type:{name:"String"}},code:["const METHOD_NAME = exports.METHOD_NAME = 'toViewObject';"]},{name:"toViewObjectYieldable",tags:{param:[{description:"A request context.",type:{name:"Object"},name:"ctx"},{description:"The object.",type:{},name:"inputObject"}],"return":[{description:"A yieldable value."}]},description:["Get yieldable for converting given object into a view object."],code:["const toViewObjectYieldable = exports.toViewObjectYieldable = function(inputObject, ctx) {","","  if (inputObject) {","    // if it's one of our model schema types","    // (see https://github.com/hiddentao/simple-nosql-schema)","    switch (inputObject) {","      case String:","        return Q.resolve('String');","      case Boolean:","        return Q.resolve('Boolean');","      case Number:","        return Q.resolve('Number');","      case Date:","        return Q.resolve('Date');","      case Object:","        return Q.resolve('Object');","      case Array:","        return Q.resolve('Array');","    }","","    // has view object method","    if ('function' === typeof inputObject[METHOD_NAME]) {","      return inputObject[METHOD_NAME].call(inputObject, ctx);","    }","    // is an array","    else if (_.isArray(inputObject)) {","      // recursive call on all children","      return inputObject.map(function(local) {","        return toViewObjectYieldable(local, ctx);","      });","    }","    // is an object","    else if (_.isPlainObject(inputObject)) {","      let yieldables = {};","","      for (let idx in inputObject) {","        yieldables[idx] = toViewObjectYieldable(inputObject[idx], ctx);","      }","","      return yieldables;","    }","  }","","  return Q.resolve(inputObject);","};"]}]}},function(e,t){e.exports={title:"App object",body:'<h1>App object</h1>\n<p>Your applications central point of control is the <a href="https://github.com/waigo/waigo/blob/master/src/application.js">Application object</a>, accessible as <code>App</code> inside your\ncontrollers and other back-end code:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// &lt;project folder&gt;/src/controllers/...</span>\n\nexports.index = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-comment">// this.App</span>\n};\n</code></pre>\n<p>This object holds your apps configuration and acts as the gateway to the\nvarious components which make up your app. It also holds a reference to the\nunderlying <code>koa</code> application object in case you need to access it.</p>\n<p>The Application object is also responsible for starting up and subsequently\nshutting down your application.</p>\n'}},function(e,t){e.exports={title:"Configuration",body:'<h1>Configuration</h1>\n<p>When starting up your app the first thing it does is load in configuration\nfrom <code>src/config/base.js</code>.</p>\n<p>The configuration file exports a single function which takes an empty <code>config</code> object\nas parameter. It then adds properties to this object. This object is from\nthen onwards always accessible as <code>App.config</code> within your\ncontrollers and other backend code. In templates it is accessible via the\n<code>config</code> template variable.</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// &lt;project folder&gt;/src/config/base.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  config.port = (process.env.PORT || <span class="hljs-number">3000</span>);\n  config.baseURL = <span class="hljs-string">\'http://localhost:\'</span> + config.port;\n  ...\n};\n</code></pre>\n<p>The <code>base.js</code> configuration file gets auto-generated if you using the CLI to\nsetup your app - it will copy the <a href="https://github.com/waigo/waigo/blob/master/src/cli/config/base.js">default verson</a> provided by the framework into your app. This default configuration is geared towards running your Waigo application in dev mode. If you do not have a <code>base.js</code> configuration file present in your app then Waigo will fallback to using its own one.</p>\n<h2>Working with Modes</h2>\n<p>When developing your application locally you may wish to configure it differently to\nwhen its deployed in production. For example, you may wish to point your\napplication to a local development-mode database rather than your production one.</p>\n<p>By default your Waigo app runs in <code>development</code> mode. The mode can be\nexplicitly set using the <code>NODE_ENV</code> environment variable. Thus in production\ndeployments you might run your app like so:</p>\n<pre><code class="language-bash">NODE_ENV=production ./start-app.js\n</code></pre>\n<p>The configuration loader will first load the base configuration and then try to\nload a file based on the mode:</p>\n<ol>\n<li><code>src/config/base.js</code> - <em>base configuration file</em></li>\n<li><code>src/config/&lt;NODE_ENV&gt;.js</code> - <em>mode-specific configuration file</em></li>\n</ol>\n<p>If any of these files isnt provided by your app then the <a href="../extendandoverride/moduleloader/">module loader</a> will load the\ncorresponding version provided within Waigo. Note that Waigo currently <a href="https://github.com/waigo/waigo/tree/master/src/config">only provides <code>base.js</code></a> by default.</p>\n<p>Each file is expected to export a single function to which a configuration <code>Object</code>\ngets passed:</p>\n<pre><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  config.someSetting = ...\n  ...\n};\n\n</code></pre>\n<p><strong>The mode-specific configuration file overrides settings from the\nbase configuration file.</strong> Thus you should place settings common to all modes in\nthe base configuration file and then override only what needs to be different in your mode-specific configuration files.</p>\n<h2>User-specific configuration</h2>\n<p>Sometimes you may wish to further customize configuration depending on who is running the app.</p>\n<p>For instance, lets say you have multiple developers working on an application and that one of the configuration settings required by the app in <code>development</code> mode is the developers home folder on their machine.</p>\n<p>You may create <code>src/config/development.js</code> and have it contain:</p>\n<pre><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  config.userHomeFolder = <span class="hljs-string">\'enter home folder path here\'</span>;\n};\n</code></pre>\n<p>If you commit this file to the repository then other people can use it. But they would have to first edit the file, set the right folder path, and then run the app, all the while being careful not to commit the change.</p>\n<p>A better approach is to use user-specific configuration files. For example, if Bob (whose local user id is <code>bob</code>) wishes to run the app he would create <code>src/config/development.bob.js</code>:</p>\n<pre><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  config.userHomeFolder = <span class="hljs-string">\'/home/bob\'</span>;\n};\n</code></pre>\n<p>And Ryan would create <code>src/config/development.ryan.js</code>, and so on.</p>\n<p>The configuration loader will try to load configuration files in the following order:</p>\n<ol>\n<li><code>src/config/base.js</code> - <em>base configuration file</em></li>\n<li><code>src/config/&lt;NODE_ENV&gt;.js</code> - <em>mode-specific configuration file</em></li>\n<li><code>src/config/&lt;NODE_ENV&gt;.&lt;user&gt;.js</code> - <em>mode- and user-specific configuration file</em></li>\n</ol>\n<p>The <code>user</code> is the user id of the owner of the Waigo app process. It is always accessible within controllers and back-end code as <code>App.user</code>.</p>\n'}},function(e,t){e.exports={title:"App configuration",body:'<h1>App configuration</h1>\n<p>This section deals with how you configure a Waigo app and the processes which\ntake place during app startup.</p>\n<ul>\n<li><a href="appobject/">App object</a></li>\n<li><a href="configuration/">Configuration</a></li>\n<li><a href="startupsteps/">Startup steps</a></li>\n<li><a href="shutdownsteps/">Shutdown steps</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Shutdown steps",body:'<h1>Shutdown steps</h1>\n<p>Similar to startup steps, Waigo also has <em>shutdown steps</em> - tasks which\nget executed when <code>App.shutdown()</code> is called.</p>\n<p>They are specified in your configuration file:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/config/base.js</span>\n...\n<span class="hljs-comment">// startup steps listed in order</span>\nconfig.shutdownSteps = [\n  <span class="hljs-string">\'listener\'</span>,\n  <span class="hljs-string">\'cron\'</span>,\n  <span class="hljs-string">\'acl\'</span>,\n  <span class="hljs-string">\'db\'</span>,\n];\n...\n</code></pre>\n<p>Each of these steps corresponds to a file under the <code>src/support/shutdown/</code>\npath.</p>\n<p>Shutdown steps give your app a chance to close any opened resource connections and\ndo any cleanup necessary before fully shutting down. They are especially useful\nto have if youre doing automated tests with a Waigo app and need start and stop\nan app multiple times.</p>\n'}},function(e,t){e.exports={title:"Startup steps",body:'<h1>Startup steps</h1>\n<p>Startup steps are responsible for loading the various components of\nyour application. They are executed just once, after the\nApps <a href="configuration/">configuration</a> has been loaded and <a href="../logging/">logging</a> has been setup.</p>\n<p>Startup steps are specified in your configuration file:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/config/base.js</span>\n...\n<span class="hljs-comment">// startup steps listed in order</span>\nconfig.startupSteps = [\n  <span class="hljs-string">\'db\'</span>,\n  <span class="hljs-string">\'models\'</span>,\n  <span class="hljs-string">\'forms\'</span>,\n  <span class="hljs-string">\'activityRecorder\'</span>,\n  <span class="hljs-string">\'notifications\'</span>,\n  <span class="hljs-string">\'acl\'</span>,\n  <span class="hljs-string">\'middleware\'</span>,\n  <span class="hljs-string">\'routes\'</span>,\n  <span class="hljs-string">\'staticResources\'</span>,\n  <span class="hljs-string">\'actionTokens\'</span>,\n  <span class="hljs-string">\'mailer\'</span>,\n  <span class="hljs-string">\'cron\'</span>,\n  <span class="hljs-string">\'appTemplateVars\'</span>,\n  <span class="hljs-string">\'listener\'</span>,\n];\n...\n</code></pre>\n<p>Each of these steps corresponds to a file under the <code>src/support/startup/</code>\npath. For example, the <a href="https://github.com/waigo/waigo/blob/master/src/support/startup/forms.js">forms</a> startup step contains:</p>\n<pre><code class="language-javascript"><span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-keyword">var</span> waigo = global.waigo,\n  _ = waigo._;\n\n<span class="hljs-comment">/** \n * Setup forms.\n * @param {App} App  The application.\n */</span>\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">App</span>) </span>{\n  App.logger.debug(<span class="hljs-string">\'Setting up forms\'</span>);\n\n  App.form = waigo.load(<span class="hljs-string">\'support/forms/form\'</span>);\n};\n</code></pre>\n<p>By customizing (in the configuration) which startup steps get executed you can fully\ncontrol exactly what your application does at startup. For instance, your application does\nnot have to start a HTTP server (<code>listener</code>) or have a database\nconnection (<code>db</code>), or setup Cron jobs (<code>cron</code>). If you didnt have any startup steps at all then your app would simply load in its configuration and setup logging, and that would be it.</p>\n<p>The startup steps listed above are the ones which are all provided by default with\nWaigo and can of course be <a href="../extendandoverride/">overridden</a> within your app.</p>\n<p>You can also add your own startup steps. For example, lets add a step which simply outputs the current date and time:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file:  &lt;project folder&gt;/src/support/startup/timeAndDate.js</span>\n\nmdoule.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">App</span>) </span>{\n  App.logger.info(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toString());\n};\n</code></pre>\n<p>Lets not to forget to add it to our configuration. Well set it to run after\nall the base startup steps are done executing:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/config/development.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  <span class="hljs-comment">// Remember, config/base.js sets the initial value of config.startupSteps</span>\n  config.startupSteps.push(<span class="hljs-string">\'timeAndDate\'</span>);\n};\n</code></pre>\n'}},function(e,t){e.exports={title:"Best practices",body:"<h1>Best practices</h1>\n<p>Some best practices to adhere to when developing your Waigo app.</p>\n<h2>Dont store global data inside the Node process</h2>\n<p>Waigo is designed to be scalable, meaning that you should be able to run multiple instances of your app on the same or different machines and achieve scalability, without causing problems for users.</p>\n<p>A key requirement for the above is that you dont store any global or app-level data within the running process. This is because <strong>you might not be able to control app instance serves which request.</strong> A user may get served by instance 1 for a request, and then later get served by instance 2 for another request, depending on your load-balancing algorithm, etc.</p>\n<p>Thus it is important that any user-related data gets stored in a place where its accessible by all app instances. For example, if you need to store user session data put it into the database. And if youre using a database like RethinkDB then it will be easy to auto-notify every other app instance when the database gets updated.</p>\n<p>The rule of thumb is: <strong>Place all user data in a place where its accessible by an instance of your app running on another machine.</strong></p>\n<h2>Dont create unnecessary middleware plugins</h2>\n<p>The Waigo middleware system is very flexible and allows you to re-use existing middleware for Koa without much extra boilerplate code.</p>\n<p>Make full use of this, and avoid the temptation to create a full-on plugin (and thus NPM module) which just wraps an existing Koa middleware plugin.</p>\n<p>Unless of your course your module adds some significant logic that is worth re-using through a plugin.</p>\n<p>By using the original Koa plugin as much as possible it will be easier to keep up-to-date with improvments to it without having to also update your wrapper plugin.</p>\n"
}},function(e,t){e.exports={title:"Creating custom commands",body:'<h1>Creating custom commands</h1>\n<p>You can override the functionality of Waigos default CLI commands and/or add your own custom commands to the list.</p>\n<p>Every CLI command is implemented in a file within the <code>src/cli</code>.This folder gets indexed by the Waigo module lader.</p>\n<p>Thus if you wish to add your own commands or override the defaults then you must place your implementations within <code>&lt;project folder&gt;/src/cli</code>.</p>\n<p>For example, lets add a command called <code>start</code> which will start the app:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// &lt;project folder&gt;/src/cli/start.js</span>\n<span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'path\'</span>),\n  util = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'util\'</span>);\n\n<span class="hljs-keyword">const</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>),\n  AbstractCommand = waigo.load(<span class="hljs-string">\'support/cliCommand\'</span>);\n  \n<span class="hljs-comment">/**\n * The "start" CLI command.\n *\n * This command runs the Waigo application.\n */</span>\n<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Command</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractCommand</span> </span>{\n  <span class="hljs-keyword">constructor</span>() {\n    <span class="hljs-keyword">super</span>(<span class="hljs-string">\'Start the app\'</span>, []);\n  }\n\n  <span class="hljs-comment">/**\n   * Run this command.\n   */</span>\n  * run () {\n    <span class="hljs-keyword">yield</span> waigo._bootstrap();\n  }\n}\n\n<span class="hljs-built_in">module</span>.exports = Command;\n</code></pre>\n<p>All CLI commands must be implemented as concrete subclasses of <a href="https://github.com/waigo/waigo/blob/master/src/support/cliCommand.js"><code>AbstractCommand</code></a>. This base class provides a number of useful utility methods for use by actual commands. Take a look at the <a href="https://github.com/waigo/waigo/blob/master/src/cli/init-gulp.js">init-gulp</a> code to see these in action.</p>\n'}},function(e,t){e.exports={title:"Command-Line (CLI)",body:'<h1>Command-Line (CLI)</h1>\n<ul>\n<li><a href="usingthecli/">Using the CLI</a></li>\n<li><a href="creatingcustomcommands/">Creating custom commands</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Using the CLI",body:'<h1>Using the CLI</h1>\n<p>In the earlier Hello World example you used the Waigo command-line interface (CLI) to get a\nworking application up and running.</p>\n<p>Even if you install Waigo globally in order to use the CLI its smart enough to delegate control to the local\ninstallation of Waigo in your <code>node_modules</code> folder, if one is present.</p>\n<p>The available CLI commands can be seen by typing:</p>\n<pre><code class="language-bash">$ waigo --help\n\n  Usage: waigo [options] [<span class="hljs-built_in">command</span>]\n\n\n  Commands:\n\n    init        Initialise and create a skeleton Waigo app\n    init-gulp   Initialise and create a Gulpfile and associated tasks <span class="hljs-keyword">for</span> development purposes\n\n  Options:\n\n    -h, --help     output usage information\n    -V, --version  output the version number\n</code></pre>\n<p>Further help is available for each command. For example, to find out what\narguments are possible for the <code>init</code> command:</p>\n<pre><code class="language-bash">$ waigo init --help\n\n  Usage: init [options]\n\n  Initialise and create a skeleton Waigo app\n\n  Options:\n\n    -h, --help  output usage information\n</code></pre>\n<p>The <code>&lt;waigo npm folder&gt;/src/cli/data</code> folder contains\nany data files to be used by CLI commands (e.g. script templates) and does not get\nscanned by the Waigo module loader.</p>\n'}},function(e,t){e.exports={title:"Controllers",body:'<h1>Controllers</h1>\n<p>Controllers in Waigo repesent the <code>C</code> in the <code>MVC (Model-View-Controller)</code> paradigm. Controllers expose middleware generator functions which are expected to be the final handlers in middleware chains, i.e. they are usually responsible for generating the response that will ultimately get sent back for a given client request.</p>\n<p>The default Waigo controller (<code>src/controllers/index</code>) simply has:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;waigo framework&gt;/src/controllers/index.js</span>\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'index\'</span>);\n};\n</code></pre>\n<p><em>Note: <code>this.render()</code> is provided by the <a href="../outputformats/">output formats</a> middleware.</em></p>\n<p>The above controller <code>main</code> method simply render the <code>index</code> template to the client response. If you want the controller function can also behave like normal middleware and pass control to <code>next</code>:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;waigo framework&gt;/src/controllers/index.js</span>\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-keyword">yield</span> next;\n};\n</code></pre>\n<h2>App object</h2>\n<p>Just like middleware, controllers methods have access to your applications <a href=""><code>App</code> object</a> via <code>this.App</code>:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;waigo framework&gt;/src/controllers/index.js</span>\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-keyword">this</span>.body = <span class="hljs-string">`Running in mode: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.App.config.mode}</span>`</span>;\n};\n</code></pre>\n<h2>Controllers in routes</h2>\n<p>Within your route configuration you would normally supply the controller method as the last item in the middleware chain:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/routes/user.js</span>\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-string">\'/user\'</span>: {\n  \t<span class="hljs-string">\'/info\'</span>: {\n      <span class="hljs-attr">POST</span>: <span class="hljs-string">\'users.info\'</span>,\n\t},\n  \t<span class="hljs-string">\'/pic\'</span>: {\n      <span class="hljs-attr">POST</span>: [ { <span class="hljs-attr">id</span>: <span class="hljs-string">\'bodyParser\'</span>, <span class="hljs-attr">limit</span>: <span class="hljs-string">\'3mb\'</span> }, <span class="hljs-string">\'users.updatePic\'</span> ]\n\t}\n  }\n};\n</code></pre>\n<p>For the above configuration Waigo will expect the following to exist:</p>\n<ul>\n<li><code>src/controllers/users.js</code> exposing generator method <code>info()</code></li>\n<li><code>src/controllers/users.js</code> exposing generator method <code>updatePic()</code></li>\n</ul>\n<p>You can nest controllers within subfolders in order to keep your codebase clean. If you do this you will need to specific the full subfolder path in your route configuration, replacing the normal path separator with period (<code>.</code>).</p>\n<p>For example, lets say your controller is located at <code>src/controllers/admin/dashboard.js</code> and exposed the <code>show()</code> method. Your route configuration may look like:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/routes/user.js</span>\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-string">\'/admin\'</span>: {\n    <span class="hljs-attr">GET</span>: <span class="hljs-string">\'admin.dashboard.show\'</span>,\n  }\n};\n</code></pre>\n<p>`</p>\n'}},function(e,t){e.exports={title:"Built-in models",body:'<h1>Built-in models</h1>\n<p>Waigo provides a few <a href="https://github.com/waigo/waigo/tree/master/src/models">built-in models</a> to enable to you quickly get started building a fully-fledged application.</p>\n<ul>\n<li><code>Acl</code> - Represents an entry in the Access-Control-List (ACL) table. The ACL provides an easy way for you to control access to any resource within your application based on user or role assigned to user.</li>\n<li><code>User</code> - Represents a registered user, along with their authentication data (passwords, OAuth), profile info as well as their assigned roles.</li>\n<li><code>Activity</code> - Represents an activity log entry. This is a simpler version of the <a href="http://activitystrea.ms/">Activity Streams</a> format.</li>\n<li><code>Cron</code> - Represents a Cron job and its run history. You will likely never need to use this model directly yourself.</li>\n</ul>\n<p>All of the above models are of course optional, and you can extend/override them with your own. But if you do so remember to update the other parts of Waigo which depends upon them.</p>\n'}},function(e,t){e.exports={title:"Database connections",body:'<h1>Database connections</h1>\n<p><em>Note: At present only RethinkDB is supported. MongoDB support is planned for the future.</em></p>\n<p>The <code>database</code> startup step is responsible for creating connections to databases. The connections are specified in your apps configuration::</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/config/base.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  ...\n  config.db = {\n    <span class="hljs-attr">db1</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'rethinkdb\'</span>,\n      <span class="hljs-attr">serverConfig</span>: {\n        <span class="hljs-attr">db</span>: <span class="hljs-string">\'waigo\'</span>,\n        <span class="hljs-attr">servers</span>: [\n          {\n            <span class="hljs-attr">host</span>: <span class="hljs-string">\'127.0.0.1\'</span>,\n            <span class="hljs-attr">port</span>: <span class="hljs-number">28015</span>,\n          }\n        ],\n      }\n    },\n    <span class="hljs-attr">db2</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'rethinkdb\'</span>,\n      <span class="hljs-attr">serverConfig</span>: {\n        <span class="hljs-attr">db</span>: <span class="hljs-string">\'test\'</span>,\n        <span class="hljs-attr">servers</span>: [\n          {\n            <span class="hljs-attr">host</span>: <span class="hljs-string">\'another.host.domain.com\'</span>,\n            <span class="hljs-attr">port</span>: <span class="hljs-number">58015</span>,\n          }\n        ],\n      }\n    },\n  };\n  ...\n};\n</code></pre>\n<p>The above configuration tells Waigo to create two connection - <code>mydb</code> and <code>db2</code> - to RethinkDB databases named <code>waigo</code> and <code>test</code> respectively.</p>\n<p>Once setup, these database connections will be accessible at <code>App.dbs.mydb</code> and <code>App.dbs.db2</code>. Waigo uses <a href="https://github.com/hiddentao/thinodium">thinodium</a> to connect to databases; thus the returned database connection objects are <code>Thinodium.Database</code> instances and expose all the same methods.</p>\n<p>The first database specified in the configuration is always assumed to be the main one for your application, and is thus it is also made accessible at <code>App.db</code> (i.e. <code>App.db</code> === <code>App.dbs.mydb</code> in the above example).</p>\n<h2>Custom database connectors</h2>\n<p>If Waigo doesnt support your database type ouf of the box you can add an <em>adapter</em> for your desired type to the <code>src/support/db</code> path and expose two methods:</p>\n<ul>\n<li><code>create(id, logger, config)</code> - to create a database connection.</li>\n<li><code>closeAll(logger)</code> - to close all connections prevoiusly created and clean up resources.</li>\n</ul>\n<p>For example, lets say you wanted to use a MySQL database. You might have:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/support/db/mysql.js</span>\n<span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-keyword">const</span> mysqlConnect = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'some-msyql-connector-module\'</span>);\n\n<span class="hljs-keyword">const</span> _connections = {};\n\nexports.create = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">id, logger, dbConfig</span>) </span>{\n  logger.info(<span class="hljs-string">\'Connecting to MySQL\'</span>, id);\n\n  <span class="hljs-keyword">let</span> db = <span class="hljs-keyword">yield</span> mysqlConnect(dbConfig.serverConfig);\n\n  _connections[id] = db;\n\n  <span class="hljs-keyword">return</span> db;\n};\n\n\nexports.closeAll = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">logger</span>) </span>{\n  logger.info(<span class="hljs-string">\'Close all connections\'</span>);\n\n  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> id <span class="hljs-keyword">in</span> _connections) {\n    <span class="hljs-keyword">yield</span> _connections[id].disconnect();\n  }\n};\n</code></pre>\n<p>Then in your apps configuration you would have:</p>\n<pre><code><span class="hljs-comment">// file: &lt;project folder&gt;/src/config/base.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  ...\n  config.db = {\n    <span class="hljs-attr">db1</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'mysql\'</span>,\n      <span class="hljs-attr">serverConfig</span>: {\n        <span class="hljs-attr">db</span>: <span class="hljs-string">\'specialdb\'</span>,\n        <span class="hljs-attr">servers</span>: [ ... ]\n      }\n    }\n  };\n  ...\n};\n</code></pre>\n'}},function(e,t){e.exports={title:"Defining and using models",body:'<h1>Defining and using models</h1>\n<p>A model is defined as file under the <code>src/models</code> path. It must export a table schema definition and may optionally export definitions for virtual fields, model methods and document instance methods.</p>\n<h2>Schema</h2>\n<p>At a bare minimum our model must export a <code>schema</code>:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/models/user.js</span>\n\n<span class="hljs-keyword">const</span> ProfileSchema = {\n  <span class="hljs-attr">displayName</span>: { \n    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> \n  },\n};\n\nexports.schema = {\n  <span class="hljs-attr">username</span>: { \n    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n  },\n  <span class="hljs-attr">password</span>: { \n    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n  },\n  <span class="hljs-attr">profile</span>: { \n    <span class="hljs-attr">type</span>: ProfileSchema, \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>,\n  },\n  <span class="hljs-attr">lastLogin</span>: { \n    <span class="hljs-attr">type</span>: <span class="hljs-built_in">Date</span>, \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>,\n  },\n};\n</code></pre>\n<p><em>Note: Thinodium uses the <a href="https://github.com/hiddentao/simple-nosql-schema">simple-nosql-schema</a> module to validate schemas. Check it out to find out about the different types and options possible for each field defined in the schema</em>.</p>\n<p>The above schema specifies four fields for the database table - <code>username</code>, <code>password</code>, <code>profile</code> and <code>lastLogin</code> - with the first two fields being mandatory for any new rows that are to be inserted into the table. The <code>profile</code> field value is a nested document which must contain atleast a <code>displayName</code> key. The <code>lastLogin</code> field is of type <code>Date</code> meaning that in the database it is stored as a date timestamp.</p>\n<p>Using this model is simple:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/index.js</span>\n\nexports.add = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">let</span> user = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.App.models.User.insert({\n  \t<span class="hljs-attr">username</span>: <span class="hljs-string">\'test@test.com\'</span>,\n  \t<span class="hljs-attr">password</span>: <span class="hljs-string">\'password\'</span>,\n  \t<span class="hljs-attr">profile</span>: {\n\t  <span class="hljs-attr">displayName</span>: <span class="hljs-string">\'test user\'</span>\n  \t}\n  });\n  \n  <span class="hljs-keyword">this</span>.body = user.username;\t<span class="hljs-comment">// test@test.com</span>\n}\n</code></pre>\n<p>We can fetch all rows at any time:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// ...continuing from previous example...</span>\n\n<span class="hljs-keyword">let</span> allUsers = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.App.models.User.getAll();\n\n<span class="hljs-comment">/* allUsers.length === 1 */</span>\n\n<span class="hljs-built_in">console</span>.log( allUsers[<span class="hljs-number">0</span>].username );\t  <span class="hljs-comment">/* test@test.com */</span>\n</code></pre>\n<p>Every database table row has a unique <code>id</code> field (the primary key) which is auto-generated by the database engine. This can be used to quickly fetch an item weve previously inserted:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// ...continuing from previous example...</span>\n\n<span class="hljs-comment">// reload user from db</span>\n<span class="hljs-keyword">let</span> addedUser = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.App.models.User.get(user.id);\n</code></pre>\n<p>We can update a users attributes:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// ...continuing from previous example...</span>\n\n<span class="hljs-comment">// update username</span>\nuser.username = <span class="hljs-string">\'test2@domain.com\'</span>;\n<span class="hljs-keyword">yield</span> user.save();\n</code></pre>\n<p>We can also remove the user.</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// ...continuing from previous example...</span>\n\n<span class="hljs-keyword">yield</span> user.remove();\n\n<span class="hljs-keyword">let</span> addedUser = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.App.models.User.get(user.id);\n\n<span class="hljs-comment">/* addedUser === null */</span>\n</code></pre>\n<p><em>Note: Read the <a href="https://hiddentao.github.io/thinodium">Thinodium docs</a> for the full model API.</em></p>\n<h2>Indexes</h2>\n<p>To speed up lookups on heavily-used tables we can and should add <em>indexes</em>:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/models/user.js</span>\n\nexports.schema = {\n  <span class="hljs-attr">username</span>: { \n    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n  },\n  <span class="hljs-attr">password</span>: { \n    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n  },\n  <span class="hljs-attr">roles</span>: { \n    <span class="hljs-attr">type</span>: [<span class="hljs-built_in">String</span>], \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>,\n  },  \n};\n\nexports.indexes = {\n  {\n    <span class="hljs-attr">name</span>: <span class="hljs-string">\'username\'</span>,\n  },\n  {\n    <span class="hljs-attr">name</span>: <span class="hljs-string">\'roles\'</span>,\n    <span class="hljs-attr">options</span>: {\n      <span class="hljs-attr">multi</span>: <span class="hljs-literal">true</span>,\n    },\n  },    \n};\n</code></pre>\n<p>Weve asked for two indexes - one on the <code>username</code> field and one on the <code>roles</code> field with the additonal setting that it should be treated as being able to hold multiple values (because <code>roles</code> specifies an array of strings).</p>\n<p>From now on lookup by username and/or role will be quicker than before.</p>\n<p><em>Note: More complex compound indexes are supported - check out Waigos built-in models for real examples.</em></p>\n<h2>Primary key</h2>\n<p>By default the <code>id</code> field (which is auto-defined by the database engine) is assumed to the primary key. But you can override this setting using the <code>pk</code> export:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/models/user.js</span>\n\nexports.pk = <span class="hljs-string">\'username\'</span>;\n</code></pre>\n<h2>Model methods</h2>\n<p>Model methods are the methods available on the model object itself. There are a number of built-in methods - <code>get()</code>, <code>insert()</code>, etc - provided by Waigo. But it is a good idea to add custom methods as a convenience and in order to control access.</p>\n<p>For example, lets say we wish to hash a new users password before inserting it. We will provide an <code>add()</code> method to add a user, and a <code>load()</code> method to fetch a user given username and password:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/models/user.js</span>\n\n<span class="hljs-keyword">const</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>),\n\t_ = waigo._;\t<span class="hljs-comment">// lodash</span>\n\nexports.schema = {\n  <span class="hljs-attr">username</span>: { \n    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n  },\n  <span class="hljs-attr">password</span>: { \n    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n  },\n};\n\nexports.modelMethods = {\n  <span class="hljs-attr">add</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">username, password</span>) </span>{\n    <span class="hljs-keyword">this</span>._logger.info(<span class="hljs-string">`Adding user: <span class="hljs-subst">${username}</span>`</span>);\n    \n    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.insert({\n      <span class="hljs-attr">username</span>: username,\n      <span class="hljs-attr">password</span>: someHashingFunction(password),\n    });\n  },\n  \n  <span class="hljs-attr">load</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">username, password</span>) </span>{\n    <span class="hljs-keyword">this</span>._logger.info(<span class="hljs-string">`Loading user: <span class="hljs-subst">${username}</span>`</span>);\n    \n    password = someHashingFunction(password);\n    \n    <span class="hljs-keyword">let</span> ret = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.rawQry().filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">user</span>) </span>{\n      <span class="hljs-keyword">return</span> user(<span class="hljs-string">\'password\'</span>).eq(password).and(user(<span class="hljs-string">\'username\'</span>).eq(username));\n    }).run();\n    \n    <span class="hljs-keyword">this</span>.wrapRaw(_.get(ret, <span class="hljs-string">\'0\'</span>));\n  }\n};\n</code></pre>\n<p>The <code>_logger()</code> method we used inside the model methods gives us access to a <a href="../logging/">logger</a> associated with the Model - it is auto-created by Waigo. We can also access the <code>App</code> object at any time using the <code>_App()</code> method, though in this case we didnt need to do this.</p>\n<p>The <code>rawQry()</code> method is available on all Waigo models and enables the raw querying mode for our underlying database table. In this case its the same as executing a query using <a href="https://github.com/neumino/rethinkdbdash">rethinkdbdash</a>, the RethinkDB database library that is being used at a lower level.</p>\n<p>The <code>wrapRaw()</code> method wraps raw database data (as returned by using <code>rawQry()</code>) in our models document instances (see <a href="https://hiddentao.github.io/thinodium">Thinodium docs</a>).</p>\n<p>We would use this model as follows:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">yield</span> App.models.User.add(<span class="hljs-string">\'test@test.com\'</span>, <span class="hljs-string">\'password\'</span>);\n\n<span class="hljs-comment">// let\'s try loading, but with a wrong password</span>\n<span class="hljs-keyword">let</span> user = <span class="hljs-keyword">yield</span> App.models.User.load(<span class="hljs-string">\'test@test.com\'</span>, <span class="hljs-string">\'wrongpassword\'</span>);\n\n<span class="hljs-comment">/* user === null */</span>\n\n<span class="hljs-comment">// let\'s try loading with right password</span>\nuser = <span class="hljs-keyword">yield</span> App.models.User.load(<span class="hljs-string">\'test@test.com\'</span>, <span class="hljs-string">\'password\'</span>);\n\n<span class="hljs-built_in">console</span>.log(user.password);  <span class="hljs-comment">/* F24FA5B... some hash */</span>\n</code></pre>\n<p>Notice above that <code>user.password</code> returns the hashed version of the password. Thus we wouldnt be able to manually compare a password which the user has input with the the one in the documented returned by the model.</p>\n<p>We can work around this using document methods.</p>\n<h2>Document methods</h2>\n<p>Document methods are extra methods to enable on the document instances returned by our Models data retrieval methods.</p>\n<p><em>Note: Waigo automatically adds <code>_App()</code> and <code>_logger()</code> methods to every document instance, same as for Model objects</em>.</p>\n<p>Lets add a <code>checkPassword()</code> document method which lets us check whether a given password matches the password stored for a user:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/models/user.js</span>\n\n<span class="hljs-keyword">const</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>),\n\t_ = waigo._;\t<span class="hljs-comment">// lodash</span>\n\nexports.schema = {\n  <span class="hljs-attr">username</span>: { \n    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n  },\n  <span class="hljs-attr">password</span>: { \n    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n  },\n};\n\nexports.docMethods = {\n  <span class="hljs-attr">checkPassword</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">password</span>) </span>{\n    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.someHashingFunction(password) === <span class="hljs-keyword">this</span>.password;\n  },\n};\n</code></pre>\n<p><em>Note: The context (<code>this</code>) of a document method is always the document instance itself.</em></p>\n<p>How we might use it:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">let</span> user = <span class="hljs-keyword">yield</span> App.models.User.get(<span class="hljs-string">\'user id\'</span>);\n\n<span class="hljs-keyword">if</span> (user.checkPassword(inputPassword)) {\n  <span class="hljs-comment">// password correct!</span>\n} <span class="hljs-keyword">else</span> {\n  <span class="hljs-comment">// password incorrect!</span>\n}\n</code></pre>\n<p><em>Note: Read the <a href="https://hiddentao.github.io/thinodium">Thinodium docs</a> for the list of built-in Document instance methods.</em></p>\n<p><strong>Virtual fields</strong></p>\n<p>Virtual fields are document instance fields which appear to work like normal fields, except that they are actually represented by getter and setter functions, and consequently are not part of the models schema and are not stored in the database.</p>\n<p>Virtual fields act as convenient accessors for information derived from the real document data. For example, lets say we store a users birth date. We may add an <code>age</code> virtual field which automatically calculates their current age:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/models/user.js</span>\n\n<span class="hljs-keyword">const</span> moment = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'moment\'</span>),\n  waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>),\n  _ = waigo._;\t<span class="hljs-comment">// lodash</span>\n\nexports.schema = {\n  <span class="hljs-attr">username</span>: { \n    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n  },\n  <span class="hljs-attr">dob</span>: { \n    <span class="hljs-attr">type</span>: <span class="hljs-built_in">Date</span>, \n    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n  },\n};\n\nexports.docVirtuals = {\n  <span class="hljs-attr">age</span>: {\n    <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{\n      <span class="hljs-keyword">return</span> moment().diff(<span class="hljs-keyword">this</span>.dob, <span class="hljs-string">\'years\'</span>);\n    }\n  }\n};\n</code></pre>\n<p>And here is how you would use it:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">let</span> user = <span class="hljs-keyword">yield</span> App.models.User.insert({\n  <span class="hljs-attr">username</span>: <span class="hljs-string">\'test\'</span>,\n  <span class="hljs-attr">dob</span>: moment(<span class="hljs-string">\'1982-02-02\'</span>, <span class="hljs-string">\'YYYY-MM-DD\'</span>).toDate(),\n});\n\n<span class="hljs-built_in">console</span>.log( user.age );\n<span class="hljs-comment">/* 34 */</span>\n\n<span class="hljs-comment">// let\'s try setting the field</span>\nuser.age = <span class="hljs-number">2</span>; <span class="hljs-comment">/* throws Error */</span>\n</code></pre>\n<p>Notice how we were unable to set <code>age</code>. Virtual fields can be set if we add setters to them:</p>\n<pre><code class="language-javascript">exports.docVirtuals = {\n  <span class="hljs-attr">age</span>: {\n    <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{\n      <span class="hljs-keyword">return</span> moment().diff(<span class="hljs-keyword">this</span>.dob, <span class="hljs-string">\'years\'</span>);\n    },\n    <span class="hljs-attr">set</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{\n      <span class="hljs-comment">// weird thing to do, I know!</span>\n      <span class="hljs-keyword">this</span>.dob = moment().subtract(val, <span class="hljs-string">\'years\'</span>).toDate();\n    }\n  }\n};\n</code></pre>\n<p><em>Note: The getters and setters of virtual functions must by synchronous non-generator functions.</em></p>\n<p>When using the above setter keep in mind that we need to explicitly <code>save()</code> the document in order for the <code>dob</code> field changes to take effect:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> oldDob = user.dob;\n\n<span class="hljs-built_in">console</span>.log( user.age );\n<span class="hljs-comment">/* 34 */</span>\n\nuser.age = <span class="hljs-number">25</span>;\n\n<span class="hljs-keyword">let</span> diff = moment(user.dob).diff(oldDob, <span class="hljs-string">\'years\'</span>);\n\n<span class="hljs-built_in">console</span>.log( diff );\n<span class="hljs-comment">/* 9 */</span>\n\n<span class="hljs-comment">// save it!</span>\n<span class="hljs-keyword">yield</span> user.save();\n</code></pre>\n'
}},function(e,t){e.exports={title:"Database and Models",body:'<h1>Database and Models</h1>\n<p>By default, Waigo works with <a href="http://www.rethinkdb.org">RethinkDB</a> and uses the <a href="https://github.com/hiddentao/thinodium">Thinodium</a> ODM as the basis for its data Model layer.</p>\n<ul>\n<li><a href="databaseconnections/">Database connections</a></li>\n<li><a href="overviewofmodels/">Overview of models</a></li>\n<li><a href="definingandusingmodels/">Defining and using models</a></li>\n<li><a href="builtinmodels/">Built-in models</a></li>\n<li><a href="reactiveupdates/">Reactive updates</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"How models work",body:'<h1>How models work</h1>\n<p>Models are the <code>M</code> in the <code>MVC (Model-View-Controller)</code> paradigm. They are the interface between the database layer and the rest of your application. Instead of reading and writing raw data from/to the database from the various parts of your application, it makes sense to hide the raw data within model objects, for the following benefits:</p>\n<ul>\n<li><em>Controlled access</em> - you can control how data gets updated in your database by ensuring that creative and destructive operations are only executed from within the model.</li>\n<li><em>Encapsulation and reduced coupling</em> - you can hide the raw underlying data structure and provide convenient accessor methods for use by other parts of your application. You could even change the underlying database in future without the reset of your app code being affected.</li>\n</ul>\n<h2>Loading models</h2>\n<p>In Waigo all defined models are loaded by the <code>models</code> startup step and made accessible via <code>App.models</code>. This step scans the <code>src/models</code> path (in your application, the Waigo framework and any plugins) and loads all the files within, assuming each one represents a different model.</p>\n<p>The startup step takes each models definition and constructs a <code>Thinodium.Model</code> (see <a href="Thinodium">https://github.com/hiddentao/thinodium</a>) to represent it. The final object is accessible at <code>App.models.ModelName</code>, where <code>ModelName</code> is the capitalized version of the models file name. Thus, if your model is defined in <code>src/models/user.js</code> then it will accessible at <code>App.models.User</code>.</p>\n<p>This startup step assumes that the <code>database</code> startup step has already run and setup the default database connection (<code>App.db</code>).</p>\n<h2>Data encapsulation</h2>\n<p>Lets say we have a database table/collection called <code>Users</code> and we have a <code>User</code> model which represents this table within our application. This is how we might add a new user:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/user.js</span>\n\nexports.add = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.App.models.User.add(<span class="hljs-string">\'username@test.com\'</span>, <span class="hljs-string">\'password\'</span>);\n};\n</code></pre>\n<p>Internally, the model may actually write JSON data to the database, or make a HTTP call to a remote datasource. It doesnt matter since the <code>add()</code> method that it exposes is all the rest of the application needs to know about and use.</p>\n<h2>Rendering for views</h2>\n<p>Another benefit of using Model objects is that they can also control how the underlying data is rendered into views. The <a href="../viewobjects/">view objects</a> chapter has more information on this.</p>\n'}},function(e,t){e.exports={title:"Reactive updates",body:"<h1>Reactive updates</h1>\n<p>One of the main reasons for choosing RethinkDB as the default database for Waigo is that it supports <em>reactive</em> updates. It is possible to run a query and then subscribe to the database to be notified whenever the result data for that query changes.</p>\n<p>Thus it is possible for one instance of your application to create or an update entry within your database, causing another instance of your application to immediately be notified of this and thus able to take appropriate action.</p>\n<p>Combined with a reactive front-end UI you can build a fully end-to-end (i.e. between two clients) reactive application with ease.</p>\n<p>Lets consider a simple chat application. When one user enters a message we want to enter it into the database and instantly notify any other users who are in the chatroom so that they too see it.</p>\n"}},function(e,t){e.exports={title:"Built-in Error classes",body:'<h1>Built-in Error classes</h1>\n<p>Waigo provides you with built-in <code>Error</code> subclasses for raising exceptions with.\nThese classes provide a few conveniences beyond the base <code>Error</code> class and are\nworth using within your own back-end code. They can are defined within the\n<code>support/errors</code> file:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> errors = waigo.load(<span class="hljs-string">\'support/errors\'</span>);\n</code></pre>\n<h2>RuntimeError</h2>\n<p>The <code>RuntimeError</code> class is the base class for all other errors in Waigo.\nIt allows you to set a HTTP status code and an additional <code>details</code> object along\nwith the error message. This status code is used by the\n<a href="errormiddleware/">error middleware</a> when generating the finalHTTP response:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/controllers/index.js</span>\n<span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-keyword">const</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>),\n  RuntimeError = waigo.load(<span class="hljs-string">\'support/errors\'</span>).RuntimeError;\n\nexports.index = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeError(<span class="hljs-string">\'oh dear!\'</span>, <span class="hljs-number">400</span>, {\n    <span class="hljs-attr">some</span>: <span class="hljs-string">\'data\'</span>,\n  }); <span class="hljs-comment">// 400 = bad request</span>\n}\n</code></pre>\n<p>For the above code the browser will receive a response with HTTP status code 400\nand, if using the JSON format, will display:</p>\n<pre><code class="language-javascript">{\n    <span class="hljs-attr">type</span>: <span class="hljs-string">"RuntimeError"</span>,\n    <span class="hljs-attr">msg</span>: <span class="hljs-string">"oh dear!"</span>,\n    <span class="hljs-attr">details</span>: {\n        <span class="hljs-attr">some</span>: <span class="hljs-string">"data"</span>\n    },\n    <span class="hljs-attr">stack</span>: [...]\n    status: <span class="hljs-number">400</span>,\n    <span class="hljs-attr">request</span>: {\n        <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>,\n        <span class="hljs-attr">url</span>: <span class="hljs-string">"/?format=json"</span>\n    }\n}\n</code></pre>\n<p><em>Note: Stack traces only get sent to the client if the <code>app.config.errorHandler.showStack</code> flag is <code>true</code>.</em></p>\n<h2>MultipleError</h2>\n<p>The <code>MultipleError</code> class is derived from <code>RuntimeError</code> and represents a\ngroup of relatederrors. The 3rd <code>details</code> parameter is assumed to represent a\ncollection of <code>Error</code> objects.</p>\n<pre><code class="language-javascript">\n\n<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MultipleError(<span class="hljs-string">\'oh dear!\'</span>, <span class="hljs-number">403</span>, {\n  <span class="hljs-attr">firstError</span>: <span class="hljs-keyword">new</span> RuntimeError(<span class="hljs-string">\'fail1\'</span>),\n  <span class="hljs-attr">secondError</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">\'test\'</span>)\n});\n</code></pre>\n<p>The JSON response to the client would have a HTTP status code of 403 and look like:</p>\n<pre><code class="language-javascript">{\n    <span class="hljs-attr">type</span>: <span class="hljs-string">"MultipleError"</span>,\n    <span class="hljs-attr">msg</span>: <span class="hljs-string">"oh dear!"</span>,\n    <span class="hljs-attr">details</span>: {\n        <span class="hljs-attr">firstError</span>: {\n            <span class="hljs-attr">type</span>: <span class="hljs-string">"RuntimeError"</span>,\n            <span class="hljs-attr">msg</span>: <span class="hljs-string">"fail1"</span>,\n            <span class="hljs-attr">stack</span>: <span class="hljs-string">"..."</span>\n        },\n        <span class="hljs-attr">secondError</span>: {\n            <span class="hljs-attr">type</span>: <span class="hljs-string">"Error"</span>,\n            <span class="hljs-attr">msg</span>: <span class="hljs-string">"test"</span>,\n            <span class="hljs-attr">stack</span>: <span class="hljs-string">"..."</span>\n        }\n    },\n    <span class="hljs-attr">stack</span>: [...],\n    <span class="hljs-attr">status</span>: <span class="hljs-number">403</span>,\n    <span class="hljs-attr">request</span>: {\n        <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>,\n        <span class="hljs-attr">url</span>: <span class="hljs-string">"/?format=json"</span>\n    }\n}\n</code></pre>\n'}},function(e,t){e.exports={title:"Creating your own",body:'<h1>Creating your own</h1>\n<p>Defining and using your own error classes will allow you to better pinpoint the\nlocation and causes of thrown errors when debugging error output. Better yet,\nextend Waigos built-in error classes and your custom errors will obtain all\nof their benefits.</p>\n<p>You can define a custom error using the <code>define()</code> method:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> errors = waigo.load(<span class="hljs-string">\'support/errors\'</span>);\n\n<span class="hljs-keyword">const</span> UserNotFoundError = errors.define(<span class="hljs-string">\'UserNotFoundError\'</span>);\n<span class="hljs-comment">// UserNotFoundError extends RuntimeError</span>\n\n...\n\nthrow UserNotFoundError(<span class="hljs-string">\'...\'</span>);\n</code></pre>\n<p>The <code>define()</code> call takes a second parameter indicating the parent class to inherit\nfrom (default is <code>RuntimeError</code>). Thus you can define a custom error class which\nacts as parent class to other custom errors:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> ProcessingErrors = errors.define(<span class="hljs-string">\'ProcessingErrors\'</span>, errors.MultipleError);\n<span class="hljs-keyword">const</span> ValidationErrors = errors.define(<span class="hljs-string">\'ValidationErrors\'</span>, ProcessingErrors);\n</code></pre>\n'}},function(e,t){e.exports={title:"Error middleware",body:'<h1>Error middleware</h1>\n<p>The <a href="https://github.com/waigo/waigo/blob/master/src/support/middleware/errorHandler.js">error handling middleware</a> is responsible for catching and dealing with any errors thrown during the servicing of an incoming\nrequest.</p>\n<p>Errors get logged through the default App logger as well as getting sent back\nto the client which made the original request. The HTTP response status code\nwill be set to the status code set within the thrown error (or 500 if not\nset). The error <a href="https://github.com/waigo/waigo/blob/master/src/views/error.pug">view template</a> is used to render the error for\nthe user if the client requested a HTML response. If the requested a JSON\nresponse then the raw JSON of the error will be returned.</p>\n<p>The error middleware also adds a convenience method - <code>throw()</code> to the current\nKoa request context, allowing you to more easily throw an instance of the\ndefined error classes:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/index.js</span>\n<span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-keyword">const</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>),\n  MultipleError = waigo.load(<span class="hljs-string">\'support/errors\'</span>).MultipleError;\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">this</span>.throw(<span class="hljs-string">\'this will be a RuntimeError instance\'</span>);\n  <span class="hljs-keyword">this</span>.throw(MultipleError, <span class="hljs-string">\'this will be a RuntimeError instance\'</span>);\n};\n</code></pre>\n'}},function(e,t){e.exports={title:"Error handling",body:'<h1>Error handling</h1>\n<ul>\n<li><a href="builtinerrorclasses/">Built-in Error classes</a></li>\n<li><a href="creatingyourown/">Creating your own</a></li>\n<li><a href="errormiddleware/">Error middleware</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Events",body:'<h1>Events</h1>\n<p>Different parts of your app back-end need to communicate with each other at\ntimes. Specifically, you may need to implement a publish-subscribe model whereby\ncertain parts of your app are triggered by other parts. The <a href="../appconfiguration/appobject/"><code>App</code> object</a> is an <a href="https://nodejs.org/dist/latest-v4.x/docs/api/events.html#events_class_eventemitter">EventEmitter</a>\ninstance, and can be used to facilitate the sort of message passing we require.</p>\n<p>For instance, lets say we have a notification system whereby we can notify\nsite admins with a message. We want to be able to trigger a notification from\nany other part of our app at any time.</p>\n<p>Lets use the events system to first setup the internal notification endpoint:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/support/startup/notification.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">App</span>) </span>{\n  App.on(<span class="hljs-string">\'notify\'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg</span>) </span>{\n    App.logger.info(<span class="hljs-string">`Notify admins: <span class="hljs-subst">${msg}</span>`</span>);\n    <span class="hljs-comment">// Do notification here...</span>\n  });\n};\n</code></pre>\n<p>In any of our controllers, forms or other back-end code we would now be able to\nsend a notification quite simply:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/someController.js</span>\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">this</span>.App.emit(<span class="hljs-string">\'notify\'</span>, <span class="hljs-string">\'this is a message\'</span>);  \n};\n</code></pre>\n<p>The benefit of such an approch over calling a notifications API directly is that\nwe have de-coupled the notification code from the other parts of the app, meaning\nits easier for us to change the notifications implementation without it\naffecting the code which actually triggers notifications.</p>\n<p>An additional benefit is that automated testing is easier. If we wish to test\nthat a notifiation is being triggered we can simply <em>listen</em> to the <code>notify</code> event\nin our test code and verify that it gets called with the right parameters.</p>\n'}},function(e,t){e.exports={title:"Creating plugins",body:'<h1>Creating plugins</h1>\n<p>Creating and publishing a plugin is as simple as creating and publishing an\nNPM module.</p>\n<p>Please follow these general guidelines:</p>\n<ol>\n<li>Check to see if what youve made is worth putting into a plugin. For instance\nits very easy to re-use existing <a href="http://koajs.com">koa</a> middleware in Waigo without\nneeding to create plugins.</li>\n<li>Add automated unit tests for your plugin. Look at existing plugins to learn\nbest practices.</li>\n<li>Ensure your plugin name is prefixed with <code>waigo-plugin-</code> so that other users\nof Waigo can easily find it and use it. This is also the default convention used\nby Waigos module loader to scan for available plugins.</li>\n<li>In your plugins <code>package.json</code>:</li>\n</ol>\n<ul>\n<li>Ensure the <code>main</code> key is set to <code>index.js</code>. Create a dummy <code>index.js</code> in your\nplugins project folder.</li>\n<li>Add <code>waigoplugin</code> to the <code>keywords</code> list to help with discoverability.</li>\n</ul>\n<ol start="5">\n<li>Write a good <code>README.md</code> for your plugin explaining what its for and how to use it.</li>\n</ol>\n<p>To see a list of all available plugins visit\n<a href="https://www.npmjs.org/browse/keyword/waigoplugin">https://www.npmjs.org/browse/keyword/waigoplugin</a>.</p>\n'}},function(e,t){e.exports={title:"Extend and Override",body:'<h1>Extend and Override</h1>\n<ul>\n<li><a href="moduleloader/">Module Loader</a></li>\n<li><a href="usingplugins/">Using Plugins</a></li>\n<li><a href="creatingplugins/">Creating Plugins</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Module loader",body:'<h1>Module loader</h1>\n<p>Waigos most powerful feature is its module loading architecture. Before we explain exactly what it is and how it works lets see it in action!</p>\n<p>Continuing on from our Hello World! example, go into your project folder and\ncreate <code>src/controllers/index.js</code>:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: controllers/index.js</span>\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">this</span>.body = <span class="hljs-string">\'Hello world!\'</span>;\n};\n</code></pre>\n<p>Now restart the app (<code>./start-app.js</code> or it will be automatic if youre using\n<code>gulp dev</code>) and refresh the page in the browser. You should see <em>Hello world!</em> printed on screen.</p>\n<p>What you just did was override the default <code>index</code> controller built into Waigo\nwith your own.</p>\n<h2>waigo.load()</h2>\n<p>Waigo has its own module loader, which is used instead of <code>require()</code> when\nit wishes to load a CommonJS module file from within its <code>src</code> folder.</p>\n<p>Taking the simple example above, when Waigo wishes to find the controller to\nhandle the route it calls <code>waigo.load(&quot;controllers/index&quot;)</code> rather than using\n<code>require()</code>. At this point the actual controller code which gets loaded and\nreturned will depend on the first available one in the given locations:</p>\n<ol>\n<li><code>&lt;project folder&gt;/src/controllers/index.js</code></li>\n<li><code>&lt;waigo npm module&gt;/src/controllers/index.js</code></li>\n</ol>\n<p>Thus, if <code>src/controllers/index.js</code> isnt present within your project folder then\nWaigo will load and return the one proided by the Waigo framework itself. If\neven the framework has no file matching the path then an error is thrown.</p>\n<p>If you look inside Waigos source code you will notice that this module loading\nconvention - <code>waigo.load()</code> - is used everywhere. This is what enables you to\ncleanly and selectively override core framework code with your own custom\nversion which sits inside your apps project folder.</p>\n<p><em>Note: Normal NPM modules - e.g. <code>lodash</code> - are still loaded using <code>require()</code>.\n<code>waigo.load()</code> is only applicable to files within the <code>src</code> folder.</em></p>\n<h3>Extend vs. Override</h3>\n<p>You can also extend a file from Waigo without totally overriding it:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: controllers/index.js</span>\n<span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-keyword">const</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>);\n\n<span class="hljs-comment">// load the waigo version </span>\n<span class="hljs-keyword">const</span> waigoIndexController = waigo.load(<span class="hljs-string">\'waigo:controllers/index\'</span>);\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">\'delegating to core\'</span>);\n\n  <span class="hljs-keyword">yield</span> waigoIndexController.main.call(<span class="hljs-keyword">this</span>);\n}\n</code></pre>\n<p>In this example, although weve overridden the <code>index</code> controller within the app,\ninternally it just calls the same-named method provided by Waigos index controller.</p>\n<p>By simply prefixing the module path with <code>waigo:</code> the module loader will load the version\nof the file provided by Waigo, ignoring any provided by your app.</p>\n<h3>Ommitted files</h3>\n<p>Waigos module loader does not index every single file within <code>src/</code>, just the ones\nwhere it makes sense to allow for overriding.</p>\n<p>Files under the <code>cli/data</code> and <code>frontend</code> do not get indexed by Waigos\nmodule loader.</p>\n<p>Template files (e.g. <code>.pug</code>) contained within the <code>view</code> and <code>emails</code> folders do get indexed, except where the filenames are prefixed with an underscore (<code>_</code>), as\nthese are considered to be <em>include</em> files.</p>\n<p></p>\n<p>Overall, the loader mechanism allows you to:</p>\n<ol>\n<li>Only load the parts of the framework you will actually use <em>(good for\nperformance)</em>.</li>\n<li>Override any framework module file with your own version <em>(extendability\nand customisation)</em>.</li>\n</ol>\n<p>In the next section you will learn how this module loading architecture enables you\nto easily bundle up your customizations for re-use as plugins.</p>\n'}},function(e,t){e.exports={title:"Using plugins",body:'<h1>Using plugins</h1>\n<p>In the previous section you learned how Waigos module loader works and how it\nenables you to selectively override and extend core Waigo functionality\nwithin your app. You also saw how Waigo attempts to load a requested file, by\nchecking for existence in the following order:</p>\n<ol>\n<li><code>&lt;project folder&gt;/src/&lt;requested path&gt;</code></li>\n<li><code>&lt;waigo npm module&gt;/src/&lt;requested path&gt;</code></li>\n</ol>\n<p>In actual fact the loader also checks <em>plugins</em> for the requested path:</p>\n<ol>\n<li><code>&lt;project folder&gt;/src/&lt;requested path&gt;</code></li>\n<li><code>&lt;waigo plugin1 folder&gt;/src/&lt;requested path&gt;</code></li>\n<li><code>&lt;waigo plugin2 folder&gt;/src/&lt;requested path&gt;</code></li>\n<li></li>\n<li><code>&lt;waigo npm module&gt;/src/&lt;requested path&gt;</code></li>\n</ol>\n<p>But what is a plugin?</p>\n<p>Waigo plugins are re-usable pieces of code which enhance your Waigo app with\nspecific functionality. Plugins may selectively extend and override parts\nof the core Waigo framework - hence why the module loader scans plugin paths too,\nas shown above.</p>\n<p>By separating non-core re-usable functionality into plugins - which can themselves be thoroughly documented and tested - you will encourage code re-use across projects.</p>\n<p>Plugins help to keep the core Waigo framework more lean and focussed and increase the overall quality of code in the Waigo ecosystem.</p>\n<h3>Loading plugins</h3>\n<p>Waigo automatically tries to work out what plugins are\navailable by loading in your apps <code>package.json</code> file. By default it searches the\n<code>dependencies</code>, <code>devDependencies</code> and <code>peerDependencies</code> lists for any NPM modules\nwhich are prefixed with <code>waigo-plugin-</code> and assumes that these are Waigo plugins which\nshould be loaded.</p>\n<p>(Yes, plugins can be packaged and distributed as NPM modules!)</p>\n<p>However you can override every aspect of how Waigo determines what plugins get loaded. The <a href="https://github.com/waigo/waigo/blob/master/src/loader.js">waigo.init()</a> method gives you the available options:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">/**\n * ...\n * @param {Object} [options.plugins] Plugin loading configuration.\n * @param {Array} [options.plugins.names] Names of plugins to load. If omitted then other options are used to load plugins.\n * @param {Array} [options.plugins.glob] Regexes specifying plugin naming conventions. Default is `waigo-plugin-*`.\n * @param {String|Object} [options.plugins.config] JSON config containing names of plugins to load. If a string is given then it assumed to be the path of a script which exports the configuration. Default is to load `package.json`.\n * @param {Array} [options.plugins.configKey] Names of keys in JSON config whose child keys contain names of plugins. Default is `[dependencies, devDependencies, peerDependencies]`.\n * ...\n*/</span>\n</code></pre>\n<p>Thus, you can list the desired plugins in a config file of your\nchoosing and then supply the path to this file. Or you can directly supply a\nconfig <code>Object</code> itself. Or you can just override the plugin naming conventions.</p>\n<h3>Example</h3>\n<p>The <a href="https://www.npmjs.org/package/waigo-plugin-sitemap">waigo-plugin-sitemap</a> plugin adds a cron job which submits a sitemap for your site to Google and Bing once a day. It provides the following file:</p>\n<ul>\n<li><code>src/support/cronTasks/submitSitemap.js</code></li>\n</ul>\n<p>Lets add it to our Hello World! example app and record it in <code>package.json</code> so\nthat the Waigo loader will pick it up:</p>\n<pre><code class="language-bash">npm install --save waigo-plugin-sitemap \n</code></pre>\n<p>Now restart your app. In the browser you wont see any difference since this plugin\nworks in the background and only once a day. But in the console logs you should\nsee the Cron task being setup:</p>\n<pre><code>(<span class="hljs-name">RamMacbookPro.local-25179</span>) [<span class="hljs-name">2016-07-25</span> <span class="hljs-number">16</span>:07:29.640] [<span class="hljs-name">DEBUG</span>] [<span class="hljs-name">Cron</span>] - Adding cron task: submitSitemap\n(<span class="hljs-name">RamMacbookPro.local-25181</span>) [<span class="hljs-name">2016-07-25</span> <span class="hljs-number">16</span>:07:29.645] [<span class="hljs-name">INFO</span>] [<span class="hljs-name">Cron:</span> submitSitemap: <span class="hljs-number">25181</span>] - Setting up cron schedule <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> * * *\n</code></pre>\n<p>Now lets override the Cron schedule and have it run every hour. Override the\nplugins single file within your app:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/support/cronTasks/submitSitemap.js</span>\n<span class="hljs-meta">"use strict"</span>\n\n<span class="hljs-keyword">const</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>);\n\n<span class="hljs-keyword">const</span> baseCronJob = waigo.load(<span class="hljs-string">\'waigo-plugin-sitemap:support/cronTasks/submitSitemap\'</span>);\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-attr">schedule</span>: <span class="hljs-string">\'0 0 * * * *\'</span>, <span class="hljs-comment">// every hour</span>\n  handler: baseCronJob.handler,\n};\n</code></pre>\n<p><em>Notice how we use the <code>waigo-plugin-sitemap:</code> prefix when calling <code>waigo.load()</code>\nto ensure that we get the version of the file provided by the plugin.</em></p>\n<p>Restart the app and your console output should now look different:</p>\n<pre><code>(<span class="hljs-name">RamMacbookPro.local-25179</span>) [<span class="hljs-name">2016-07-25</span> <span class="hljs-number">16</span>:10:29.640] [<span class="hljs-name">DEBUG</span>] [<span class="hljs-name">Cron</span>] - Adding cron task: submitSitemap\n(<span class="hljs-name">RamMacbookPro.local-25181</span>) [<span class="hljs-name">2016-07-25</span> <span class="hljs-number">16</span>:10:29.645] [<span class="hljs-name">INFO</span>] [<span class="hljs-name">Cron:</span> submitSitemap: <span class="hljs-number">25181</span>] - Setting up cron schedule <span class="hljs-number">0</span> <span class="hljs-number">0</span> * * * *\n</code></pre>\n<h3>Plugin conflicts</h3>\n<p>What would happen if you had two plugins which both provided the same\nsource file? in this case the call to <code>waigo.init()</code> would fail with an error:</p>\n<pre><code class="language-bash">Error: Path <span class="hljs-string">"path/to/file"</span> has more than one plugin implementation to choose from: waigo-plugin-name1, waigo-plugin-name2, ...\n</code></pre>\n<p>If you need to use both plugins (maybe because they provide other useful\nfunctionality) then pick which plugins implementation of that file you\nwant to use byproviding a version of the file within your app folder. For\nexample, if you wanted Waigo to use the implementation provided by <code>waigo- plugin-name1</code> then create:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/path/to/file</span>\n<span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-keyword">const</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>);\n\n<span class="hljs-comment">// use the implementation from waigo-plugin-name1</span>\n<span class="hljs-built_in">module</span>.exports = waigo.load(<span class="hljs-string">\'waigo-plugin-name1:path/to/file\'</span>);    \n</code></pre>\n'}},function(e,t){e.exports={title:"Built-in field types",body:'<h1>Built-in field types</h1>\n<p>Waigo offers a number of built-in field types to get you started when building forms:</p>\n<ul>\n<li><a href="https://github.com/waigo/waigo/blob/master/src/support/forms/fields/checkbox.js">checkbox</a> - represents a checkbox. This has a default sanitiser which auto-converts the input to a boolean.</li>\n<li><a href="https://github.com/waigo/waigo/blob/master/src/support/forms/fields/csrf.js">csrf</a> - represents a CSRF-prevention field. It has a default validator which validates the submitted value. Waigo automatically adds a CSRF-prevention field to your forms, but you can use this field type directly too if you so wish.</li>\n<li><a href="https://github.com/waigo/waigo/blob/master/src/support/forms/fields/email.js">email</a> - represents an email field. All inputs are validated as email addresses.</li>\n<li><a href="https://github.com/waigo/waigo/blob/master/src/support/forms/fields/hidden.js">hidden</a> - represents a hidden field. No special processing is performed on the input.</li>\n<li><a href="https://github.com/waigo/waigo/blob/master/src/support/forms/fields/number.js">number</a> - represents a number field. It has a default sanitiser which auto-converts the input to a number.</li>\n<li><a href="https://github.com/waigo/waigo/blob/master/src/support/forms/fields/password.js">password</a> - represents a password field. No special processing is performed on the input.</li>\n<li><a href="https://github.com/waigo/waigo/blob/master/src/support/forms/fields/select.js">select</a> - represents a dropdown selector with optional multi-option selection enabled. The input is validated to ensure that all the selected options match whats available in the predefined options list.</li>\n<li><a href="https://github.com/waigo/waigo/blob/master/src/support/forms/fields/text.js">text</a> - represents a text input field. No special processing is performed on the input.</li>\n</ul>\n'
}},function(e,t){e.exports={title:"Custom field types",body:'<h1>Custom field types</h1>\n<p>Sometimes the built-in field types are not enough for your needs. If you find yourself applying lots of sanitizers and validators in the same pattern repeatedly then it might be worth creating a custom field type instead.</p>\n<p>For example, lets say you have a form which takes as input two dates forming a date range:</p>\n<pre><code class="language-js"><span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-attr">fields</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'startDate\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'text\'</span>,\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">sanitizers</span>: [<span class="hljs-string">\'trim\'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">\'lib\'</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">\'toDate\'</span> }],\n      <span class="hljs-attr">validators</span>: [<span class="hljs-string">\'notEmpty\'</span>],\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'endDate\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'password\'</span>,\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">sanitizers</span>: [<span class="hljs-string">\'trim\'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">\'lib\'</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">\'toDate\'</span> }],\n      <span class="hljs-attr">validators</span>: [<span class="hljs-string">\'notEmpty\'</span>, {<span class="hljs-attr">id</span>: <span class="hljs-string">\'compareToField\'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">\'startDate\'</span>, <span class="hljs-attr">comparison</span>: <span class="hljs-string">\'gt\'</span>}],\n    },\n  ],\n};\n</code></pre>\n<p>The above field specifications will work well enough that once the form submission has been processed, both <code>startDate</code> and <code>endDate</code> will be <code>Date</code> instances. But its tedious to have to remember to apply the correct list of sanitizers to every text field that actually represents a date.</p>\n<p>We could instead create a <code>date</code> field type which internally does the right thing.</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/support/forms/fields/date.js</span>\n<span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-keyword">const</span> validator = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'validator\'</span>);\n\n<span class="hljs-keyword">const</span> waigo = global.waigo,\n  _ = waigo._,\n  TextField = waigo.load(<span class="hljs-string">\'support/forms/fields/text\'</span>);\n\n<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DateField</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">TextField</span> </span>{\n  <span class="hljs-keyword">constructor</span>(form, config) {\n    <span class="hljs-keyword">super</span>(form, config);\n\n    <span class="hljs-keyword">this</span>._addSanitizer(<span class="hljs-string">\'trim\'</span>);\n    <span class="hljs-keyword">this</span>._addSanitizer({ \n      <span class="hljs-attr">id</span>: <span class="hljs-string">\'lib\'</span>,\n      <span class="hljs-attr">method</span>: <span class="hljs-string">\'toDate\'</span>\n    });\n  }\n}\n\n<span class="hljs-built_in">module</span>.exports = DateField;\n</code></pre>\n<p><em>Note: All custom field types should be placed in the <code>support/forms/fields</code> loader path.</em></p>\n<p>Now we can use this new type in the form specification:</p>\n<pre><code class="language-js"><span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-attr">fields</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'startDate\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'date\'</span>,\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">validators</span>: [<span class="hljs-string">\'notEmpty\'</span>],\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'date\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'password\'</span>,\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">validators</span>: [<span class="hljs-string">\'notEmpty\'</span>, {<span class="hljs-attr">id</span>: <span class="hljs-string">\'compareToField\'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">\'startDate\'</span>, <span class="hljs-attr">comparison</span>: <span class="hljs-string">\'gt\'</span>}],\n    },\n  ],\n};\n</code></pre>\n<p>This has not only simply followed the form specification, it has made the field description more semantically meaningful. For instance, our front-end client code can now choose to display a date picker UI just by seeing that the field type is <code>date</code>. Previously it would have had to infer the type of UI to display based on the fields sanitizer lists or some other information we provided.</p>\n<p>Furthermore, we can now add additional sanitizers and validators and other logic within our new <code>DateField</code> class, and make the <code>date</code> field type as powerful as we want.</p>\n'}},function(e,t){e.exports={title:"Defining and using forms",body:'<h1>Defining and using forms</h1>\n<p>Forms are defined in the <code>&lt;project folder&gt;/src/forms</code> path. For example, in the Waigo framework code you will see the following forms:</p>\n<pre><code class="language-shell">&lt;waigo framework&gt;/src/forms\n\tlogin<span class="hljs-selector-class">.js</span>\n\tregister<span class="hljs-selector-class">.js</span>\n\tforgotPassword<span class="hljs-selector-class">.js</span>\n\tresetPassword<span class="hljs-selector-class">.js</span>\n</code></pre>\n<p>The filename for a form is its unique id; The file contents specify the forms input fields and post-validation hooks. Lets take a look at a simplified version of the <a href="https://github.com/waigo/waigo/blob/master/src/forms/login.js">default login form</a>:</p>\n<pre><code class="language-js"><span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-attr">fields</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'email\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'text\'</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Email address / Username\'</span>,\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'password\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'password\'</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Password\'</span>,\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n    },\n    {\n      <span class="hljs-comment">// where to take take user once logged-in</span>\n      name: <span class="hljs-string">\'postLoginUrl\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'hidden\'</span>,\n    },\n  ],\n  <span class="hljs-attr">method</span>: <span class="hljs-string">\'POST\'</span>,\n};\n</code></pre>\n<p>The above form has three fields named <code>email</code>, <code>password</code> and <code>postLoginUrl</code>. Three field types - <code>text</code>, <code>password</code>, <code>hidden</code> - are used. The <code>email</code> and <code>password</code> fields are mandatory.</p>\n<p>The <code>method</code> key specifies the HTTP method used for submitting form. Technically speaking, when processing a form Waigo does not actually check to see if the incoming HTTP method matches this, so this key is really  only necessary if you intend to use it in your app.</p>\n<p>Actually Waigo lets you add any keys you want to the form configuration object, thus allowing you to store arbitrary configuration data within your form specification.</p>\n<h2>Initialising and rendering</h2>\n<p>Here is how you would render the above form:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file &lt;project folder&gt;/src/controllers/index.js</span>\n\nexports.getLoginForm = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-comment">// create an instance of the form</span>\n  <span class="hljs-keyword">let</span> form = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.form.create(<span class="hljs-string">\'login\'</span>, {\n    <span class="hljs-attr">context</span>: <span class="hljs-keyword">this</span>\n  });\n  \n  form.fields.postLoginUrl.value = <span class="hljs-keyword">this</span>.request.query.page || <span class="hljs-string">\'/\'</span>;\n\n  \n  <span class="hljs-comment">// render form to output</span>\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'index\'</span>, {\n    <span class="hljs-attr">form</span>: form\n  });\n};\n</code></pre>\n<p><em>Note: <code>this.form</code> is a convenient accessor within controller methods. In non-controller code you can access the form interface using <code>App.form</code>.</em></p>\n<p>The above controller method will first attempt to load a form definition under the <code>login</code> name - internally this calls <code>waigo.load(\'forms/login\')</code> - and create an instance of it.</p>\n<p>In our user login flow, we want to redirect the user to the login page from any other page, but then want them to return to that page once login is successful - hence why we set <code>postLoginUrl</code> based on a query parameter.</p>\n<p>Finally the method will render the form to output. If were using the <a href="../renderingoutput/jsonoutput/">JSON output format</a> then it will look something like this:</p>\n<pre><code class="language-js">{\n    <span class="hljs-string">"form"</span>: {\n        <span class="hljs-string">"method"</span>: <span class="hljs-string">"POST"</span>,\n        <span class="hljs-string">"id"</span>: <span class="hljs-string">"login"</span>,\n        <span class="hljs-string">"fields"</span>: {\n            <span class="hljs-string">"email"</span>: {\n                <span class="hljs-string">"name"</span>: <span class="hljs-string">"email"</span>,\n                <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,\n                <span class="hljs-string">"label"</span>: <span class="hljs-string">"Email address / Username"</span>,\n                <span class="hljs-string">"required"</span>: <span class="hljs-literal">true</span>,\n            },\n            <span class="hljs-string">"password"</span>: {\n                <span class="hljs-string">"name"</span>: <span class="hljs-string">"password"</span>,\n                <span class="hljs-string">"type"</span>: <span class="hljs-string">"password"</span>,\n                <span class="hljs-string">"label"</span>: <span class="hljs-string">"Password"</span>,\n                <span class="hljs-string">"required"</span>: <span class="hljs-literal">true</span>,\n            },\n            <span class="hljs-string">"postLoginUrl"</span>: {\n                <span class="hljs-string">"name"</span>: <span class="hljs-string">"postLoginUrl"</span>,\n                <span class="hljs-string">"type"</span>: <span class="hljs-string">"hidden"</span>,\n                <span class="hljs-string">"value"</span>: <span class="hljs-string">"/"</span>\n            },\n            <span class="hljs-string">"__csrf"</span>: {\n                <span class="hljs-string">"name"</span>: <span class="hljs-string">"__csrf"</span>,\n                <span class="hljs-string">"label"</span>: <span class="hljs-string">"CSRF"</span>,\n                <span class="hljs-string">"type"</span>: <span class="hljs-string">"hidden"</span>,\n                <span class="hljs-string">"required"</span>: <span class="hljs-literal">true</span>,\n                <span class="hljs-string">"value"</span>: <span class="hljs-string">"VyvughpJ-_iBznBk1kxlj4l_TnKqUA8Phg4Y"</span>\n            }\n        },\n        <span class="hljs-string">"order"</span>: [<span class="hljs-string">"email"</span>, <span class="hljs-string">"password"</span>, <span class="hljs-string">"postLoginUrl"</span>, <span class="hljs-string">"__csrf"</span>]\n    }\n}\n</code></pre>\n<p><em>Note: The additional <code>__csrf</code> field shown above is the CSRF-prevention field (see below) and is automatically generated and added to forms when theyre initialised.</em></p>\n<p>The above output specifies the form fields, their types and even the field order (same as is defined in the form configuration shown earlier) as well as the form HTTP method.</p>\n<p>The benefit of outputting the full form specification to the client is that the client could then dynamically construct a form UI to display to the user based on the field types and field order. This is more useful on sites with large numbers of forms which may need to be dynamically configured. If you only have one or two forms with few fields its probably quicker to simply hard-code the client-side interface.</p>\n<h2>Processing submissions</h2>\n<p>Once our form has been submitted the following controller method will process the submission:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/index.js</span>\n...\nexports.submitLoginForm = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">let</span> form = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.form.create(<span class="hljs-string">\'login\'</span>, {\n    <span class="hljs-attr">context</span>: <span class="hljs-keyword">this</span>\n  });\n\n  <span class="hljs-keyword">try</span> {\n    <span class="hljs-comment">// process request body</span>\n    <span class="hljs-keyword">yield</span> form.process();\n    <span class="hljs-comment">// all ok, so let\'s redirect to page</span>\n    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.redirect(form.fields.postLoginUrl.value || <span class="hljs-string">\'/\'</span>);\n  } <span class="hljs-keyword">catch</span> (err) {\n    <span class="hljs-comment">// if not a form validation error then show in logger</span>\n    <span class="hljs-keyword">if</span> (!(err <span class="hljs-keyword">instanceof</span> <span class="hljs-keyword">this</span>.form.FormValidationError)) {\n      <span class="hljs-keyword">this</span>.logger.error(err.stack);\n    }\n    <span class="hljs-comment">// return error to client</span>\n    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'user/login\'</span>, {\n      <span class="hljs-attr">error</span>: err,\n      <span class="hljs-attr">form</span>: form,\n    }, {\n      <span class="hljs-attr">status</span>: <span class="hljs-number">400</span>\n    });\n  };  \n};\n</code></pre>\n<p>The <code>form.process()</code> method will extract the submitted values from <code>this.request.body</code>, run any <a href="sanitizer/">sanitation</a> and <a href="validators/">validation</a> logic and process any <a href="postvalidationhooks/">post-validation hooks</a> configured. If an error gets thrown at any point then it will get caught as shown and handled appropriately.</p>\n<p>In the above method, once processing is complete we redirect the URL to the <code>postLoginUrl</code> if set.</p>\n<h2>Form errors</h2>\n<p>If form submission processing fails then a <code>FormValidationError</code> gets thrown. This error typically contains per-field error messages so that the client UI can show the user exactly which field was erroneous.</p>\n<p>Here is example JSON output of such an error:</p>\n<pre><code class="language-js">{\n  <span class="hljs-string">"error"</span>: {\n    <span class="hljs-string">"type"</span>: <span class="hljs-string">"FormValidationError"</span>,\n    <span class="hljs-string">"msg"</span>: <span class="hljs-string">"Please correct the errors in the form."</span>,\n    <span class="hljs-string">"details"</span>: {\n        <span class="hljs-string">"password"</span>: [<span class="hljs-string">"Must be set"</span>],\n    },\n  }\n}\n</code></pre>\n<p><em>Note: A <code>stack</code> key containing the error stack trace will also get sent to the client if the <code>app.config.errorHandler.showStack</code> flag is <code>true</code>.</em></p>\n<p>In the above error example it seems the <code>password</code> field was not set when the form was submitted.</p>\n<h2>Appendix: Notes on Cross-Site Request Forgery attacks</h2>\n<p>A <a href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)">CSRF (Cross-Site Request Forgery)</a> attack occurs when a form on a website gets submitted from another website different to the forms original. For example, if you have a sign up form on your website at <em><a href="http://a.com">http://a.com</a></em> and I setup a form on <em><a href="http://b.com">http://b.com</a></em> which has its <code>action</code> attribute set to <em><a href="http://a.com">http://a.com</a></em> then any data entered into that form will get sent to <em><a href="http://a.com">http://a.com</a></em>.</p>\n<p>To prevent this a CSRF-prevention value can be calculated when a form is requested from a server. The server sends this value to the client during page load and keeps hold of this value internally. It then expects the value to be submitted alongside the other form fields whenever a submission is made by the client. Thus its impossible for the form to be submitted from another website, since prior to every submission a CSRF value must first be obtained from the server.</p>\n<p>In Waigo CSRF-prevention is automatically added to every form as long as the <a href="https://github.com/waigo/waigo/blob/master/src/support/middleware/csrf.js">csrf middleware</a> is enabled, which it is by default.</p>\n'}},function(e,t){e.exports={title:"Forms",body:'<h1>Forms</h1>\n<p>Forms are treated as first-class citizens in Waigo. Each form is defined in a file and can be loaded, completed and processed programmatically from any part of your app. Waigo lets you design and use your own form input types and add custom sanitation and validation logic to your liking.</p>\n<ul>\n<li><a href="definingandusing/">Defining and using</a></li>\n<li><a href="stateanddirtychecking/">State and dirty-checking</a></li>\n<li><a href="sanitizers/">Sanitizers</a></li>\n<li><a href="validators/">Validators</a></li>\n<li><a href="postvalidationhooks/">Post-validation hooks</a></li>\n<li><a href="builtinfieldtypes/">Built-in field types</a></li>\n<li><a href="customfieldtypes/">Custom field types</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Post-validation hooks",body:'<h1>Post-validation hooks</h1>\n<p>Once a form has finished processing and validation of all fields have succeeded we usually want to use the submitted values in further processing.</p>\n<p>We could perform this further processing within our controller code, but it would be better if we could somehow attach this logic to the form itself and ensure that it is always part of the forms overall processing logic.</p>\n<p>This is where post-validation hooks come in. For example, with our user profile form:</p>\n<pre><code class="language-js"><span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-attr">fields</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'name\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'text\'</span>,\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">sanitizers</span>: [<span class="hljs-string">\'trim\'</span>],\n      <span class="hljs-attr">validators</span>: [<span class="hljs-string">\'notEmpty\'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">\'isLength\'</span>, <span class="hljs-attr">min</span>: <span class="hljs-number">2</span> }]\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'age\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'number\'</span>,\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">sanitizers</span>: [<span class="hljs-string">\'trim\'</span>],\n      <span class="hljs-attr">validators</span>: [{ <span class="hljs-attr">id</span>: <span class="hljs-string">\'numberInRange\'</span>, <span class="hljs-attr">min</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">105</span> }]\n    },\n  ],\n  <span class="hljs-attr">postValidation</span>: [\n    <span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">saveProfile</span>(<span class="hljs-params">next</span>) </span>{\n      <span class="hljs-keyword">let</span> ctx = <span class="hljs-keyword">this</span>.context,\n        App = ctx.App,\n        user = ctx.currentUser;\n      \n      user.name = <span class="hljs-keyword">this</span>.fields.name.value;\n      user.age = <span class="hljs-keyword">this</span>.fields.age.value;\n      \n      <span class="hljs-keyword">yield</span> user.save();\n\n      <span class="hljs-keyword">yield</span> next;\n    },\n    <span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">emailUser</span>(<span class="hljs-params">next</span>) </span>{\n      <span class="hljs-keyword">let</span> ctx = <span class="hljs-keyword">this</span>.context,\n        App = ctx.App,\n        user = ctx.currentUser;\n\n      <span class="hljs-keyword">yield</span> App.mailer.send({\n        <span class="hljs-attr">to</span>: user,\n        <span class="hljs-attr">subject</span>: <span class="hljs-string">\'Your profile has been updated\'</span>,\n        <span class="hljs-attr">bodyTemplate</span>: <span class="hljs-string">\'profileUpdated\'</span>,\n      });\n\n      <span class="hljs-keyword">yield</span> next;\n    }\n  ]\n};\n</code></pre>\n<p>When <code>form.process()</code> gets called Waigo will automatically execute the chain of <code>postValidation</code> hooks  - <code>saveProfile</code> and <code>emailUser</code> - in order, a bit like executing  a chain of middleware.</p>\n<p>In the above case our post-validation processing saves the new profile data to the database and then sends an email out to the user informing them of the update. If any of the post-validation hooks fail then the call to <code>form.process()</code> itself fails.</p>\n<p>Post-validation hooks are implemented as generator methods, as shown above. The <code>this</code> context for the called method is the form itself, meaning that within each method you have full access to all the forms fields and other internal data.</p>\n'}},function(e,t){e.exports={title:"Field sanitizers",body:'<h1>Field sanitizers</h1>\n<p>Waigo allows for form field values to be <em>sanitized</em>. Sanitizing a field may involving trimming it (if its a string), converting it to a primitive different type, etc. In essence its about ensuring the fields value is of the appropriate type before any further processing takes place.</p>\n<p>Taking another look at our example user profile editing form, lets now add sanitizers to the fields:</p>\n<pre><code class="language-js"><span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-attr">fields</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'name\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'text\'</span>,\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">sanitizers</span>: [<span class="hljs-string">\'trim\'</span>]\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'age\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'number\'</span>,\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">sanitizers</span>: [<span class="hljs-string">\'trim\'</span>]\n    },\n  ],\n};\n</code></pre>\n<p>Each sanitizer represents a file under the <code>support/forms/sanitizers</code> path. The <a href="https://github.com/waigo/waigo/blob/master/src/support/forms/sanitizers/trim.js"><code>trim</code> sanitizer</a> trims all incoming string values:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;waigo&gt;/src/support/forms/sanitizers/trim.js</span>\n<span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-keyword">const</span> waigo = global.waigo,\n  _ = waigo._;\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">field, value</span>) </span>{\n    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">\'string\'</span> ? _.trim(value) : value);\n  }\n};\n</code></pre>\n<p><em>Note: Sanitizers are implemented as generator functions, meaning you can do asynchronous processing within them!</em></p>\n<p>Submitted form data usually comes in as strings, which is why this sanitizer makes sense for even the <code>age</code> field.</p>\n<p>Notice that <code>sanitizers</code> is specified as an array. This is because fields can have multiple sanitizers attached to them, each of which gets executed in order. For example, if the sanitizer list is <code>[\'trim\',\'truncate\']</code> then Waigo would first pass the input value to the <code>trim</code> sanitizer, and then the output of that would get passed to the <code>truncate</code> sanitizer and so on. The final post-sanitation value would be saved as the fields value.</p>\n<p>In our form spec above, the <code>age</code> field is a number, meaning we need for its value to be a number rather than a string before we make further use of it. Thankfully we dont need to provide a sanitizer to do this since the <a href="https://github.com/waigo/waigo/blob/master/src/support/forms/fields/number"><code>number</code></a> field type attaches a default sanitizer which does exactly this. :</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;waigo&gt;/src/support/forms/fields/number.js</span>\n<span class="hljs-meta">\n"use strict"</span>;\n\n<span class="hljs-keyword">const</span> waigo = global.waigo,\n  _ = waigo._,\n  TextField = waigo.load(<span class="hljs-string">\'support/forms/fields/text\'</span>);\n\n\n<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NumberField</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">TextField</span> </span>{\n  <span class="hljs-keyword">constructor</span>(form, config) {\n    <span class="hljs-keyword">super</span>(form, config);\n\n    <span class="hljs-keyword">this</span>._addSanitizer(\n      <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">field, value</span>) </span>{\n        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Number</span>(value);\n      }\n    )\n  }\n}\n\n<span class="hljs-built_in">module</span>.exports = NumberField;\n</code></pre>\n<p><em>Note: This internal sanitizer gets executed AFTER the sanitizers specified for the field in the form configuration.</em></p>\n<p>When we call <code>form.process()</code> on a form instance it internally runs each fields submitted value through the corresponding list of sanitizers prior to any further processing. If an error gets thrown from a sanitizer then a <code>FieldSanitizationError</code> gets thrown for that particular field.</p>\n<h2>Built-in sanitizers</h2>\n<p>Here are the <a href="https://github.com/waigo/waigo/blob/master/src/support/forms/sanitizers">built-in sanitizers</a> which come with Waigo:</p>\n<ul>\n<li><code>trim</code> - trim the input string of leading and trailing spaces, as used in the above examples. Users sometimes accidentally add trailing spaces to usernames and passwordswhen typing. This sanitizer helps to deal with such cases.</li>\n<li><code>lib</code> - apply one of the of the sanitizing methods from the <a href="https://github.com/chriso/validator.js">validator NPM module</a>. For example, if you wanted to use the <code>ltrim()</code> method from this library this is how you would declare it in the sanitizer list:\n<ul>\n<li><code>{ id: \'lib\', method: \'ltrim\', args: \'abc\' }</code> - trim all occurrences of <code>a</code>, <code>b</code> or <code>c</code> from the left side of the input string.</li>\n</ul>\n</li>\n</ul>\n'}},function(e,t){e.exports={title:"Form state and dirty-checking",body:'<h1>Form state and dirty-checking</h1>\n<p>Sometimes we may wish to restore a form instance to a previous state, e.g. for serialisation purposes. The form API allows for the <em>internal state</em> of a form to be fetched and set:</p>\n<pre><code class="language-js"><span class="hljs-comment">// save the form state</span>\n<span class="hljs-keyword">let</span> form = App.form.create(<span class="hljs-string">\'login\'</span>);\n<span class="hljs-keyword">yield</span> form.setValues( <span class="hljs-comment">/* new field values */</span> );\n<span class="hljs-keyword">this</span>.session.formState = form.state;\n...\n<span class="hljs-comment">// restore the form (and field values) to previous state</span>\n<span class="hljs-keyword">let</span> form = App.form.create(<span class="hljs-string">\'login\'</span>);\nform.state = <span class="hljs-keyword">this</span>.session.formState;\n</code></pre>\n<p>We can also set the initial internal state during form construction itself:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/index.js</span>\n\nexports.getLoginForm = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">let</span> form = <span class="hljs-keyword">this</span>.form.create(<span class="hljs-string">\'login\'</span>, {\n    <span class="hljs-attr">context</span>: <span class="hljs-keyword">this</span>,\n    <span class="hljs-attr">state</span>: <span class="hljs-keyword">this</span>.session.formState\n  });\n  ...\n};\n</code></pre>\n<h2>Dirty-checking</h2>\n<p>Sometimes you want to pre-populate the fields in a form with values and then quickly determine whether any of the values have changed during submission, i.e. you want to know whether the user made any changes. This is where <em>dirty-checking</em> comes in.</p>\n<p>All Waigo forms allow you store <em>original values</em> for form fields. All submitted data is stored as the <em>current values</em> for fields. If there is any difference between these two sets of values then the form is considered dirty.</p>\n<p>Say we have a form which is used to update a users personal profile. It has two fields - <code>name</code> and <code>age</code> - representing the users name and age respectively. This is how we might render the form to the user:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/index.js</span>\n\nexports.getProfileForm = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">let</span> form = <span class="hljs-keyword">this</span>.form.create(<span class="hljs-string">\'profile\'</span>, {\n    <span class="hljs-attr">context</span>: <span class="hljs-keyword">this</span>\n  });\n  \n  <span class="hljs-keyword">yield</span> form.setOriginalValues({\n    <span class="hljs-attr">name</span>: <span class="hljs-keyword">this</span>.currentUser.name,\n    <span class="hljs-attr">age</span>: <span class="hljs-keyword">this</span>.currentUser.age\n  });\n  \n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'profile\'</span>, {\n    <span class="hljs-attr">form</span>: form\n  });\n}\n</code></pre>\n<p>Assuming were using the JSON output format, this method will render output similar to:</p>\n<pre><code class="language-js">{\n    <span class="hljs-string">"form"</span>: {\n        <span class="hljs-string">"id"</span>: <span class="hljs-string">"profile"</span>,\n        <span class="hljs-string">"fields"</span>: {\n            <span class="hljs-string">"name"</span>: {\n                <span class="hljs-string">"name"</span>: <span class="hljs-string">"name"</span>,\n                <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,\n                <span class="hljs-string">"required"</span>: <span class="hljs-literal">true</span>,\n                <span class="hljs-string">"originalValue"</span>: <span class="hljs-string">"John"</span>\n            },\n            <span class="hljs-string">"age"</span>: {\n                <span class="hljs-string">"name"</span>: <span class="hljs-string">"age"</span>,\n                <span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>,\n                <span class="hljs-string">"required"</span>: <span class="hljs-literal">true</span>,\n                <span class="hljs-string">"originalValue"</span>: <span class="hljs-number">23</span>\n            },\n            <span class="hljs-string">"__csrf"</span>: {\n                <span class="hljs-string">"name"</span>: <span class="hljs-string">"__csrf"</span>,\n                <span class="hljs-string">"label"</span>: <span class="hljs-string">"CSRF"</span>,\n                <span class="hljs-string">"type"</span>: <span class="hljs-string">"hidden"</span>,\n                <span class="hljs-string">"required"</span>: <span class="hljs-literal">true</span>,\n                <span class="hljs-string">"value"</span>: <span class="hljs-string">"VyvughpJ-_iBznBk1kxlj4l_TnKqUA8Phg4Y"</span>\n            }\n        },\n        <span class="hljs-string">"order"</span>: [<span class="hljs-string">"name"</span>, <span class="hljs-string">"age"</span>, <span class="hljs-string">"__csrf"</span>]\n    }\n}\n</code></pre>\n<p>It is up to the client-side UI to use the <code>originalValue</code> data to pre-fill the UI input fields accordingly. Once the form is submitted here is how we would check to see if anything changed from the originals:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/index.js</span>\n...\nexports.submitProfileForm = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">let</span> form = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.form.create(<span class="hljs-string">\'profile\'</span>, {\n    <span class="hljs-attr">context</span>: <span class="hljs-keyword">this</span>\n  });\n\n  <span class="hljs-keyword">yield</span> form.setOriginalValues({\n    <span class="hljs-attr">name</span>: <span class="hljs-keyword">this</span>.currentUser.name,\n    <span class="hljs-attr">age</span>: <span class="hljs-keyword">this</span>.currentUser.age\n  });\n  \n  <span class="hljs-comment">// process request body</span>\n  <span class="hljs-keyword">yield</span> form.process();\n  \n  <span class="hljs-comment">// only do further processing if something changed</span>\n  <span class="hljs-keyword">if</span> (form.isDirty()) {\n    <span class="hljs-comment">// update user data in db</span>\n    <span class="hljs-comment">// ...</span>\n    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'profile_updated\'</span>);\n  } <span class="hljs-keyword">else</span> {\n    <span class="hljs-comment">// nothing changed</span>\n    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'profile_not_updated\'</span>);\n  }\n};\n</code></pre>\n<p>Dirty-checking allows us to be more efficient about back-end updates.</p>\n'
}},function(e,t){e.exports={title:"Field validators",body:'<h1>Field validators</h1>\n<p>Once <a href="sanitizers/">sanitizers</a> have run the next step is field validation. This is where we ensure that submitted field values are within accepted ranges and do all other checks to ensure that the submitted data is actually valid.</p>\n<p>Adding validation to our example user profile form:</p>\n<pre><code class="language-js"><span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-attr">fields</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'name\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'text\'</span>,\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">sanitizers</span>: [<span class="hljs-string">\'trim\'</span>],\n      <span class="hljs-attr">validators</span>: [<span class="hljs-string">\'notEmpty\'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">\'isLength\'</span>, <span class="hljs-attr">min</span>: <span class="hljs-number">2</span> }]\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'age\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'number\'</span>,\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">sanitizers</span>: [<span class="hljs-string">\'trim\'</span>],\n      <span class="hljs-attr">validators</span>: [{ <span class="hljs-attr">id</span>: <span class="hljs-string">\'numberInRange\'</span>, <span class="hljs-attr">min</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">105</span> }]\n    },\n  ],\n};\n</code></pre>\n<p>All validators are loaded from the <code>support/forms/validators</code> path. All the validators used above come with Waigo.</p>\n<ul>\n<li>\n<p>The <code>notEmpty</code> validator checks to ensure the input value isnt <code>null</code>, <code>undefined</code> or an empty string (if its a string).</p>\n</li>\n<li>\n<p>The <code>isLength</code> validator checks to ensure the input string has a length between <code>min</code> and <code>max</code> characters inclusive. We havent supplied <code>max</code> above so that means the string does not have a max length.</p>\n</li>\n<li>\n<p>The <code>numberInRange</code> validator is meant for use with number values and checks that the input number is between <code>min</code> and <code>max</code> inclusive.</p>\n</li>\n</ul>\n<p>In order to pass the <code>min</code> and <code>max</code> parameters the validator had to be specified as an object - this object gets passed as a whole to the validator initializer function:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;waigo&gt;/src/support/fields/validators/isLength.js</span>\n<span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-keyword">const</span> waigo = global.waigo,\n  _ = waigo._,\n  FieldValidationError = waigo.load(<span class="hljs-string">\'support/forms/field\'</span>).FieldValidationError;\n\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{\n  options = _.extend({\n    <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,\n    <span class="hljs-attr">max</span>: <span class="hljs-number">10000000</span>,\n  }, options);\n\n  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">context, field, value</span>) </span>{\n    <span class="hljs-keyword">let</span> len = _.get(value, <span class="hljs-string">\'length\'</span>, <span class="hljs-number">0</span>);\n    <span class="hljs-keyword">let</span> min = options.min;\n    <span class="hljs-keyword">let</span> max = options.max;\n\n    <span class="hljs-keyword">if</span> (min &gt; len || max &lt; len) {\n      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> FieldValidationError(<span class="hljs-string">\'Must be between \'</span> \n        + options.min + <span class="hljs-string">\' and \'</span> \n        + options.max + <span class="hljs-string">\' characters in length\'</span>\n      );\n    }\n  }\n};\n</code></pre>\n<p><em>Note: Validators are implemented as generator methods, meaning they can perform asynchronous actions if needed!</em></p>\n<p>The validator function gets passed a reference to the associated field object as well as the parent form, thus allowing for complex validation logic. For example, the built-in <a href="https://github.com/waigo/waigo/blob/master/src/support/forms/validators/compareToField.js"><code>compareToField</code> validator</a> checks to see if a fields value matches that of another field.</p>\n<h1>Validation errors</h1>\n<p>If validation fails then a <code>FieldValidationError</code> gets thrown by the validator which failed, as shown above. Even if a field fails to validate the remaining fields within a form still get processed (i.e. theyre validators get executed), and overall a <code>FormValidationError</code> gets thrown. This error object internally contains the data from the various <code>FieldValidationError</code> objects which got thrown.</p>\n<p>The resulting <code>FormValidationError</code> error, when rendered to output and sent to the client, looks something like this (assuming JSON output format):</p>\n<pre><code class="language-js">{\n  <span class="hljs-string">"error"</span>: {\n    <span class="hljs-string">"type"</span>: <span class="hljs-string">"FormValidationError"</span>,\n    <span class="hljs-string">"msg"</span>: <span class="hljs-string">"Please correct the errors in the form."</span>,\n    <span class="hljs-string">"details"</span>: {\n        <span class="hljs-string">"name"</span>: [<span class="hljs-string">"Must not be empty"</span>, <span class="hljs-string">"Must be between 1 and 10000000 characters in length"</span>],\n    },\n  }\n}\n</code></pre>\n<p>Waigo lets you customize the error messages returned to the client. For example, lets customize the error message returned by the <code>numberInRange</code> validator associated with the <code>age</code> field above:</p>\n<pre><code class="language-js"><span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-attr">fields</span>: [\n    ...\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'age\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'number\'</span>,\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">sanitizers</span>: [<span class="hljs-string">\'trim\'</span>],\n      <span class="hljs-attr">validators</span>: [{ <span class="hljs-attr">id</span>: <span class="hljs-string">\'numberInRange\'</span>, <span class="hljs-attr">min</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">105</span>, <span class="hljs-attr">msg</span>: <span class="hljs-string">\'Please enter a realistic age!\'</span> }]\n    },\n  ],\n};\n</code></pre>\n<p>This <code>msg</code> would now show up in the validation error output instead of the default message output by the <code>numberInRange</code> validator:</p>\n<pre><code class="language-js">{\n  <span class="hljs-string">"error"</span>: {\n    <span class="hljs-string">"type"</span>: <span class="hljs-string">"FormValidationError"</span>,\n    <span class="hljs-string">"msg"</span>: <span class="hljs-string">"Please correct the errors in the form."</span>,\n    <span class="hljs-string">"details"</span>: {\n        <span class="hljs-string">"age"</span>: [<span class="hljs-string">"Please enter a realistic age!"</span>],\n    },\n  }\n}\n</code></pre>\n<h2>Built-in validators</h2>\n<p>Here are the <a href="https://github.com/waigo/waigo/blob/master/src/support/forms/validators">built-in validators</a> which come with Waigo:</p>\n<ul>\n<li><code>compareToField</code> - compare value of this field with the value of another field. The comparison result must match the expected result.</li>\n<li><code>emailAddressNotInUse</code> - check that value of this field (assumed to be an email address) is not already associated with a user in the database. This validator is used when registering a new user.</li>\n<li><code>isEmailAddress</code> - check that value of this field is a valid email address.</li>\n<li><code>isLength</code> - check that value of this field has a length of between the given <code>min</code> and <code>max</code> number of characters inclusive.</li>\n<li><code>notEmpty</code> - check that value of this field not <code>null</code>, <code>undefined</code> or an empty string.</li>\n<li><code>numberInRage</code> - check that value of this field is a number between the given <code>min</code> and <code>max</code> values inclusive.</li>\n<li><code>lib</code> - apply one of the of the validator methods from the <a href="https://github.com/chriso/validator.js">validator NPM module</a>. For example, if you wanted to use the <code>contains()</code> method from this library this is how you would declare it in the validator list:\n<ul>\n<li><code>{ id: \'lib\', method: \'contains\', args: \'needle\' }</code> - ensure input value contains the <code>needle</code> string.</li>\n</ul>\n</li>\n</ul>\n'}},function(e,t){e.exports={title:"Build workflow and Live reload",body:'<h1>Build workflow and Live reload</h1>\n<p>When developing an app its annoying if you have to constantly restart the server to see your latest changes. Generally speaking, developers will use a tool to monitor source code for changes and automatically restart the server and rebuild front-end assets when necessary.</p>\n<p>Waigo comes with a set of built-in <a href="http://gulpjs.com/">gulp</a> scripts which do just that for you. And you can add them to your Waigo app using the CLI tool.</p>\n<p>Continuing on from the previous <a href="runninghelloworld/">Hello World example</a> go into your project folder and type:</p>\n<pre><code class="language-shell"><span class="hljs-variable">$ </span>waigo init-gulp\n</code></pre>\n<p>This will install gulp and a few gulp plugins, create a <code>gulpfile.coffee</code> and an associated set of tasks within a <code>gulp/</code> subfolder:</p>\n<pre><code>gulpfile.coffee  <span class="hljs-meta"># main gulp file </span>\n/gulp            <span class="hljs-meta"># contains gulp tasks</span>\n  /dev-frontend.coffee  <span class="hljs-meta"># dev frontend</span>\n  /dev-<span class="hljs-keyword">server</span>.coffee    <span class="hljs-meta"># dev server</span>\n  /dev.coffee           <span class="hljs-meta"># dev</span>\n  /frontend-css.coffee  <span class="hljs-meta"># build frontend Stylus</span>\n  /frontend-js.coffee   <span class="hljs-meta"># build frontend JS</span>\n  /frontend-img.coffee  <span class="hljs-meta"># build frontend Images</span>\n  /frontend.coffee      <span class="hljs-meta"># build frontend</span>\n  /utils/               <span class="hljs-meta"># utility methods</span>\n</code></pre>\n<p>To start up a dev server which will auto-restart Waigo whenever your app code changes (as well as rebuild front-end assets when they are updated):</p>\n<pre><code class="language-shell"><span class="hljs-variable">$ </span>gulp dev\n</code></pre>\n<h2>Front-end conventions</h2>\n<p>In order for the default gulp tasks to work properly your front-end code will need to adhere to a specific folder structure:</p>\n<pre><code>/src\n  /frontend        <span class="hljs-meta"># frontend assets</span>\n    /stylus        <span class="hljs-meta"># stylus assets</span>\n    /js            <span class="hljs-meta"># javascript assets</span>\n    /img           <span class="hljs-meta"># image assets</span>\n</code></pre>\n<p><a href="http://browserify.org/">Browserify</a> is used to package up your Javascript. The gulp task will look for a single <code>app.js</code> file within <code>src/frontend/js</code>  and build it along with all its dependencies into <code>public/js/app.js</code>.</p>\n<p><a href="http://stylus-lang.com/">Stylus</a> is the default pre-processor of choice in Waigo. The gulp task will look for a single <code>app.styl</code> file within <code>src/frontend/stylus</code> and build it along with all its dependenciesinto <code>public/css/app.css</code>.</p>\n<p>The image assets under <code>src/frontend/img</code> get copied into <code>public/img</code> without any further modification.</p>\n<p>These are just the defaults in Waigo. You are of course free to modify the gulp scripts to work with your folder structure, your preprocessor language of choice, and do just about anything else you would normally do in gulp.</p>\n<h2>Live reload</h2>\n<p>All built front-end assets get placed within subfolders of <code>public/</code>. Whenever something within this folder is changed the dev server started up by running <code>gulp dev</code> will inform the browser, which will then auto-reload the changed assets or reload the web-page as a whole depending on what changes.</p>\n<p>Running <code>gulp dev</code> will ensure front-end assets get auto-rebuilt into <code>public/</code> whenever they are changed, thus ensuring that the browser-side live reload mechanism kicks in\nwhenever you modify your frontend asset source files.</p>\n<p><em>Note: Adding a new file will not trigger a live-reload. This is due to a\nlimitation in underlying library used to watch for changes. In such instances you\nmay need to restart <code>gulp dev</code></em>.</p>\n<h2>Minification</h2>\n<p>By default front-end assets are not minified when built. To enable minification simply use the <code>minified</code> flag on the command-line:</p>\n<pre><code class="language-shell">$ gulp dev <span class="hljs-comment">--minified</span>\n</code></pre>\n<h2>Production builds</h2>\n<p>For production deployments you will want to build the front-end assets without running a dev server. To do this run the <code>frontend</code> task:</p>\n<pre><code class="language-shell">$ gulp frontend <span class="hljs-comment">--minified</span>\n</code></pre>\n'}},function(e,t){e.exports={title:"Getting Started",body:'<h1>Getting Started</h1>\n<ul>\n<li><a href="requirements/">Requirements</a></li>\n<li><a href="installation/">Installation</a></li>\n<li><a href="runninghelloworld/">Running Hello World</a></li>\n<li><a href="buildworkflowlivereload/">Build workflow and Live reload</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Installation",body:'<h1>Installation</h1>\n<h2>NPM</h2>\n<p>The recommended way to get started with Waigo is to install it as a global NPM module:</p>\n<pre><code class="language-shell">$ npm <span class="hljs-keyword">install</span> -g waigo\n</code></pre>\n<p>This will make the <code>waigo</code> command-line executable available for use. As we will see in the next section this executable helps you quickly setup a Waigo skeleton app.</p>\n<p>Alternatively, if you wish to add Waigo to an existing project then install it as you normally would any other dependency:</p>\n<pre><code class="language-shell">$ npm <span class="hljs-keyword">install</span> <span class="hljs-comment">--save waigo</span>\n</code></pre>\n<p><em>NOTE: You may see one or more warnings from NPM when installing Waigo. These are minor issues and can be ignored.</em></p>\n<h3>Beta releases</h3>\n<p>Occasionally beta releases will be published to NPM under the <code>next</code> tag, which you can grab using:</p>\n<pre><code class="language-shell">$ <span class="hljs-built_in">npm</span> install waigo@next\n</code></pre>\n<h2>Github</h2>\n<p>If you are brave and prefer to develop against a moving target then you can install Waigo from its repository:</p>\n<p><a href="https://github.com/waigo/waigo">https://github.com/waigo/waigo</a></p>\n'}},function(e,t){e.exports={title:"Requirements",body:'<h1>Requirements</h1>\n<p>Before you can use Waigo you need to have the following installed and ready:</p>\n<ul>\n<li><strong>Node.js 4.4.5 or above</strong> (<a href="http://nodejs.org/">http://nodejs.org/</a>) - Waigo also works with versions 5 and 6, though it only uses the features available in version 4 due to that being the current long-term release.</li>\n<li><strong>RethinkDB 2.2 or above</strong> (<a href="http://rethinkdb.com/">http://rethinkdb.com/</a>) - The default Waigo database and model layers are built for RethinkDB. You can of course swap them out for your own, in which case this requirement may not be necessary.</li>\n</ul>\n'}},function(e,t){e.exports={title:'Running "Hello World"',body:'<h1>Running Hello World</h1>\n<p>I am going to assume you <a href="installation/">installed</a> Waigo as a global NPM module, and that the <code>waigo</code> command-line executable is thus available in your shell <code>PATH</code>.</p>\n<p>Create a folder which will hold your Waigo app and then open up a command-line shell/terminal into it.</p>\n<p>For the purposes of this example I will assume your folder is located at <code>/dev/myapp</code> and that you have <code>cd</code>-ed into it. First lets create a <code>package.json</code> file:</p>\n<pre><code class="language-shell">$ <span class="hljs-built_in">npm</span> init\n</code></pre>\n<p>Now we are ready to setup a skeleton Waigo app:</p>\n<pre><code class="language-shell">$ waigo init\n\n[waigo-<span class="hljs-keyword">cli</span>] NPM install waigo semver\n... \n[waigo-<span class="hljs-keyword">cli</span>] Creating: start-<span class="hljs-keyword">app</span>.js\n[waigo-<span class="hljs-keyword">cli</span>] Creating: src/config/base.js\n</code></pre>\n<p>You can start Waigo using:</p>\n<pre><code class="language-shell">$ ./start-app<span class="hljs-selector-class">.js</span>\n</code></pre>\n<p>You will see lots of log output from Waigo, and then a line which looks like this:</p>\n<pre><code class="language-shell">...\n(<span class="hljs-selector-tag">RamMacbookPro</span><span class="hljs-selector-class">.local-11267</span>) <span class="hljs-selector-attr">[2016-06-11 21:38:05.993]</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[app]</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Startup</span> <span class="hljs-selector-tag">complete</span>\n</code></pre>\n<p>Now navigate to <code>http://localhost:3000</code> in your browser and you should see something similar to:</p>\n<p><img src="helloworld.png" alt=""></p>\n'}},function(e,t){e.exports={title:"What is Waigo?",body:'<h1>What is Waigo?</h1>\n<p>Waigo is a Node.js framework for building <strong>reactive</strong>, <strong>scalable</strong> and\n<strong>maintainable</strong> web application back-ends.</p>\n<p>Quick overview:</p>\n<ul>\n<li>Based on <a href="http://koajs.com/">koa</a>, uses promises and ES6 generators - no callbacks</li>\n<li>Front-end agnostic - build whatever kind of front-end you want</li>\n<li><a href="#reactive-data">Reactive data</a> model layer</li>\n<li>Easily build REST/JSON APIs using <a href="#views-and-output-formats">output formats</a></li>\n<li>Flexible routing with <a href="#routing">per-route</a> and <a href="#routing">per-http-method</a> middleware customisation</li>\n<li>Built-in <a href="#user-accounts">user account</a> management + <a href="#oauth">OAuth</a> support</li>\n<li>Flexible user <a href="#access-control">access control</a> list with reactive updates</li>\n<li>Easily build <a href="#forms">forms</a> and process submissions with customizable validation</li>\n<li>Built-in <a href="#cron">cron job</a> functionality</li>\n<li>Ready-made <a href="#admin-dashboard">admin dashboard</a> which is fully customizable</li>\n<li>Command-line interface for <a href="#getting-started">easy setup</a></li>\n<li><a href="#extend-and-override">Extend</a> or override <em>any</em> part of the core framework</li>\n<li><a href="#scalable-clustering">Scalability built-in</a> with Node.js clustering</li>\n<li>Bundle up functionality into re-usable <a href="#plugins">plugins</a></li>\n<li>And much, much morekeep reading!</li>\n</ul>\n<h1>Why should I use Waigo?</h1>\n<p>Waigo provides you with a sensible directory layout for your Koa app and a clean architecture. It also comes with a bunch of basic boilerplate features that almost every site needs.</p>\n<p>But the best part is that you dont have to use anything you dont want to. Almost every part of Waigo can be <strong>cleanly</strong> <a href="#extend-and-override">extended and overridden</a> within your app. Waigo gets out of your way when you need it to.</p>\n<p>In addition to this, if you do build some functionality you wish to share between different Waigo projects you can make it re-usable by bundling it up as a <a href="#plugins">plugin</a>. Check out the <a href="https://www.npmjs.org/browse/keyword/waigo">current list of plugins</a> to see whats already available.</p>\n<h1>Getting started</h1>\n<h2>Installation</h2>\n<p>Waigo requires <strong>Node.js v4 or above</strong> and <strong>RethinkDB</strong> (this is the default supported database). Install these on your system with the default settings.</p>\n<p>Waigo comes with a <a href="#command-line">command-line interface</a> (CLI). Its best to install Waigo as a global NPM module so that you can easily use this tool.</p>\n<pre><code class="language-bash">$ npm install -g waigo\n</code></pre>\n<h2>Running it</h2>\n<p>If your app folder is located at e.g. <code>/dev/myapp</code> then Waigo will by\ndefault assume that the source code for your app will be located in a\n<code>src</code> subfolder, i.e. at <code>/dev/myapp/src</code>.</p>\n<p>Inside your app folder run the following command:</p>\n<pre><code class="language-bash">$ waigo init\n\n[waigo-cli] NPM install waigo\n[waigo-cli] NPM install co\n... \n[waigo-cli] Creating: start-app.js\n[waigo-cli] Creating: src/views/index.pug\n</code></pre>\n<p>You can now start your application by running:</p>\n<pre><code class="language-bash">$ ./start-app.js\n</code></pre>\n<p>You will see something like:</p>\n<pre><code class="language-bash">...\n(RamMacbookPro.local-78163) [2016-04-06 11:01:41.450] [INFO] [app] - Startup complete\n</code></pre>\n<h2>Code conventions</h2>\n<p>When building your Waigo app keep in mind the following conventions:</p>\n<ul>\n<li>\n<p>Class fields variables and/or methods prefixed with one or more underscores (e.g. <code>_doc</code>) are considered internal should not be accessed and/or relied upon externally.</p>\n</li>\n<li>\n<p>If calling a function which only accepts callbacks wrap it within a Promise and use it in that manner instead. In the same way, dont write methods which take callbacks - they should either return Promises or be generator functions.</p>\n</li>\n<li>\n<p>Waigo uses and exposes the <a href="https://lodash.com/docs">lodash</a> utility library so you dont have to import it separately. Access it using <code>require(\'waigo\')._</code>.</p>\n</li>\n</ul>\n<h1>Extend and Override</h1>\n<p>In this section we will demonstrate how you can cleanly override almost all the default functionality provided by Waigo.</p>\n<p>Lets look at the default controller provided by Waigo, at <code>&lt;waigo npm folder&gt;/src/controllers/index.js</code>:</p>\n<pre><code class="language-javascript"><span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-comment">/**\n * @fileOverview Main controller\n */</span>\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'index\'</span>);\n};\n</code></pre>\n<p>Inside your app folder create <code>src/controllers/index.js</code>:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/src/controllers/index.js</span>\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">this</span>.body = <span class="hljs-string">\'Hello world!\'</span>;\n};\n</code></pre>\n<p>Now restart the app and refresh the page in the browser. You should see <em>Hello world!</em> printed on screen.</p>\n<p>In order to understand why this happened we need to understand what Waigos module loader is and how it works.</p>\n<h2>Module loader</h2>\n<p>During the startup phase Waigo will index its NPM module folder, <a href="#plugins">plugin</a> folders and finally your app folder for all <code>.js</code> files.</p>\n<p>When a particular file needs to be loaded at runtime the convention is to call <code>waigo.load()</code> with the relative path to the file. In the above example Waigo will internally call <code>waigo.load(&quot;controllers/index&quot;)</code> to load the <code>index</code> controller. At this point the actual file which gets loaded and returned will be based on the first available location, in order:</p>\n<ul>\n<li><code>&lt;app folder&gt;/src/controllers/index.js</code></li>\n<li><code>&lt;plugin1 npm module&gt;/src/controllers/index.js</code></li>\n<li><code>&lt;plugin2 npm module&gt;/src/controllers/index.js</code></li>\n<li></li>\n<li><code>&lt;waigo npm module folder&gt;/src/controllers/index.js</code></li>\n</ul>\n<p>This loading mechanism allows you to:</p>\n<ol>\n<li>Only load the parts of the framework you will actually use <em>(good for\nperformance)</em>.</li>\n<li>Override any framework module file with your own version <em>(extendability\nand customisation)</em>.</li>\n</ol>\n<p>But what if you specifically wanted the version of the <code>index</code> conroller provided by the Waigo framework? Just prefix <code>waigo:</code> to the module file name:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// this will load the version of controllers/index.js provided </span>\n<span class="hljs-comment">// by Waigo and not the one provided by your app</span>\nwaigo.load(<span class="hljs-string">\'waigo:controllers/index\'</span>);   \n</code></pre>\n<p>If you wish to load the version from within a plugin then simply specify that plugins NPM module name as the prefix, e.g:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// this will load the version of controllers/index.js provided </span>\n<span class="hljs-comment">// by plugin1 and not the one provided by your app or Waigo</span>\nwaigo.load(<span class="hljs-string">\'plugin1:controllers/index\'</span>);   \n</code></pre>\n<p>The above selective loading mechanism allows you to <em>extend</em> and not simply override. For instance, you could extend the the <code>index</code> controller as follows:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">var</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>);\n\n<span class="hljs-comment">// export all methods from Waigo framework index controller</span>\n<span class="hljs-built_in">module</span>.exports = waigo.load(<span class="hljs-string">\'waigo:controllers/index\'</span>);    \n\n<span class="hljs-comment">// add more methods</span>\nexports.handleSubmission = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{... }\n</code></pre>\n<p>Note that the module loader also scans for <a href="#views-and-output-formats">view templates</a>, allowing you to re-use view templates provided by the Waigo framework and plugins. However the module loader does not scan the following sub paths within each folder tree:</p>\n<ul>\n<li><code>src/views/emailTemplates</code> - <a href="#email-system">mailer</a> templates</li>\n<li><code>src/frontend</code> - all frontend stuff</li>\n<li><code>cli/data</code> - data for use by <a href="#command-line">cli</a> commands</li>\n</ul>\n<h2>Plugins</h2>\n<p>As mentioned earlier, You can make anything you build re-useable by bundling it\nup as a plugin. Plugins are just NPM modules and are thus very easy to share with others, and come with all the benefits that are available to normal NPM modules.</p>\n<p>By separating non-core functionality into plugins (which can then be thoroughly\ndocumented and tested) we encourage code re-use across projects. Plugins help to keep the core Waigo framework more focussed, flexible and increase the overall quality of code in the Waigo ecosystem.</p>\n<h3>Loading plugins</h3>\n<p>Waigo automatically tries to work out what plugins are\navailable by loading in the <code>package.json</code> file. By default it searches the\n<code>dependencies</code>, <code>devDependencies</code> and <code>peerDependencies</code> lists for any modules\nwhich are prefixed with <code>waigo-</code> and assumes that these are plugins which\nshould be loaded.</p>\n<p>However you can override every aspect of this search. The <a href="https://github.com/waigo/waigo/blob/master/src/loader.js">waigo.init()</a> method gives you the available options:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">/**\n * ...\n * @param {Object} [options.plugins] Plugin loading configuration.\n * @param {Array} [options.plugins.names] Plugins to load. If omitted then other options are used to load plugins.\n * @param {Array} [options.plugins.glob] Regexes specifying plugin naming conventions. Default is `waigo-*`.\n * @param {String|Object} [options.plugins.config] JSON config containing names of plugins to load. If a string is given then it assumed to be the path of a Javasript file. Default is to load `package.json`.\n * @param {Array} [options.plugins.configKey] Names of keys in JSON config whose values contain names of plugins. Default is `dependencies, devDependencies, peerDependencies`.\n ...\n*/</span>\n</code></pre>\n<p>You can list the desired plugins in a config file of your\nchoosing and then supply the path to this file. Or you can directly supply a\nconfig <code>Object</code> itself. And you can override the plugin naming conventions.</p>\n<h3>Example</h3>\n<p>The <a href="https://www.npmjs.org/package/waigo-sitemap">waigo-sitemap</a> plugin adds a cron job which submits a sitemap for your site to Google and Bing once a day. It provides the following modules files:</p>\n<ul>\n<li><code>src/support/cronTasks/submitSitemap.js</code></li>\n</ul>\n<p>To get the plugin use <code>npm</code>:</p>\n<pre><code class="language-bash"><span class="hljs-comment"># --save ensures it gets added as dependency in package.json (so that Waigo will find it)</span>\nnpm install --save waigo-sitemap \n</code></pre>\n<p>You can of course override any module file the plugin provides with your own:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/src/support/cronTasks/submitSitemap.js</span>\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-attr">schedule</span>: <span class="hljs-string">\'0 0 0 * * *\'</span>,  <span class="hljs-comment">// every day at midnight</span>\n  handler: <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">app</span>) </span>{\n  \t<span class="hljs-built_in">console</span>.log(<span class="hljs-string">\'do nothing!\'</span>);\n  }\n};\n</code></pre>\n<p>Calls made to <code>waigo.load(\'support/cronTasks/submitSitemap\')</code> will now load your app version\nrather then the plugin version.</p>\n<h3>Plugin conflicts</h3>\n<p>What would happen if you had two plugins which both provided the same\nfile? in this case the call to <code>waigo.init()</code> would fail with an error:</p>\n<pre><code class="language-bash">Error: Path <span class="hljs-string">"path/to/file"</span> has more than one plugin implementation to choose from: waigo-plugin1, waigo-plugin2, ...\n</code></pre>\n<p>If you need to use both plugins (maybe because they provide other useful\nfunctionality) then pick which plugins implementation you want to use by\nproviding a version of the file within your app folder. For\nexample, if you wanted Waigo to use the implementation provided by <code>waigo- plugin1</code> then you would do:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/path/to/file</span>\n\n<span class="hljs-keyword">var</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>);\n\n<span class="hljs-comment">// use the implementation from waigo-plugin1</span>\n<span class="hljs-built_in">module</span>.exports = waigo.load(<span class="hljs-string">\'waigo-plugin1:path/to/file\'</span>);    \n</code></pre>\n<h3>Publishing</h3>\n<p>To create and publish your own plugin to the wider community please follow\nthese guidelines:</p>\n<ul>\n<li>Check to see if what youve made is worth putting into a plugin. For instance\nits very easy to re-use existing <a href="http://koajs.com">koa</a> middleware in Waigo without\nneeding to create plugins.</li>\n<li>Ensure your plugin name is prefixed with <code>waigo-</code> so that users and Waigo\nitself can easily find it and use it.</li>\n<li>In your plugins <code>package.json</code> set the <code>main</code> key is set to <code>index.js</code>. Create a dummy\n<code>index.js</code> file in your plugins root folder. This is needed to be able to load and\nuse your plugin.</li>\n<li>Write a good <a href="http://README.md">README.md</a> for your plugin explaining what its for and how to use it.</li>\n<li>Add automated unit tests for your plugin. Look at existing plugins to learn\nbest practices.</li>\n<li>In your <code>package.json</code> tag your plugin with the <code>waigo</code> keyword so that\nusers can easily search for it.</li>\n</ul>\n<p>To see a list of all available plugins visit\n<a href="https://www.npmjs.org/browse/keyword/waigoplugin">https://www.npmjs.org/browse/keyword/waigo</a>.</p>\n<h1>Command-line</h1>\n<p>In the <a href="#getting-started">Getting Started</a> section you used the Waigo command-line interface (CLI) to get a\nworking application up and running.</p>\n<p>Even if you install Waigo globally in order to use the CLI, its smart enough to delegate control to your local\ninstallation of Waigo (in your <code>node_modules</code> folder) if one is present.</p>\n<p>The available CLI commands can be seen by typing:</p>\n<pre><code class="language-bash">$ waigo --help\n\n  Usage: waigo [options] [<span class="hljs-built_in">command</span>]\n\n  Commands:\n\n    init-gulp   Initialise and create a skeleton Gulpfile and associated tasks\n    init        Initialise and create a skeleton Waigo app\n\n  Options:\n\n    -h, --help     output usage information\n    -V, --version  output the version number\n</code></pre>\n<p>Further help is available for each command. For example to find out what\narguments are possible for the <code>init</code> command (which we used in the\n<a href="#hello-world">Hello World</a> example earlier):</p>\n<pre><code class="language-bash">$ waigo init --help\n\n  Usage: init [options]\n\n  Options:\n\n    -h, --help             output usage information\n    ...\n</code></pre>\n<p>The <code>&lt;waigo npm folder&gt;/src/cli/data</code> folder contains\nany data to be used the CLI commands (e.g. script templates) and does not get\nscanned by the Waigo <a href="#module-loader">module loader</a>.</p>\n<h2>Custom commands</h2>\n<p>Every CLI command is implemented a file within <code>&lt;waigo npm folder&gt;/src/cli</code>. If you wish to add your own commands or override the defaults then you must also place your implementations within <code>&lt;app folder&gt;/src/cli</code>. The\nCLI executable scans this path at startup and loads in all available commands.</p>\n<p>All CLI commands must be implemented as concrete subclasses of\n<a href="https://github.com/waigo/waigo/blob/master/src/support/cliCommand.js"><code>AbstractCommand</code></a>. This\nbase class provides a number of useful utility methods for use by actual\ncommands.</p>\n<h1>Configuration</h1>\n<p>Configuration for your application is loaded during <a href="#startup">startup</a> and is\nalways accessible at <code>app.config</code> within your backend code and through the <code>config</code> variable within your view templates.</p>\n<p>The <code>src/config</code> folder path holds the configuration files.\nEach configuration file exports a function which accepts the current\nconfiguration object as a parameter. This object can then be modified:</p>\n<pre><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  <span class="hljs-comment">// modify config in here</span>\n};\n</code></pre>\n<p>Each successively loaded configuration file gets passed the same configuration\nobject. As well see in the next section this makes it easy to customise the\napplication configuration depending on the mode in which were running in -\nproduction, testing, etc.</p>\n<h2>File load order</h2>\n<p>The <code>config/index.js</code> file is the configuration loader. It looks for and\nloads configuration files in the following order:</p>\n<ol>\n<li><code>config/base.js</code> - <strong>required</strong></li>\n<li><code>config/&lt;NODE_ENV&gt;.js</code></li>\n<li><code>config/&lt;NODE_ENV&gt;.&lt;current user&gt;.js</code></li>\n</ol>\n<p>The <code>config/base.js</code> file sets the configuration common to all modes in\nwhich the application may run.</p>\n<p>The configuration module files following this one are optional. Which ones get\nloaded depends on the value of the <code>NODE_ENV</code> environment variable. If this is\nnot set then we assume its value to be <code>development</code>.</p>\n<p><em>Note: When running your application in a production environment ensure you\nset the <code>NODE_ENV</code> environment variable to <code>production</code> or something similar.</em></p>\n<p>The final configuration file which gets loaded is associated with the mode in\nwhich the application is running as well as the id of the user who is\nexecuting the current application. This conveniently allows different users to\nfurther customise the configuration according to their own needs.</p>\n<p>Lets look at a concrete example</p>\n<p>Lets say <code>NODE_ENV</code> is set to <code>test</code> mode and that the user id of the process\nis <code>www-data</code>. The configuration loader will initialise a configuration object and then pass it to each of the following files in the\ngiven order:</p>\n<ol>\n<li><code>config/base.js</code></li>\n<li><code>config/test.js</code></li>\n<li><code>config/test.www-data.js</code></li>\n</ol>\n<p><em>Note: Once stared the application mode is accessible at <code>config.user</code>and the id of the user owning the process at <code>config.user</code>.</em></p>\n<h2>Re-using framework version</h2>\n<p>Lets say we want to provide <code>config/base.js</code> in our app but that we want to re-use\nsome of the configuration provided by Waigos version of this file. We can easily do this as follows:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/src/config/base.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  <span class="hljs-comment">// re-use config/base from framework</span>\n  waigo.load(<span class="hljs-string">\'waigo:config/base\'</span>)(config);\n\n  <span class="hljs-comment">// now we override the necessary bits for our app...</span>\n  config.baseURL = <span class="hljs-string">\'http://example.com\'</span>;\n  config.port = <span class="hljs-number">9000</span>;  \n};\n</code></pre>\n<h1>Startup and Shutdown</h1>\n<p>When the application starts up, Waigo runs the configured startup steps.</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;waigo npm module&gt;/src/application.js</span>\n\nApp.start = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">...</span>) </span>{\n  ...\n\n  for (<span class="hljs-keyword">let</span> stepName <span class="hljs-keyword">of</span> app.config.startupSteps) {\n    ...\n    yield* waigo.load(<span class="hljs-string">\'support/startup/\'</span> + stepName)(app);\n  }\n};\n</code></pre>\n<p>Startup modules are responsible for initialising the\nvarious aspects of your application. For example, here is the <code>middleware</code>\nstartup step:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;waigo npm module&gt;/src/support/startup/middleware.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">app</span>) </span>{\n  app.logger.debug(<span class="hljs-string">\'Setting up common middleware\'</span>);\n\n  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> m <span class="hljs-keyword">of</span> app.config.middleware.ALL._order) {\n    app.logger.debug(<span class="hljs-string">`Loading middleware: <span class="hljs-subst">${m}</span>`</span>);\n\n    app.use(waigo.load(<span class="hljs-string">`support/middleware/<span class="hljs-subst">${m}</span>`</span>)(\n      _.get(app.config.middleware.ALL, m, {})\n    ));\n  }\n};\n</code></pre>\n<p>This particular startup step sets up the middleware that will apply to <em>all</em>\nincoming requests.</p>\n<p>You set which startup steps get run by editing your config:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file:\t&lt;app folder&gt;/src/config/base.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n\t...\n\tconfig.startupSteps = [\n\t\t<span class="hljs-string">\'step1\'</span>,\n\t\t<span class="hljs-string">\'step2\'</span>,\n\t\t<span class="hljs-string">\'step3\'</span>,\n\t];\t\n\t...\n}\n</code></pre>\n<p>The default startup steps can all be found under the <code>support/startup</code> file path\nand can all be overridden within your app. And of course, you can add your own\nstartup steps.</p>\n<p>For example, lets add a step which simply outputs the current date and time:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file:  &lt;app folder&gt;/src/support/startup/timeAndDate.js</span>\n\nmdoule.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">app</span>) </span>{\n  <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toString());\n};\n</code></pre>\n<p>We then tell Waigo to load and execute this startup step in <code>development</code> mode\nby creating/modifying the appropriate configuration file:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file:  &lt;app folder&gt;/src/config/development.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  config.startupSteps = [\n    <span class="hljs-string">\'logging\'</span>,\n    <span class="hljs-string">\'middleware\'</span>,\n    <span class="hljs-string">\'routes\'</span>,\n    <span class="hljs-string">\'listener\'</span>,\n    <span class="hljs-string">\'timeAndDate\'</span>\n  ];\n};\n</code></pre>\n<h2>Default steps</h2>\n<p>The following startup steps come with Waigo:</p>\n<ul>\n<li><code>database</code>- This sets up the <a href="#database-and-models">database</a> connection using the configuration found at <code>app.config.db</code>.</li>\n<li><code>models</code> - This sets up <a href="#reactive-data">data model</a> instances based on files found under <code>models/</code>.</li>\n<li><code>forms</code>- This sets up convenient accessors for using <a href="#forms">forms</a>.</li>\n<li><code>activityRecorder</code> - This sets up convenient accessor for recording activities to the <a href="#activity-stream">activity stream</a>.\napplication folder.</li>\n<li><code>acl</code> - Sets up the <a href="#access-control">access control</a> list.</li>\n<li><code>middleware</code> - This sets up the default <a href="#middleware">middleware</a> which gets executed for every request.</li>\n<li><code>routes</code> - This maps URL <a href="#routing">routes</a> to their handlers.</li>\n<li><code>staticResources</code> - This sets up the static resources folder and copies Waigo framework-level frontend assets into it.</li>\n<li><code>actionTokens</code> - This sets up the interface for <a href="#access-tokens">action tokens</a>.</li>\n<li><code>mailer</code> - <a href="#email-system">Email system</a> setup.</li>\n<li><code>cron</code> - Sets up <a href="#cron-jobs">cron jobs</a> system.</li>\n<li><code>appTemplateVars</code> - Ensures useful data (e.g. <code>app.config</code>) gets exposed to app view templates.</li>\n<li><code>listener</code> - This starts the HTTP server and is usually the last start step to be run.</li>\n</ul>\n<h2>Shutdown steps</h2>\n<p>Similar to startup steps, Waigo also has <em>shutdown steps</em> - tasks which\nget executed when <code>waigo.load(\'application\').shutdown()</code> is called.</p>\n<p>Shutdown steps especially useful to have if youre doing automated tests with a Waigo app and need start and stop an app multiple times.</p>\n<p>The default shutdown steps can all be found under the <code>support/shutdown</code> file path:</p>\n<ul>\n<li><code>database</code>- This closes the <a href="#database-and-models">database</a> connection.</li>\n<li><code>listener</code> - This stops the HTTP server.</li>\n</ul>\n<h1>Routing</h1>\n<p>Waigos router provides a user-friendly mapping syntax as well as per-route and per-sub-route middleware customisation. Routes are specified in files under the <code>routes/</code> path and are processed once by the <code>routes</code> startup step.</p>\n<p>An example:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;waigo npm folder&gt;/src/routes/admin.js</span>\n<span class="hljs-meta">\n"use strict"</span>;\n\n\n<span class="hljs-built_in">module</span>.exports = { \n  <span class="hljs-string">\'/admin\'</span>: {\n    <span class="hljs-attr">pre</span>: [\n      <span class="hljs-string">\'assertUser\'</span>,\n      <span class="hljs-string">\'admin.index.configureMenu\'</span>,\n    ],\n\n    <span class="hljs-attr">GET</span>: <span class="hljs-string">\'admin.index.main\'</span>,\n\n    <span class="hljs-string">\'/routes\'</span>: {\n      <span class="hljs-attr">pre</span>: [\n        { \n          <span class="hljs-attr">id</span>: <span class="hljs-string">\'assertUser\'</span>, \n          <span class="hljs-attr">canAccess</span>: <span class="hljs-string">\'admin\'</span>,\n        },\n      ],\n\n      <span class="hljs-attr">GET</span>: <span class="hljs-string">\'admin.routes.index\'</span>\n    },\n    \n    ...\n\t}\n};\n</code></pre>\n<p>The above route mapping specifies the following:</p>\n<ul>\n<li>The base path is <code>/admin</code></li>\n<li>The <code>/admin</code> path and all of its subpaths will have 2 common middleware applied:\n<ul>\n<li><code>waigo.load(\'support/middleware/assertUser\')</code>  - will check that the user is logged in.</li>\n<li><code>waigo.load(\'controllers/admin/index\').configureMenu)</code> - will configure the admin menu for rendering.</li>\n</ul>\n</li>\n<li><code>GET /admin</code> will be handled by <code>waigo.load(\'controllers/admin/index\').main</code>.</li>\n<li>The <code>/admin/routes</code> path and all of its subpaths will have 1 common middlware applied:\n<ul>\n<li><code>waigo.load(\'support/middleware/assertUser\')({canAccess: \'admin\'})</code> - will check that the user is an admin.</li>\n</ul>\n</li>\n<li><code>GET /admin/routes</code> will be handled by  <code>waigo.load(\'controllers/admin/routes\').index</code>.</li>\n</ul>\n<p>In general, if the middleware name has a period (<code>.</code>) within it then it is assumed to\nrefer to a controller file path and a the name of a method within the controller. Otherwise it is\nassumed to be the name of a <a href="#middleware">middleware</a> file.</p>\n<p>If we wanted to we could also specify a middleware chain for a particular individual route and HTTP method, e.g we can rewrite the above route mappings as follows:</p>\n<pre><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-string">\'/admin\'</span>: {\n    <span class="hljs-attr">GET</span>: [ <span class="hljs-string">\'assertUser\'</span>, <span class="hljs-string">\'admin.index.configureMenu\'</span>, <span class="hljs-string">\'admin.index.main\'</span> ],\n    <span class="hljs-string">\'/routes\'</span>: {\n      <span class="hljs-attr">POST</span>: [ <span class="hljs-string">\'assertUser\'</span>, <span class="hljs-string">\'admin.index.configureMenu\'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">\'assertUser\'</span>, <span class="hljs-attr">canAccess</span>: <span class="hljs-string">\'admin\'</span> }, <span class="hljs-string">\'admin.routes.index\'</span> ],\n    }\n  }\n};\n</code></pre>\n<p><em>Note: The middleware specified within the route mappings always get executed after the\n<a href="#common-middleware">common middleware</a>.</em></p>\n<p><em>Note: Parameterized and regex routing is also supported. See <a href="https://github.com/koajs/trie-router">trie-\nrouter</a> for more information.</em></p>\n<h1>Middleware</h1>\n<p>Waigo middleware works the same as Koa middleware. All middleware module files\ncan be found under the <code>support/middleware</code> path. Additional middleware provided\nby your app and/or plugins should also sit under this path.</p>\n<p>A middleware module file is expected to export an initializer function which,\nwhen called will returns a generator function to add to the Koa middleware\nlayer. For example:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/src/support/middleware/example.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{\n  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n    <span class="hljs-comment">// do nothing and pass through</span>\n    <span class="hljs-keyword">yield</span> next;\n  };\n};\n</code></pre>\n<p><strong>Thus, existing koa middleware can easily be used with Waigo with little\nextra work.</strong></p>\n<p>If a given middleware is being initialised during <a href="#startup-and-shutdown">startup</a> (i.e. see below) then\nadditional options from the <code>app.config.middleware.ALL</code> configuration object get\npassed to the middleware initializer:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/src/config/base.js</span>\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  ...\n  config.middleware.ALL = {\n    <span class="hljs-comment">/* Order in which middleware gets run */</span>\n    _order: [\n      <span class="hljs-string">\'errorHandler\'</span>,\n      <span class="hljs-string">\'staticResources\'</span>,\n    ],\n    <span class="hljs-comment">/* Options for each middleware */</span>\n    errorHandler: {},\n    <span class="hljs-attr">staticResources</span>: {\n      <span class="hljs-comment">// relative to app folder</span>\n      folder: <span class="hljs-string">\'/static\'</span>,\n    },\n  };\n  ...\n}\n</code></pre>\n<p>Given the above configuration, the <code>staticResources</code> middleware initializer will get passed the options: <code>{ folder: \'/static\' }</code>.</p>\n<h2>Common middleware</h2>\n<p>The <a href="#configuration">app configuration</a> file may specify middleware that applies to all incoming requests. For example:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file:\t&lt;app folder&gt;/src/config/base.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  ...\n  config.middleware = {};\n\n  config.middleware.ALL = {\n    <span class="hljs-attr">_order</span>: [\n      <span class="hljs-string">\'errorHandler\'</span>,\n    ],\n  };\n\n  config.middleware.POST = config.middleware.PUT = {\n    <span class="hljs-attr">_order</span>: [\n      <span class="hljs-string">\'bodyParser\'</span>,\n    ],\n    <span class="hljs-attr">bodyParser</span>: {\n      <span class="hljs-attr">limit</span>: <span class="hljs-string">\'16mb\'</span>,\n    },\n  };\n  ...\n};\n</code></pre>\n<p>The above configuration states that:</p>\n<ul>\n<li>The <code>errorHandler</code> middleware will apply to <em>all</em> incoming requests.</li>\n<li>The <code>bodyParser</code> middlware will only apply to incoming requests using the <code>PUT</code> and <code>POST</code> HTTP methods.</li>\n</ul>\n<p>Once a request has been processed by common middleware the middleware specific to the trigger <a href="#routing">route</a> will be executed.</p>\n<h1>Controllers</h1>\n<p>Controllers in Waigo expose route handling methods which work as they do in koa.\nThe default <code>index</code> controller simply has:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;waigo framework&gt;/src/controllers/index</span>\n<span class="hljs-meta">\n"use strict"</span>;\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'index\'</span>);\n};\n</code></pre>\n<p>A controller must either send some output or pass control to the <code>next</code>\nmiddleware in the request chain. The <code>this.render()</code> call is provided by the\n<a href="#views-and-output-formats">output formats</a> middleware.</p>\n<p>Controllers can be nested within subfolders within the <code>controllers</code> path. For example, Waigos default <a href="#admin-dashboard">admin dashboard</a> controllers are located at:</p>\n<ul>\n<li><code>&lt;waigo npm folder&gt;/src/controllers/admin/index.js</code></li>\n<li><code>&lt;waigo npm folder&gt;/src/controllers/admin/routes.js</code></li>\n<li></li>\n</ul>\n<p>So to load the admin <code>routes</code> controller:</p>\n<pre><code class="language-javascript">waigo.load(<span class="hljs-string">\'controllers/admin/routes\'</span>);\n</code></pre>\n<h1>Database and Models</h1>\n<h2>Database connection</h2>\n<p><em>Note: At present only RethinkDB is supported. Mongo support is in the pipeline.</em></p>\n<p>The <code>database</code> <a href="#startup-and-shutdown">startup</a> step is responsible for creating connections to databases. It gets its configuration information from <code>app.config.db</code>:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/src/config.base.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  ...\n  config.db = {\n    <span class="hljs-attr">mydb</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'rethinkdb\'</span>,\n      <span class="hljs-attr">serverConfig</span>: {\n        <span class="hljs-attr">db</span>: <span class="hljs-string">\'waigo\'</span>,\n        <span class="hljs-attr">servers</span>: [\n          {\n            <span class="hljs-attr">host</span>: <span class="hljs-string">\'127.0.0.1\'</span>,\n            <span class="hljs-attr">port</span>: <span class="hljs-number">28015</span>,\n          }\n        ],\n      }\n    }\n  };\n  ...\n};\n</code></pre>\n<p>The above configuration tells Waigo to create a connection called <code>mydb</code> to a RethinkDB database named <code>waigo</code>, with a single server to connect to - <code>127.0.0.1:28015</code>.</p>\n<p>Once setup, this database connection will be accessible at <code>app.dbs.mydb</code>.</p>\n<p>It is possible to connect to multiple databases within a single app, e.g:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/src/config.base.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  ...\n  config.db = {\n    <span class="hljs-attr">primary</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'rethinkdb\'</span>,\n      <span class="hljs-attr">serverConfig</span>: {\n        <span class="hljs-attr">db</span>: <span class="hljs-string">\'waigo\'</span>,\n        <span class="hljs-attr">servers</span>: [\n          {\n            <span class="hljs-attr">host</span>: <span class="hljs-string">\'127.0.0.1\'</span>,\n            <span class="hljs-attr">port</span>: <span class="hljs-number">28015</span>,\n          }\n        ],\n      }\n    },\n    <span class="hljs-attr">secondary</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'rethinkdb\'</span>,\n      <span class="hljs-attr">serverConfig</span>: {\n        <span class="hljs-attr">db</span>: <span class="hljs-string">\'logs\'</span>,\n        <span class="hljs-attr">servers</span>: [\n          {\n            <span class="hljs-attr">host</span>: <span class="hljs-string">\'127.0.0.1\'</span>,\n            <span class="hljs-attr">port</span>: <span class="hljs-number">28016</span>,\n          }\n        ],\n      }\n    }        \n  };\n  ...\n};\n</code></pre>\n<p>Regardless of the no. of database connections specified, the first connection is always considered to be the main one, and will be made accessible at <code>app.db</code> (i.e. <code>app.db === app.dbs.primary</code> in the above example).</p>\n<h2>Models</h2>\n<p>A model is an interface between your Waigo app and a datasource - usually this means a database table. What this means is that the other parts of your app (e.g. controllers) should never be accessing the database directly.</p>\n<p>By encapsulating database access within models you gain the ability to control all database access through the models interface and can even change the underlying datasource in future without affecting the rest of your app.</p>\n<p>The Waigo model architecture is effectively that of an <em>Object Document Mapper (ODM)</em>. - it maps objects to documents within the database.</p>\n<h3>Using models</h3>\n<p>To illustrate how models can be used, lets create an example <code>User</code> model for representing users. In this example every user has a usernamd and password and a timestamp indicating the last time they logged in.</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file:\t&lt;app folder&gt;/src/models/user/model.js</span>\n<span class="hljs-meta">\n"use strict"</span>;\n\n<span class="hljs-keyword">const</span> waigo = global.waigo,\n  _ = waigo._,\n  Q = waigo.load(<span class="hljs-string">\'support/promise\'</span>),\n  errors = waigo.load(<span class="hljs-string">\'support/errors\'</span>),\n  RethinkDbModel = waigo.load(<span class="hljs-string">\'support/models/model\'</span>).RethinkDbModel;\n\n\n<span class="hljs-keyword">const</span> TABLE_DEF = {\n  <span class="hljs-attr">schema</span>: {\n    <span class="hljs-attr">username</span>: { \n      <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, \n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n    },\n    <span class="hljs-attr">password</span>: { \n      <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, \n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,\n    },\n    <span class="hljs-attr">lastLogin</span>: { \n      <span class="hljs-attr">type</span>: <span class="hljs-built_in">Date</span>, \n      <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>,\n    },\n  },\n  <span class="hljs-attr">virtuals</span>: {\n    <span class="hljs-attr">hasLoggedInBefore</span>: {\n      <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{\n        <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.lastLogin;\n      }\n    }\n  },\n  <span class="hljs-attr">indexes</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'username\'</span>,\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'lastLogin\'</span>,\n    },\n  ]\n};\n\n<span class="hljs-keyword">const</span> DOC_METHODS = {\n  <span class="hljs-attr">isPasswordCorrect</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">password</span>) </span>{\n    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.password === password;\n  },\n  <span class="hljs-attr">login</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">context</span>) </span>{\n    <span class="hljs-comment">// update last-login timestamp</span>\n    <span class="hljs-keyword">this</span>.lastLogin = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();\n    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.save();\n  },\n};\n\n<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Model</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">RethinkDbModel</span> </span>{\n  <span class="hljs-keyword">constructor</span> (app) {\n    <span class="hljs-keyword">super</span>(app, app.db, {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">"User"</span>,\n      <span class="hljs-attr">def</span>: TABLE_DEF,\n      <span class="hljs-attr">docMethods</span>: DOC_METHODS,\n    });\n  }\n\n  * getByUsername (username) {\n    <span class="hljs-keyword">let</span> ret = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>._qry().filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">user</span>) </span>{\n      <span class="hljs-keyword">return</span> user(<span class="hljs-string">\'username\'</span>).eq(username);\n    }).run();\n\n    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._wrap(_.get(ret, <span class="hljs-string">\'0\'</span>));\n  }\n\n  * register (username, password) {\n    <span class="hljs-keyword">let</span> user = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>._insert({\n      <span class="hljs-attr">username</span>: username,\n      <span class="hljs-attr">password</span>: password,\n    });\n\n    <span class="hljs-keyword">if</span> (!user) {\n      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">\'Error creating new user: \'</span> + username);\n    }\n\n    <span class="hljs-keyword">return</span> user;\n  }\n}\n\n<span class="hljs-built_in">module</span>.exports = Model;\n</code></pre>\n<p><em>Note: The code example above is explained in the <a href="#defining-a-model">Defining a model</a> section.</em></p>\n<p>The above model will be instantiated once and then made accessible at <code>app.models.User</code>. The name of the model is determined by its filepath. E.g. if the file was instead located at <code>&lt;app folder&gt;/src/models/bee/model.js</code> then it would be <code>app.models.Bee</code>.</p>\n<p>To register a new user:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">let</span> user =  app.models.User.register(<span class="hljs-string">\'username\'</span>, <span class="hljs-string">\'password\'</span>);\n</code></pre>\n<p>The returned result is an instance of a <code>User</code> document, i.e. it is an object which encapsulates a single row within the backend database table.</p>\n<p>We can now access this documents fields quite easily:</p>\n<pre><code class="language-javascript"><span class="hljs-built_in">console</span>.log( user.username );\n<span class="hljs-built_in">console</span>.log( user.password );\n<span class="hljs-built_in">console</span>.log( user.lastLogin );\n<span class="hljs-built_in">console</span>.log( user.hasLoggedInBefore );\n</code></pre>\n<p>We can check for a password match:</p>\n<pre><code class="language-javascript"><span class="hljs-built_in">console</span>.log( <span class="hljs-keyword">yield</span> user.isPasswordCorrect(<span class="hljs-string">\'user entered passwd\'</span>);\n</code></pre>\n<p>We can also call <code>login()</code> to update the login timestamp:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// user.hasLoggedInBefore === false</span>\n<span class="hljs-keyword">yield</span> user.login();\n<span class="hljs-comment">// user.hasLoggedInBefore === true</span>\n</code></pre>\n<p>Back to the Model. We can fetch a user by id:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">let</span> user = <span class="hljs-keyword">yield</span> app.models.User.getById(<span class="hljs-string">\'user id\'</span>);\n</code></pre>\n<p><em>Note: The <code>getById()</code> is automatically available on all models.</em></p>\n<p>We can also get a user by username:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">let</span> user = <span class="hljs-keyword">yield</span> app.models.User.getByUsername(<span class="hljs-string">\'username\'</span>);\n</code></pre>\n<p>Now lets go through the above model and explain how it all fits together to give you this API.</p>\n<h3>Defining a model</h3>\n<p>Ever Model consists of a database schema, database indexes, model methods, and document methods.</p>\n<p>Our <code>Model</code> class extends <code>RethinkDBModel</code> to indiciate that this Model is backed by a RethinkDB table.</p>\n<p>The <code>super()</code> call in the constructor specifies that the model is to be used with the default database (<code>app.db</code>) and that the RethinkDB table is to be named <code>User</code>.</p>\n<p>We then pass in <code>TABLE_DEF</code> which consists of the schema for the RethinkDB table, indexes we want RethinkDB to maintain, and finally any required virtual fields (see below).</p>\n<p>The schema specifies three fields for the database table - <code>username</code>, <code>password</code> and <code>lastLogin</code> - with the first two fields being mandatory for any new rows that are to be inserted into the table.</p>\n<p>Weve asked for two indexes - one on the <code>username</code> field and one on the <code>lastLogin</code> field.</p>\n<p>If we wish to explicitly set which field should be the primary key for the database table we can specify it using the <code>pk</code> parameter, e.g:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">super</span>(app, app.db, {\n  <span class="hljs-attr">name</span>: <span class="hljs-string">"User"</span>,\n  <span class="hljs-attr">pk</span>: <span class="hljs-string">\'username\'</span>,\t<span class="hljs-comment">// username field is now the primary key</span>\n  def: TABLE_DEF,\n  <span class="hljs-attr">docMethods</span>: DOC_METHODS,\n});\n</code></pre>\n<p><em>Note: More complex compound indexes are supported - check out Waigos built-in models for real examples.</em></p>\n<p><strong>Model methods</strong></p>\n<p>Model methods are the methods available on the model itself. The <code>getById()</code> method is automatically available to on model instances. Beyond that a model must define its own additional methods within the <code>Model</code> class itself.</p>\n<p>In our example model we have defined two: <code>getByUsername</code> and <code>register</code>.</p>\n<p>Youll notice that within our example we call a couple of internal methods: <code>_qry()</code> and <code>_insert()</code>. These are provided by the <code>RethinkDBModel</code> base class and perform the actual work of talking to the database and processing results.</p>\n<p>The available internal methods are:</p>\n<ul>\n<li><code>_qry()</code> - construct a RethinkDB query object - basically <code>r.table(\'table name\')</code>.</li>\n<li><code>_insert()</code> - insert a new record and return a document instance.</li>\n<li><code>_update()</code> - update a record.</li>\n<li><code>_remove()</code> - remove a record.</li>\n<li><code>_get()</code> - equivalent to RethinkDbs <a href="https://www.rethinkdb.com/api/javascript/#get">get()</a>.</li>\n<li><code>_getAll()</code> - equivalent to RethinkDbs <a href="https://www.rethinkdb.com/api/javascript/#getAll">get()</a>.</li>\n<li><code>_wrap()</code> - process query results array (or single result object) by encapsulating each raw query result in a document instance.</li>\n<li><code>_createDoc()</code> - encapsulate given raw query result in a document instance (this gets called by <code>_wrap()</code>).</li>\n</ul>\n<p>These internal methods give you all the tools you need to build out model and document methods.</p>\n<p><strong>Document methods</strong></p>\n<p>Document methods are the methods available on an instance of a document returned by the model.</p>\n<p><strong>Virtual fields</strong></p>\n<p>Virtual fields are fields which appear in the Models interface as normal fields but which arent actually stored in the database. Theyre essentially another way of doing model instance methods.</p>\n<p>The <code>TABLE_DEF</code> constant defines the database schema, database indexes and <em>virtual</em> fields.</p>\n<h3>Using a model</h3>\n<h3>Built-in models</h3>\n<p>At present Waigo comes with 4 built-in models:</p>\n<ul>\n<li><code>User</code> - represents a <a href="#user-accounts">user account</a>.</li>\n<li><code>Activity</code> - represents an event in the <a href="#activity-stream">activity stream</a>.</li>\n<li><code>Acl</code> - represents an entry in the <a href="#access-control">access control list</a>.</li>\n<li><code>Cron</code> - represents a scheduled <a href="#cron-jobs">cron job</a>.</li>\n</ul>\n<p>If you look at the <a href="https://github.com/waigo/waigo/tree/master/src/models/user">source code for the User model</a> you will notice that the <code>model.js</code> file is not monolothic. Instead, the configuration has been split out across several files:</p>\n<ul>\n<li><code>adminConfig.js</code></li>\n<li><code>tableDef.js</code></li>\n<li><code>docMethods.js</code></li>\n</ul>\n<p>As with everything else in Waigo you can choose to extend or replace these models with your own, or use a completely different model layer of your choosing.</p>\n<h2>Reactive data</h2>\n<h1>Sessions</h1>\n<p>You can access session data using <code>this.session</code>:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: some controller</span>\n\nexports.index = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'index\'</span>, {\n    <span class="hljs-attr">name</span>: <span class="hljs-keyword">this</span>.session.userName\n  });\n};\n</code></pre>\n<p>To delete a session simply use <code>this.session = null</code>.</p>\n<p>Sessions are created and loaded by the <code>sessions</code> middleware, which internally\nuses <a href="https://github.com/hiddentao/koa-session-store">koa-session-store</a> to\nallow for pluggable session storage layers.</p>\n<p>The default session middleware configuration looks as follows:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;waigo framework&gt;/src/config/base.js</span>\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  ...\n\n  config.middleware.options.sessions = {\n    <span class="hljs-comment">// cookie signing keys - these are used for signing cookies (using Keygrip) and should be set for your app</span>\n    keys: [<span class="hljs-string">\'use\'</span>, <span class="hljs-string">\'your\'</span>, <span class="hljs-string">\'own\'</span>],\n    <span class="hljs-comment">// session cookie name</span>\n    name: <span class="hljs-string">\'waigo\'</span>,\n    <span class="hljs-comment">// session storage</span>\n    store: {\n      <span class="hljs-comment">// session store type</span>\n      type: <span class="hljs-string">\'cookie\'</span>,\n      <span class="hljs-comment">// session store config</span>\n      config: {\n        <span class="hljs-comment">// nothing needed for cookie sessions</span>\n      }\n    },\n    <span class="hljs-comment">// session cookie options</span>\n    cookie: {\n      <span class="hljs-comment">// cookie expires in...</span>\n      validForDays: <span class="hljs-number">7</span>,\n      <span class="hljs-comment">// cookie valid for url path...</span>\n      path: <span class="hljs-string">\'/\'</span>\n    }\n  };\n</code></pre>\n<p>By default session data is stored in the session cookie itself. There are other\nsession storage plugins available for use, for example:</p>\n<ul>\n<li><a href="https://www.npmjs.org/package/waigo-mongo">waigo-mongo</a> - Store session data in Mongo.</li>\n</ul>\n<h1>Views and Output formats</h1>\n<p>Lets say you have a controller method which looks like this:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;waigo framework&gt;/src/controllers/main.js</span>\n\nexports.index = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'index\'</span>, {\n    <span class="hljs-attr">title</span>: <span class="hljs-string">\'Hello Waigo!\'</span>\n  });\n};\n</code></pre>\n<p>When this gets executed Waigo will look for and load <code>&lt;app folder&gt;/views/index.pug</code>,\npass it to the <a href="jade-lang.com">Pug</a> template engine for rendering, and pass\nthe result to the client.</p>\n<p>However, if the incoming request has the <code>format</code> query parameter set to \'json\nthen the requesting client will see the following output:</p>\n<pre><code>{\n  <span class="hljs-attribute">title</span>: <span class="hljs-string">\'Hello Waigo!\'</span>\n}\n</code></pre>\n<p>Why is this?</p>\n<p>Waigo introduces the concept of output formats to make it easy to cater\nfor different types of clients.</p>\n<p>Nowadays most web apps often have single-page web versions and/or mobile apps\nwhich need to use a REST API or the equivalent to communicate with the back-end.\nBy supporting more than one one output format Waigo enables you to serve all of\nthese different clients using the same route handler.</p>\n<p>The default output formats configuration is as follows:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;waigo framework&gt;/src/config/base.js</span>\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  ...\n\n  config.middleware.options.outputFormats = {\n    <span class="hljs-comment">// List of enabled formats along with options to pass to each formatter.</span>\n    formats: {\n      <span class="hljs-attr">html</span>: {\n        <span class="hljs-comment">// Folder relative to application root folder, in which to look for view templates.</span>\n        folder: <span class="hljs-string">\'views\'</span>,\n        <span class="hljs-comment">// Default view template filename extension when not explicitly provided.</span>\n        ext: <span class="hljs-string">\'pug\'</span>\n        <span class="hljs-comment">// Map file extension to rendering engine</span>\n        engine: {\n          <span class="hljs-string">\'pug\'</span>: <span class="hljs-string">\'pug\'</span>\n        }\n      },\n      <span class="hljs-attr">json</span>: {}\n    },\n    <span class="hljs-comment">// Use this URL query parameter to determine output format.</span>\n    paramName: <span class="hljs-string">\'format\'</span>,\n    <span class="hljs-comment">// Default format, in case URL query parameter which determines output format isn\'t provided.</span>\n    <span class="hljs-keyword">default</span>: <span class="hljs-string">\'html\'</span>\n  };\n</code></pre>\n<p>HTML and JSON output formats are supported by default, with the\nspecific format chosen via the <code>format</code> URL query parameter. The actual\nimplementations of each output format can be found in the\n<code>support/outputFormats</code> module file path.</p>\n<p>The <code>outputFormats</code> middleware sets up the output format for every request. It\nalso adds the <code>this.render()</code> method you saw being used earlier in the default\ncontroller.</p>\n<p><strong>Tip: In order to make effective use of output formats, ensure all the data\nneeded by your view templates is generated before you render the template.\nThis will make it easier for you to switch between differnet output formats as\nand when needed without having to generate data separately for each different\nformat.</strong></p>\n<h2>Custom formats</h2>\n<p>You can easily add your own custom output formats. For example, lets say you\nwanted to add an XML output format. You would first create an implementation for\nyour output format:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/src/outputFormats/xml.js</span>\n\n<span class="hljs-keyword">var</span> xml_renderer = ...\n\nexports.create = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{\n  <span class="hljs-keyword">var</span> render = xml_renderer.init(options);    \n\n  <span class="hljs-comment">// \'render\' should now equal a generator function which wil return the </span>\n  <span class="hljs-comment">// rendered output</span>\n\n  <span class="hljs-keyword">return</span> {\n    <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">view, locals</span>) </span>{\n      <span class="hljs-keyword">this</span>.body = <span class="hljs-keyword">yield</span> render(view, _.extend({}, locals, <span class="hljs-keyword">this</span>.app.locals));\n      <span class="hljs-keyword">this</span>.type = <span class="hljs-string">\'application/xml\'</span>;\n    }\n  };\n};\n</code></pre>\n<p>Once this is done and you can enable it by modifying the <code>outputFormats</code>\nmiddleware configuration. For example:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/src/config/base.js</span>\n<span class="hljs-built_in">module</span>.exports = {\n  ...\n\n  config.middleware.options.outputFormats = {\n    ...\n    xml: {\n      <span class="hljs-attr">config</span>: {\n        <span class="hljs-comment">// any initialisation for the XML renderer could go here</span>\n      }\n    }\n  };\n</code></pre>\n<h2>View objects</h2>\n<p><em>View objects</em> are plain Javascript objects which represent back-end data we\nwish to send to the client.</p>\n<p>Why use them?</p>\n<p>When sending data back to the client we may want to first modify it, e.g. format\ndates, remove parts of the data that the client does not need to see in the\ngiven context, etc.</p>\n<p>The <code>this.render()</code> method provided by the [output formats](#views-and-\noutput-formats) middleware checks the passed-in template variables to see if\nview objects can be generated for them.</p>\n<p>An object can generate a view object representation of itself if it implements\nthe <code>HasViewObject</code> mixin (see the  <code>support/mixins</code> module file). Applying this\nmixin to a class requires you to implement a <code>toViewObject()</code> generator function\nfor that class.</p>\n<p>The <code>toViewObject()</code> function takes a single argument - the context for the\ncurrent request, allowing you to tailor the view object representation according\nto each individual request.</p>\n<p>For example, lets say we have a model instance which holds data wish to send to\nthe client:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">var</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>),\n  mixins = waigo.load(<span class="hljs-string">\'support/mixins\'</span>);\n\n<span class="hljs-keyword">var</span> Model = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{\n  <span class="hljs-keyword">this</span>.name = name;\n  <span class="hljs-keyword">this</span>.id = <span class="hljs-number">234</span>;\n};\nmixins.apply(Model, mixins.HasViewObject);\n\nModel.prototype.toViewObject = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">ctx</span>) </span>{\n  <span class="hljs-comment">// we will alter the view object representation according to a specific </span>\n  <span class="hljs-comment">// request header which gets passed in</span>\n  customKey = ctx.req.header[<span class="hljs-string">\'x-custom-key\'</span>];\n\n  <span class="hljs-keyword">if</span> (<span class="hljs-string">\'test\'</span> === customKey) {\n    <span class="hljs-keyword">return</span> {\n      <span class="hljs-attr">name</span>: <span class="hljs-keyword">this</span>.name,\n      <span class="hljs-attr">id</span>: <span class="hljs-keyword">this</span>.id\n    };\n  } <span class="hljs-keyword">else</span> {\n    <span class="hljs-keyword">return</span> {\n      <span class="hljs-attr">name</span>: <span class="hljs-keyword">this</span>.name\n    }\n  }\n};\n</code></pre>\n<p>In our controller we can easily pass this to the output format renderer:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// controllers/main.js</span>\n\nexports.index = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'index\'</span>, {\n    <span class="hljs-attr">person</span>: <span class="hljs-keyword">new</span> Model(<span class="hljs-string">\'John\'</span>),\n    <span class="hljs-attr">stats</span>: {\n      <span class="hljs-attr">age</span>: <span class="hljs-number">31</span>,\n      <span class="hljs-attr">score</span>: <span class="hljs-number">10</span>\n    }\n  });\n}\n</code></pre>\n<p>The output (if we requested the JSON output format) will look like:</p>\n<pre><code>{\n  <span class="hljs-attribute">person</span>: {\n    name: <span class="hljs-string">\'John\'</span>\n  },\n  <span class="hljs-selector-tag">age</span>: {\n    <span class="hljs-attribute">age</span>: <span class="hljs-number">31</span>,\n    score: <span class="hljs-number">10</span>\n  }\n}\n</code></pre>\n<p>Notice how the renderer didnt output the <code>id</code> attribute of our model instance.\nAlso notice how the <code>stats</code> key-value pair was output  just as it is. If a given\ntemplate variable does not implement the <code>HasViewObject</code> mixin then it gets\noutput as it is, unchanged.</p>\n<p>If we now make the request with the <code>x-custom-key: test</code> header set then we will\ninstead get:</p>\n<pre><code class="language-javascript">{\n  <span class="hljs-attr">person</span>: {\n    <span class="hljs-attr">name</span>: <span class="hljs-string">\'John\'</span>,\n    <span class="hljs-attr">id</span>: <span class="hljs-number">234</span>\n  },\n  <span class="hljs-attr">age</span>: {\n    <span class="hljs-attr">age</span>: <span class="hljs-number">31</span>,\n    <span class="hljs-attr">score</span>: <span class="hljs-number">10</span>\n  }\n}\n</code></pre>\n<p>All built-in <a href="#errors">error</a> classes (including form <a href="#validation">validation</a>\nerrors) implement the <code>HasViewObject</code> mixin. In fact, when\nthe error handler sends an error response to the client it uses the view object\nrepresentation of the error.</p>\n<h2>Template globals</h2>\n<p>The HTML output format contains the following rendering code:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">this</span>.body = <span class="hljs-keyword">yield</span> render(view, _.extend({}, <span class="hljs-keyword">this</span>.app.locals, locals));\n</code></pre>\n<p>The template variables passed to the <code>render()</code> method get converted to view\nobjects and then passed in as <code>locals</code>. Notice however, that <code>this.app.locals</code>\nalso gets passed in to the template.</p>\n<p>This variable is for holding any global template variables or helper functions\nwhich are to be made available to all templates.</p>\n<p>For example, if you wanted to add a template helper to pretty-print a <code>Date</code>\nobject using the <a href="http://momentjs.com/">moment.js</a> library you could create a\n<a href="#startup">startup</a> step to add it:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/support/startup/helpers.js</span>\n\n<span class="hljs-keyword">var</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'lodash\'</span>), \n  moment = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'moment\'</span>);\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">app</span>) </span>{\n  app.locals = _.extend({}, app.locals, {\n    <span class="hljs-attr">prettyDate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">date</span>) </span>{\n      <span class="hljs-keyword">return</span> moment(date).format(<span class="hljs-string">\'dd-mm-yyyy\'</span>);\n    } \n  });\n};\n\n<span class="hljs-comment">// file: &lt;app folder&gt;/config/base.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  ...\n  config.startupSteps = [\n    <span class="hljs-string">\'helpers\'</span>,\n    ...\n  ];\n</code></pre>\n<p>Within your Jade template the <code>prettyDate</code> function would now be available:</p>\n<pre><code class="language-pug">#{<span class="ruby"> prettyDate(mydate) }</span>\n</code></pre>\n<h1>Static resources</h1>\n<p>Waigo uses the <a href="https://github.com/koajs/static">koa-static</a> middleware to serve\nup static resources such as  scipts, stylesheets and fonts needed by the front-\nend of your web application.  The default configuration for this middleware is:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// &lt;waigo framework&gt;/src/config/base.js</span>\n...\nconfig.middleware.options.staticResources = {\n  <span class="hljs-comment">// relative to app folder</span>\n  folder: <span class="hljs-string">\'../public\'</span>,\n  <span class="hljs-attr">options</span>: {}\n};\n...\n</code></pre>\n<p>Thus if your app folder is located at <code>/var/www/myapp</code> then static\nresources are expected to reside in <code>/var/www/public</code>.</p>\n<h1>Forms</h1>\n<p>Forms are treated as first-class citizens in Waigo. Form inputs can be sanitized\nand validated and a per-field error report can be generated.</p>\n<p>Each form uses a unique id; its configuration and input fields are specified in\na file under the <code>forms/</code> path, the file name being the id of the form.</p>\n<p>For example, here is how you might specify a simple signup form:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: forms/signup.js</span>\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-attr">fields</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'email\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'text\'</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Email address\'</span>\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'password\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'password\'</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Password\'</span>\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'confirm_password\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'password\'</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Confirm password\'</span>\n    }\n  ]  \n};\n</code></pre>\n<p>The field <code>type</code> key refers to the name of a module file under the\n<code>support/forms/fields/</code> path. So for the above form specification Waigo will\nexpect the following paths to exist:</p>\n<ul>\n<li><code>support/forms/fields/text</code></li>\n<li><code>support/forms/fields/password</code></li>\n</ul>\n<p>All field type classes inherit from the base <code>Field</code> class (found in\n<code>support/forms/field</code>).</p>\n<p>To create an instance of the above form you would do:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">var</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>),\n  Form = waigo.load(<span class="hljs-string">\'support/forms/form\'</span>).Form;\n\n<span class="hljs-keyword">var</span> form = Form.new(<span class="hljs-string">\'signup\'</span>);\n</code></pre>\n<p>Waigo will automatically look under the <code>forms/</code> file path to see if a form\nspecification for the given id exists. It so it will load in this specification\nand return a <code>Form</code> instance.</p>\n<p>A <code>Form</code> instance can generate a <a href="#view-objects">view object</a> representation of\nitself. It looks  something like:</p>\n<pre><code class="language-javascript">{\n  <span class="hljs-comment">/* form id */</span>\n  id: <span class="hljs-string">"uniqueFormId"</span>,\n\n  <span class="hljs-comment">/* fields */</span>\n  fields: {\n    <span class="hljs-attr">title</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span>,\n      <span class="hljs-attr">name</span>: <span class="hljs-string">"title"</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">"Title"</span>,\n      <span class="hljs-attr">value</span>: <span class="hljs-literal">null</span>,\n      <span class="hljs-attr">originalValue</span>: <span class="hljs-literal">null</span>   <span class="hljs-comment">/* see \'Dirty checking\' section for explanation */</span>\n    },\n    <span class="hljs-attr">body</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span>,\n      <span class="hljs-attr">name</span>: <span class="hljs-string">"body"</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">"Body"</span>,\n      <span class="hljs-attr">value</span>: <span class="hljs-literal">null</span>,\n      <span class="hljs-attr">originalValue</span>: <span class="hljs-literal">null</span>     \n    },\n    <span class="hljs-attr">comment</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span>,\n      <span class="hljs-attr">name</span>: <span class="hljs-string">"comment"</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">"Comment"</span>,\n      <span class="hljs-attr">value</span>: <span class="hljs-literal">null</span>,\n      <span class="hljs-attr">originalValue</span>: <span class="hljs-literal">null</span>     \n    }\n  },\n\n  <span class="hljs-comment">/* the suggested display order for the fields, based on the form spec */</span>\n  order: [\n    <span class="hljs-string">"title"</span>,\n    <span class="hljs-string">"body"</span>,\n    <span class="hljs-string">"comment"</span>\n  ]\n}\n</code></pre>\n<h2>Internal state</h2>\n<p>Sometimes we may wish to restore a form to a previous state. The form\narchitecture allows for this exposing the ability to get and set the forms\ninternal state. This state contains the current field values too.</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// save the form state</span>\n<span class="hljs-keyword">var</span> form = Form.new(<span class="hljs-string">\'signup\'</span>);\n<span class="hljs-keyword">yield</span> form.setValues( <span class="hljs-comment">/* user input values */</span> );\n<span class="hljs-keyword">this</span>.session.formState = form.state;\n...\n<span class="hljs-comment">// restore the form (and field values) to previous state</span>\n<span class="hljs-keyword">var</span> form = Form.new(<span class="hljs-string">\'signup\'</span>);\nform.state = <span class="hljs-keyword">this</span>.session.formState;\n</code></pre>\n<p>We can also set the internal state during construction:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">var</span> form = Form.new(<span class="hljs-string">\'signup\'</span>, <span class="hljs-keyword">this</span>.session.formState);\n</code></pre>\n<h2>Sanitization</h2>\n<p>When setting form field values Waigo first sanitizes them. Sanitization is\nspecified on a per-field basis in the form configuration. Lets trim all user\ninput to our signup form:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: forms/signup.js</span>\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-attr">fields</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'email\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'text\'</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Email address\'</span>,\n      <span class="hljs-attr">sanitizers</span>: [ <span class="hljs-string">\'trim\'</span> ]\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'password\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'password\'</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Password\'</span>,\n      <span class="hljs-attr">sanitizers</span>: [ <span class="hljs-string">\'trim\'</span> ]\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'confirm_password\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'password\'</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Confirm password\'</span>,\n      <span class="hljs-attr">sanitizers</span>: [ <span class="hljs-string">\'trim\'</span> ]\n    }\n  ]  \n};\n</code></pre>\n<p>Each item in the <code>sanitizers</code> array refers to the name of a module file under\nthe <code>support/forms/sanitizers/</code> path. So for the above form specification Waigo\nwill expect the following path to exist:</p>\n<ul>\n<li><code>support/forms/sanitizers/trim</code></li>\n</ul>\n<p>A sanitizer module should export a single function which returns a generator\nfunction (this performs the actual sanitization). For example, Waigos built-in\n<code>trim</code> sanitizer looks like this:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">var</span> validatorSanitizer = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'validator\'</span>);\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">form, field, value</span>) </span>{\n    <span class="hljs-keyword">return</span> validatorSanitizer.trim(value);\n  }\n};\n\n</code></pre>\n<p>If sanitization fails then a <code>FieldSanitizationError</code> error gets thrown\nfor the field for which it failed.</p>\n<p>The actual sanitization function gets passed a <code>Form</code> and <code>Field</code> reference\ncorresponding to the actual form and field it is operating on. This makes it\npossible to build complex sanitizers which can query other fields and the form\nitself.</p>\n<p>Note that you can set field values without sanitization processing:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// without sanitization</span>\nform.fields.email.value = <span class="hljs-string">\'me@univers.com\'</span>;\n\n<span class="hljs-comment">// with sanitization (this will set .value after sanitization is complete)</span>\n<span class="hljs-keyword">yield</span> form.fields.email.setSanitizedValue(<span class="hljs-string">\'ram@hiddentao.com\'</span>);\n</code></pre>\n<p>Setting values for multiple fields:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// this calls Field.prototype.setSanitizedValue</span>\n<span class="hljs-keyword">yield</span> form.setValues({\n  <span class="hljs-attr">email</span>: <span class="hljs-string">\'ram@hiddentao.com\'</span>,\n  <span class="hljs-attr">password</span>: <span class="hljs-string">\'test\'</span>\n});\n</code></pre>\n<h2>Validation</h2>\n<p>Once form field values have been set we can validate them by calling\n<code>Form.prototype.validate()</code>. Validation is specified on a per-field basis in the\nform configuration. Lets validate our signup form:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: forms/signup.js</span>\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-attr">fields</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'email\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'text\'</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Email address\'</span>,\n      <span class="hljs-attr">sanitizers</span>: [ <span class="hljs-string">\'trim\'</span> ],\n      <span class="hljs-attr">validators</span>: [ <span class="hljs-string">\'notEmpty\'</span>, <span class="hljs-string">\'isEmailAddress\'</span> ]\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'password\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'password\'</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Password\'</span>,\n      <span class="hljs-attr">sanitizers</span>: [ <span class="hljs-string">\'trim\'</span> ],\n      <span class="hljs-attr">validators</span>: [ <span class="hljs-string">\'notEmpty\'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">\'isLength\'</span>, <span class="hljs-attr">min</span>: <span class="hljs-number">8</span> } ]\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'confirm_password\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'password\'</span>,\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Confirm password\'</span>,\n      <span class="hljs-attr">sanitizers</span>: [ <span class="hljs-string">\'trim\'</span> ],\n      <span class="hljs-attr">validators</span>: [ { <span class="hljs-attr">id</span>: <span class="hljs-string">\'matchesField\'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">\'password\'</span> } ]\n    }\n  ]  \n};\n</code></pre>\n<p>Each item in the <code>validators</code> array refers to the name of a module file under\nthe <code>support/forms/validators/</code> path. When a validator (or even sanitizer) is\nspecified as an object then its <code>id</code> attribute is assumed to be its module file\nname. The object itself is assumed to be a set of options to pass to the\nmodule file during initialisation.</p>\n<p>So for the above form specification Waigo will expect the following paths to exist:</p>\n<ul>\n<li><code>support/forms/validators/notEmpty</code></li>\n<li><code>support/forms/validators/isLength</code></li>\n<li><code>support/forms/validators/matchesField</code></li>\n</ul>\n<p>A validator module exports a single function which should return a generator\nfunction (this performs the actual validation). For example, Waigos built-in\n<code>isEmailAddress</code> validator looks like this:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">var</span> validator = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'validator\'</span>);\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">form, field, value</span>) </span>{\n    <span class="hljs-keyword">if</span> (!validator.isEmail(value)) {\n      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">\'Must be an email address\'</span>);\n    }\n  }\n};\n\n</code></pre>\n<p>The actual validation function gets passed a <code>Form</code> and <code>Field</code> reference\ncorresponding to the actual form and field it is operating on. This makes it\npossible to build complex validators which can query other fields and the form\nitself.</p>\n<h2>Validation errors</h2>\n<p>Validaton error reporting is very comprehensive and makes it easy to show the\nend-user exactly what failed to validate and why.</p>\n<p>This is what happens when <code>Form.prototype.validate()</code> gets called:</p>\n<ol>\n<li><code>Field.prototype.validate()</code> gets called for each field belonging to the form.</li>\n<li>For each field every validator gets run and all validation errors are\ngrouped together within a single <code>FieldValidationError</code> instance.</li>\n<li>In <code>Form.prototype.validate()</code> all field validation errors are grouped\ntogether within a single <code>FormValidationError</code> instance.</li>\n</ol>\n<p>When sending this error object back to the client its view object\nrepresentation gets generated and looks something like:</p>\n<pre><code class="language-javascript">{\n  <span class="hljs-attr">type</span>: <span class="hljs-string">\'FormValidationError\'</span>,\n  <span class="hljs-attr">msg</span>: <span class="hljs-string">\'Form validation failed\'</span>,\n  <span class="hljs-attr">errors</span>: {\n    <span class="hljs-attr">field1</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'FieldValidationError\'</span>,\n      <span class="hljs-attr">msg</span>: <span class="hljs-string">\'Field validation failed\'</span>,\n      <span class="hljs-attr">errors</span>: {\n        <span class="hljs-attr">notEmpty</span>: {\n          <span class="hljs-attr">type</span>: <span class="hljs-string">\'Error\'</span>,\n          <span class="hljs-attr">msg</span>: <span class="hljs-string">\'Must not be empty\'</span>\n        },\n        <span class="hljs-attr">isEmailAddress</span>: {\n          <span class="hljs-attr">type</span>: <span class="hljs-string">\'RuntimeError\'</span>,\n          <span class="hljs-attr">msg</span>: <span class="hljs-string">\'Must be email address\'</span>\n        },\n        ...\n      }\n    },\n    ...\n  }\n}\n</code></pre>\n<p>Sometimes you might not need such detail and may simply wish to display the\nspecific error messages associated with each field. In such cases set the\nfollowing inside your controller, prior to rendering output:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">this</span>.request.leanErrors = <span class="hljs-literal">true</span>;\n</code></pre>\n<p>The final view object will look like:</p>\n<pre><code class="language-javascript">{\n  <span class="hljs-attr">type</span>: <span class="hljs-string">\'FormValidationError\'</span>,\n  <span class="hljs-attr">msg</span>: <span class="hljs-string">\'Form validation failed\'</span>,\n  <span class="hljs-attr">fields</span>: {\n    <span class="hljs-attr">field1</span>: [\n      <span class="hljs-string">\'Must not be empty\'</span>,\n      <span class="hljs-string">\'Must be email address\'</span>,\n      ...\n    ],\n    ...\n  }\n}\n</code></pre>\n<h2>Dirty checking</h2>\n<p>Form fields have two types of values - <em>original values</em> and <em>current values</em>.\nSanitization and validation takes place on a forms current values, and these\nare the values input by the user.</p>\n<p>Original values on the other hand are meant to represent the original\nvalues of the forms various input fields when the form gets displayed to\nthe user. You are not forced to set or use original values, but theyre\nuseful if you wish to check whether the user made any changes to the form.</p>\n<p>Every <code>Field</code> instance exposes an <code>isDirty()</code> method to check whether the\ncurrent value differs from the original value. Every <code>Form</code> instance also\nexposes this method, which simply calls through to the same for every one of\nits  fields. If even one field is dirty then the form is considered dirty.</p>\n<p>Lets see how this works in pracice</p>\n<p>Say the user signed up to our site with a name and telephone number. They wish\nto edit these details. The form for this:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/forms/editProfile.js</span>\n\n{\n  <span class="hljs-attr">id</span>: <span class="hljs-string">\'editProfile\'</span>,\n  <span class="hljs-attr">fields</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'name\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'text\'</span>,\n      <span class="hljs-attr">sanitizers</span>: [ <span class="hljs-string">\'trim\'</span> ],\n      <span class="hljs-attr">validators</span>: [ <span class="hljs-string">\'notEmpty\'</span> ]\n    },\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">\'phone\'</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'text\'</span>,\n      <span class="hljs-attr">sanitizers</span>: [ <span class="hljs-string">\'trim\'</span> ],\n      <span class="hljs-attr">validators</span>: [ <span class="hljs-string">\'notEmpty\'</span>, <span class="hljs-string">\'isPhoneNumber\'</span> ]\n    }\n  ]  \n}\n</code></pre>\n<p>When the user submits the form we wish to find out whether they have made any\nchanges. In the route handler which processes the user submission we might have:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/controllers/profile.js</span>\n\nexports.updateProfile = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-keyword">var</span> model = {\n    <span class="hljs-attr">name</span>: <span class="hljs-comment">//...existing name...</span>\n    phone: <span class="hljs-comment">//...exiting phone number...</span>\n  };  \n\n  <span class="hljs-keyword">try</span> {\n    <span class="hljs-keyword">var</span> form = Form.new(<span class="hljs-string">\'editProfile\'</span>);\n    <span class="hljs-keyword">yield</span> form.setOriginalValues(model);\n    <span class="hljs-keyword">yield</span> form.setValues(<span class="hljs-keyword">this</span>.request.body);\n    <span class="hljs-keyword">yield</span> form.validate();\n\n    <span class="hljs-keyword">if</span> (form.isDirty()) {\n      <span class="hljs-comment">//...update model data and persist...</span>\n    }\n\n    <span class="hljs-keyword">this</span>.response.redirect(<span class="hljs-string">\'/profile\'</span>);\n  } <span class="hljs-keyword">catch</span> (err) {\n    <span class="hljs-comment">//...handle sanitization, validation errors, etc...</span>\n  }\n};\n</code></pre>\n<p>In the above controller method we only update the model data and persist it if\nif has actually changed. Thus dirty checking allows us to be efficient with\nupdates.</p>\n<h1>Access Control</h1>\n<h1>Admin dashboard</h1>\n<p>Waigo comes bundled with a basic administration interface. Once you have the default site running (as explained above) you should be able to visit <code>/admin</code> in your browser. You will be prompted to login.</p>\n<p>Since youve just started the server for the first time you dont yet have any user accounts. So choose to register one.</p>\n<p><strong>The first user account you register is automatically given admin access rights, so that you can login to the administration interface</strong>.</p>\n<p>If you wish to grant admin access to other users in future you will need to <a href="#access-control">assign the <code>admin</code> role</a> to those users manually.</p>\n<p>Once youve gained access to the admin dashboard you will be able to do things like test the apps routes and enable/disable cron jobs.</p>\n<h2>Customization</h2>\n<p>The admin dashboard layout (and particularly the nav menu) is auto-generated from the admin configuration. If you open up <code>&lt;waigo npm module&gt;/src/config/base.js</code> you will see:</p>\n<pre><code class="language-javascript">  config.adminMenu = [\n    {\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Dashboard\'</span>,\n      <span class="hljs-attr">path</span>: <span class="hljs-string">\'/admin\'</span>,\n    },\n    {\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Routes\'</span>,\n      <span class="hljs-attr">path</span>: <span class="hljs-string">\'/admin/routes\'</span>,\n      <span class="hljs-attr">canAccess</span>: <span class="hljs-string">\'admin\'</span>,\n    },\n    {\n      <span class="hljs-attr">label</span>: <span class="hljs-string">\'Cron tasks\'</span>,\n      <span class="hljs-attr">path</span>: <span class="hljs-string">\'/admin/cron\'</span>,\n      <span class="hljs-attr">canAccess</span>: <span class="hljs-string">\'admin\'</span>,\n    },\n  ];\n</code></pre>\n<p>Thus you can see how easy it is enable/disable specific modules and/or add your own with their own routing path.</p>\n<p>Note that if you specify your own URL paths you will need to ensure that they have the correct <a href="#access-control">access</a> permissions set on them. The default admin routes all fall under <code>/admin</code> and are restricted to <code>admin</code> users only, as you can see if you open up <code>&lt;waigo npm module&gt;/src/routes/admin.js</code>:</p>\n<pre><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = { \n  <span class="hljs-string">\'/admin\'</span>: {\n    <span class="hljs-attr">pre</span>: [\n      { \n        <span class="hljs-attr">id</span>: <span class="hljs-string">\'assertUser\'</span>, \n        <span class="hljs-attr">redirectToLogin</span>: <span class="hljs-literal">true</span>,\n      },\n      <span class="hljs-string">\'admin.index.configureMenu\'</span>,\n    ],\n\n    <span class="hljs-attr">GET</span>: <span class="hljs-string">\'admin.index.main\'</span>,\n\n    <span class="hljs-string">\'/routes\'</span>: {\n      <span class="hljs-attr">pre</span>: [\n        { \n          <span class="hljs-attr">id</span>: <span class="hljs-string">\'assertUser\'</span>, \n          <span class="hljs-attr">canAccess</span>: <span class="hljs-string">\'admin\'</span>,\n        },\n      ],\n\n      <span class="hljs-attr">GET</span>: <span class="hljs-string">\'admin.routes.index\'</span>\n    },\n...\n</code></pre>\n<p>By overriding this file in your app you can change the admin routing permissions and/or disable admin access altogether.</p>\n<h1>Logging</h1>\n<p>Waigo provides support for <a href="https://github.com/flatiron/winston">winston</a> by\ndefault. The default Winston logging target (see <code>config/base</code>) is the console.\nAll uncaught exceptions and <code>error</code> events emitted on the koa app object get\nlogged in this way.</p>\n<p>You dont have to use Winston - you can use any logging library you want. The\n<code>app.config.logging</code> configuration object both specifies the name of a logger\n(to be loaded from the <code>support/logging</code> path) and configuration to pass to that\nlogger.</p>\n<h1>Errors</h1>\n<p>The <code>support/middleware/errorHandler</code> middleware is responsible for handling all\nerrors which get thrown during the request handling process. Errors get logged\nthrough the default logger as well as getting sent back to the client which made\nthe original request.</p>\n<h2>RuntimeError</h2>\n<p>Waigo provides a base error class - <code>RuntimeError</code> - which allows you to set a\nHTTP status code along with the error message. This status code is used by the\nerror handling middleware when sending the final error response to the client:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;app folder&gt;/controllers/main.js</span>\n\n<span class="hljs-keyword">var</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>),\n  errors = waigo.load(<span class="hljs-string">\'support/errors\'</span>),\n  RuntimeError = errors.RuntimeError;\n\nexports.index = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeError(<span class="hljs-string">\'oh dear!\'</span>, <span class="hljs-number">400</span>); <span class="hljs-comment">// 400 = bad request</span>\n}\n</code></pre>\n<p><strong>Always try and use <code>RuntimeError</code> insted of <code>Error</code> as it provides for more\ndescriptive output.</strong></p>\n<p>A request handled by the above route handler would result in a HTTP status code\nof 400 being returned to the client along with the error message:</p>\n<pre><code class="language-javascript">{\n  <span class="hljs-attr">type</span>: RuntimeError,\n  <span class="hljs-attr">msg</span>: <span class="hljs-string">\'oh dear!\'</span>,\n  <span class="hljs-attr">stack</span>: ....stack trace\n}\n</code></pre>\n<p><em>Note: Stack traces only get sent to the client if the\n<code>app.config.errorHandler.showStack</code> flag is turned on.</em></p>\n<h2>MultipleError</h2>\n<p>The <code>MultipleError</code> class represents a group of related errors. It inherits from\n<code>RuntimeError</code>. As well as message and  status code its constructor also accepts\na collection of <code>Error</code> objects.</p>\n<p>The view object representation of a <code>MultipleError</code> includes the view object\nrepresentations of all of its encapsulated errors. For example, given:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MultipleError(<span class="hljs-string">\'oh dear!\'</span>, <span class="hljs-number">400</span>, {\n  <span class="hljs-attr">firstError</span>: <span class="hljs-keyword">new</span> RuntimeError(<span class="hljs-string">\'fail1\'</span>),\n  <span class="hljs-attr">secondError</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">\'test\'</span>)\n});\n</code></pre>\n<p>The response to the client would look like:</p>\n<pre><code class="language-javascript">{\n  <span class="hljs-attr">type</span>: MultipleError,\n  <span class="hljs-attr">msg</span>: <span class="hljs-string">\'oh dear!\'</span>,\n  <span class="hljs-attr">errors</span>: {\n    <span class="hljs-attr">firstErrror</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'RuntimeError\'</span>,\n      <span class="hljs-attr">msg</span>: <span class="hljs-string">\'fail1\'</span>\n    },\n    <span class="hljs-attr">secondError</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'Error\'</span>,\n      <span class="hljs-attr">msg</span>: <span class="hljs-string">\'test\'</span>\n    } \n  }\n}\n</code></pre>\n<p><em>Note: The <a href="#validation">form and field validation error</a> classes inherit from\n<code>MultipleError</code>.</em></p>\n<h2>Custom errors</h2>\n<p>It is highly recommended that you define and use your own error classes as they\nwill allow you to better poinpoint the cause of errors. The <code>support/errors</code>\nmodule provides functionality to make this easy:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">var</span> errors = waigo.load(<span class="hljs-string">\'support/errors\'</span>);\n\n<span class="hljs-keyword">var</span> UserNotFound = errors.define(<span class="hljs-string">\'FormValidationError\'</span>);\n<span class="hljs-comment">// UserNotFound inherits from RuntimeError</span>\n\n...\n\nthrow UserNotFound(<span class="hljs-string">\'...\'</span>);\n</code></pre>\n<p>The second parameter to the <code>define()</code> call is the parent class to inherit\nfrom. A custom error class can even inherit from another one:</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">var</span> errors = waigo.load(<span class="hljs-string">\'support/errors\'</span>);\n\n<span class="hljs-keyword">var</span> ProcessingErrors = errors.define(<span class="hljs-string">\'ProcessingErrors\'</span>, errors.MultipleError);\n<span class="hljs-comment">// ProcessingErrors inherits from MultipleError</span>\n\n<span class="hljs-keyword">var</span> ValidationErrors = errors.define(<span class="hljs-string">\'ValidationErrors\'</span>, ProcessingErrors);\n<span class="hljs-comment">// ValidationErrors inherits from ProcessingErrors</span>\n</code></pre>\n<p>To find out more about this and how you can configure it check out the <a href="#scalable-clustering">Scalable Clustering</a> section of this guide.</p>\n<h1>Scalable clustering</h1>\n<p>Clustering enables you to better scale your application on a single server by having dividing up your apps workload amongst multiple processes.</p>\n<p>Waigo supports <a href="https://nodejs.org/api/cluster.html">Nodes built-in clustering</a> mechanim. By default Waigo will only launch 1 worker process to handle requests. But you can tell it launch more than 1 or as many workers as there as cores in your CPU.</p>\n<p>For example, to have Waigo launch 2 worker processes:</p>\n<pre><code class="language-bash">$ WAIGO_WORKERS=3 ./start-app.js\n</code></pre>\n<p>During the startup phase you may see what look like repeated logs. However, every log line is prefixed with the pid of the specific worker doing the logging:</p>\n<pre><code class="language-bash">No. of worker processes: 3\n[worker1] started, pid: 78163\n[worker2] started, pid: 78164\n[worker3] started, pid: 78166\n...\n(RamMacbookPro.local-78164) [2016-04-06 11:01:41.413] [INFO] [app] - Startup complete\n(RamMacbookPro.local-78166) [2016-04-06 11:01:41.438] [INFO] [app] - Startup complete\n(RamMacbookPro.local-78163) [2016-04-06 11:01:41.450] [INFO] [app] - Startup complete\n</code></pre>\n<p>You can also tell Waigo to launch as many worker processes as there are CPUs on your machine:</p>\n<pre><code class="language-bash">$ WAIGO_WORKERS=MAX_CPUS ./start-app.js\n</code></pre>\n<p>Clustering has implications for how you structure your application. When a frontend client requests a backend resource it does not know which specific worker process will serve it.</p>\n<p>Thus, <strong>application-level data should not be stored within the Node.js worker process, but within an externally accessible datasource instead, e.g. the database.</strong></p>\n<p>If you adhere to this rule you will be able to easily scale your application and even have instances of it running on other servers without there being any problems.</p>\n<h1>Debugging</h1>\n<p>In order to fix a problem its sometimes useful to know whats going on inside the framework.</p>\n<p>Waigo makes use of the <a href="https://github.com/visionmedia/debug">debug</a> utility\ninternally in some parts. For instance, to debug the  <a href="#extend-and-override">loading system</a>\nrun your app with the <code>DEBUG</code> environment variable as follows:</p>\n<pre><code class="language-bash">$ DEBUG=waigo-loader node --harmony app.js\n  waigo-loader Getting plugin names... +0ms\n  waigo-loader Plugins to load:  +15ms\n  waigo-loader Module <span class="hljs-string">"routes"</span> will be loaded from <span class="hljs-built_in">source</span> <span class="hljs-string">"waigo"</span> +10ms\n  waigo-loader Module <span class="hljs-string">"server"</span> will be loaded from <span class="hljs-built_in">source</span> <span class="hljs-string">"waigo"</span> +0ms\n  waigo-loader Module <span class="hljs-string">"config/base"</span> will be loaded from <span class="hljs-built_in">source</span> <span class="hljs-string">"waigo"</span> +0ms\n  ...\n  waigo-loader Loading module <span class="hljs-string">"server"</span> from <span class="hljs-built_in">source</span> <span class="hljs-string">"waigo"</span> +0ms\n  ...\n</code></pre>\n<h1>Roadmap</h1>\n<p>See the <a href="https://github.com/waigo/waigo/issues">Github issue queue</a>.</p>\n<h1>Contributing</h1>\n<p>Suggestions, bug reports and pull requests are welcome. Please see <a href="https://github.com/waigo/waigo/blob/master/contributing/">CONTRIBUTING.md</a> for guidelines.</p>\n<h1>License</h1>\n<p>MIT - see <a href="https://github.com/waigo/waigo/blob/master/license/">LICENSE.md</a></p>\n'
}},function(e,t){e.exports={title:"Waigo v2 Guide",body:'<h1>Waigo v2 Guide</h1>\n<ul>\n<li><a href="introduction/">Introduction</a></li>\n<li><a href="gettingstarted/">Getting Started</a></li>\n<li><a href="extendandoverride/">Extend and Override</a></li>\n<li><a href="commandline/">Command-Line (CLI)</a></li>\n<li><a href="appconfiguration/">App configuration</a></li>\n<li><a href="logging/">Logging</a></li>\n<li><a href="events/">Events</a></li>\n<li><a href="errorhandling/">Error handling</a></li>\n<li><a href="middleware/">Middleware</a></li>\n<li><a href="controllers/">Controllers</a></li>\n<li><a href="databaseandmodels/">Database and Models</a></li>\n<li><a href="routing/">Routing</a></li>\n<li><a href="renderingoutput/">Rendering output</a></li>\n<li><a href="viewtemplates/">View templates</a></li>\n<li><a href="staticresources/">Static resources</a></li>\n<li><a href="sessions/">Sessions</a></li>\n<li><a href="forms/">Forms</a></li>\n<li><a href="scaling/">Scaling</a></li>\n<li><a href="bestpractices/">Best practices</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Coding standard",body:'<h1>Coding standard</h1>\n<p>Waigos codebase adheres to certain conventions and principles. We recommend you do so for your app too, to ensure maximum interoperability with Waigo code.</p>\n<p>##1. No callbacks</p>\n<p>Callbacks are out, <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promises</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*">Generator Functions</a> are in. This is party because Koa (the middleware framework underlying Waigo) uses generators, and partly because this way code is easier to write, easier to understand, and <a href="https://spion.github.io/posts/why-i-am-switching-to-promises.html">just as performant</a>.</p>\n<p>If an external API utilises callbacks then simply wrap it in a Promise. For example:</p>\n<pre><code class="language-js"><span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-keyword">const</span> waigo = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'waigo\'</span>),\n    Q = waigo.load(<span class="hljs-string">\'support/promise\'</span>);\n\n<span class="hljs-keyword">const</span> getFileCallback = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cb</span>) </span>{\n  ...\n  cb(err, result);\n};\n\n<span class="hljs-keyword">const</span> getFilePromise = Q.promisify(getFileCallback);\n\n<span class="hljs-comment">// now we can use it within a generator!</span>\n<span class="hljs-keyword">const</span> main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">yield</span> getFilePromise();\n  \n  <span class="hljs-built_in">console</span>.log(result);\n}\n</code></pre>\n<p>Ensure your own methods return Promises or are Generator Functions. Dont use callbacks.</p>\n<h2>2. Internal items are prefixed with _</h2>\n<p>For example, if a class field or method name is prefixed with one or more underscores then it is considered <em>internal</em> to that class - do not access it from outside the class.:</p>\n<pre><code class="language-js"><span class="hljs-comment">/**\n * Email sender.\n */</span>\n<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mailer</span> </span>{\n  <span class="hljs-keyword">constructor</span> () {\n    <span class="hljs-comment">// name of this object</span>\n    <span class="hljs-keyword">this</span>.name = <span class="hljs-string">\'Mailer\'</span>;\n    <span class="hljs-comment">// id of this object (internal)</span>\n    <span class="hljs-keyword">this</span>._id = <span class="hljs-number">123</span>;\n  }\n\n  <span class="hljs-comment">/**\n   * Convert markdown to HTML.\n   */</span>\n  _buildHtml (bodyMarkdown) {...}\n\n  <span class="hljs-comment">/**\n   * Convert markdown to plaintext.\n   */</span>\n  _buildText (bodyMarkdown) {...}\n\n  <span class="hljs-comment">/**\n   * Actually send an email.\n   */</span>\n  * _send (to, <span class="hljs-keyword">from</span>, subject, body) {...}\n\n  <span class="hljs-comment">/**\n   * Send an email.\n   */</span>\n  * send (to, <span class="hljs-keyword">from</span>, subject, bodyMarkdown) {\n    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>._send(to, <span class="hljs-keyword">from</span>, subject, {\n      <span class="hljs-attr">html</span>: <span class="hljs-keyword">this</span>._buildHtml(bodyMarkdown),\n      <span class="hljs-attr">text</span>: <span class="hljs-keyword">this</span>._buildText(bodyMarkdown)\n    });\n  }\n}\n\n<span class="hljs-comment">// now let\'s use it...</span>\n\n<span class="hljs-keyword">const</span> mailer = <span class="hljs-keyword">new</span> Mailer();\n\n<span class="hljs-comment">// do this:</span>\n<span class="hljs-built_in">console</span>.log(mailer.name):\n<span class="hljs-keyword">yield</span> mailer.send(...)\n\n<span class="hljs-comment">// don\'t do this:</span>\n<span class="hljs-built_in">console</span>.log(mailer._id):\n<span class="hljs-keyword">yield</span> mailer._send(...)\nmailer._buildHtml(...)\nmailer._buildText(...)\n</code></pre>\n'}},function(e,t){e.exports={title:"Folder structure",body:'<h1>Folder structure</h1>\n<p>Every Waigo app has the same basic folder structure:</p>\n<pre><code>&lt;<span class="hljs-keyword">project</span>&gt;        <span class="hljs-comment"># the root project folder</span>\n  /package.json  <span class="hljs-comment"># app\'s package.json</span>\n  /public        <span class="hljs-comment"># front-end built assets</span>\n  /src           <span class="hljs-comment"># also known as the "app" folder</span>\n</code></pre>\n<p>The app folder (<code>&lt;project&gt;/src</code>) contains all the source code and rendering templates for the Waigo application. The structure usually looks like the following:</p>\n<pre><code>/cli             <span class="hljs-meta"># app command-line interface commands</span>\n  /data          <span class="hljs-meta"># internal data for CLI commands</span>\n/config          <span class="hljs-meta"># app configuration</span>\n/controllers     <span class="hljs-meta"># app controllers</span>\n/emails          <span class="hljs-meta"># app email templates</span>\n  /_layout       <span class="hljs-meta"># app email layout template</span>\n/forms           <span class="hljs-meta"># app forms</span>\n/frontend        <span class="hljs-meta"># app front-<span class="hljs-meta-keyword">end</span> assets</span>\n  /img           <span class="hljs-meta"># app front-<span class="hljs-meta-keyword">end</span> image assets</span>\n  /js            <span class="hljs-meta"># app front-<span class="hljs-meta-keyword">end</span> javascript assets</span>\n  /stylus        <span class="hljs-meta"># app front-<span class="hljs-meta-keyword">end</span> stylus assets</span>\n/models          <span class="hljs-meta"># app database models</span>\n/routes          <span class="hljs-meta"># app route configuration</span>\n/support         <span class="hljs-meta"># framework support and utilities</span>\n  /cronTasks     <span class="hljs-meta"># CRON jobs</span>\n  /db            <span class="hljs-meta"># database adapters</span>\n  /forms         <span class="hljs-meta"># form and field helpers</span>\n    /fields      <span class="hljs-meta"># field types (text, select, etc)</span>\n    /sanitizers  <span class="hljs-meta"># field value sanitizers</span>\n    /valdators   <span class="hljs-meta"># field value validators</span>\n  /mailer        <span class="hljs-meta"># emailing support</span>\n    /engines     <span class="hljs-meta"># email engines</span>\n  /middleware    <span class="hljs-meta"># middleware for Koa</span>\n  /notifications <span class="hljs-meta">#notification mechanisms (Slack, etc)</span>\n  /oauth         <span class="hljs-meta"># OAuth support</span>\n    /providers   <span class="hljs-meta"># specific OAuth handlers (reddit, etc)</span>\n  /outputFormats <span class="hljs-meta"># view rendering (html, json, etc)</span>\n  /session       <span class="hljs-meta"># user session support</span>\n    /store       <span class="hljs-meta"># session store adapters</span>\n  /shutdown      <span class="hljs-meta"># shutdown steps</span>\n  /startup       <span class="hljs-meta">#startup steps</span>\n/views           <span class="hljs-meta"># app view templates</span>\n</code></pre>\n<p>The remainder of this guide will go through every item shown above. You will have a good understanding of how all these parts come together to make a Waigo app work. You will also come to learn how easy it is to exclude, customize or override almost any of these parts for your specific app.</p>\n'}},function(e,t){e.exports={title:"Introduction",body:'<h1>Introduction</h1>\n<ul>\n<li><a href="motivation/">Motivation</a></li>\n<li><a href="middlewareprimer/">Middleware primer</a></li>\n<li><a href="folderstructure/">Folder structure</a></li>\n<li><a href="codingstandard/">Coding standard</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Middleware primer",body:'<h1>Middleware primer</h1>\n<p><em>Note: This section gives a short primer on middleware functions and how they works in Express and Koa. If youre already familiar with this you can skip to the next section.</em></p>\n<p>Middleware functions form the foundation of most web development in Node.js. They allow you to easily elegantly chain together different pieces of logic which are to be executed for incoming web requests.</p>\n<p>Lets consider a basic Express application which prints <em>Hello World!</em>. Our application will expect the user to have passed in a secret string as a URL query parameter in order to work. If this query parameter is omitted we want the response to be an error.</p>\n<p>Here is the code:</p>\n<pre><code class="language-js"><span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'express\'</span>);\n\n<span class="hljs-comment">// create new Express app instance</span>\n<span class="hljs-keyword">var</span> app = express();\n\n<span class="hljs-comment">// middleware to check secret</span>\napp.use(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkSecret</span>(<span class="hljs-params">req, res, next</span>) </span>{\n  <span class="hljs-keyword">if</span> (<span class="hljs-string">\'waigo\'</span> !== req.query.secret) {\n    next(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">\'Wrong secret!\'</span>));\n  } <span class="hljs-keyword">else</span> {\n    next();\n  }\n});\n\n<span class="hljs-comment">// middleware to serve up content</span>\napp.get(<span class="hljs-string">\'/\'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serveContent</span>(<span class="hljs-params">req, res, next</span>) </span>{\n  res.send(<span class="hljs-string">\'Hello World!\'</span>);\n});\n\n<span class="hljs-comment">// middleware to handle errors</span>\napp.use(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleError</span>(<span class="hljs-params">err, req, res, next</span>) </span>{\n  res.send(err.toString());\n});\n\n<span class="hljs-comment">// last step - kickstart the HTTP listening server</span>\napp.listen(<span class="hljs-number">3000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{\n  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">\'Example app listening on port 3000!\'</span>);\n});\n</code></pre>\n<p>As you can see, each middleware is essentially a function which gets passed the current request object  (<code>req</code>), response object (<code>res</code>) and a callback (<code>next</code>) which points to the next middleware in the chain:</p>\n<pre><code class="language-js"><span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next</span>) </span>{ ... }\n</code></pre>\n<p>However the error handling middleware is special, and gets an additional <code>err</code> argument at the beginning:</p>\n<pre><code class="language-js"><span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, req, res, next</span>) </span>{ ... }\n</code></pre>\n<p>Each middleware function must call <code>next()</code> in order for the next middleware in the chain to execute. If <code>next()</code> is called with an error object (like we do above if the <code>secret</code> query value is incorrect) then Express will skip subsequent middleware functions until it finds the available error handling middleware.</p>\n<p>Notice above that the second middleware function does not call <code>next()</code>. This is a <em>route handler</em> middleware and is intended to handle all HTTP GET requests to the root URL path (<code>/</code>) and return a response. Because it doesnt call <code>next()</code> any middleware defined after this one wouldnt normally get executed.</p>\n<p>At this point you may be wondering - why do we need an error handler middleware for the above logic? surely we can do it all in the route handler, like so:</p>\n<pre><code class="language-js">app.get(<span class="hljs-string">\'/\'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serveContent</span>(<span class="hljs-params">req, res, next</span>) </span>{\n  <span class="hljs-keyword">if</span> (<span class="hljs-string">\'waigo\'</span> !== req.query.secret) {\n    res.send(<span class="hljs-string">\'Error: Wrong secret!\'</span>);\n  } <span class="hljs-keyword">else</span> {\n    res.send(<span class="hljs-string">\'Hello World!\'</span>);\n  }\n});\n</code></pre>\n<p>Absolutely. The original example is deliberately more complex just so that we can illustrate the concepts better. In the original example, the secret-checking middlware will be executed for every incoming request. The error handler middleware will handle errors propagated from any middleware further up the chain.</p>\n<p>A note regarding route handlers. Typically you will define a route handler for every URL route in your app - using <code>app.get()</code>, <code>app.post()</code>, <code>app.put()</code>, etc according to the HTTP method you wish to specify. Furthermore, you would typically define these route handlers after defining middleware that is common to every route - using <code>app.use()</code>.</p>\n<h2>Koa middleware</h2>\n<p>Lets now look at how middleware in Koa is different from and improves upon whats in Express.</p>\n<p>Koa middleware functions are <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/function*">generator functions</a>. This immediately makes for powerful middleware composition. Rewriting the previous example in Koa gives us:</p>\n<pre><code class="language-js"><span class="hljs-keyword">const</span> koa = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'koa\'</span>);\n\n<span class="hljs-comment">// create new koa app</span>\n<span class="hljs-keyword">const</span> app = koa();\n\n<span class="hljs-comment">// error handler first!</span>\napp.use(<span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-keyword">try</span> {\n    <span class="hljs-keyword">yield</span> next;\n  } <span class="hljs-keyword">catch</span> (err) {\n    <span class="hljs-keyword">this</span>.response.send(err.toString());\n  }\n});\n\n<span class="hljs-comment">// middleware to check the secret</span>\napp.use(<span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-keyword">if</span> (<span class="hljs-string">\'waigo\'</span> !== <span class="hljs-keyword">this</span>.request.query.secret) {\n    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">\'Wrong secret!\'</span>);\n  }\n  \n  <span class="hljs-keyword">yield</span> next;\n});\n\n<span class="hljs-comment">// route handler</span>\napp.get(<span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">this</span>.response.body = <span class="hljs-string">\'Hello world!\'</span>;\n});\n</code></pre>\n<p>Notice the simpler middleware function signatures. In Koa each middleware functions calling context is set dynamically at runtime. The <a href="http://koajs.com/#context">context</a> internally has references to the active <code>request</code> and <code>response</code> objects.</p>\n<p>The <code>next</code> callback is still used. However, because it is also a generator function it is <code>yield</code>-ed in order to be executed. This allows for an interesting emergent property - a Koa middleware function can pause execution, allow for other middleware further down the chain to execute, and then resume executing at a later point.</p>\n<p>We see this most clearly with the error handling middleware, which is now the first in the chain:</p>\n<pre><code class="language-js">app.use(<span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-keyword">try</span> {\n    <span class="hljs-comment">// execute the next middleware in the chain</span>\n    <span class="hljs-keyword">yield</span> next;\n    <span class="hljs-comment">// if no errors get thrown then we end up here</span>\n  } <span class="hljs-keyword">catch</span> (err) {\n    <span class="hljs-comment">// if errors get thrown we end up here</span>\n    <span class="hljs-keyword">this</span>.response.send(err.toString());\n  }\n});\n</code></pre>\n<p>And notice how we dont need to pass errors to the <code>next</code> callback - we can just <code>throw</code> them instead, like we do in the secret-checking middleware.</p>\n<p>Perhaps we want to add middleware which compresses all response output before sending it down. We could add it after the error handler middleware as such:</p>\n<pre><code class="language-js">app.use(<span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-comment">// execute remainder of chain first</span>\n  <span class="hljs-keyword">yield</span> next;\n  \n  <span class="hljs-comment">// if response is set</span>\n  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.response.body) {\n    <span class="hljs-comment">// compress it</span>\n    <span class="hljs-keyword">this</span>.response.body = compress(<span class="hljs-keyword">this</span>.response.body);\n  }\n});\n</code></pre>\n<p>To accomplish the above in Express we would need for the compression middleware to override the <code>res</code> object data writing methods, a hacky solution compared to the one above.</p>\n<p>Thus Koas middleware architecture based on generators gives us the following key benefits:</p>\n<ul>\n<li>Complex middleware composition (i.e. where execution jumps back and forth) is possible, allowing for complex logic to elegantly expressed.</li>\n<li>Throwing and handling errors is simpler to do in Koa.</li>\n</ul>\n<p>Additionally, since Koa middleware are generator functions we can internally <code>yield</code> promises, thunks and other asynchronous objects, enabling us to write asynchronous code elegantly without callbacks.</p>\n<h2>Waigo builds on Koa</h2>\n<p>Waigo is built on top of Koa and is itself written using ES6 technologies. Koas ES6-based architecture allows for complex middleware patterns that arent as easy to do in Express.</p>\n<p>Waigo route handlers and middleware functions work identically to Koas, except that you the middleware function context also holds references to other parts of your Waigo app.</p>\n<p>Here is an example route handler taken from Waigos source code. This handler marks a users email address as verified (after theyve clicked a link weve sent to them via email):</p>\n<pre><code class="language-js">exports.verify_email = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">let</span> action = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.App.actionTokens.process(\n    <span class="hljs-keyword">this</span>.request.query.c, {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'verify_email\'</span>\n    }\n  );\n  \n  <span class="hljs-keyword">this</span>.logger.debug(<span class="hljs-string">\'Verify email address\'</span>, action.user.id, action.data.email);\n\n  <span class="hljs-comment">// verify email address</span>\n  <span class="hljs-keyword">yield</span> action.user.verifyEmail(action.data.email);\n\n  <span class="hljs-comment">// log the user in</span>\n  <span class="hljs-keyword">yield</span> action.user.login(<span class="hljs-keyword">this</span>);\n\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'index\'</span>, {\n    <span class="hljs-attr">alert</span>: <span class="hljs-string">\'Your email address has been verified\'</span>\n  });\n};\n</code></pre>\n<p>Youll notice the handler context object has a no. of properties not present in Koa - <code>this.App</code>, <code>this.logger</code>, <code>this.render</code>, etc. Well go over each of these in more detail in later sections of this guide.</p>\n'}},function(e,t){e.exports={title:"Motivation",body:'<h1>Motivation</h1>\n<p>Back-end web Node.js frameworks can usually be split into two types:</p>\n<ul>\n<li>Light-weight middleware - <a href="http://expressjs.com/">Express</a>, <a href="http://koajs.com/">koa</a>, etc</li>\n<li>Heavy-weight stack - <a href="http://meteor.com">Meteor</a>, <a href="https://loopback.io/">loopback</a>, etc</li>\n</ul>\n<p>The former give you the basic building blocks of a web app, leaving you to build the higher layers yourself. These may include database access, user authentication, emailing systems, etc. These boiler-plate items are common to most web apps you would want to build.</p>\n<p>Frameworks of the latter type usually come with the above boilerplate items already provided. This allows you to start building your specific application sooner. The downside is that such framework are opinionated about how you structure your app, causing you to sometimes hit a framework-imposed limit.</p>\n<p><strong>Waigo</strong> and frameworks of its ilk attempt to bridge this disparity by providing you with the common boiler-plate building blocks of a web application out of the box, while still allowing you to structure your app as you see fit.</p>\n<p>The unique property Waigo brings to the table is that just about every bit of functionality in the core framework can be selectively extended or overridden within your app.</p>\n<p>Furthermore, what you build for one web app can easily be shared and re-used for another web app in the form a plugin (NPM module).</p>\n'}},function(e,t){e.exports={title:"How to use",body:'<h1>How to use</h1>\n<p>Waigo initializes an app-level logger - <code>App.logger</code> - during the app\nstartup phase. By default this logger is an instance of <a href="https://github.com/nomiddlename/log4js-node">log4js</a> and supports logging levels, categories and multiple types of\nlogging transports (i.e not just console logging).</p>\n<p>Default <a href="https://github.com/waigo/waigo/blob/master/src/config/base.js">logging configuration</a> just specifies a console logger:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;waigo&gt;/src/config/base.js</span>\n\nconfig.logging = {\n  <span class="hljs-attr">category</span>: <span class="hljs-string">\'app\'</span>,\n  <span class="hljs-attr">minLevel</span>: <span class="hljs-string">\'DEBUG\'</span>,\n  <span class="hljs-attr">appenders</span>: [\n    {\n      <span class="hljs-attr">type</span>: <span class="hljs-string">\'console\'</span>,\n      ...\n    }\n  ],\n};\n</code></pre>\n<p>Override the <code>config.logging</code> in your own configuration files to customize how the\nlogger works. The actual code which creates the logger is located in\n<a href="https://github.com/waigo/waigo/blob/master/src/support/logger.js">src/support/logger.js</a>, and this too can be overridden or extended if you want further control over how the\ndefault logger is constructed and configured.</p>\n<p>Inside your back-end code you can use the logger as follows:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/index.js</span>\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-comment">// log at INFO level</span>\n  <span class="hljs-keyword">this</span>.App.logger.info(<span class="hljs-string">\'informative message\'</span>, someObject);\n  <span class="hljs-comment">// log at TRACE level</span>\n  <span class="hljs-keyword">this</span>.App.logger.trace(<span class="hljs-string">\'trace data\'</span>, lowLevelData);\n}\n</code></pre>\n<p><em>Note: It is highly recommended that use <code>App.logger</code> instead of the <code>console</code> log methods,\nas this will give you more control over the output of messages as well as the ability\nto hide less-important messages by simply tweaking the configuration.</em></p>\n<h2>Levels</h2>\n<p>The available <code>App.logger</code> methods (in increasing order of priority) are: <code>trace</code>,\n<code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code>. These correspond to different logging <em>levels</em>:</p>\n<ul>\n<li><code>ERROR</code> - for errors in your application which prevent a task from being\ncompleted. All uncaught exceptions in your app are automatically logged at this level via the app logger.</li>\n<li><code>WARN</code> - for errors which dont prevent a task from being completed.</li>\n<li><code>INFO</code> - for informational messages which you always want to see.</li>\n<li><code>DEBUG</code> - for low-level informational messages which you may only wish to see if\nyou are, for example, attempting to debug an issue.</li>\n<li><code>TRACE</code> - for really low-level informational messags which you wish to see in\nonly the rarest circumstances, e.g. if messages at the <code>DEBUG</code> level arent\nenough to figure out whats wrong.</li>\n</ul>\n'}},function(e,t){e.exports={title:"Logging",body:'<h1>Logging</h1>\n<ul>\n<li><a href="howtouse/">How to use</a></li>\n<li><a href="subcategories/">Sub-categories</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Sub-categories",body:'<h1>Sub-categories</h1>\n<p>Although the <a href="howtouse/">application-level logger</a> suffices in most cases for\nwhen you wish to log something, it is often better to log to specific categories\nand sub-categories. Logging to specific categories makes it easier to see where specific\nlog messages originate from:</p>\n<pre><code class="language-bash">(RamMacbookPro.lan-54179) [2016-07-29 12:30:58.860] [DEBUG] [StaticResources] - Copy /var/folders/4v/br6x6mlx113235v1lz39nwfc0000gn/T/waigo-app -&gt; /Users/ram/dev/js/waigo-framework/waigo/public/_gen\n(RamMacbookPro.lan-54179) [2016-07-29 12:30:58.879] [DEBUG] [ActionTokens] - encryption key (RamMacbookPro.lan-54179) [2016-07-29 12:30:59.603] [DEBUG] [app] - Running startup step: cron\n(RamMacbookPro.lan-54179) [2016-07-29 12:30:59.605] [INFO] [Cron] - 1 cron tasks found\n(RamMacbookPro.lan-54179) [2016-07-29 12:30:59.605] [DEBUG] [Cron] - Adding cron task: notifyAdminsAboutUserStats\n(RamMacbookPro.lan-54179) [2016-07-29 12:30:59.622] [INFO] [Models/Cron/notifyAdminsAboutUserStats] - Setting up cron schedule 0 0 3 * * 1\n</code></pre>\n<p>In the above example, <code>Models/Cron/notifyAdminsAboutUserStats</code> is a sub-category\nof <code>Models/Cron</code> which is a sub-category of <code>Models</code> which itself is a sub-category\nof the root empty category. Notice the <code>app</code> category - this is the application-level\nloggers category.</p>\n<p>To create a sub-category logger, simply call <code>App.logger.create()</code> with a\ncategory name. The logger instance returned by <code>create()</code> will have the same <code>create()</code>\nmethod attached to it, allowing you to create sub-categories within sub-categories and\nso on:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: src/controllers/index.js</span>\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">var</span> modelLogger = <span class="hljs-keyword">this</span>.App.logger.create(<span class="hljs-string">\'Model\'</span>);  <span class="hljs-comment">// Model</span>\n  <span class="hljs-keyword">var</span> cronModelLogger = modelLogger.create(<span class="hljs-string">\'Cron\'</span>);   <span class="hljs-comment">// Model/Cron</span>\n  <span class="hljs-keyword">var</span> jobLogger = cronModelLogger.create(<span class="hljs-string">\'MyJob\'</span>);    <span class="hljs-comment">// Model/Cron/MyJob</span>\n\n  <span class="hljs-comment">// use it like any other logger</span>\n  jobLogger.info(<span class="hljs-string">\'informational message\'</span>);\n}\n</code></pre>\n<p><em>Note: sub-category loggers respect the minimum logging level set for their root\nancestor logger, which has its minimum level initially set according to whats in\nthe logger configuration.</em></p>\n'}},function(e,t){e.exports={title:"Common middleware",body:'<h1>Common middleware</h1>\n<p>As well as per-route middleware you can also define more <em>common</em> middleware, which apply per-HTTP-method and/or to all incoming requests.</p>\n<p>Both of these are defined in your apps <a href="../appconfiguration/">configuration</a>, as such:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/config/base.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{\n  ...\n  <span class="hljs-comment">/* middleware for every request */</span>\n  config.middleware.ALL = {\n    <span class="hljs-comment">/* order in which middleware gets run */</span>\n    _order: [\n      <span class="hljs-string">\'errorHandler\'</span>,\n      <span class="hljs-string">\'staticResources\'</span>,\n    ],\n    <span class="hljs-comment">/* options for each middleware\'s initializer */</span>\n    errorHandler: {},\n    <span class="hljs-attr">staticResources</span>: {\n      <span class="hljs-comment">// relative to app folder</span>\n      folder: <span class="hljs-string">\'/static\'</span>,\n    },\n  };\n  ...\n  \n  <span class="hljs-comment">/* middleware for only POST and PUT requests */</span>\n  config.middleware.POST = config.middleware.PUT = {\n  \t<span class="hljs-comment">/* order in which middleware gets run */</span>\n    _order: [\n      <span class="hljs-string">\'bodyParser\'</span>,\n      <span class="hljs-string">\'csrf\'</span>,\n    ],\n    <span class="hljs-comment">/* options to pass to each middleware\'s initialier */</span>\n    bodyParser: {\n      <span class="hljs-attr">limit</span>: <span class="hljs-string">\'16mb\'</span>,\n    },\n  };\n}\n</code></pre>\n<p>Once a request has been passed through the common middleware handler chain it then gets handed off to the middleware specific to the route associated with the request.</p>\n<p>Lets say you have route defined as such:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/routes/user.js</span>\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-string">\'/user\'</span>: {\n  \t<span class="hljs-string">\'/info\'</span>: {\n      <span class="hljs-attr">GET</span>: <span class="hljs-string">\'users.updateInfo\'</span>\n\t  },\n  \t<span class="hljs-string">\'/pic\'</span>: {\n      <span class="hljs-attr">POST</span>: [ { <span class="hljs-attr">id</span>: <span class="hljs-string">\'bodyParser\'</span>, <span class="hljs-attr">limit</span>: <span class="hljs-string">\'3mb\'</span> }, <span class="hljs-string">\'users.updatePic\'</span> ]\n\t  }\n  }\n};\n</code></pre>\n<p>Combined with the common middleware defined above, this is what the actual route middleware chain would look like if we were to define it entirely within the route configuration:</p>\n<pre><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-string">\'/user\'</span>: {\n  \t<span class="hljs-string">\'/info\'</span>: {\n     <span class="hljs-attr">GET</span>: [ \n       <span class="hljs-string">\'errorHandler\'</span>,\n       { <span class="hljs-attr">id</span>: <span class="hljs-string">\'staticResources\'</span>, <span class="hljs-attr">folder</span>: <span class="hljs-string">\'/static\'</span> },\n       <span class="hljs-string">\'users.getInfo\'</span> \n     ]\n\t},\n  \t<span class="hljs-string">\'/pic\'</span>: {\n     <span class="hljs-attr">POST</span>: [ \n       <span class="hljs-string">\'errorHandler\'</span>,\n       { <span class="hljs-attr">id</span>: <span class="hljs-string">\'staticResources\'</span>, <span class="hljs-attr">folder</span>: <span class="hljs-string">\'/static\'</span> },\n       { <span class="hljs-attr">id</span>: <span class="hljs-string">\'bodyParser\'</span>, <span class="hljs-attr">limit</span>: <span class="hljs-string">\'16mb\'</span> }, \n       <span class="hljs-string">\'csrf\'</span>,\n       <span class="hljs-string">\'users.updatePic\'</span> \n     ]\n\t}\n  }\n};\n</code></pre>\n'
}},function(e,t){e.exports={title:"Configuring middleware",body:'<h1>Configuring middleware</h1>\n<p>When initializing middleware its possible to pass in configuration options to the <em>initializer</em> method. For example, middleware to parse incoming request bodies (in the case of <code>POST</code> and <code>PUT</code> requests) may look like the following:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/support/middleware/bodyParser.js</span>\n\n<span class="hljs-keyword">const</span> parser = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'co-body\'</span>);\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">App, options</span>) </span>{\n  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n    <span class="hljs-keyword">this</span>.request.body = <span class="hljs-keyword">yield</span> parser(<span class="hljs-keyword">this</span>, options);\n\n    <span class="hljs-keyword">yield</span> next;\n  };\n};\n</code></pre>\n<p>In order to construct and use this middleware we would need to pass in options to be sent to the <code>co-body</code> module, as such:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// let\'s go for a 16MB request body size limit</span>\n<span class="hljs-keyword">const</span> middlewareFn = waigo.load(<span class="hljs-string">\'support/middleware/bodyParser\'</span>)(App, {\n  <span class="hljs-attr">limit</span>: <span class="hljs-string">\'16mb\'</span>\n});\t\n</code></pre>\n<p>This ability to configure the middleware during initialization is most useful when we are defining the middleware chain for a given <a href="../routing/">route</a>. For example, lets say we have two routes for updating user information - one to update the users profile text data and another to update their profile picture. We wish to allow a larger request body size for the profile picture than we do for the other data, so may define them as follows:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/routes/user.js</span>\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-string">\'/user\'</span>: {\n  \t<span class="hljs-string">\'/info\'</span>: {\n      <span class="hljs-attr">POST</span>: [ { <span class="hljs-attr">id</span>: <span class="hljs-string">\'bodyParser\'</span>, <span class="hljs-attr">limit</span>: <span class="hljs-string">\'1mb\'</span> }, <span class="hljs-string">\'users.updateInfo\'</span> ]\n\t  },\n  \t<span class="hljs-string">\'/pic\'</span>: {\n      <span class="hljs-attr">POST</span>: [ { <span class="hljs-attr">id</span>: <span class="hljs-string">\'bodyParser\'</span>, <span class="hljs-attr">limit</span>: <span class="hljs-string">\'3mb\'</span> }, <span class="hljs-string">\'users.updatePic\'</span> ]\n\t  }\n  }\n};\n</code></pre>\n'}},function(e,t){e.exports={title:"Defining middleware",body:'<h1>Defining middleware</h1>\n<p>All middleware is defined in files under the <code>src/support/middleware</code> path. If you write your own middleware it should also be stored under this path.</p>\n<p>Each middleware file is expected to expose a single <em>initializer</em> function which, when called, will return a generator function which is the actual middleware function.</p>\n<p>For example:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/support/middleware/example.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">App, options</span>) </span>{\n  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n    <span class="hljs-comment">// do nothing and pass through</span>\n    <span class="hljs-keyword">yield</span> next;\n  };\n};\n</code></pre>\n<p>The above middleware doesnt do anything and simply passes control to the next handler in the current requests middleware chain.</p>\n<p>If we wanted to catch and handle any errors thrown by subsequent handlers in the chain we could do:</p>\n<pre><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">App, options</span>) </span>{\n  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  \t<span class="hljs-keyword">try</span> {\n\t  <span class="hljs-keyword">yield</span> next;\n  \t} <span class="hljs-keyword">catch</span> (err) {\n  \t  <span class="hljs-built_in">console</span>.error(err);\n\t}\n  };\n};\n</code></pre>\n<p>Middleware functions in Waigo work in the same way as ones in Koa, in that they have a defined context and associated <code>request</code> and <code>response</code> objects:</p>\n<pre><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">App, options</span>) </span>{\n  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  \t<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`URL: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.request.url}</span>`</span>);    \n\t\n\t<span class="hljs-keyword">this</span>.response.body = <span class="hljs-string">\'Hello world!\'</span>;\n  };\n};\n</code></pre>\n<p>Thus, existing Koa middleware functions can be re-used very easily within Waigo.</p>\n<h2>App object</h2>\n<p>Middleware functions in Waigo also have access to your applications <code>App</code> object, which is set on the context as well as being passed in during the construction phase:</p>\n<pre><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">App, options</span>) </span>{\n  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  \t<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Running in mode: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.App.config.mode}</span>`</span>);    \n  \t\n\t<span class="hljs-keyword">yield</span> next;  \t\n  };\n};\n</code></pre>\n'}},function(e,t){e.exports={title:"Middleware",body:'<h1>Middleware</h1>\n<p>Middleware determines how each client request coming into your application gets handled. Waigo builds on top of <a href="../introduction/middlewareprimer/">Koas middleware</a> layer, making it easy for you to re-use existing Koa middleware plugins in your Waigo app.</p>\n<ul>\n<li><a href="defining/">Defining</a></li>\n<li><a href="configuring/">Configuring</a></li>\n<li><a href="commonmiddleware/">Common middleware</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Custom output formats",body:'<h1>Custom output formats</h1>\n<p>You can easily add your own custom output formats. Lets say you\nwanted to add an XML output format. You first need to create an implementation for it:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/support/outputFormats/xml.js</span>\n\n<span class="hljs-keyword">import</span> XmlRenderer <span class="hljs-keyword">from</span> ...\n\nexports.create = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">logger, config</span>) </span>{\n  <span class="hljs-keyword">var</span> render = XmlRenderer.init(config);    \n\n  <span class="hljs-keyword">return</span> {\n    <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">view, locals</span>) </span>{\n      <span class="hljs-keyword">this</span>.body = <span class="hljs-keyword">yield</span> render(view, _.extend({}, locals, <span class="hljs-keyword">this</span>.app.locals));\n      <span class="hljs-keyword">this</span>.type = <span class="hljs-string">\'application/xml\'</span>;\n    },\n    <span class="hljs-attr">redirect</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">url</span>) </span>{\n      <span class="hljs-keyword">this</span>.response.redirect(url);      \n    }\n  };\n};\n</code></pre>\n<p>Now you just need to enable it in the <code>outputFormats</code> middleware config:</p>\n<pre><code class="language-js">{\n  <span class="hljs-attr">formats</span>: {\n    <span class="hljs-attr">xml</span>: {\n      <span class="hljs-comment">// ... config options.</span>\n    }\n    html: {\n      <span class="hljs-comment">// ... config options.</span>\n    },\n    <span class="hljs-attr">json</span>: {\n      <span class="hljs-comment">// ... config options.</span>\n    }\n  },\n  <span class="hljs-attr">paramName</span>: <span class="hljs-string">\'format\'</span>,\n  <span class="hljs-attr">default</span>: <span class="hljs-string">\'html\'</span>\n}\n</code></pre>\n'}},function(e,t){e.exports={title:"Enabling output formats",body:'<h1>Enabling output formats</h1>\n<p>Output formats are enabled using the <code>outputFormats</code> middleware .The default <a href="../appconfiguration/">configuration</a> has something like this:</p>\n<pre><code class="language-js">{\n  <span class="hljs-comment">// List of enabled formats along with options to pass to each formatter. */</span>\n  formats: {\n    <span class="hljs-attr">html</span>: {\n      <span class="hljs-comment">// Default view template filename extension when not explicitly provided. */</span>\n      ext: <span class="hljs-string">\'pug\'</span>,\n      <span class="hljs-comment">// Whether compiled templates should be cached in memory (not all template engines honour this)</span>\n      cache: <span class="hljs-literal">false</span>,\n      <span class="hljs-comment">// Map file extension to rendering engine</span>\n      engine: {\n        <span class="hljs-string">\'pug\'</span>: <span class="hljs-string">\'pug\'</span>,\n      }\n    },\n    <span class="hljs-attr">json</span>: {}\n  },\n  <span class="hljs-comment">// Use this URL query parameter to determine output format. */</span>\n  paramName: <span class="hljs-string">\'format\'</span>,\n  <span class="hljs-comment">// Default format, in case URL query parameter which determines output format isn\'t provided. */</span>\n  <span class="hljs-keyword">default</span>: <span class="hljs-string">\'html\'</span>\n}\n</code></pre>\n<p>The above configuration specifies two output formats: <code>html</code> and <code>json</code>. The default format is <code>html</code>, though this can be overridden using the <code>format</code> URL parameter. If <code>html</code> is the chosen output format then a different rendering engine is chosen based on the extension of the view template. In the above case we are specifying that all <code>.pug</code> templates are to be rendered by the <a href="https://github.com/pugjs/pug">pug</a> templating engine. Where the view template is specified without an extension, <code>.pug</code> is assumed.</p>\n<p>The default output format is set to <code>html</code>. The query parameter used to dynamically set the output format at runtime is called <code>format</code>. Example usage: <code>http://mydomain.com/user/register?format=json</code>.</p>\n'}},function(e,t){e.exports={title:"Rendering output",body:'<h1>Rendering output</h1>\n<p>When rendering output from your routes you will normally use <a href="../viewtemplates/">view templates</a>. However, Waigo supports dynamically rendering to different output formats from each route without having to modify the controller-view logic for each route.</p>\n<p>Thus you can easily build routes which can be re-used for outputting JSON as well as webpages. Nowadays many apps use a Single-Page Architecture (SPA) or provide REST APIs - output formats reduce the pain of building these.</p>\n<ul>\n<li><a href="enabling/">Enabling</a></li>\n<li><a href="renderingmethods/">Rendering methods</a></li>\n<li><a href="jsonoutput/">JSON output</a></li>\n<li><a href="settingoutputformat/">Setting the output format</a></li>\n<li><a href="customformats/">Custom formats</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"JSON output",body:'<h1>JSON output</h1>\n<p>To output JSON from your routes - and thus have your routes behave like an API - the context-based rendering methods are used in exactly the same way as your would when rendering HTML.</p>\n<p>Taking the <a href="RenderingMethods">previous example</a>:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/user.js</span>\n\nexports.showProfile = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'profile\'</span>, {\n    <span class="hljs-attr">username</span>: <span class="hljs-string">\'john\'</span>,\n    <span class="hljs-attr">age</span>: <span class="hljs-number">23</span>\n  }})\n}\n</code></pre>\n<p>When using the JSON output this will get returned as the following, with the <code>Content-Type</code> header being set to <code>application/json</code>:</p>\n<pre><code class="language-js">{\n  <span class="hljs-attr">username</span>: <span class="hljs-string">\'john\'</span>,\n  <span class="hljs-attr">age</span>: <span class="hljs-number">23</span>\n}\n</code></pre>\n<p>The <a href="https://github.com/waigo/waigo/blob/master/src/support/outputFormats/json.js">JSON output format handler</a> does not currently make any use of the passed in template name (<code>&quot;profile&quot;</code> in the above example). But it is recommended that you still provide a template name just in case you decide to switch to a different output format in future which does use templates.</p>\n<p>The JSON output format can be used with any and all HTTP methods used with your routes - GET, POST, PUT, etc.</p>\n'}},function(e,t){e.exports={title:"Rendering methods",body:'<h1>Rendering methods</h1>\n<p>Once output formats are enabled two generator methods are made available on the every request context:</p>\n<ul>\n<li><code>render(string templateName, object data = {})</code> - Render given view template, passing along the given data.</li>\n<li><code>redirect(string url)</code> - Redirect the client (e.g. browser) to the given URL.</li>\n</ul>\n<p>The exact behaviour of the above methods depends on the output format chosen. Regardless, it is recommended that you always use the above methods when you wish to send a response to the client in order to make the most of the output format functionality.</p>\n<p>For example, if you are rendering a users profile page you would have something like the following in your controller:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/user.js</span>\n\nexports.showProfile = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'profile\'</span>, {\n    <span class="hljs-attr">username</span>: <span class="hljs-string">\'john\'</span>,\n    <span class="hljs-attr">age</span>: <span class="hljs-number">23</span>\n  }})\n}\n</code></pre>\n<p>Waigo will look for a <a href="https://github.com/pugjs/pug">pug</a> template located at <code>&lt;project folder&gt;/src/views/profile.pug</code> and render it to the response body. The <code>Content-Type</code> header will be set to <code>text/html</code>.</p>\n<p>Note that the data passed to the template gets merged with the data set within the <a href="https://github.com/waigo/waigo/blob/master/src/support/startup/appTemplateVars.js">appTemplateVars</a> startup step and the <a href="https://github.com/waigo/waigo/blob/master/src/support/middleware/contextHelpers.js">contextHelpers</a> middleware step. By default this means that within your templates you automatically always have access to the apps configuration object, general utility functions and the current URL and session user.</p>\n<p>Similar to rendering output, when you wish to redirect the client (browser) to another URL use the <code>redirect()</code> method, e.g:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/user.js</span>\n\nexports.createProfile = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-comment">// do some work here to create a user profile</span>\n  <span class="hljs-keyword">let</span> profileId = ...;\n  \n  <span class="hljs-comment">// now show it</span>\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.redirect(\n    <span class="hljs-keyword">this</span>.App.routes.url(<span class="hljs-string">\'show_profile\'</span>, {\n      <span class="hljs-attr">profile</span>: profileId\n    })\n  );\n}\n</code></pre>\n<p>This will set the HTTP status code to 302 and pass the URL to the client.</p>\n'}},function(e,t){e.exports={title:"Setting the output format",body:'<h1>Setting the output format</h1>\n<p>The default output format is according to what is set within the configuration - the <a href="enabling/">default configuration</a> sets it to HTML. To change the output format for a given request simply pass in the configured URL query parameter with the desired format at its value.</p>\n<p>The default query parameter is <code>format</code>. Thus, if we wish for a route to return JSON output you would call it with <code>?format=json</code> as the URL query parameter.</p>\n<p>However, you can also set the output format programmatically, overriding the value set via query parameter.</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/user.js</span>\n\nexports.showProfile = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-comment">// enforce JSON output format</span>\n  <span class="hljs-keyword">this</span>.request.outputFormat = <span class="hljs-string">\'json\'</span>;\n  \n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'profile\'</span>, {\n    <span class="hljs-attr">username</span>: <span class="hljs-string">\'john\'</span>,\n    <span class="hljs-attr">age</span>: <span class="hljs-number">23</span>\n  }})\n}\n</code></pre>\n<p>The above controller method set the output format to JSON, thus overriding the selection set via the <code>format</code> query parameter.</p>\n<p>##Set it via middleware</p>\n<p>Being able to programmatically set the output format enables you to write middleware which enforces a certain output format and then apply that middleware to any route of your choosing. For example, lets say we want all the routes under the <code>/api</code> path to always return JSON. First lets build the middleware:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/support/middleware/enforceOutputFormat.js</span>\n\n<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{\n  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n    <span class="hljs-keyword">this</span>.request.outputFormat = options.format;\n    \n    <span class="hljs-keyword">yield</span> next;\n  }\n}\n</code></pre>\n<p>Now we can apply it to routes as we see fit and know that those routes will always respond using the given specific output format:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/routes/index.js</span>\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-string">\'/\'</span>: {\n    <span class="hljs-attr">GET</span>: <span class="hljs-string">\'index.main\'</span>\n  },\n  <span class="hljs-string">\'/api\'</span>: {\n    <span class="hljs-comment">// All routes under API will output JSON</span>\n    pre: [ { <span class="hljs-attr">id</span>: <span class="hljs-string">\'enforceOutputFormat\'</span>, <span class="hljs-attr">format</span>: <span class="hljs-string">\'json\'</span> }],\n    <span class="hljs-string">\'/register\'</span>: {\n      <span class="hljs-attr">POST</span>: <span class="hljs-string">\'user.register_submit\'</span>\n    },\n    ...\n  },\n};\n</code></pre>\n'}},function(e,t){e.exports={title:"Generating URLs",body:'<h1>Generating URLs</h1>\n<p>Often times you will want to reverse-lookup a route, i.e. generate the URL for a given route. For example, if you wish to email the user a link to their account settings page you would want to generate a URL for the account settings route thats unique to that user.</p>\n<p>You can use the <code>App.routes.url()</code> method to facilitate this.</p>\n<p>Lets say we have an per-user account settings route configured as such:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/routes/user.js</span>\n\n<span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-string">\'/user/:id\'</span>: {\n    <span class="hljs-attr">name</span>: <span class="hljs-string">\'user_settings_route\'</span>,\n    <span class="hljs-attr">GET</span>: <span class="hljs-string">\'users.settings\'</span>,\n  }\n};\n</code></pre>\n<p>Notice the <code>name</code> value above. This is how we will refer to the route when we wish to do a reverse lookup. This value can be anything you want, though we suggest something indicative of what the route does.</p>\n<p>Thus, for user <code>foobar</code> the URL would be <code>/user/foobar</code>. To generate this URL using the routing system simply do:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/index.js</span>\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">let</span> url = <span class="hljs-keyword">this</span>.App.routes.url(<span class="hljs-string">\'user_settings_route\'</span>, {\n    <span class="hljs-attr">id</span>: <span class="hljs-number">12</span>\n  });\n  \n  <span class="hljs-comment">/* /user/12 */</span>\n}\n</code></pre>\n<p>Notice that the route URL has an <code>id</code> parameter. Thus we have to pass in a value for this parameter (as shown above) in order for a URL to be successfully generated.</p>\n<p>Within view templates the same method is exposed as <code>routeUrl</code>. Here is a template example:</p>\n<pre><code class="language-pug">div\n  a(<span class="hljs-name">href=routeUrl</span>(\'user_settings_route\', {id:<span class="hljs-number">12</span>})) Settings page\n</code></pre>\n'}},function(e,t){e.exports={title:"How to use",body:'<h1>How to use</h1>\n<p>Waigos router provides a user-friendly mapping syntax, per-route middleware customisation, and the ability to have <em>sub paths</em> to any level.</p>\n<p>Routes are specified in files under the <code>routes/</code> path and are processed once by the <code>routes</code> <a href="../appconfiguration/startupsteps/">startup step</a>.</p>\n<p>An example:</p>\n<pre><code class="language-javascript"><span class="hljs-meta">"use strict"</span>;\n\n<span class="hljs-built_in">module</span>.exports = { \n  <span class="hljs-string">\'/admin\'</span>: {\n    <span class="hljs-attr">pre</span>: [\n      <span class="hljs-string">\'assertUser\'</span>,\n      <span class="hljs-string">\'admin.index.configureMenu\'</span>,\n    ],\n\n    <span class="hljs-attr">GET</span>: <span class="hljs-string">\'admin.index.main\'</span>,\n\n    <span class="hljs-string">\'/routes\'</span>: {\n      <span class="hljs-attr">pre</span>: [\n        { \n          <span class="hljs-attr">id</span>: <span class="hljs-string">\'assertUser\'</span>, \n          <span class="hljs-attr">canAccess</span>: <span class="hljs-string">\'admin\'</span>,\n        },\n      ],\n\n      <span class="hljs-attr">GET</span>: <span class="hljs-string">\'admin.routes.index\'</span>\n    },\n    \n    ...\n\t}\n};\n</code></pre>\n<p><em>Note: Parameterized and pattern-matched routing is also supported. See <a href="https://github.com/koajs/trie-router">trie-router</a> for more information.</em></p>\n<p>The above route mapping specifies the following:</p>\n<ul>\n<li>The base path is <code>/admin</code>\n<ul>\n<li>All requests to URLs beginning with <code>/admin</code> will be served by this route mapping configuration.</li>\n</ul>\n</li>\n<li>The <code>/admin</code> path and all of its subpaths will have 2 common middleware applied:\n<ul>\n<li><code>waigo.load(\'support/middleware/assertUser\')</code>  - will check that the user is logged in.</li>\n<li><code>waigo.load(\'controllers/admin/index\').configureMenu)</code> - will configure the admin menu for rendering.</li>\n</ul>\n</li>\n<li><code>GET /admin</code> will be handled by <code>waigo.load(\'controllers/admin/index\').main</code>.</li>\n<li>The <code>/admin/routes</code> path and all of its subpaths will have 1 common middlware applied:\n<ul>\n<li><code>waigo.load(\'support/middleware/assertUser\')({canAccess: \'admin\'})</code> - will check that the user is an admin.</li>\n</ul>\n</li>\n<li><code>GET /admin/routes</code> will be handled by  <code>waigo.load(\'controllers/admin/routes\').index</code>.</li>\n</ul>\n<p>In general, if the middleware name has periods (<code>.</code>) within it then it is assumed to\nrefer to a controller (under <code>src/controllers</code>), and the part of the last period is is assumed to be the name of the method within the controller which should handle the request. If the middleare name has not periods in it then then it is assumed to be the name of a middleware file (under <code>src/support/middleware</code>).</p>\n<p>If we wanted to we could also specify more than one middleware (i.e. a chain) for a particular individual route and HTTP method, e.g we can rewrite the above route mappings as follows:</p>\n<pre><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-string">\'/admin\'</span>: {\n    <span class="hljs-attr">GET</span>: [ <span class="hljs-string">\'assertUser\'</span>, <span class="hljs-string">\'admin.index.configureMenu\'</span>, <span class="hljs-string">\'admin.index.main\'</span> ],\n    <span class="hljs-string">\'/routes\'</span>: {\n      <span class="hljs-attr">POST</span>: [ <span class="hljs-string">\'assertUser\'</span>, <span class="hljs-string">\'admin.index.configureMenu\'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">\'assertUser\'</span>, <span class="hljs-attr">canAccess</span>: <span class="hljs-string">\'admin\'</span> }, <span class="hljs-string">\'admin.routes.index\'</span> ],\n    }\n  }\n};\n</code></pre>\n<p><em>Note: The middleware specified within the route mappings always get executed after the\n<a href="#common-middleware">common middleware</a>.</em></p>\n<p>As with other parts of Waigo you can extend and override the built-in route mappings within your app by providing the appropriate file in <code>&lt;project folder&gt;/src/routes</code>. You can also include route mappings in your Waigo plugins - <a href="https://github.com/waigo/admin">waigo-plugin-admin</a> provides an example of this.</p>\n'}},function(e,t){e.exports={title:"Routing",body:'<h1>Routing</h1>\n<p>Routing is how you configure which controller or middleware handles the URL paths your app exposes to clients.</p>\n<ul>\n<li><a href="howtouse/">How to use</a></li>\n<li><a href="generatingurls/">Generating URLs</a></li>\n<li><a href="singlepageapps/">Single-page apps</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Single-page app routing",body:'<h1>Single-page app routing</h1>\n<p>If you are developing a single-page app and using the <a href="https://css-tricks.com/using-the-html5-history-api/">History API</a> to enable <a href="http://ericclemmons.com/angular/using-html5-not-hash-routes/">non-hash urls</a> then you will want all routes to be handled by the single-page front-end code. You will most likely just have a single controller method which renders the front-end:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/index.js</span>\n<span class="hljs-meta">"use strict"</span>\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'index\'</span>);\n}\n</code></pre>\n<p>However, if the user refreshes the browser page then it is important that the above method gets invoked no matter what URL path they are currently viewing. If youre not using hash URLs then the full URL path will be sent to the Waigo backend. Thus you will need to map all the following route paths to the above controller method:</p>\n<pre><code>/\n/path1\n<span class="hljs-regexp">/path1/</span>\n<span class="hljs-regexp">/path1/</span>path2\n<span class="hljs-regexp">/path1/</span>path2/\n...etc\n<span class="hljs-regexp">/path1/</span>path2<span class="hljs-regexp">/..../</span>pathN/\n</code></pre>\n<p>Although you can use regular expressions in your route paths you cannot use them to express the above patterns in a single line, i.e. you cannot do this:</p>\n<pre><code class="language-js">/(.*)\n</code></pre>\n<p><em>Note: This is a limitation of the <a href="https://github.com/koajs/trie-router">koa-trie-router</a>, on which Waigo depends.</em></p>\n<p>However, because Waigo routes are defined as Javascript source and not JSON, you can use iteration logic to dynamically generate the above routes paths as such:</p>\n<pre><code><span class="hljs-comment">// file: &lt;project folder&gt;/routes/index.js</span>\n<span class="hljs-meta">"use strict"</span>\n\n<span class="hljs-keyword">const</span> routes = <span class="hljs-built_in">module</span>.exports = {\n  <span class="hljs-string">\'/\'</span>: {\n    <span class="hljs-attr">GET</span>: <span class="hljs-string">\'index.main\'</span>\n  }\n};\n\n<span class="hljs-comment">/*\nGenerate the paths...\n\n/:path1\n/:path1/\n/:path1/:path2\n/:path1/:path2/\n...etc\n/:path1/:path2/:path3/:path4/:path5/\n*/</span>\n<span class="hljs-keyword">let</span> str = <span class="hljs-string">\'\'</span>;\n<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">1</span>; <span class="hljs-number">5</span>&gt;=i; ++i) {\n  str += <span class="hljs-string">`/:path<span class="hljs-subst">${i}</span>`</span>;\n  \n  routes[str] = {\n    <span class="hljs-attr">GET</span>: <span class="hljs-string">\'index.main\'</span>\n  };\n\n  routes[<span class="hljs-string">`<span class="hljs-subst">${str}</span>/`</span>] = {\n    <span class="hljs-attr">GET</span>: <span class="hljs-string">\'index.main\'</span>\n  };\n}\n</code></pre>\n<p>If your paths go deeper than 5 levels (as shown above) you can just increase the number of loops to match the number of levels needed.</p>\n<p>Dynamically generating the routes paths as shown above makes it easier for you to make changes in future.</p>\n'
}},function(e,t){e.exports={title:"Scaling",body:'<h1>Scaling</h1>\n<p>This section focuses on the different ways in which you can scale your Waigo application.</p>\n<ul>\n<li><a href="multiprocessclustering/">Multi-process clustering</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Multi-process clustering",body:'<h1>Multi-process clustering</h1>\n<p>Waigo has built-in support for Nodes clustering solution. This means you can tell Waigo to parallelize your app by running identical instances of it in  multiple <em>worker</em> processes. This means you can split incoming request load and other work across several processes (and thus CPU cores).</p>\n<p>When you start your Waigo app you will see as the very first log output:</p>\n<pre><code class="language-bash">$ ./start-app.js\n\nNo. of worker processes: 1\n[worker1] started, pid: 87064\n</code></pre>\n<p><em>Note: <a href="https://github.com/waigo/waigo/blob/master/start-app.js">start-app.js</a> which actually launches and manages the worker processes for your app.</em></p>\n<p>As shown above, only one worker process is launched by default, as this aids development. But you can override this setting with the <code>WAIGO_WORKERS</code> environment variable:</p>\n<pre><code class="language-bash">$ WAIGO_WORKERS=4 ./start-app.js\nNo. of worker processes: 4\n[worker1] started, pid: 87236\n[worker2] started, pid: 87237\n[worker4] started, pid: 87239\n[worker3] started, pid: 87238\n</code></pre>\n<p>You will notice every log line output during the startup phase gets repeated 4 times, one for each worker. Each log line has the worker pid in it, so that you can know which line came from which process:</p>\n<pre><code class="language-bash">(RamMacbookPro.local-87236) [2016-08-08 00:48:58.389] [DEBUG] [app] - Running startup step: db\n...\n(RamMacbookPro.local-87237) [2016-08-08 00:48:58.408] [DEBUG] [app] - Running startup step: db\n...\n(RamMacbookPro.local-87238) [2016-08-08 00:48:58.416] [DEBUG] [app] - Running startup step: db\n...\n(RamMacbookPro.local-87239) [2016-08-08 00:48:58.423] [DEBUG] [app] - Running startup step: db\n</code></pre>\n<h2>Best practices</h2>\n<p>When using clustering it is important to ensure that your app is architected such that no app-level data is stored within the process itself. This is because <strong>you cannot control which worker processs serves which user.</strong> A user may get served by worker 1 for a request, and then later get served by worker 2 for another request.</p>\n<p>For example, if you need to store session data for a user then put this into your database or another storage area accessible to all of your worker processes.</p>\n<p>Generally speaking, do not store any app-level data within your Waigo process. This is good practice whether youre using clustering or not.</p>\n'}},function(e,t){e.exports={title:"Sessions",body:'<h1>Sessions</h1>\n<p>Built-in session handling comes courtesy of the <a href="https://github.com/hiddentao/koa-session-store">koa-session-store</a> library. This provides for pluggable session storage including cookies and <a href="https://github.com/hiddentao/koa-session-mongo">mongodb</a>. You canalso easily write your own custom storage adapters in case you want session data to be stored differently.</p>\n<p>On the browser side the session key is stored within a signed cookie. Thus, if you are using sessions ensure you inform the user at some point that cookies will be used.</p>\n<h2>Accessing session data</h2>\n<p>You can access session data using the request context <code>session</code> key within your controllers:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/someController.js</span>\n\nexports.index = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">next</span>) </span>{\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'index\'</span>, {\n    <span class="hljs-attr">name</span>: <span class="hljs-keyword">this</span>.session.userName\n  });\n};\n</code></pre>\n<p>Any data which can be stringified into JSON can be stored in the <code>session</code> object.</p>\n<p>To completely delete a session simply use <code>this.session = null</code>.</p>\n<h2>Enabling sessions</h2>\n<p>Sessions are created and loaded by the <code>sessions</code> middleware. The default configuration looks as follows:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;waigo framework&gt;/src/config/base.js</span>\n\n<span class="hljs-keyword">const</span> waigo = global.waigo,\n  _ = waigo._;\n\n\nconfig.middleware.ALL = {\n  <span class="hljs-attr">_order</span>: [\n    <span class="hljs-string">\'sessions\'</span>,\n  ],\n  <span class="hljs-attr">sessions</span>: {\n    <span class="hljs-comment">// cookie signing keys</span>\n    keys: [\n      <span class="hljs-string">\'key1\'</span>,  <span class="hljs-comment">// REPLACE WITH MORE SECURE HEX KEY</span>\n      <span class="hljs-string">\'key2\'</span>,  <span class="hljs-comment">// REPLACE WITH MORE SECURE HEX KEY</span>\n      <span class="hljs-string">\'key3\'</span>,  <span class="hljs-comment">// REPLACE WITH MORE SECURE HEX KEY</span>\n    ],\n    <span class="hljs-comment">// session cookie name</span>\n    name: <span class="hljs-string">\'waigo\'</span>,\n    <span class="hljs-comment">// session storage</span>\n    store: {\n      <span class="hljs-comment">// session store type (name of module file in `support/session/store`)</span>\n      type: <span class="hljs-string">\'cookie\'</span>,\n      <span class="hljs-comment">// session store config</span>\n      config: {\n        <span class="hljs-comment">// nothing needed for cookie storage</span>\n      }\n    },\n    <span class="hljs-comment">// session cookie options</span>\n    cookie: {\n      <span class="hljs-comment">// cookie expires in...</span>\n      validForDays: <span class="hljs-number">7</span>,\n      <span class="hljs-comment">// cookie valid for url path...</span>\n      path: <span class="hljs-string">\'/\'</span>\n    }\n  },\n}\n</code></pre>\n<p>The above configuration enables sessions using the <code>cookie</code> storage adapter. This means all session data is stored within the browser cookie, encrypted using array of key specified (see <code>keys</code>). Each session is valid for a maximum of 7 days.</p>\n'}},function(e,t){e.exports={title:"Collation of static resources",body:'<h1>Collation of static resources</h1>\n<p>The <a href="https://github.com/waigo/waigo/blob/master/src/support/startup/staticResources.js">staticResources startup step</a> ensures that all available static resources (from your app, the Waigo framework and any plugins) is made available within your designated static resources folder, ready to be served up at runtime.</p>\n<p>The path to your static resources folder is specified in your apps configuration:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/config/base.js</span>\n\n<span class="hljs-comment">/**\n * Static resources folder (relative to &lt;project folder&gt;/src)\n */</span>\nconfig.staticResources = {\n  <span class="hljs-attr">folder</span>: <span class="hljs-string">\'../public\'</span>\n};\n</code></pre>\n<p>If you are using the <a href="../gettingstarted/buildworkflowlivereload/">default gulp scripts</a> you will notice that all front-end assets get automatically built and placed into <code>&lt;project folder&gt;/public</code> everytime a change is made to their source files.</p>\n<p>During startup, Waigo will look for the existence of a <code>public</code> folder inside the Waigo framework and any enabled Waigo plugins and copy the contents of these into the <code>_gen</code> subfolder within your apps static resources folder. Once your app has started up the relevant folder tree will look something like the following:</p>\n<pre><code class="language-shell">&lt;waigo framework&gt;\n  /<span class="hljs-keyword">public</span>\n    /js    # built JS assets\n    /css   # built CSS assets\n    /img   # built image assets\n    ...\n    /_gen    # <span class="hljs-keyword">static</span> assets <span class="hljs-keyword">from</span> Waigo framework <span class="hljs-keyword">and</span> plugins\n      /waigo\t# <span class="hljs-keyword">static</span> assets <span class="hljs-keyword">from</span> Waigo\n      /waigo-plugin-test  # <span class="hljs-keyword">static</span> assets <span class="hljs-keyword">from</span> waigo-plugin-test\n      ...\n</code></pre>\n<p>The contents of <code>/public/_gen/waigo</code> are the same as the contents of <code>&lt;waigo framework&gt;/public</code>. And likewise for each plugin whose static assets are copied over into the apps static resources folder.</p>\n<p>You can place any assets you want into the static resources folder. But Waigos built-in assets and that of any enabled plugins will always be placed under the <code>_gen</code> subfolder (shown above) for consistency sake.</p>\n<p><em>Note: If you are building a Waigo plugin then it is highly recommended that you stick to using the default folder path for static resources so that apps using your plugins will be able to find and load its static assets without problem.</em></p>\n'}},function(e,t){e.exports={title:"Generating URL paths",body:'<h1>Generating URL paths</h1>\n<p>You can use the <code>App.staticUrl()</code> helper method to dynamically generate URLs to static resources from anywhere within your app. This ensures that you dont have to hardcode URL paths, allowing you to easily change where your static resources are stored if necessary.</p>\n<p>For example:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/index.js</span>\n\nexports.main = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'index\'</span>, {\n    <span class="hljs-attr">pathToJs</span>: <span class="hljs-keyword">this</span>.App.staticUrl(<span class="hljs-string">\'/js/app.js\'</span>);\n  });\n}\n</code></pre>\n<p>You will most likely need to generate static resources URLs within your <a href="../viewtemplates/">view templates</a>. The above helper method is available as <code>staticUrl()</code>:</p>\n<pre><code class="language-pug"><span class="hljs-comment">// file: &lt;project folder&gt;/src/views/index.pug</span>\n\n<span class="hljs-function"><span class="hljs-title">script</span><span class="hljs-params">(type=<span class="hljs-string">"text/javascript"</span> src=staticUrl(<span class="hljs-string">\'/js/app.js\'</span>)</span></span>)\n</code></pre>\n<p>This will generate the following:</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js/app.js"</span> /&gt;</span><span class="undefined">\n</span></code></pre>\n<p>You can also see example usage of this helper function in the <a href="https://github.com/waigo/waigo/blob/master/src/views/_layout.pug">default layout template</a>:</p>\n<pre><code class="language-pug">meta(<span class="hljs-name">name=</span><span class="hljs-string">"msapplication-TileColor"</span>, content=<span class="hljs-string">"#000"</span>)\nmeta(<span class="hljs-name">name=</span><span class="hljs-string">"msapplication-TileImage"</span>, content=staticUrl(\'waigo<span class="hljs-symbol">:/img/logo</span>.png\'))\nblock css\n  link(<span class="hljs-name">rel=</span><span class="hljs-string">"stylesheet"</span>, href=staticUrl(\'waigo<span class="hljs-symbol">:/css/app</span>.css\'))\n</code></pre>\n<p>The <code>waigo:</code> prefix indicates that the asset is provided by the <code>waigo</code> framework itself, thus resulting in a different URL being generated. For example:</p>\n<pre><code class="language-pug"><span class="hljs-comment">// file: &lt;project folder&gt;/src/views/index.pug</span>\n\n<span class="hljs-function"><span class="hljs-title">link</span><span class="hljs-params">(rel=<span class="hljs-string">"stylesheet"</span>, href=staticUrl(<span class="hljs-string">\'waigo:/css/app.css\'</span>)</span></span>)\n</code></pre>\n<p>Would result in:</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/_gen/waigo/css/app.css"</span> /&gt;</span>\n</code></pre>\n<p>If we had a static asset provided by a plugin we would use that plugins NPM module name as the prefix. For example, if we wished to include an asset from the <code>waigo-plugin-bootstrap</code> plugin:</p>\n<pre><code class="language-pug"><span class="hljs-comment">// file: &lt;project folder&gt;/src/views/index.pug</span>\n\n<span class="hljs-function"><span class="hljs-title">link</span><span class="hljs-params">(rel=<span class="hljs-string">"stylesheet"</span>, href=staticUrl(<span class="hljs-string">\'waigo-plugin-bootstrap:/css/app.css\'</span>)</span></span>)\n</code></pre>\n'}},function(e,t){e.exports={title:"Static resources",body:'<h1>Static resources</h1>\n<p>Unless you are building a pure API server with no webpages your app is likely to have static assets which need to be served up. This includes fonts, images, CSS and Javascript, amongst other file types.</p>\n<ul>\n<li><a href="collationofstaticresources/">Collation of static resources</a></li>\n<li><a href="requestmiddleware/">Request middleware</a></li>\n<li><a href="generatingurlpaths/">Generating URL paths</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Request middleware",body:'<p>#Request middleware</p>\n<p>The <a href="https://github.com/waigo/waigo/blob/master/src/support/middleware/staticResources.js">staticResources middleware</a> is responsible for serving up static resources according to the incoming request. Internally this middleware wraps around <a href="https://github.com/koajs/static">koa-static</a> to actually perform its function.</p>\n<p>By default enabled it is set to serve up static resources from the default static resources folder:</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// file: &lt;waigo framework&gt;/src/config/base.js</span>\n\nconfig.middleware.ALL = {\n  ...\n  staticResources: {\n    <span class="hljs-comment">// relative to &lt;project folder&gt;/src</span>\n    folder: config.staticResources.folder,\n    <span class="hljs-comment">// options to pass onto koa-static</span>\n    options: {}\n},\n</code></pre>\n<p><em>Note: If you wish to configure how koa-static gets used, you can do so through the <code>options</code> key shown above in the configuration settings.</em></p>\n<p>Waigo checks for the existence of a file named according to the incoming request URL - if a file with the given relative path the exists within the static resources folder then it serves it up and no further requests processing takes place.</p>\n<p>For example, lets say you have a file at <code>&lt;waigo framework&gt;/public/js/app.js</code>. Any request to the URL <code>/js/app.js</code> will be responded to with the <code>app.js</code> file.</p>\n'}},function(e,t){e.exports={body:""}},function(e,t){e.exports={title:"Context-level and App-level data",body:'<h1>Context-level and App-level data</h1>\n<p>Waigo passes along context-level and app-level template data to your template, alongside the data you specify when rendering a template.</p>\n<p>The default <a href="https://github.com/waigo/waigo/blob/master/src/support/outputFormats/html.js">HTML output format handler</a> first loads in app-level template data. It then overwrites with request context-level template data. And finally with the template data passed into the <code>render()</code> call:</p>\n<pre><code class="language-js">render: <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">view, templateVars</span>) </span>{\n  ...\n  templateVars = _.extend({}, <span class="hljs-keyword">this</span>.App.templateVars, <span class="hljs-keyword">this</span>.templateVars, templateVars, {\n    <span class="hljs-attr">cache</span>: !!config.cache,\n    <span class="hljs-attr">engine</span>: config.engine[ext],\n  });\n  ...\n}\n</code></pre>\n<p>App-level data - <code>this.App.templateVars</code> - is set by the <a href="https://github.com/waigo/waigo/blob/master/src/support/startup/appTemplateVars.js">appTemplateVars</a> startup step. By default it provides the following utilities:</p>\n<ul>\n<li><code>_</code>: reference to <a href="http://lodash.com">lodash</a></li>\n<li><code>routeUrl</code>: for generating <a href="../routing/">URLs for named routes</a></li>\n<li><code>staticUrl</code>: for generating <a href="../staticresources/">URLs to static assets</a></li>\n<li><code>config</code>: your Apps <a href="../appconfiguration/">configuration</a> object.</li>\n</ul>\n<p>Request context-level data - <code>this.templateVars</code> - is set by the <a href="https://github.com/waigo/waigo/blob/master/src/support/middleware/contextHelper.js">contextHelpers</a> middleware and by default includes:</p>\n<ul>\n<li><code>currentUser</code>: the current <a href="../sessions/">session</a> user.</li>\n<li><code>currentUrl</code>: same as <code>this.request.url</code>.</li>\n</ul>\n<p>You can override any of the above template data by passing data for the same keys when rendering your template. For example, if a particular template to have access to a different <code>currentUrl</code> you simply need to pass it in when rendering the template:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/user.js</span>\n\nexports.showProfile = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'profile\'</span>, {\n    <span class="hljs-attr">username</span>: <span class="hljs-string">\'john\'</span>,\n    <span class="hljs-attr">currentUrl</span>: <span class="hljs-string">\'/profile/john\'</span>\n  });\n}\n</code></pre>\n'}},function(e,t){e.exports={title:"View templates",body:'<h1>View templates</h1>\n<p>Waigo uses <a href="https://github.com/pugjs/pug">Pug</a> (formerly Jade) as its default templating language. Pug templates use a concise syntax which results in minimal errors and well-formed, minified output code for maximum efficiency usage from both a bandwidth and page rendering perspective.</p>\n<p>Templates are used for both rendering pages and emails. Page templates can be found under the <code>/src/views</code> path. Email templates are under the <code>/src/emails</code> path.</p>\n<ul>\n<li><a href="templatedata/">Template data</a></li>\n<li><a href="contextlevelandappleveldata/">Context-level and app-level data</a></li>\n</ul>\n'}},function(e,t){e.exports={title:"Template data",body:'<h1>Template data</h1>\n<p>You can pass data through to templates. This can include primitive and object types and even functions. You will typically pass data to templates when rendering them from within your controllers:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/user.js</span>\n\nexports.showProfile = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-comment">// render the "profile.pug" template, and pass in the given object as the template data</span>\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'profile\'</span>, {\n    <span class="hljs-attr">username</span>: <span class="hljs-string">\'john\'</span>,\n    <span class="hljs-attr">age</span>: <span class="hljs-number">23</span>\n  }})\n}\n</code></pre>\n<p>Inside your <code>profile.pug</code> template you can access the above data as if its within the template global scope:</p>\n<pre><code class="language-pug">/<span class="hljs-regexp">/ file: &lt;project folder&gt;/src</span><span class="hljs-regexp">/views/profile</span>.pug\n\np Hello <span class="hljs-comment">#{username}, you are #{age} years old.</span>\n</code></pre>\n<p>Passing a function through is just as easy:</p>\n<pre><code class="language-js"><span class="hljs-comment">// file: &lt;project folder&gt;/src/controllers/user.js</span>\n\n<span class="hljs-keyword">const</span> moment = <span class="hljs-built_in">require</span>(<span class="hljs-string">\'moment\'</span>);\n\nexports.showProfile = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">yield</span> <span class="hljs-keyword">this</span>.render(<span class="hljs-string">\'profile\'</span>, {\n    <span class="hljs-attr">username</span>: <span class="hljs-string">\'john\'</span>,\n    <span class="hljs-attr">dob</span>: moment(<span class="hljs-string">\'1975-05-26\'</span>),\n    <span class="hljs-attr">age</span>: <span class="hljs-function">(<span class="hljs-params">d, unit</span>) =&gt;</span> moment(d).diff(moment(), unit)\n  });\n}\n</code></pre>\n<p>Then in your template:</p>\n<pre><code class="language-pug">/<span class="hljs-regexp">/ file: &lt;project folder&gt;/src</span><span class="hljs-regexp">/views/profile</span>.pug\n\np Hello <span class="hljs-comment">#{username}, you are #{ age(dob, \'years\') } years old.</span>\n</code></pre>\n'}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),l=n(2),p=s(l),c=n(164),u=n(372),d=n(497),h=s(d),f=n(503),m=s(f),g=n(513),y=s(g),b=n(374),w=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return p["default"].createElement(h["default"],{title:b.config.siteTitle},p["default"].createElement("div",{className:"page home"},p["default"].createElement(m["default"],{activeNav:"home"}),p["default"].createElement("main",null,p["default"].createElement("section",{className:"splash"},p["default"].createElement("div",{className:"logo"}),p["default"].createElement("p",{className:"tagline"},b.config.tagLine),p["default"].createElement("div",{className:"actions"},p["default"].createElement(c.Link,{to:(0,u.prefixLink)(b.config.gettingStartedLink)},"Get started")),p["default"].createElement("div",{className:"install"},"npm i -g waigo"),p["default"].createElement("div",{className:"meta"},p["default"].createElement("a",{className:"changelog",href:"https://github.com/waigo/waigo/blob/master/CHANGELOG.md",title:"View release notes for current version"},p["default"].createElement("i",{className:"changelog"}),p["default"].createElement("span",null,"Changelog")),p["default"].createElement("a",{className:"twitter",href:b.config.twitterUrl,title:"Follow us on twitter"},p["default"].createElement("i",{className:"twitter"}),p["default"].createElement("span",null,"Twitter")),p["default"].createElement("a",{className:"github",href:b.config.githubUrl,title:"View on Github"},p["default"].createElement("i",{className:"github"}),p["default"].createElement("span",null,"Github")),p["default"].createElement("a",{className:"discuss",href:b.config.discussUrl,title:"Discuss on Discord"},p["default"].createElement("i",{className:"discuss"}),p["default"].createElement("span",null,"Discuss")))),p["default"].createElement("section",{className:"features-1"},p["default"].createElement("p",{className:"intro"},"Build data-driven APIs, apps and reactive websites.",p["default"].createElement("br",null),"Uses Koa and RethinkDB."),p["default"].createElement("ul",{className:"features"},p["default"].createElement("li",null,p["default"].createElement("div",{className:"title"},"Koa and RethinkDB"),p["default"].createElement("div",{className:"description"},"Waigo builds on Koa, the ES6-based spiritual successor to Express. Elegantly compose complex middleware patterns. Use RethinkDB to build fully ",p["default"].createElement("strong",null,"end-to-end reactive applications"),".")),p["default"].createElement("li",null,p["default"].createElement("div",{className:"title"},"Plugin architecture"),p["default"].createElement("div",{className:"description"},"Extend or override any part of the core framework as you see fit. Only use what you need. Publish your customizations as plugins (NPM modules) to re-use across your other Waigo projects.")),p["default"].createElement("li",null,p["default"].createElement("div",{className:"title"},"Form handling"),p["default"].createElement("div",{className:"description"},"Declaratively build forms with automatic sanitization and validation. Initialize and submit forms from any part of your application. Output a form's configuration as JSON. CSRF-prevention comes built-in.")),p["default"].createElement("li",null,p["default"].createElement("div",{className:"title"},"Routing and APIs"),p["default"].createElement("div",{className:"description"},"Powerful route configuration with intelligent nesting and per-route and per-HTTP-method middleware customization. All routes double-up as JSON API endpoints. Control the output format of any route using query parameters. Easily add your own custom output formats.")),p["default"].createElement("li",null,p["default"].createElement("div",{className:"title"},"Frontend is yours"),p["default"].createElement("div",{className:"description"},"Effortlessly buildbasic HTML using ",p["default"].createElement("a",{href:"https://github.com/pugjs/pug"},"Pug")," templating and the built-in template helpers. ",p["default"].createElement("strong",null,"Use whatever Javascript frameworks (e.g. Angular/React) and CSS languages you want")," the rest of the way.")),p["default"].createElement("li",null,p["default"].createElement("div",{className:"title"},"Users and Roles"),p["default"].createElement("div",{className:"description"},"Built-in user accounts. Authenticate users via password, OAuth or custom mechanisms. Assign roles to users, and elegantly control who gets access to what via the Access Control List (ACL).")),p["default"].createElement("li",null,p["default"].createElement("div",{className:"title"},"Email notifications"),p["default"].createElement("div",{className:"description"},"Built-in configurable notifications via email and Slack. Target notifications to specific users or roles and trigger them asynchronously. Send emails to console, using SMTP or a provider (e.g. Mailgun).")),p["default"].createElement("li",null,p["default"].createElement("div",{className:"title"},"Scheduled Tasks"),p["default"].createElement("div",{className:"description"},"Built-in Cron system for task scheduling. Tasks run within the full application context, giving you access to all your data and other parts of the app. Programmatically start, stop and run tasks.")),p["default"].createElement("li",null,p["default"].createElement("div",{className:"title"},"Quick Setup"),p["default"].createElement("div",{className:"description"},"Create and run a skeleton app in seconds using the command-line client. Generate gulp scripts to enable live-reload in the browser during development. Install the ",p["default"].createElement(c.Link,{to:"https://github.com/waigo/admin"},"Admin interface")," for easy data management.")))),p["default"].createElement("section",{className:"quick-start"},p["default"].createElement("div",{className:"wrapper"},p["default"].createElement("h2",null,"Quick start"),p["default"].createElement("pre",null,"$ npm init\n$ waigo init\n$ waigo init-gulp\n$ gulp"),p["default"].createElement("div",null,p["default"].createElement("p",null,"Visit ",p["default"].createElement(c.Link,{to:"http://localhost:3000 "},"http://localhost:3000")," in your browser to see it. "),p["default"].createElement("p",null,"Now start editing files and the browser page will auto-reload!")))),p["default"].createElement("section",{className:"next-links"},p["default"].createElement("div",null,p["default"].createElement(c.Link,{to:(0,u.prefixLink)(b.config.docsLink)},"Read the docs "),p["default"].createElement("p",null,"Get an in-depth introduction to Waigo and how to use it.")),p["default"].createElement("div",null,p["default"].createElement("a",{href:b.config.githubUrl},"View the code "),p["default"].createElement("p",null,"Check out upcoming features and contribute.")),p["default"].createElement("div",null,p["default"].createElement("a",{href:b.config.discussUrl},"Discuss and share "),p["default"].createElement("p",null,"Provide feedback, ask questions and share with the community.")))),p["default"].createElement(y["default"],null)))}},{key:"componentDidMount",value:function(){window.twttr&&window.twttr.widgets.load()}}]),t}(p["default"].Component);t["default"]=w,e.exports=t["default"]}]));
//# sourceMappingURL=bundle.js.map